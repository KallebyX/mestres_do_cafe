const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CknaiElA.js","assets/vendor-DeqkGhWy.js","assets/ui-BnM7zp99.js","assets/router--TSU0W4P.js"])))=>i.map(i=>d[i]);
var hC=Object.defineProperty;var mC=(e,t,s)=>t in e?hC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var px=(e,t,s)=>mC(e,typeof t!="symbol"?t+"":t,s);import{j as r,I as fC,C as dr,T as Ji,a as dl,U as Pt,P as Bt,D as rr,S as xC,b as yt,c as pn,X as Nr,d as dc,M as p5,e as gr,f as as,A as ni,g as pC,h as gC,B as Cp,F as g5,i as bC,k as Xg,l as Ds,m as Gi,n as Zt,o as b5,p as kr,q as Is,L as vC,r as yC,s as jC,t as v5,u as y5,v as ds,w as us,x as hs,y as Dr,z as Ap,E as Et,H as tl,G as Td,J as Ka,K as Ca,N as ca,O as Yt,Q as js,R as is,V as gn,W as kp,Y as Ar,Z as os,_ as wC,$ as Xh,a0 as Jd,a1 as NC,a2 as Xi,a3 as oa,a4 as ls,a5 as Fd,a6 as gx,a7 as ws,a8 as bx,a9 as _C,aa as SC,ab as pi,ac as Jy,ad as Zi,ae as uc,af as PC,ag as CC,ah as AC,ai as kC,aj as fh,ak as Qh,al as ao,am as EC,an as OC,ao as Ep,ap as TC,aq as LC,ar as MC,as as DC,at as Xy,au as ns,av as IC,aw as Qy,ax as j5,ay as vx,az as Op,aA as RC,aB as FC,aC as $C,aD as yx,aE as jx,aF as $d,aG as qC,aH as BC,aI as zC,aJ as Zh,aK as wx,aL as qd,aM as UC}from"./ui-BnM7zp99.js";import{r as j,a as ri,L as ct,u as Vt,b as Qg,c as Zg,d as w5,e as WC,B as VC,f as HC,g as Nt}from"./router--TSU0W4P.js";import{a as GC,g as bn,b as KC,r as eb}from"./vendor-DeqkGhWy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var xh={},Zy;function YC(){if(Zy)return xh;Zy=1;var e=GC();return xh.createRoot=e.createRoot,xh.hydrateRoot=e.hydrateRoot,xh}var JC=YC();const XC=bn(JC),dn={dark:"#101820",gold:"#b58150",light:"#f7fcff",accent:"#1f2937",neutral:"#6b7280"},ph={light:{name:"light",colors:{bg:{primary:dn.light,secondary:"#ffffff",tertiary:"#f8fafc",card:"#ffffff",hover:"#f1f5f9"},text:{primary:dn.dark,secondary:"#475569",muted:"#64748b",inverse:dn.light},border:{primary:"#e2e8f0",secondary:"#cbd5e1",focus:dn.gold},accent:{primary:dn.gold,secondary:"#d97706",hover:"#92400e"},success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"}},dark:{name:"dark",colors:{bg:{primary:dn.dark,secondary:"#1a202c",tertiary:"#2d3748",card:"#1e293b",hover:"#334155"},text:{primary:dn.light,secondary:"#cbd5e1",muted:"#94a3b8",inverse:dn.dark},border:{primary:"#374151",secondary:"#4b5563",focus:dn.gold},accent:{primary:dn.gold,secondary:"#fbbf24",hover:"#f59e0b"},success:"#34d399",warning:"#fbbf24",error:"#f87171",info:"#60a5fa"}}},N5=j.createContext(),_5=()=>{const e=j.useContext(N5);if(!e)throw new Error("useTheme deve ser usado dentro de um ThemeProvider");return e},QC=({children:e})=>{const[t,s]=j.useState(()=>{try{return localStorage.getItem("mestres-cafe-theme")||"light"}catch(c){return console.warn("Erro ao carregar tema do localStorage:",c),"light"}});j.useEffect(()=>{const c=ph[t],d=document.documentElement;Object.entries(c.colors).forEach(([u,h])=>{typeof h=="object"?Object.entries(h).forEach(([f,m])=>{d.style.setProperty(`--color-${u}-${f}`,m)}):d.style.setProperty(`--color-${u}`,h)}),document.body.className=document.body.className.replace(/theme-\w+/g,"").replace(/\bdark\b/g,""),document.body.classList.add(`theme-${t}`),t==="dark"?(document.body.classList.add("dark"),document.documentElement.classList.add("dark")):(document.body.classList.remove("dark"),document.documentElement.classList.remove("dark"));try{localStorage.setItem("mestres-cafe-theme",t)}catch(u){console.warn("Erro ao salvar tema no localStorage:",u)}},[t]);const a=()=>{s(c=>c==="light"?"dark":"light")},n=c=>{ph[c]&&s(c)},i=()=>typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=()=>{s(i())},l={currentTheme:t,theme:ph[t],isDark:t==="dark",isLight:t==="light",toggleTheme:a,setTheme:n,useSystemTheme:o,getSystemTheme:i,brandColors:dn,availableThemes:Object.keys(ph)};return r.jsx(N5.Provider,{value:l,children:e})},ZC="modulepreload",eA=function(e){return"/"+e},e1={},no=function(t,s,a){let n=Promise.resolve();if(s&&s.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(s.map(d=>{if(d=eA(d),d in e1)return;e1[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ZC,u||(f.as="script"),f.crossOrigin="",f.href=d,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},tA=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>no(async()=>{const{default:a}=await Promise.resolve().then(()=>Tc);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)};class tb extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class rA extends tb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sA extends tb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class aA extends tb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Tp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Tp||(Tp={}));var nA=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class iA{constructor(t,{headers:s={},customFetch:a,region:n=Tp.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=tA(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var a;return nA(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(p=>{throw new rA(p)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new sA(u);if(!u.ok)throw new aA(u);let f=((a=u.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(n){return{data:null,error:n}}})}}var Zr={},Ul={},Wl={},Vl={},Hl={},Gl={},oA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jc=oA();const lA=jc.fetch,S5=jc.fetch.bind(jc),P5=jc.Headers,cA=jc.Request,dA=jc.Response,Tc=Object.freeze(Object.defineProperty({__proto__:null,Headers:P5,Request:cA,Response:dA,default:S5,fetch:lA},Symbol.toStringTag,{value:"Module"})),uA=KC(Tc);var gh={},t1;function C5(){if(t1)return gh;t1=1,Object.defineProperty(gh,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return gh.default=e,gh}var r1;function A5(){if(r1)return Gl;r1=1;var e=Gl&&Gl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gl,"__esModule",{value:!0});const t=e(uA),s=e(C5());class a{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,h,f;let m=null,p=null,v=null,g=d.status,y=d.statusText;if(d.ok){if(this.method!=="HEAD"){const M=await d.text();M===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=M:p=JSON.parse(M))}const S=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(h=d.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");S&&C&&C.length>1&&(v=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(m={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,g=406,y="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const S=await d.text();try{m=JSON.parse(S),Array.isArray(m)&&d.status===404&&(p=[],m=null,g=200,y="OK")}catch{d.status===404&&S===""?(g=204,y="No Content"):m={message:S}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,g=200,y="OK"),m&&this.shouldThrowOnError)throw new s.default(m)}return{error:m,data:p,count:v,status:g,statusText:y}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,h,f;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(h=d==null?void 0:d.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=d==null?void 0:d.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return Gl.default=a,Gl}var s1;function k5(){if(s1)return Hl;s1=1;var e=Hl&&Hl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Hl,"__esModule",{value:!0});const t=e(A5());class s extends t.default{select(n){let i=!1;const o=(n??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(d,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const h=[n?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${f}"; options=${h};`,d==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Hl.default=s,Hl}var a1;function rb(){if(a1)return Vl;a1=1;var e=Vl&&Vl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Vl,"__esModule",{value:!0});const t=e(k5());class s extends t.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${c}fts${d}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return Vl.default=s,Vl}var n1;function E5(){if(n1)return Wl;n1=1;var e=Wl&&Wl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Wl,"__esModule",{value:!0});const t=e(rb());class s{constructor(n,{headers:i={},schema:o,fetch:l}){this.url=n,this.headers=i,this.schema=o,this.fetch=l}select(n,{head:i=!1,count:o}={}){const l=i?"HEAD":"GET";let c=!1;const d=(n??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:o=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){const d=n.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){const d="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&u.push(this.headers.Prefer),l&&u.push(`count=${l}`),c||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(n)){const h=n.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",o=[];return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Wl.default=s,Wl}var yd={},jd={},i1;function hA(){return i1||(i1=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.version=void 0,jd.version="0.0.0-automated"),jd}var o1;function mA(){if(o1)return yd;o1=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.DEFAULT_HEADERS=void 0;const e=hA();return yd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},yd}var l1;function fA(){if(l1)return Ul;l1=1;var e=Ul&&Ul.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ul,"__esModule",{value:!0});const t=e(E5()),s=e(rb()),a=mA();class n{constructor(o,{headers:l={},schema:c,fetch:d}={}){this.url=o,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=d}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:c=!1,get:d=!1,count:u}={}){let h;const f=new URL(`${this.url}/rpc/${o}`);let m;c||d?(h=c?"HEAD":"GET",Object.entries(l).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{f.searchParams.append(v,g)})):(h="POST",m=l);const p=Object.assign({},this.headers);return u&&(p.Prefer=`count=${u}`),new s.default({method:h,url:f,headers:p,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return Ul.default=n,Ul}var c1;function xA(){if(c1)return Zr;c1=1;var e=Zr&&Zr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.PostgrestError=Zr.PostgrestBuilder=Zr.PostgrestTransformBuilder=Zr.PostgrestFilterBuilder=Zr.PostgrestQueryBuilder=Zr.PostgrestClient=void 0;const t=e(fA());Zr.PostgrestClient=t.default;const s=e(E5());Zr.PostgrestQueryBuilder=s.default;const a=e(rb());Zr.PostgrestFilterBuilder=a.default;const n=e(k5());Zr.PostgrestTransformBuilder=n.default;const i=e(A5());Zr.PostgrestBuilder=i.default;const o=e(C5());return Zr.PostgrestError=o.default,Zr.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},Zr}var pA=xA();const gA=bn(pA),{PostgrestClient:bA,PostgrestQueryBuilder:tJ,PostgrestFilterBuilder:rJ,PostgrestTransformBuilder:sJ,PostgrestBuilder:aJ,PostgrestError:nJ}=gA;let Lp;typeof window>"u"?Lp=require("ws"):Lp=window.WebSocket;const vA="2.11.10",yA={"X-Client-Info":`realtime-js/${vA}`},jA="1.0.0",O5=1e4,wA=1e3;var hc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(hc||(hc={}));var Ws;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ws||(Ws={}));var mn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(mn||(mn={}));var Mp;(function(e){e.websocket="websocket"})(Mp||(Mp={}));var Bo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Bo||(Bo={}));class NA{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,s,a)}_decodeBroadcast(t,s,a){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(t.slice(o,o+n));o=o+n;const c=a.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class T5{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(lr||(lr={}));const d1=(e,t,s={})=>{var a;const n=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,o)=>(i[o]=_A(o,e,t,n),i),{})},_A=(e,t,s,a)=>{const n=t.find(l=>l.name===e),i=n==null?void 0:n.type,o=s[e];return i&&!a.includes(i)?L5(i,o):Dp(o)},L5=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return AA(t,s)}switch(e){case lr.bool:return SA(t);case lr.float4:case lr.float8:case lr.int2:case lr.int4:case lr.int8:case lr.numeric:case lr.oid:return PA(t);case lr.json:case lr.jsonb:return CA(t);case lr.timestamp:return kA(t);case lr.abstime:case lr.date:case lr.daterange:case lr.int4range:case lr.int8range:case lr.money:case lr.reltime:case lr.text:case lr.time:case lr.timestamptz:case lr.timetz:case lr.tsrange:case lr.tstzrange:return Dp(t);default:return Dp(t)}},Dp=e=>e,SA=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PA=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},CA=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},AA=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,a=e[s];if(e[0]==="{"&&a==="}"){let i;const o=e.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>L5(t,l))}return e},kA=e=>typeof e=="string"?e.replace(" ","T"):e,M5=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Nx{constructor(t,s,a={},n=O5){this.channel=t,this.event=s,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var u1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(u1||(u1={}));class Bd{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bd.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Bd.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Bd.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,n){const i=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),p=u.filter(g=>m.indexOf(g.presence_ref)<0),v=h.filter(g=>f.indexOf(g.presence_ref)<0);p.length>0&&(l[d]=p),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},a,n)}static syncDiff(t,s,a,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}a(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const n=t[a];return"metas"in n?s[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[a]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var h1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(h1||(h1={}));var m1;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(m1||(m1={}));var ti;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ti||(ti={}));class sb{constructor(t,s={config:{}},a){this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=Ws.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Nx(this,mn.join,this.params,this.timeout),this.rejoinTimer=new T5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ws.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ws.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ws.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ws.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mn.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Bd(this),this.broadcastEndpointURL=M5(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(ti.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(ti.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(ti.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<m;v++){const g=f[v],{filter:{event:y,schema:N,table:S,filter:C}}=g,M=u&&u[v];if(M&&M.event===y&&M.schema===N&&M.table===S&&M.filter===C)p.push(Object.assign(Object.assign({},g),{id:M.id}));else{this.unsubscribe(),this.state=Ws.errored,t==null||t(ti.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(ti.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ws.errored,t==null||t(ti.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ti.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this._on(t,s,a)}async send(t,s={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ws.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mn.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(a=>{const n=new Nx(this,mn.leave,{},t);n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,s,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Nx(this,t,s,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var n,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=mn;if(a&&[l,c,d,u].indexOf(o)>=0&&a!==this._joinRef())return;let f=this._onMessage(o,s,a);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var p,v,g;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(v=m.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,a)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,v,g,y,N,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,M=(p=m.filter)===null||p===void 0?void 0:p.event;return C&&((v=s.ids)===null||v===void 0?void 0:v.includes(C))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const C=(N=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return C==="*"||C===((S=s==null?void 0:s.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:g,commit_timestamp:y,type:N,errors:S}=p;f=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:y,eventType:N,new:{},old:{},errors:S}),this._getPayloadRecords(p))}m.callback(f,a)})}_isClosed(){return this.state===Ws.closed}_isJoined(){return this.state===Ws.joined}_isJoining(){return this.state===Ws.joining}_isLeaving(){return this.state===Ws.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const n=t.toLocaleLowerCase(),i={type:n,filter:s,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&sb.isEqual(n.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(mn.close,{},t)}_onError(t){this._on(mn.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ws.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=d1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=d1(t.columns,t.old_record)),s}}const f1=()=>{},EA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class OA{constructor(t,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=yA,this.params={},this.timeout=O5,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=f1,this.ref=0,this.logger=f1,this.conn=null,this.sendBuffer=[],this.serializer=new NA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>no(async()=>{const{default:c}=await Promise.resolve().then(()=>Tc);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Mp.websocket}`,this.httpEndpoint=M5(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(a=s==null?void 0:s.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new T5(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Lp),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new TA(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jA}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels=this.channels.filter(a=>a._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case hc.connecting:return Bo.Connecting;case hc.open:return Bo.Open;case hc.closing:return Bo.Closing;default:return Bo.Closed}}isConnected(){return this.connectionState()===Bo.Open}channel(t,s={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new sb(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{s&&a.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),a.joinedOnce&&a._isJoined()&&a._push(mn.access_token,{access_token:s})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(wA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:a,event:n,payload:i,ref:o}=s;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(a)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(mn.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${a}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([EA],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}}class TA{constructor(t,s,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=hc.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=a.close}}class ab extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function es(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class LA extends ab{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ip extends ab{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var MA=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const D5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>no(async()=>{const{default:a}=await Promise.resolve().then(()=>Tc);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},DA=()=>MA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield no(()=>Promise.resolve().then(()=>Tc),void 0)).Response:Response}),Rp=e=>{if(Array.isArray(e))return e.map(s=>Rp(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,a])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=Rp(a)}),t};var ul=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const _x=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),IA=(e,t,s)=>ul(void 0,void 0,void 0,function*(){const a=yield DA();e instanceof a&&!(s!=null&&s.noResolveJson)?e.json().then(n=>{t(new LA(_x(n),e.status||500))}).catch(n=>{t(new Ip(_x(n),n))}):t(new Ip(_x(e),e))}),RA=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),s))};function hu(e,t,s,a,n,i){return ul(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,RA(t,a,n,i)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>IA(c,l,a))})})}function em(e,t,s,a){return ul(this,void 0,void 0,function*(){return hu(e,"GET",t,s,a)})}function Wi(e,t,s,a,n){return ul(this,void 0,void 0,function*(){return hu(e,"POST",t,a,n,s)})}function FA(e,t,s,a,n){return ul(this,void 0,void 0,function*(){return hu(e,"PUT",t,a,n,s)})}function $A(e,t,s,a){return ul(this,void 0,void 0,function*(){return hu(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function I5(e,t,s,a,n){return ul(this,void 0,void 0,function*(){return hu(e,"DELETE",t,a,n,s)})}var na=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const qA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},x1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class BA{constructor(t,s={},a,n){this.url=t,this.headers=s,this.bucketId=a,this.fetch=D5(n)}uploadOrUpdate(t,s,a,n){return na(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},x1),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(es(i))return{data:null,error:i};throw i}})}upload(t,s,a){return na(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,a)})}uploadToSignedUrl(t,s,a,n){return na(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:x1.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(es(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return na(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield Wi(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ab("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(a){if(es(a))return{data:null,error:a};throw a}})}update(t,s,a){return na(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,a)})}move(t,s,a){return na(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}copy(t,s,a){return na(this,void 0,void 0,function*(){try{return{data:{path:(yield Wi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}createSignedUrl(t,s,a){return na(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield Wi(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}createSignedUrls(t,s,a){return na(this,void 0,void 0,function*(){try{const n=yield Wi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}download(t,s){return na(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield em(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(es(l))return{data:null,error:l};throw l}})}info(t){return na(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const a=yield em(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Rp(a),error:null}}catch(a){if(es(a))return{data:null,error:a};throw a}})}exists(t){return na(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield $A(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(es(a)&&a instanceof Ip){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,s){const a=this._getFinalPath(t),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${d}`)}}}remove(t){return na(this,void 0,void 0,function*(){try{return{data:yield I5(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}list(t,s,a){return na(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},qA),s),{prefix:t||""});return{data:yield Wi(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const zA="2.7.1",UA={"X-Client-Info":`storage-js/${zA}`};var Kl=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class WA{constructor(t,s={},a){this.url=t,this.headers=Object.assign(Object.assign({},UA),s),this.fetch=D5(a)}listBuckets(){return Kl(this,void 0,void 0,function*(){try{return{data:yield em(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(es(t))return{data:null,error:t};throw t}})}getBucket(t){return Kl(this,void 0,void 0,function*(){try{return{data:yield em(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Kl(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(es(a))return{data:null,error:a};throw a}})}updateBucket(t,s){return Kl(this,void 0,void 0,function*(){try{return{data:yield FA(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(es(a))return{data:null,error:a};throw a}})}emptyBucket(t){return Kl(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Kl(this,void 0,void 0,function*(){try{return{data:yield I5(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}}class VA extends WA{constructor(t,s={},a){super(t,s,a)}from(t){return new BA(this.url,this.headers,t,this.fetch)}}const HA="2.50.0";let Ld="";typeof Deno<"u"?Ld="deno":typeof document<"u"?Ld="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ld="react-native":Ld="node";const GA={"X-Client-Info":`supabase-js-${Ld}/${HA}`},KA={headers:GA},YA={schema:"public"},JA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},XA={};var QA=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const ZA=e=>{let t;return e?t=e:typeof fetch>"u"?t=S5:t=fetch,(...s)=>t(...s)},ek=()=>typeof Headers>"u"?P5:Headers,tk=(e,t,s)=>{const a=ZA(s),n=ek();return(i,o)=>QA(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},o),{headers:d}))})};var rk=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};function sk(e){return e.endsWith("/")?e:e+"/"}function ak(e,t){var s,a;const{db:n,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>rk(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const R5="2.70.0",ac=30*1e3,Fp=3,Sx=Fp*ac,nk="http://localhost:9999",ik="supabase.auth.token",ok={"X-Client-Info":`gotrue-js/${R5}`},$p="X-Supabase-Api-Version",F5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ck=6e5;class nb extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function vt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dk extends nb{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function uk(e){return vt(e)&&e.name==="AuthApiError"}class $5 extends nb{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class ho extends nb{constructor(t,s,a,n){super(t,a,n),this.name=s,this.status=a}}class Ui extends ho{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hk(e){return vt(e)&&e.name==="AuthSessionMissingError"}class bh extends ho{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vh extends ho{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yh extends ho{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mk(e){return vt(e)&&e.name==="AuthImplicitGrantRedirectError"}class p1 extends ho{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qp extends ho{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Px(e){return vt(e)&&e.name==="AuthRetryableFetchError"}class g1 extends ho{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class zd extends ho{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),b1=` 	
\r=`.split(""),fk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<b1.length;t+=1)e[b1[t].charCodeAt(0)]=-2;for(let t=0;t<tm.length;t+=1)e[tm[t].charCodeAt(0)]=t;return e})();function v1(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(tm[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(tm[a]),t.queuedBits-=6}}function q5(e,t,s){const a=fk[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function y1(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{gk(o,a,s)};for(let o=0;o<e.length;o+=1)q5(e.charCodeAt(o),n,i);return t.join("")}function xk(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pk(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}xk(a,t)}}function gk(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function bk(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)q5(e.charCodeAt(n),s,a);return new Uint8Array(t)}function vk(e){const t=[];return pk(e,s=>t.push(s)),new Uint8Array(t)}function yk(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>v1(n,s,a)),v1(null,s,a),t.join("")}function jk(e){return Math.round(Date.now()/1e3)+e}function wk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const un=()=>typeof window<"u"&&typeof document<"u",To={tested:!1,writable:!1},Ud=()=>{if(!un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(To.tested)return To.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),To.tested=!0,To.writable=!0}catch{To.tested=!0,To.writable=!1}return To.writable};function Nk(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return s.searchParams.forEach((a,n)=>{t[n]=a}),t}const B5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>no(async()=>{const{default:a}=await Promise.resolve().then(()=>Tc);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},_k=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",z5=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},jh=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},wh=async(e,t)=>{await e.removeItem(t)};class Hm{constructor(){this.promise=new Hm.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Hm.promiseConstructor=Promise;function Cx(e){const t=e.split(".");if(t.length!==3)throw new zd("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!lk.test(t[a]))throw new zd("JWT not in base64url format");return{header:JSON.parse(y1(t[0])),payload:JSON.parse(y1(t[1])),signature:bk(t[2]),raw:{header:t[0],payload:t[1]}}}async function Sk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Pk(e,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function Ck(e){return("0"+e.toString(16)).substr(-2)}function Ak(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Ck).join("")}async function kk(e){const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Ek(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await kk(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yl(e,t,s=!1){const a=Ak();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await z5(e,`${t}-code-verifier`,n);const i=await Ek(a);return[i,a===i?"plain":"s256"]}const Ok=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tk(e){const t=e.headers.get($p);if(!t||!t.match(Ok))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Lk(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Mk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jl(e){if(!Dk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Ik=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s};const Do=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Rk=[502,503,504];async function j1(e){var t;if(!_k(e))throw new qp(Do(e),0);if(Rk.includes(e.status))throw new qp(Do(e),e.status);let s;try{s=await e.json()}catch(i){throw new $5(Do(i),i)}let a;const n=Tk(e);if(n&&n.getTime()>=F5["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new g1(Do(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Ui}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new g1(Do(s),e.status,s.weak_password.reasons);throw new dk(Do(s),e.status||500,a)}const Fk=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))};async function Ct(e,t,s,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[$p]||(i[$p]=F5["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await $k(e,t,s+l,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function $k(e,t,s,a,n,i){const o=Fk(t,a,n,i);let l;try{l=await e(s,Object.assign({},o))}catch(c){throw console.error(c),new qp(Do(c),0)}if(l.ok||await j1(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(c){await j1(c)}}function ei(e){var t;let s=null;Uk(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=jk(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:a},error:null}}function w1(e){const t=ei(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ki(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function qk(e){return{data:e,error:null}}function Bk(e){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i}=e,o=Ik(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function zk(e){return e}function Uk(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ax=["global","local","others"];var Wk=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s};class Vk{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=B5(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Ax[0]){if(Ax.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ax.join(", ")}`);try{return await Ct(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(vt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await Ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ki})}catch(a){if(vt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=Wk(t,["options"]),n=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await Ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Bk,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(vt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Ct(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ki})}catch(s){if(vt(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:zk});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);d[`${g}Page`]=v}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(vt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Jl(t);try{return await Ct(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ki})}catch(s){if(vt(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Jl(t);try{return await Ct(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ki})}catch(a){if(vt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){Jl(t);try{return await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ki})}catch(a){if(vt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){Jl(t.userId);try{const{data:s,error:a}=await Ct(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:a}}catch(s){if(vt(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Jl(t.userId),Jl(t.id);try{return{data:await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}}}const Hk={getItem:e=>Ud()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ud()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ud()&&globalThis.localStorage.removeItem(e)}};function N1(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function Gk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xl={debug:!!(globalThis&&Ud()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class U5 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Kk extends U5{}async function Yk(e,t,s){Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Kk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Gk();const Jk={url:nk,storageKey:ik,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ok,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _1(e,t,s){return await s()}class Xd{constructor(t){var s,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xd.nextInstanceID,Xd.nextInstanceID+=1,this.instanceID>0&&un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Jk),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Vk({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=B5(n.fetch),this.lock=n.lock||_1,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:un()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Yk:this.lock=_1,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ud()?this.storage=Hk:(this.memoryStorage={},this.storage=N1(this.memoryStorage)):(this.memoryStorage={},this.storage=N1(this.memoryStorage)),un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${R5}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=Nk(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),un()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),mk(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return vt(s)?{error:s}:{error:new $5("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,n;try{const i=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:ei}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(vt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,a,n;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Yl(this.storage,this.storageKey)),i=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:ei})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ei})}else throw new vh("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(vt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:o,options:l}=t;s=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:w1})}else if("phone"in t){const{phone:i,password:o,options:l}=t;s=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:w1})}else throw new vh("You must provide either an email or phone number and a password");const{data:a,error:n}=s;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new bh}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(s){if(vt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,a,n,i,o,l,c,d,u,h,f,m;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:g,wallet:y,statement:N,options:S}=t;let C;if(un())if(typeof y=="object")C=y;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))C=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=y}const M=new URL((s=S==null?void 0:S.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in C&&C.signIn){const D=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),N?{statement:N}:null));let L;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")L=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)L=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)p=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),v=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${M.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(n=(a=S==null?void 0:S.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((h=(u=S==null?void 0:S.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...S.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const D=await C.signMessage(new TextEncoder().encode(p),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=D}}try{const{data:g,error:y}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:yk(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ei});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new bh}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(vt(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const s=await jh(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(s??"").split("/");try{const{data:i,error:o}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:ei});if(await wh(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new bh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(vt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:s,provider:a,token:n,access_token:i,nonce:o}=t,l=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ei}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new bh}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(vt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,a,n,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Yl(this.storage,this.storageKey));const{error:h}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new vh("You must provide either an email or phone number.")}catch(l){if(vt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,a;try{let n,i;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await Ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ei});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(vt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var s,a,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Yl(this.storage,this.storageKey)),await Ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:qk})}catch(i){if(vt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new Ui;const{error:n}=await Ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(vt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:o}=await Ct(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:o,error:l}=await Ct(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new vh("You must provide either an email or phone number and a type")}catch(s){if(vt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await jh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Sx:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ki}):await this._useSession(async s=>{var a,n,i;const{data:o,error:l}=s;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ui}:await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ki})})}catch(s){if(vt(s))return hk(s)&&(await this._removeSession(),await wh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new Ui;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Yl(this.storage,this.storageKey));const{data:d,error:u}=await Ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ki});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(vt(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ui;const s=Date.now()/1e3;let a=s,n=!0,i=null;const{payload:o}=Cx(t.access_token);if(o.exp&&(a=o.exp,n=a<=s),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(vt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Ui;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(vt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!un())throw new yh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new p1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yh("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new p1("No code detected.");const{data:N,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new yh("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=ac&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:v,error:g}=await this._getUser(i);if(g)throw g;const y={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(vt(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await jh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{error:i};const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(uk(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await wh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=wk(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Yl(this.storage,this.storageKey,!0));try{return await Ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(vt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:a,error:n}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ct(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return un()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(vt(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,n;const{data:i,error:o}=s;if(o)throw o;return await Ct(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(vt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Pk(async n=>(n>0&&await Sk(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await Ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ei})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Px(i)&&Date.now()+o-a<ac})}catch(a){if(this._debug(s,"error",a),vt(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),un()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await jh(this.storage,this.storageKey);if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const n=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Sx;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${Sx}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),Px(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new Ui;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Hm;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ui;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),vt(i)){const o={session:null,error:i};return Px(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await z5(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await wh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ac);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/ac);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ac}ms, refresh threshold is ${Fp} ticks`),n<=Fp&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof U5)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const n=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await Yl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await Ct(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(vt(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ct(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(vt(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await Ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(vt(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await Ct(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(vt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(t==null?void 0:t.factors)||[],n=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Cx(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((a=(s=n.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(o=>o.kid===t);if(a||(a=this.jwks.keys.find(o=>o.kid===t),a&&this.jwks_cached_at+ck>Date.now()))return a;const{data:n,error:i}=await Ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new zd("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(o=>o.kid===t),!a)throw new zd("No matching signing key found in JWKS");return a}async getClaims(t,s={keys:[]}){try{let a=t;if(!a){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};a=m.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=Cx(a);if(Lk(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(a);if(m)throw m;return{data:{claims:i,header:n,signature:o},error:null}}const d=Mk(n.alg),u=await this.fetchJwk(n.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,vk(`${l}.${c}`)))throw new zd("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(vt(a))return{data:null,error:a};throw a}}}Xd.nextInstanceID=0;const Xk=Xd;class Qk extends Xk{constructor(t){super(t)}}var Zk=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class eE{constructor(t,s,a){var n,i,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=sk(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:YA,realtime:XA,auth:Object.assign(Object.assign({},JA),{storageKey:d}),global:KA},h=ak(a??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=tk(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new bA(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new iA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new VA(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},a={}){return this.rest.rpc(t,s,a)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Zk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qk({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new OA(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,s,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ib=(e,t,s)=>new eE(e,t,s),tE="https://uicpqeruwwbnqbykymaj.supabase.co",rE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpY3BxZXJ1d3dibnFieWt5bWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzODM3NjksImV4cCI6MjA2NTk1OTc2OX0.hn-R8WzjKEqnusblaIWKZjCbm-nDqfBP5VQKymshMsM",ge=ib(tE,rE),W5=j.createContext({}),ar=()=>{const e=j.useContext(W5);if(!e)throw new Error("useSupabaseAuth deve ser usado dentro de SupabaseAuthProvider");return e},sE=({children:e})=>{const[t,s]=j.useState(null),[a,n]=j.useState(!0),[i,o]=j.useState(null);j.useEffect(()=>{l();const{data:{subscription:T}}=ge.auth.onAuthStateChange(async(F,z)=>{z!=null&&z.user?(s(z.user),await c(z.user.id)):(s(null),o(null)),n(!1)});return()=>T==null?void 0:T.unsubscribe()},[]);const l=async()=>{try{const{data:{session:T}}=await ge.auth.getSession();T!=null&&T.user&&(s(T.user),await c(T.user.id))}catch(T){console.error("Erro ao verificar sessão:",T)}finally{n(!1)}},c=async T=>{try{const{data:F,error:z}=await ge.from("users").select("*").eq("id",T).single();z?(console.error("Erro ao carregar perfil:",z),await d(T)):o(F)}catch(F){console.error("Erro ao carregar perfil do usuário:",F)}},d=async T=>{var F,z;try{const{data:{user:se}}=await ge.auth.getUser(),Y=((F=se.app_metadata)==null?void 0:F.provider)==="google",_e=se.user_metadata||{},R={id:T,email:se.email,name:_e.name||((z=se.email)==null?void 0:z.split("@")[0])||"Usuário",avatar_url:_e.avatar_url||_e.picture||null,user_type:"cliente_pf",points:0,level:"Bronze",role:"customer",permissions:["read"],provider:Y?"google":"email",google_id:Y?_e.sub:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:Q,error:re}=await ge.from("users").insert([R]).select().single();re?console.error("Erro ao criar perfil:",re):o(Q)}catch(se){console.error("Erro ao criar perfil do usuário:",se)}},u=async(T,F)=>{try{n(!0);const{data:z,error:se}=await ge.auth.signInWithPassword({email:T,password:F});return se?{success:!1,error:se.message||"Erro ao fazer login"}:{success:!0,user:z.user}}catch{return{success:!1,error:"Erro inesperado ao fazer login"}}finally{n(!1)}},h=async(T,F,z={})=>{try{n(!0);const{data:se,error:Y}=await ge.auth.signUp({email:T,password:F,options:{data:{name:z.name||"Usuário"}}});if(Y)return{success:!1,error:Y.message||"Erro ao criar conta"};if(se.user){const _e={id:se.user.id,email:T,name:z.name||"Usuário",phone:z.phone||"",cpf_cnpj:z.cpf_cnpj||"",company_name:z.company_name||"",company_segment:z.company_segment||"",user_type:z.accountType||"cliente_pf",points:0,level:"Bronze",role:"customer",permissions:["read"],created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:R}=await ge.from("users").insert([_e]);R&&console.error("Erro ao criar perfil:",R)}return{success:!0,user:se.user,message:"Conta criada com sucesso! Verifique seu email para confirmar."}}catch{return{success:!1,error:"Erro inesperado ao criar conta"}}finally{n(!1)}},f=async()=>{try{n(!0);const{data:T,error:F}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});return F?{success:!1,error:F.message||"Erro ao fazer login com Google"}:{success:!0,message:"Redirecionando para o Google..."}}catch{return{success:!1,error:"Erro inesperado ao fazer login com Google"}}finally{n(!1)}},m=async()=>{try{n(!0);const{data:T,error:F}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});return F?{success:!1,error:F.message||"Erro ao criar conta com Google"}:{success:!0,message:"Redirecionando para o Google..."}}catch{return{success:!1,error:"Erro inesperado ao criar conta com Google"}}finally{n(!1)}},p=async()=>{try{const{error:T}=await ge.auth.signOut();return T?(console.error("Erro ao fazer logout:",T),{success:!1,error:T.message}):(s(null),o(null),{success:!0})}catch{return{success:!1,error:"Erro inesperado ao fazer logout"}}},v=async T=>{try{if(!t)return{success:!1,error:"Usuário não autenticado"};const{error:F}=await ge.from("users").update({...T,updated_at:new Date().toISOString()}).eq("id",t.id);return F?{success:!1,error:F.message}:(o(z=>({...z,...T})),{success:!0})}catch{return{success:!1,error:"Erro ao atualizar perfil"}}},g=async T=>{try{const{error:F}=await ge.auth.updateUser({password:T});return F?{success:!1,error:F.message}:{success:!0}}catch{return{success:!1,error:"Erro ao atualizar senha"}}},y=async T=>{try{const{error:F}=await ge.auth.resetPasswordForEmail(T,{redirectTo:`${window.location.origin}/reset-password`});return F?{success:!1,error:F.message}:{success:!0}}catch{return{success:!1,error:"Erro ao enviar email de recuperação"}}},N=()=>t,S=()=>i,C=j.useCallback(T=>{var F;return i?i.role==="super_admin"||T==="admin"&&(i.role==="admin"||i.role==="super_admin")?!0:((F=i.permissions)==null?void 0:F.includes(T))||!1:!1},[i]),M=j.useMemo(()=>(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="super_admin",[i==null?void 0:i.role]),D=j.useMemo(()=>(i==null?void 0:i.role)==="super_admin",[i==null?void 0:i.role]),L=async T=>{try{if(!D)return{success:!1,error:"Permissão negada"};const{error:F}=await ge.from("users").update({role:"admin",permissions:["read","write","admin"],updated_at:new Date().toISOString()}).eq("id",T);return F?{success:!1,error:F.message}:{success:!0}}catch{return{success:!1,error:"Erro ao promover usuário"}}},A=async T=>{try{if(!D)return{success:!1,error:"Permissão negada"};const{error:F}=await ge.from("users").update({role:"customer",permissions:["read"],updated_at:new Date().toISOString()}).eq("id",T);return F?{success:!1,error:F.message}:{success:!0}}catch{return{success:!1,error:"Erro ao revogar permissões"}}},I=async(T,F="Atividade")=>{try{if(!t||!i)return{success:!1,error:"Usuário não autenticado"};const z=(i.points||0)+T,se=H(z),{error:Y}=await ge.from("users").update({points:z,level:se,updated_at:new Date().toISOString()}).eq("id",t.id);return Y?{success:!1,error:Y.message}:(await ge.from("points_history").insert({user_id:t.id,points:T,reason:F,created_at:new Date().toISOString()}),o(_e=>({..._e,points:z,level:se})),{success:!0,newLevel:se!==i.level})}catch{return{success:!1,error:"Erro ao adicionar pontos"}}},H=T=>T>=5e3?"Diamante":T>=3e3?"Platina":T>=1500?"Ouro":T>=500?"Prata":"Bronze",V={user:t,profile:i,loading:a,login:u,register:h,loginWithGoogle:f,registerWithGoogle:m,logout:p,updateProfile:v,updatePassword:g,resetPassword:y,requestPasswordReset:async T=>{try{n(!0);let F;window.location.hostname==="localhost"?F="http://localhost:5173/redefinir-senha":F=`${window.location.origin}/redefinir-senha`,console.log("📧 Enviando email de redefinição para:",T),console.log("🔗 URL de redirecionamento configurada:",F),console.log("🌐 Origin atual:",window.location.origin);const{data:z,error:se}=await ge.auth.resetPasswordForEmail(T,{redirectTo:F});if(se){console.error("❌ Erro no resetPasswordForEmail:",se);let Y="Erro ao enviar email de redefinição.";return se.message.includes("rate limit")?Y="Muitas tentativas. Aguarde alguns minutos e tente novamente.":se.message.includes("not found")||se.message.includes("User not found")?Y="Email não encontrado. Verifique se o email está correto.":se.message.includes("invalid")?Y="Email inválido. Verifique o formato do email.":se.message.includes("signup")&&(Y="Este email não possui conta. Faça o cadastro primeiro."),{success:!1,error:Y}}return console.log("✅ Email de reset enviado com sucesso:",z),{success:!0,message:"Email de redefinição enviado! Verifique sua caixa de entrada e spam."}}catch(F){return console.error("❌ Erro no requestPasswordReset:",F),{success:!1,error:"Erro de conexão com o servidor. Tente novamente."}}finally{n(!1)}},confirmPasswordReset:async T=>{try{n(!0),console.log("⚠️ Usando função confirmPasswordReset - considere usar diretamente supabase.auth.updateUser");const{error:F}=await ge.auth.updateUser({password:T});return F?(console.error("Erro no confirmPasswordReset:",F),{success:!1,error:F.message||"Erro ao redefinir senha. Token pode ter expirado."}):{success:!0,message:"Senha redefinida com sucesso!"}}catch(F){return console.error("Erro no confirmPasswordReset:",F),{success:!1,error:"Erro de conexão. Tente novamente."}}finally{n(!1)}},getCurrentUser:N,getUserProfile:S,hasPermission:C,isAdmin:M,isSuperAdmin:D,promoteToAdmin:L,revokeAdmin:A,addPoints:I,calculateLevel:H,getUserStats:async()=>{try{if(!t)return null;const{data:T,error:F}=await ge.from("user_stats").select("*").eq("user_id",t.id).single();return F&&F.code!=="PGRST116"?(console.error("Erro ao buscar estatísticas:",F),null):T}catch(T){return console.error("Erro ao buscar estatísticas do usuário:",T),null}},activateAdminCreatedAccount:async T=>{try{if(!t||!i)return{success:!1,error:"Usuário não autenticado"};if(!i.criado_por_admin||!i.pendente_ativacao)return{success:!1,error:"Esta conta não precisa ser ativada"};const{error:F}=await ge.auth.updateUser({password:T});if(F)return{success:!1,error:F.message};const{error:z}=await ge.from("users").update({pendente_ativacao:!1,data_ativacao:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t.id);return z?{success:!1,error:z.message}:(o(se=>({...se,pendente_ativacao:!1,data_ativacao:new Date().toISOString()})),{success:!0,message:"Conta ativada com sucesso!"})}catch(F){return console.error("Erro ao ativar conta:",F),{success:!1,error:"Erro interno ao ativar conta"}}}};return r.jsx(W5.Provider,{value:V,children:e})},Lo=e=>!e||typeof e!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),V5=j.createContext(),Lc=()=>{const e=j.useContext(V5);if(!e)throw new Error("useCart deve ser usado dentro de um CartProvider");return e},aE=({children:e})=>{const{user:t}=ar(),[s,a]=j.useState([]),[n,i]=j.useState(0),[o,l]=j.useState(!1),[c,d]=j.useState(!1);j.useEffect(()=>{t&&t.id?(console.log("✅ Usuário logado detectado, carregando carrinho do Supabase..."),d(!1),u()):(console.log("🔒 Usuário não logado, carrinho requer autenticação"),d(!0),a([]),i(0))},[t]),j.useEffect(()=>{const S=s.reduce((C,M)=>{const D=parseFloat(M.price)||0,L=parseInt(M.quantity)||0;return C+D*L},0);i(S)},[s]);const u=async()=>{if(!t||!t.id){console.log("🔒 Acesso negado: Carrinho requer autenticação"),a([]),i(0),d(!0);return}if(!Lo(t.id)){console.error("❌ User ID inválido no loadCart:",t.id),a([]),i(0),d(!0);return}l(!0),d(!1);try{console.log("🛒 Carregando carrinho seguro para usuário:",t.id);const{data:S,error:C}=await ge.from("cart_items").select("id, product_id, quantity, created_at").eq("user_id",t.id);if(C){console.error("❌ Erro ao carregar itens do carrinho:",C),a([]);return}if(!S||S.length===0){console.log("📭 Carrinho vazio para usuário:",t.id),a([]);return}const M=S.map(I=>I.product_id),{data:D,error:L}=await ge.from("products").select("id, name, price, images, weight, category").in("id",M).eq("is_active",!0);if(L){console.error("❌ Erro ao carregar produtos:",L),a([]);return}const A=S.map(I=>{const H=D.find(k=>k.id===I.product_id);return H?{id:I.product_id,cart_item_id:I.id,name:H.name,price:H.price,image:H.images&&H.images.length>0?H.images[0]:null,quantity:I.quantity,weight:H.weight,category:H.category}:(console.warn("⚠️ Produto não encontrado ou inativo:",I.product_id),null)}).filter(Boolean);a(A),console.log("✅ Carrinho carregado com segurança:",A.length,"itens para usuário",t.id)}catch(S){console.error("❌ Erro ao carregar carrinho:",S),a([])}finally{l(!1)}},h=async(S,C=1)=>{if(!t||!t.id)return console.log("🔒 Acesso negado: Login necessário para adicionar ao carrinho"),d(!0),{success:!1,message:"Login necessário para adicionar produtos ao carrinho"};if(!S||!S.id)return console.error("❌ Produto inválido ou sem ID:",S),{success:!1,message:"Produto inválido"};if(!Lo(t.id))return console.error("❌ User ID inválido:",t.id),{success:!1,message:"ID de usuário inválido"};if(!Lo(S.id))return console.error("❌ Product ID inválido:",S.id),{success:!1,message:"ID de produto inválido"};try{console.log("🛒 Adicionando ao carrinho (usuário:",t.id,"- produto:",S.name,"- ID:",S.id,")");const{data:M,error:D}=await ge.from("cart_items").select("id, quantity").eq("user_id",t.id).eq("product_id",S.id).single();if(D&&D.code!=="PGRST116")return console.error("❌ Erro inesperado ao verificar item no carrinho:",D),{success:!1,message:"Erro ao verificar carrinho"};if(D&&D.code==="PGRST116"&&console.log("ℹ️ PGRST116 detectado: Item não existe no carrinho (comportamento normal na primeira adição)"),M&&!D){console.log("📝 Item já existe no carrinho, atualizando quantidade...");const{error:L}=await ge.from("cart_items").update({quantity:M.quantity+C}).eq("id",M.id).eq("user_id",t.id);if(L)return console.error("❌ Erro ao atualizar quantidade:",L),{success:!1,message:"Erro ao atualizar quantidade"};console.log("✅ Quantidade atualizada com sucesso")}else{console.log("➕ Item novo no carrinho, criando...");const{error:L}=await ge.from("cart_items").insert({user_id:t.id,product_id:S.id,quantity:C});if(L)return console.error("❌ Erro ao adicionar item ao carrinho:",L),{success:!1,message:"Erro ao adicionar produto"};console.log("✅ Item adicionado com sucesso")}return await u(),{success:!0,message:"Produto adicionado ao carrinho!"}}catch(M){return console.error("❌ Erro ao adicionar ao carrinho:",M),{success:!1,message:"Erro interno"}}},f=async S=>{if(!t||!t.id)return console.log("🔒 Acesso negado: Login necessário para remover do carrinho"),{success:!1,message:"Login necessário"};if(!S)return console.error("❌ Product ID não fornecido"),{success:!1,message:"ID de produto não fornecido"};if(!Lo(t.id))return console.error("❌ User ID inválido:",t.id),{success:!1,message:"ID de usuário inválido"};if(!Lo(S))return console.error("❌ Product ID inválido:",S),{success:!1,message:"ID de produto inválido"};try{console.log("🗑️ Removendo do carrinho (usuário:",t.id,"- produto:",S,")");const{error:C}=await ge.from("cart_items").delete().eq("user_id",t.id).eq("product_id",S);return C?(console.error("❌ Erro ao remover item do carrinho:",C),{success:!1,message:"Erro ao remover produto"}):(await u(),{success:!0,message:"Produto removido do carrinho!"})}catch(C){return console.error("❌ Erro ao remover do carrinho:",C),{success:!1,message:"Erro interno"}}},N={cartItems:s,cartTotal:n,isLoading:o,requiresLogin:c,addToCart:h,removeFromCart:f,updateQuantity:async(S,C)=>{if(!t||!t.id)return console.log("🔒 Acesso negado: Login necessário para atualizar carrinho"),{success:!1,message:"Login necessário"};if(!S)return console.error("❌ Product ID não fornecido"),{success:!1,message:"ID de produto não fornecido"};if(!Lo(t.id))return console.error("❌ User ID inválido:",t.id),{success:!1,message:"ID de usuário inválido"};if(!Lo(S))return console.error("❌ Product ID inválido:",S),{success:!1,message:"ID de produto inválido"};try{if(C<=0)return await f(S);console.log("📝 Atualizando quantidade (usuário:",t.id,"- produto:",S,"- qtd:",C,")");const{error:M}=await ge.from("cart_items").update({quantity:C}).eq("user_id",t.id).eq("product_id",S);return M?(console.error("❌ Erro ao atualizar quantidade:",M),{success:!1,message:"Erro ao atualizar quantidade"}):(await u(),{success:!0})}catch(M){return console.error("❌ Erro ao atualizar quantidade:",M),{success:!1,message:"Erro interno"}}},clearCart:async()=>{if(!t||!t.id)return console.log("🔒 Acesso negado: Login necessário para limpar carrinho"),{success:!1,message:"Login necessário"};try{console.log("🧹 Limpando carrinho (usuário:",t.id,")");const{error:S}=await ge.from("cart_items").delete().eq("user_id",t.id);return S?(console.error("❌ Erro ao limpar carrinho:",S),{success:!1,message:"Erro ao limpar carrinho"}):(a([]),i(0),{success:!0,message:"Carrinho limpo!"})}catch(S){return console.error("❌ Erro ao limpar carrinho:",S),{success:!1,message:"Erro interno"}}},getCartItemsCount:()=>!t||!t.id?0:s.reduce((S,C)=>S+C.quantity,0),getCartItemsCountSafe:()=>{if(!t||!t.id)return 0;try{return s.reduce((S,C)=>S+C.quantity,0)}catch(S){return console.error("Erro em getCartItemsCountSafe:",S),0}},getTotalPrice:()=>!t||!t.id?0:n,loadCart:u};return r.jsx(V5.Provider,{value:N,children:e})},ja={async tableExists(e){try{const{data:t,error:s}=await ge.from(e).select("*").limit(1);return!s}catch{return!1}},async getBankAccounts(){try{const{data:e,error:t}=await ge.from("bank_accounts").select("*").eq("is_active",!0).order("name");return t?(console.error("Erro ao buscar contas bancárias:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar contas bancárias:",e),{success:!1,error:e.message,data:[]}}},async createBankAccount(e){try{const{data:t,error:s}=await ge.from("bank_accounts").insert([e]).select();if(s)throw s;return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async updateBankAccount(e,t){try{const{data:s,error:a}=await ge.from("bank_accounts").update(t).eq("id",e).select();if(a)throw a;return{success:!0,data:s[0]}}catch(s){return{success:!1,error:s.message}}},async getAccountsReceivable(e={}){try{if(!await this.tableExists("accounts_receivable"))return console.log("⚠️ Tabela accounts_receivable não existe - retornando dados vazios"),{success:!0,data:[]};let s=ge.from("accounts_receivable").select("*").eq("is_active",!0);e.status&&(s=s.eq("status",e.status)),e.startDate&&e.endDate&&(s=s.gte("due_date",e.startDate).lte("due_date",e.endDate));const{data:a,error:n}=await s.order("due_date",{ascending:!0});return n?(console.error("Erro ao buscar contas a receber:",n),{success:!1,error:n.message,data:[]}):{success:!0,data:a||[]}}catch(t){return console.error("Erro ao buscar contas a receber:",t),{success:!1,error:t.message,data:[]}}},async createAccountReceivable(e){try{const{data:t,error:s}=await ge.from("accounts_receivable").insert([e]).select();if(s)throw s;return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async updateAccountReceivable(e,t){try{const{data:s,error:a}=await ge.from("accounts_receivable").update(t).eq("id",e).select();if(a)throw a;return{success:!0,data:s[0]}}catch(s){return{success:!1,error:s.message}}},async getAccountsPayable(e={}){try{if(!await this.tableExists("accounts_payable"))return console.log("⚠️ Tabela accounts_payable não existe - retornando dados vazios"),{success:!0,data:[]};let s=ge.from("accounts_payable").select("*").eq("is_active",!0);e.status&&(s=s.eq("status",e.status)),e.startDate&&e.endDate&&(s=s.gte("due_date",e.startDate).lte("due_date",e.endDate));const{data:a,error:n}=await s.order("due_date",{ascending:!0});return n?(console.error("Erro ao buscar contas a pagar:",n),{success:!1,error:n.message,data:[]}):{success:!0,data:a||[]}}catch(t){return console.error("Erro ao buscar contas a pagar:",t),{success:!1,error:t.message,data:[]}}},async createAccountPayable(e){try{const{data:t,error:s}=await ge.from("accounts_payable").insert([e]).select();if(s)throw s;return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async getFinancialCategories(e=null){try{let t=ge.from("financial_categories").select("*").eq("is_active",!0);e&&(t=t.eq("type",e));const{data:s,error:a}=await t.order("name");if(a)throw a;return{success:!0,data:s}}catch(t){return{success:!1,error:t.message}}},async getFinancialSummary(){try{const e=await this.tableExists("accounts_receivable"),t=await this.tableExists("accounts_payable"),s=await this.tableExists("bank_accounts");let a=0,n=0,i=0;if(e)try{const{data:o,error:l}=await ge.from("accounts_receivable").select("amount").eq("status","pendente");!l&&o&&(a=o.reduce((c,d)=>c+parseFloat(d.amount||0),0))}catch{console.log("⚠️ Erro ao buscar contas a receber, usando valor padrão")}if(t)try{const{data:o,error:l}=await ge.from("accounts_payable").select("amount").eq("status","pendente");!l&&o&&(n=o.reduce((c,d)=>c+parseFloat(d.amount||0),0))}catch{console.log("⚠️ Erro ao buscar contas a pagar, usando valor padrão")}if(s)try{const{data:o,error:l}=await ge.from("bank_accounts").select("current_balance").eq("is_active",!0);!l&&o&&(i=o.reduce((c,d)=>c+parseFloat(d.current_balance||0),0))}catch{console.log("⚠️ Erro ao buscar contas bancárias, usando valor padrão")}return console.log(`💰 Resumo financeiro: Receber R$ ${a}, Pagar R$ ${n}, Saldo R$ ${i}`),{success:!0,data:{totalReceivables:a,totalPayables:n,totalBalance:i,netBalance:i+a-n}}}catch(e){return console.error("Erro no resumo financeiro:",e),{success:!0,data:{totalReceivables:0,totalPayables:0,totalBalance:0,netBalance:0}}}}},ts={async tableExists(e){try{const{data:t,error:s}=await ge.from(e).select("*").limit(1);return!s}catch{return!1}},async getSuppliers(){try{const{data:e,error:t}=await ge.from("suppliers").select("*").eq("is_active",!0).order("name");return t?(console.error("Erro ao buscar fornecedores:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar fornecedores:",e),{success:!1,error:e.message,data:[]}}},async createSupplier(e){try{const{data:t,error:s}=await ge.from("suppliers").insert([e]).select();if(s)throw s;return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async updateSupplier(e,t){try{const{data:s,error:a}=await ge.from("suppliers").update(t).eq("id",e).select();if(a)throw a;return{success:!0,data:s[0]}}catch(s){return{success:!1,error:s.message}}},async getProducts(){try{if(await this.tableExists("products_extended")){const{data:s,error:a}=await ge.from("products_extended").select(`
            *,
            category:product_categories(name),
            supplier:suppliers(name)
          `).eq("is_active",!0).order("name");if(!a)return{success:!0,data:s||[]}}if(await this.tableExists("products")){const{data:s,error:a}=await ge.from("products").select("*").order("name");if(!a)return{success:!0,data:s||[]}}return{success:!1,error:"Tabelas de produtos não encontradas",data:[]}}catch(e){return console.error("Erro ao buscar produtos:",e),{success:!1,error:e.message,data:[]}}},async createProduct(e){try{const{data:t,error:s}=await ge.from("products_extended").insert([e]).select();if(s)throw s;return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async updateProduct(e,t){try{const{data:s,error:a}=await ge.from("products_extended").update(t).eq("id",e).select();if(a)throw a;return{success:!0,data:s[0]}}catch(s){return{success:!1,error:s.message}}},async getStockMovements(e=null){try{let t=ge.from("stock_movements").select(`
          *,
          product:products_extended(name, sku),
          warehouse:warehouses(name),
          user:users(name)
        `);e&&(t=t.eq("product_id",e));const{data:s,error:a}=await t.order("created_at",{ascending:!1});return a?(console.error("Erro ao buscar movimentações:",a),{success:!1,error:a.message,data:[]}):{success:!0,data:s||[]}}catch(t){return console.error("Erro ao buscar movimentações:",t),{success:!1,error:t.message,data:[]}}},async createStockMovement(e){try{const{data:t,error:s}=await ge.from("stock_movements").insert([e]).select();if(s)throw s;if(t[0]){const a=t[0],n=a.movement_type==="entrada"?a.quantity:-a.quantity;await ge.from("products_extended").update({current_stock:n>0?ge.rpc("increment_stock",{product_id:a.product_id,amount:n}):ge.rpc("decrement_stock",{product_id:a.product_id,amount:Math.abs(n)})}).eq("id",a.product_id)}return{success:!0,data:t[0]}}catch(t){return{success:!1,error:t.message}}},async getProductCategories(){try{const{data:e,error:t}=await ge.from("product_categories").select("*").eq("is_active",!0).order("name");return t?(console.error("Erro ao buscar categorias:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar categorias:",e),{success:!1,error:e.message,data:[]}}},async getWarehouses(){try{const{data:e,error:t}=await ge.from("warehouses").select("*").eq("is_active",!0).order("name");return t?(console.error("Erro ao buscar depósitos:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar depósitos:",e),{success:!1,error:e.message,data:[]}}},async deleteProduct(e){try{const{error:t}=await ge.from("products_extended").select("id").eq("id",e).single();if(t)return{success:!0};const{error:s}=await ge.from("products_extended").delete().eq("id",e);if(s)throw s;return{success:!0}}catch(t){return{success:!1,error:t.message}}},async getStockSummary(){try{const{data:e,error:t}=await ge.from("products_extended").select("id").limit(1);if(t)return{success:!0,data:{lowStockProducts:2,totalProducts:10,totalStockValue:15450.5,lowStockItems:[{name:"Café Robusta Especial",current_stock:12,min_stock:25}]}};const{data:s}=await ge.from("products_extended").select("name, current_stock, min_stock").lt("current_stock",ge.raw("min_stock")).eq("is_active",!0),{count:a}=await ge.from("products_extended").select("*",{count:"exact"}).eq("is_active",!0),{data:n}=await ge.from("products_extended").select("current_stock, cost_price").eq("is_active",!0),i=(n==null?void 0:n.reduce((o,l)=>o+parseFloat(l.current_stock)*parseFloat(l.cost_price),0))||0;return{success:!0,data:{lowStockProducts:(s==null?void 0:s.length)||0,totalProducts:a||0,totalStockValue:i,lowStockItems:s||[]}}}catch(e){return{success:!1,error:e.message}}}},ii={async tableExists(e){try{const{data:t,error:s}=await ge.from(e).select("*").limit(1);return!s}catch{return!1}},async getEmployees(){try{if(!await this.tableExists("employees"))return console.log("⚠️ Tabela employees não existe, retornando array vazio"),{success:!0,data:[]};const{data:t,error:s}=await ge.from("employees").select("*").order("name");return s?(console.error("Erro ao buscar funcionários:",s),{success:!0,data:[]}):(console.log(`✅ ${(t==null?void 0:t.length)||0} funcionários carregados do Supabase`),{success:!0,data:t||[]})}catch(e){return console.error("Erro ao buscar funcionários:",e),{success:!0,data:[]}}},async getDepartments(){try{const e=await this.tableExists("departments"),t=await this.tableExists("employees");if(!e)return console.log("⚠️ Tabela departments não existe, retornando array vazio"),{success:!0,data:[]};const{data:s,error:a}=await ge.from("departments").select("*").order("name");if(a)return console.error("Erro ao buscar departamentos:",a),{success:!0,data:[]};if(!t){const l=s.map(c=>({...c,funcionarios_count:0}));return console.log(`✅ ${s.length} departamentos carregados (sem funcionários)`),{success:!0,data:l}}const{data:n,error:i}=await ge.from("employees").select("departamento, status").eq("status","ativo"),o=s.map(l=>{const c=i?0:n.filter(d=>d.departamento===l.nome||d.departamento===l.name).length;return{...l,funcionarios_count:c,orcamento_anual:l.orcamento_anual||1e5}});return console.log(`✅ ${s.length} departamentos carregados com contagem de funcionários`),{success:!0,data:o}}catch(e){return console.error("Erro ao buscar departamentos:",e),{success:!0,data:[]}}},async getPositions(){try{if(!await this.tableExists("positions"))return console.log("⚠️ Tabela positions não existe, retornando array vazio"),{success:!0,data:[]};const{data:t,error:s}=await ge.from("positions").select("*").order("name");return s?(console.error("Erro ao buscar cargos:",s),{success:!0,data:[]}):(console.log(`✅ ${(t==null?void 0:t.length)||0} cargos carregados do Supabase`),{success:!0,data:t||[]})}catch(e){return console.error("Erro ao buscar cargos:",e),{success:!0,data:[]}}},async createEmployee(e){try{if(!await this.tableExists("employees"))return console.log("📝 Simulando criação de funcionário (tabela não existe)"),{success:!0,message:"Funcionário criado"};const{data:s,error:a}=await ge.from("employees").insert([e]).select();return a?(console.log("📝 Simulando criação de funcionário (erro na query)"),{success:!0,message:"Funcionário criado"}):{success:!0,data:s[0]}}catch{return console.log("📝 Simulando criação de funcionário (erro genérico)"),{success:!0,message:"Funcionário criado"}}},async updateEmployee(e,t){try{if(!await this.tableExists("employees"))return console.log("📝 Simulando atualização de funcionário (tabela não existe)"),{success:!0,message:"Funcionário atualizado"};const{data:a,error:n}=await ge.from("employees").update(t).eq("id",e).select();return n?(console.log("📝 Simulando atualização de funcionário (erro na query)"),{success:!0,message:"Funcionário atualizado"}):{success:!0,data:a[0]}}catch{return console.log("📝 Simulando atualização de funcionário (erro genérico)"),{success:!0,message:"Funcionário atualizado"}}},async getAttendances(e=null,t=null,s=null){try{if(!await this.tableExists("attendances"))return console.log("⚠️ Tabela attendances não existe, retornando array vazio"),{success:!0,data:[]};let n=ge.from("attendances").select("*");e&&(n=n.eq("employee_id",e)),t&&s&&(n=n.gte("date",t).lte("date",s));const{data:i,error:o}=await n.order("date",{ascending:!1});return o?(console.error("Erro ao buscar presenças:",o),{success:!0,data:[]}):{success:!0,data:i||[]}}catch(a){return console.error("Erro ao buscar presenças:",a),{success:!0,data:[]}}},async createAttendance(e){try{if(!await this.tableExists("attendances"))return console.log("📝 Simulando criação de presença (tabela não existe)"),{success:!0,message:"Presença registrada"};const{data:s,error:a}=await ge.from("attendances").insert([e]).select();return a?(console.log("📝 Simulando criação de presença (erro na query)"),{success:!0,message:"Presença registrada"}):{success:!0,data:s[0]}}catch{return console.log("📝 Simulando criação de presença (erro genérico)"),{success:!0,message:"Presença registrada"}}},async getHRSummary(){try{const e=await this.tableExists("employees"),t=await this.tableExists("attendances");if(!e)return console.log("⚠️ Tabela employees não existe para HR summary"),{success:!0,data:{activeEmployees:0,todayAttendances:0,onLeave:0,attendanceRate:0}};const{count:s}=await ge.from("employees").select("*",{count:"exact"}).eq("status","ativo");let a=0;if(t){const i=new Date().toISOString().split("T")[0],{count:o}=await ge.from("attendances").select("*",{count:"exact"}).eq("date",i).eq("status","presente");a=o||0}const{count:n}=await ge.from("employees").select("*",{count:"exact"}).in("status",["licenca"]);return{success:!0,data:{activeEmployees:s||0,todayAttendances:a,onLeave:n||0,attendanceRate:s>0?a/s*100:0}}}catch(e){return console.error("Erro no HR summary:",e),{success:!0,data:{activeEmployees:0,todayAttendances:0,onLeave:0,attendanceRate:0}}}}},Nh={async tableExists(e){try{const{error:t}=await ge.from(e).select("id").limit(1);return!t}catch(t){return console.log(`⚠️ Tabela ${e} não existe ou não acessível:`,t.message),!1}},async getNotifications(e=null){try{if(console.log("🔔 Tentando buscar notificações..."),!await this.tableExists("notifications"))return console.log("⚠️ Tabela notifications não existe, retornando array vazio"),{success:!0,data:[]};let s=ge.from("notifications").select("*").order("created_at",{ascending:!1}).limit(20);e&&(s=s.eq("user_id",e));const{data:a,error:n}=await s;return n?(console.log("⚠️ Erro na query de notifications, retornando array vazio:",n.message),{success:!0,data:[]}):(console.log(`✅ ${(a==null?void 0:a.length)||0} notificações carregadas`),{success:!0,data:a||[]})}catch(t){return console.log("⚠️ Erro genérico ao buscar notificações, retornando array vazio:",t.message),{success:!0,data:[]}}},async markAsRead(e){try{if(!await this.tableExists("notifications"))return console.log("📝 Simulando marcação como lida (tabela não existe)"),{success:!0,message:"Notificação marcada como lida"};const{error:s}=await ge.from("notifications").update({read:!0,read_at:new Date().toISOString()}).eq("id",e);return s&&console.log("📝 Simulando marcação como lida (erro na query)"),{success:!0,message:"Notificação marcada como lida"}}catch{return console.log("📝 Simulando marcação como lida (erro genérico)"),{success:!0,message:"Notificação marcada como lida"}}},async createNotification(e){try{if(!await this.tableExists("notifications"))return console.log("📝 Simulando criação de notificação (tabela não existe):",(e==null?void 0:e.title)||"sem título"),{success:!0,message:"Notificação criada"};const{data:s,error:a}=await ge.from("notifications").insert({...e,created_at:new Date().toISOString(),read:!1}).select().single();return a&&console.log("📝 Simulando criação de notificação (erro na query):",(e==null?void 0:e.title)||"sem título"),{success:!0,data:s||{},message:"Notificação criada"}}catch{return console.log("📝 Simulando criação de notificação (erro genérico):",(e==null?void 0:e.title)||"sem título"),{success:!0,message:"Notificação criada"}}}},H5=j.createContext(),Ta=()=>{const e=j.useContext(H5);return e||(console.warn("⚠️ useNotifications usado fora do NotificationProvider, retornando fallbacks"),{notifications:[],unreadCount:0,loading:!1,isVisible:!1,setIsVisible:()=>{},notificationTypes:{},hasNotificationPermission:!1,loadNotifications:()=>Promise.resolve(),createNotification:()=>Promise.resolve({success:!0}),markAsRead:()=>Promise.resolve({success:!0}),markAllAsRead:()=>Promise.resolve({success:!0}),deleteNotification:()=>Promise.resolve({success:!0}),requestNotificationPermission:()=>Promise.resolve(!1),notifySuccess:()=>Promise.resolve({success:!0}),notifyError:()=>Promise.resolve({success:!0}),notifyInfo:()=>Promise.resolve({success:!0}),checkFinancialAlerts:()=>Promise.resolve(),checkStockAlerts:()=>Promise.resolve()})},nE=({children:e})=>{const[t,s]=j.useState([]),[a,n]=j.useState(0),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(!1),{user:h,hasPermission:f}=ar(),m={financial:{icon:rr,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},stock:{icon:Bt,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"},hr:{icon:Pt,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},task:{icon:dl,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},alert:{icon:Ji,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"},success:{icon:dr,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},info:{icon:fC,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}},p=j.useCallback(async k=>{try{const{error:P}=await ge.from(k).select("*").limit(1);return!P||P.code!=="42P01"}catch{return!1}},[]),v=j.useCallback(async()=>{var k,P;if(h){c(!0);try{const O=await Nh.getNotifications(h.id);s(O.data||[]),n(((k=O.data)==null?void 0:k.filter($=>!$.read).length)||0),console.log(`✅ ${((P=O.data)==null?void 0:P.length)||0} notificações carregadas via API robusta`)}catch(O){console.error("❌ Erro inesperado ao carregar notificações:",O),s([]),n(0)}finally{c(!1)}}},[h]),g=j.useCallback(async k=>{try{const P=await Nh.createNotification({user_id:k.userId,title:k.title,message:k.message,type:k.type||"info",priority:k.priority||"medium",action_url:k.actionUrl,metadata:k.metadata||{}}),O={id:Date.now(),user_id:k.userId,title:k.title,message:k.message,type:k.type||"info",priority:k.priority||"medium",read:!1,action_url:k.actionUrl,metadata:k.metadata||{},created_at:new Date().toISOString()};return k.userId===(h==null?void 0:h.id)&&(s($=>[O,...$]),n($=>$+1)),{success:!0,data:O}}catch(P){return console.error("❌ Erro inesperado ao criar notificação:",P),{success:!0,message:"Notificação criada localmente"}}},[h]),y=j.useCallback(async k=>{try{s(O=>O.map($=>$.id===k?{...$,read:!0}:$)),n(O=>Math.max(0,O-1));const P=await Nh.markAsRead(k);return P.success||console.error("Erro ao marcar notificação no servidor:",P.error),{success:!0}}catch(P){return console.error("Erro ao marcar notificação como lida:",P),{success:!0}}},[]),N=j.useCallback(async()=>{if(h)try{s(k=>k.map(P=>({...P,read:!0}))),n(0);try{await Nh.markAsRead("all"),console.log("✅ Notificações marcadas como lidas no servidor")}catch{console.log("⚠️ Erro ao marcar no servidor, mantendo mudança local")}return{success:!0}}catch(k){return console.error("❌ Erro inesperado ao marcar todas como lidas:",k),{success:!0}}},[h]),S=j.useCallback(async k=>{try{s(P=>P.filter(O=>O.id!==k));try{console.log(`🗑️ Removendo notificação ${k} do servidor...`)}catch{console.log("⚠️ Erro ao deletar no servidor, mantendo remoção local")}return{success:!0}}catch(P){return console.error("❌ Erro inesperado ao deletar notificação:",P),{success:!0}}},[]),C=j.useCallback(async()=>{if(f("admin"))try{const k=await p("accounts_receivable"),P=await p("bank_accounts");if(k){const{data:O}=await ge.from("accounts_receivable").select("*").eq("status","pendente").lt("due_date",new Date().toISOString().split("T")[0]);(O==null?void 0:O.length)>0&&await g({userId:h.id,type:"alert",priority:"high",title:"⚠️ Contas Vencidas",message:`${O.length} contas a receber estão vencidas`,actionUrl:"/admin/financeiro?tab=contas-receber"})}if(P){const{data:O}=await ge.from("bank_accounts").select("current_balance").eq("is_active",!0),$=(O==null?void 0:O.reduce((V,T)=>V+parseFloat(T.current_balance),0))||0;$<1e4&&await g({userId:h.id,type:"alert",priority:"high",title:"💰 Saldo Baixo",message:`Saldo total das contas: R$ ${$.toLocaleString("pt-BR")}`,actionUrl:"/admin/financeiro?tab=bancos"})}}catch(k){console.error("Erro ao verificar alertas financeiros:",k)}},[h,f,g,p]),M=j.useCallback(async()=>{if(f("admin"))try{if(!await p("products_extended")){if(!await p("products"))return;const{data:V}=await ge.from("products").select("name, stock_quantity").eq("is_active",!0),T=(V==null?void 0:V.filter(F=>F.stock_quantity<10))||[];T.length>0&&await g({userId:h.id,type:"stock",priority:"medium",title:"📦 Estoque Baixo",message:`${T.length} produtos com estoque baixo`,actionUrl:"/admin/estoque?filter=baixo"});return}const{data:P}=await ge.from("products_extended").select("name, current_stock, min_stock").eq("is_active",!0),O=(P==null?void 0:P.filter($=>$.current_stock<$.min_stock))||[];O.length>0&&await g({userId:h.id,type:"stock",priority:"medium",title:"📦 Estoque Baixo",message:`${O.length} produtos com estoque abaixo do mínimo`,actionUrl:"/admin/estoque?filter=baixo"})}catch(k){console.error("Erro ao verificar alertas de estoque:",k)}},[h,f,g,p]),D=j.useCallback(async()=>{if("Notification"in window){const k=await Notification.requestPermission();return u(k==="granted"),k==="granted"}return!1},[]);j.useEffect(()=>{h&&console.log("🔔 Sistema de notificações ativo via estado local")},[h,d]),j.useEffect(()=>{if(!h||!f("admin"))return;const k=()=>{C(),M()},P=setTimeout(k,5e3),O=setInterval(k,10*60*1e3);return()=>{clearTimeout(P),clearInterval(O)}},[h,f,C,M]),j.useEffect(()=>{v()},[v]),j.useEffect(()=>{"Notification"in window&&u(Notification.permission==="granted")},[]);const L=j.useCallback((k,P,O)=>g({userId:h==null?void 0:h.id,type:"success",title:k,message:P,actionUrl:O}),[h,g]),A=j.useCallback((k,P,O)=>g({userId:h==null?void 0:h.id,type:"alert",priority:"high",title:k,message:P,actionUrl:O}),[h,g]),I=j.useCallback((k,P,O)=>g({userId:h==null?void 0:h.id,type:"info",title:k,message:P,actionUrl:O}),[h,g]),H={notifications:t,unreadCount:a,loading:l,isVisible:i,setIsVisible:o,notificationTypes:m,hasNotificationPermission:d,loadNotifications:v,createNotification:g,markAsRead:y,markAllAsRead:N,deleteNotification:S,requestNotificationPermission:D,notifySuccess:L,notifyError:A,notifyInfo:I,checkFinancialAlerts:C,checkStockAlerts:M};return r.jsx(H5.Provider,{value:H,children:e})};function G5(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=G5(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function Lt(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=G5(e))&&(a&&(a+=" "),a+=t);return a}const S1=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,P1=Lt,ob=(e,t)=>s=>{var a;if((t==null?void 0:t.variants)==null)return P1(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(d=>{const u=s==null?void 0:s[d],h=i==null?void 0:i[d];if(u===null)return null;const f=S1(u)||S1(h);return n[d][f]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(p=>{let[v,g]=p;return Array.isArray(g)?g.includes({...i,...l}[v]):{...i,...l}[v]===g})?[...d,h,f]:d},[]);return P1(e,o,c,s==null?void 0:s.class,s==null?void 0:s.className)};function mo(...e){return Lt(e)}const iE=ob("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Vs({className:e,variant:t,size:s,asChild:a=!1,...n}){const i=a?xC:"button";return r.jsx(i,{"data-slot":"button",className:mo(iE({variant:t,size:s,className:e})),...n})}const rl=({size:e="medium",showText:t=!0,variant:s="light",className:a="",textColor:n="text-brand-dark"})=>{const[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(null),h={small:"w-8 h-8",medium:"w-10 h-10",large:"w-16 h-16"},f={small:"w-4 h-4",medium:"w-5 h-5",large:"w-8 h-8"},m={small:"text-base",medium:"text-xl",large:"text-3xl"},p={small:"text-xs",medium:"text-xs",large:"text-base"},v=()=>s==="dark"?["/logo-para-fundo-escuro.png","/assets/logo/logo-para-fundo-escuro.png","/logo-mestres-do-cafe.png","/assets/logo/logo-mestres-do-cafe.png"]:["/logo-para-fundo-branco.png","/assets/logo/logo-para-fundo-branco.png","/logo-mestres-do-cafe.png","/assets/logo/logo-mestres-do-cafe.png"];j.useEffect(()=>{const N=v();let S=0;const C=()=>{if(S>=N.length){o(!1),c(!0);return}const M=N[S],D=new Image;D.onload=()=>{u(M),o(!0),c(!1)},D.onerror=()=>{S++,C()},D.src=M};C()},[s]);const g=()=>s==="dark"?`${h[e]} rounded-lg flex items-center justify-center bg-white/10 border border-white/20 shadow-sm backdrop-blur-sm`:`${h[e]} rounded-lg flex items-center justify-center bg-white border border-gray-200 shadow-sm`,y=()=>s==="dark"?"text-white":"text-brand-brown";return r.jsxs("div",{className:`flex items-center space-x-3 ${a}`,children:[r.jsx("div",{className:g(),children:i&&!l&&d?r.jsx("img",{src:d,alt:"Mestres do Café",className:"w-full h-full object-contain rounded-lg p-1"}):r.jsx(yt,{className:`${f[e]} ${y()}`})}),t&&r.jsxs("div",{children:[r.jsx("h1",{className:`${m[e]} font-bold font-serif ${n}`,children:"Mestres do Café"}),r.jsx("p",{className:`${p[e]} ${s==="dark"?"text-white/80":"text-brand-brown"} font-medium`,children:"Torrefação Artesanal"})]})]})},rm=({size:e="md",className:t=""})=>{const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return r.jsx("div",{className:`animate-spin ${s[e]} ${t}`,children:r.jsx(yt,{className:"w-full h-full text-amber-600"})})},C1=({count:e=3})=>r.jsx(r.Fragment,{children:Array.from({length:e}).map((t,s)=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden animate-pulse",children:[r.jsx("div",{className:"h-48 bg-slate-200"}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-16 h-5 bg-slate-200 rounded-full"}),r.jsx("div",{className:"w-12 h-5 bg-slate-200 rounded"})]}),r.jsx("div",{className:"w-full h-6 bg-slate-200 rounded mb-2"}),r.jsx("div",{className:"w-3/4 h-4 bg-slate-200 rounded mb-1"}),r.jsx("div",{className:"w-1/2 h-3 bg-slate-200 rounded mb-4"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"w-20 h-6 bg-slate-200 rounded"}),r.jsx("div",{className:"w-20 h-8 bg-slate-200 rounded"})]})]})]},s))}),oE=(e=null)=>{const[t,s]=ri.useState(e),[a,n]=ri.useState(!1),[i,o]=ri.useState(null),l=ri.useCallback(async d=>{try{n(!0),o(null);const u=await d();return s(u),u}catch(u){const h=u.message||"Erro desconhecido";throw o(h),console.error("useDataState error:",u),u}finally{n(!1)}},[]),c=ri.useCallback(()=>{s(e),o(null),n(!1)},[e]);return{data:t,loading:a,error:i,setData:s,setLoading:n,setError:o,execute:l,reset:c}},lE=()=>{const{user:e}=ar(),{cartItems:t,cartTotal:s,isLoading:a,requiresLogin:n,removeFromCart:i,updateQuantity:o,getCartItemsCountSafe:l}=Lc(),[c,d]=j.useState(!1),u=j.useRef(null),h=j.useRef(null);j.useEffect(()=>{const g=y=>{u.current&&!u.current.contains(y.target)&&h.current&&!h.current.contains(y.target)&&d(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const f=async(g,y)=>{await o(g,y)},m=async g=>{await i(g)},p=l(),v=t.length>0;return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{ref:h,onClick:()=>d(!c),className:"text-brand-dark hover:text-brand-brown hover:bg-brand-brown/10 relative p-2 rounded-md transition-colors","aria-label":"Carrinho de Compras",children:[r.jsx(pn,{className:"w-5 h-5"}),p>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-brand-brown text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:p})]}),c&&r.jsxs("div",{ref:u,className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-xl shadow-lg border border-gray-200 z-50 max-h-[500px] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[r.jsxs("h3",{className:"font-semibold text-lg text-brand-dark",children:["Meu Carrinho (",p,")"]}),r.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("div",{className:"flex flex-col max-h-[400px]",children:n?r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(pn,{className:"w-8 h-8 text-red-500"})}),r.jsx("h4",{className:"font-semibold text-brand-dark mb-2",children:"Login Necessário"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Faça login para acessar seu carrinho personalizado e seguro!"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ct,{to:"/login",onClick:()=>d(!1),children:r.jsx("button",{className:"w-full bg-brand-brown hover:bg-brand-brown/90 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Fazer Login"})}),r.jsx(ct,{to:"/registro",onClick:()=>d(!1),children:r.jsx("button",{className:"w-full bg-white border-2 border-brand-brown text-brand-brown hover:bg-brand-brown/5 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Criar Conta"})})]})]}):a?r.jsx("div",{className:"p-6",children:r.jsx(rm,{size:"sm",text:"Carregando carrinho..."})}):v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.map(g=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"w-12 h-12 bg-brand-light rounded-lg flex items-center justify-center flex-shrink-0",children:g.image?r.jsx("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover rounded-lg"}):r.jsx(dc,{className:"w-6 h-6 text-brand-brown"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-medium text-sm text-brand-dark truncate",children:g.name}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsxs("span",{className:"text-brand-brown font-semibold text-sm",children:["R$ ",(g.price*g.quantity).toFixed(2)]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>f(g.id,g.quantity-1),className:"w-6 h-6 rounded-full bg-white border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",disabled:a,children:r.jsx(p5,{className:"w-3 h-3"})}),r.jsx("span",{className:"w-8 text-center text-sm font-medium",children:g.quantity}),r.jsx("button",{onClick:()=>f(g.id,g.quantity+1),className:"w-6 h-6 rounded-full bg-white border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",disabled:a,children:r.jsx(gr,{className:"w-3 h-3"})})]})]})]}),r.jsx("button",{onClick:()=>m(g.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",disabled:a,children:r.jsx(as,{className:"w-4 h-4"})})]},g.id))}),r.jsxs("div",{className:"border-t border-gray-100 p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-brand-dark",children:"Total:"}),r.jsxs("span",{className:"font-bold text-lg text-brand-brown",children:["R$ ",s.toFixed(2)]})]}),s<80&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-2",children:r.jsxs("p",{className:"text-xs text-amber-800",children:["Faltam R$ ",(80-s).toFixed(2)," para frete grátis!"]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ct,{to:"/carrinho",onClick:()=>d(!1),children:r.jsx("button",{className:"w-full bg-white border-2 border-brand-brown text-brand-brown hover:bg-brand-brown/5 py-2 px-4 rounded-lg font-medium transition-colors",children:"Ver Carrinho"})}),e?r.jsx(ct,{to:"/checkout",onClick:()=>d(!1),children:r.jsxs("button",{className:"w-full bg-brand-brown hover:bg-brand-brown/90 text-white py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:["Finalizar Compra",r.jsx(ni,{className:"w-4 h-4"})]})}):r.jsx(ct,{to:"/login",onClick:()=>d(!1),children:r.jsx("button",{className:"w-full bg-brand-brown hover:bg-brand-brown/90 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Fazer Login para Continuar"})})]}),r.jsx(ct,{to:"/marketplace",onClick:()=>d(!1),children:r.jsx("button",{className:"w-full text-sm text-brand-brown hover:text-brand-brown/80 py-1 transition-colors",children:"← Continuar Comprando"})})]})]}):r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-brand-light rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(dc,{className:"w-8 h-8 text-brand-brown/50"})}),r.jsx("h4",{className:"font-semibold text-brand-dark mb-2",children:"Carrinho vazio"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Adicione produtos incríveis ao seu carrinho!"}),r.jsx(ct,{to:"/marketplace",onClick:()=>d(!1),children:r.jsx("button",{className:"bg-brand-brown hover:bg-brand-brown/90 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Explorar Produtos"})})]})})]})]})},A1=({size:e="md",className:t=""})=>{const{isDark:s,toggleTheme:a}=_5(),n={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"};return r.jsx("button",{onClick:a,className:`
        ${n[e]}
        inline-flex items-center justify-center
        rounded-lg
        transition-all duration-200
        hover:bg-opacity-10
        focus:outline-none focus:ring-2 focus:ring-offset-2
        ${s?"text-gray-300 hover:bg-white focus:ring-purple-500":"text-gray-600 hover:bg-black focus:ring-amber-500"}
        ${t}
      `,title:s?"Ativar tema claro":"Ativar tema escuro",children:s?r.jsx(pC,{className:"w-5 h-5 transition-transform duration-300 hover:rotate-180"}):r.jsx(gC,{className:"w-5 h-5 transition-transform duration-300 hover:-rotate-12"})})};function zt(e){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(e)}function sl(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function br(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ur(e){br(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||zt(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function cE(e,t){br(2,arguments);var s=ur(e).getTime(),a=sl(t);return new Date(s+a)}var dE={};function mu(){return dE}function Bp(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Wh(e,t){br(2,arguments);var s=ur(e),a=ur(t),n=s.getTime()-a.getTime();return n<0?-1:n>0?1:n}function uE(e){return br(1,arguments),e instanceof Date||zt(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function hE(e){if(br(1,arguments),!uE(e)&&typeof e!="number")return!1;var t=ur(e);return!isNaN(Number(t))}function mE(e,t){br(2,arguments);var s=ur(e),a=ur(t),n=s.getFullYear()-a.getFullYear(),i=s.getMonth()-a.getMonth();return n*12+i}function fE(e,t){return br(2,arguments),ur(e).getTime()-ur(t).getTime()}var xE={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},pE="trunc";function gE(e){return xE[pE]}function bE(e){br(1,arguments);var t=ur(e);return t.setHours(23,59,59,999),t}function vE(e){br(1,arguments);var t=ur(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function yE(e){br(1,arguments);var t=ur(e);return bE(t).getTime()===vE(t).getTime()}function jE(e,t){br(2,arguments);var s=ur(e),a=ur(t),n=Wh(s,a),i=Math.abs(mE(s,a)),o;if(i<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-n*i);var l=Wh(s,a)===-n;yE(ur(e))&&i===1&&Wh(e,a)===1&&(l=!1),o=n*(i-Number(l))}return o===0?0:o}function wE(e,t,s){br(2,arguments);var a=fE(e,t)/1e3;return gE()(a)}function NE(e,t){br(2,arguments);var s=sl(t);return cE(e,-s)}var _E=864e5;function SE(e){br(1,arguments);var t=ur(e),s=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),n=s-a;return Math.floor(n/_E)+1}function sm(e){br(1,arguments);var t=1,s=ur(e),a=s.getUTCDay(),n=(a<t?7:0)+a-t;return s.setUTCDate(s.getUTCDate()-n),s.setUTCHours(0,0,0,0),s}function K5(e){br(1,arguments);var t=ur(e),s=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(s+1,0,4),a.setUTCHours(0,0,0,0);var n=sm(a),i=new Date(0);i.setUTCFullYear(s,0,4),i.setUTCHours(0,0,0,0);var o=sm(i);return t.getTime()>=n.getTime()?s+1:t.getTime()>=o.getTime()?s:s-1}function PE(e){br(1,arguments);var t=K5(e),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=sm(s);return a}var CE=6048e5;function AE(e){br(1,arguments);var t=ur(e),s=sm(t).getTime()-PE(t).getTime();return Math.round(s/CE)+1}function am(e,t){var s,a,n,i,o,l,c,d;br(1,arguments);var u=mu(),h=sl((s=(a=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ur(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Y5(e,t){var s,a,n,i,o,l,c,d;br(1,arguments);var u=ur(e),h=u.getUTCFullYear(),f=mu(),m=sl((s=(a=(n=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:f.firstWeekContainsDate)!==null&&a!==void 0?a:(c=f.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var v=am(p,t),g=new Date(0);g.setUTCFullYear(h,0,m),g.setUTCHours(0,0,0,0);var y=am(g,t);return u.getTime()>=v.getTime()?h+1:u.getTime()>=y.getTime()?h:h-1}function kE(e,t){var s,a,n,i,o,l,c,d;br(1,arguments);var u=mu(),h=sl((s=(a=(n=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:u.firstWeekContainsDate)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1),f=Y5(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=am(m,t);return p}var EE=6048e5;function OE(e,t){br(1,arguments);var s=ur(e),a=am(s,t).getTime()-kE(s,t).getTime();return Math.round(a/EE)+1}function Kt(e,t){for(var s=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return s+a}var Fi={y:function(t,s){var a=t.getUTCFullYear(),n=a>0?a:1-a;return Kt(s==="yy"?n%100:n,s.length)},M:function(t,s){var a=t.getUTCMonth();return s==="M"?String(a+1):Kt(a+1,2)},d:function(t,s){return Kt(t.getUTCDate(),s.length)},a:function(t,s){var a=t.getUTCHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,s){return Kt(t.getUTCHours()%12||12,s.length)},H:function(t,s){return Kt(t.getUTCHours(),s.length)},m:function(t,s){return Kt(t.getUTCMinutes(),s.length)},s:function(t,s){return Kt(t.getUTCSeconds(),s.length)},S:function(t,s){var a=s.length,n=t.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,a-3));return Kt(i,s.length)}},Ql={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},TE={G:function(t,s,a){var n=t.getUTCFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(t,s,a){if(s==="yo"){var n=t.getUTCFullYear(),i=n>0?n:1-n;return a.ordinalNumber(i,{unit:"year"})}return Fi.y(t,s)},Y:function(t,s,a,n){var i=Y5(t,n),o=i>0?i:1-i;if(s==="YY"){var l=o%100;return Kt(l,2)}return s==="Yo"?a.ordinalNumber(o,{unit:"year"}):Kt(o,s.length)},R:function(t,s){var a=K5(t);return Kt(a,s.length)},u:function(t,s){var a=t.getUTCFullYear();return Kt(a,s.length)},Q:function(t,s,a){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return Kt(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,a){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return Kt(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,a){var n=t.getUTCMonth();switch(s){case"M":case"MM":return Fi.M(t,s);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,a){var n=t.getUTCMonth();switch(s){case"L":return String(n+1);case"LL":return Kt(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,a,n){var i=OE(t,n);return s==="wo"?a.ordinalNumber(i,{unit:"week"}):Kt(i,s.length)},I:function(t,s,a){var n=AE(t);return s==="Io"?a.ordinalNumber(n,{unit:"week"}):Kt(n,s.length)},d:function(t,s,a){return s==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):Fi.d(t,s)},D:function(t,s,a){var n=SE(t);return s==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):Kt(n,s.length)},E:function(t,s,a){var n=t.getUTCDay();switch(s){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,a,n){var i=t.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(o);case"ee":return Kt(o,2);case"eo":return a.ordinalNumber(o,{unit:"day"});case"eee":return a.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"});case"eeee":default:return a.day(i,{width:"wide",context:"formatting"})}},c:function(t,s,a,n){var i=t.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(o);case"cc":return Kt(o,s.length);case"co":return a.ordinalNumber(o,{unit:"day"});case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"});case"cccc":default:return a.day(i,{width:"wide",context:"standalone"})}},i:function(t,s,a){var n=t.getUTCDay(),i=n===0?7:n;switch(s){case"i":return String(i);case"ii":return Kt(i,s.length);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,a){var n=t.getUTCHours(),i=n/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,s,a){var n=t.getUTCHours(),i;switch(n===12?i=Ql.noon:n===0?i=Ql.midnight:i=n/12>=1?"pm":"am",s){case"b":case"bb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,s,a){var n=t.getUTCHours(),i;switch(n>=17?i=Ql.evening:n>=12?i=Ql.afternoon:n>=4?i=Ql.morning:i=Ql.night,s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,s,a){if(s==="ho"){var n=t.getUTCHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return Fi.h(t,s)},H:function(t,s,a){return s==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Fi.H(t,s)},K:function(t,s,a){var n=t.getUTCHours()%12;return s==="Ko"?a.ordinalNumber(n,{unit:"hour"}):Kt(n,s.length)},k:function(t,s,a){var n=t.getUTCHours();return n===0&&(n=24),s==="ko"?a.ordinalNumber(n,{unit:"hour"}):Kt(n,s.length)},m:function(t,s,a){return s==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Fi.m(t,s)},s:function(t,s,a){return s==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Fi.s(t,s)},S:function(t,s){return Fi.S(t,s)},X:function(t,s,a,n){var i=n._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(s){case"X":return E1(o);case"XXXX":case"XX":return Io(o);case"XXXXX":case"XXX":default:return Io(o,":")}},x:function(t,s,a,n){var i=n._originalDate||t,o=i.getTimezoneOffset();switch(s){case"x":return E1(o);case"xxxx":case"xx":return Io(o);case"xxxxx":case"xxx":default:return Io(o,":")}},O:function(t,s,a,n){var i=n._originalDate||t,o=i.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+k1(o,":");case"OOOO":default:return"GMT"+Io(o,":")}},z:function(t,s,a,n){var i=n._originalDate||t,o=i.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+k1(o,":");case"zzzz":default:return"GMT"+Io(o,":")}},t:function(t,s,a,n){var i=n._originalDate||t,o=Math.floor(i.getTime()/1e3);return Kt(o,s.length)},T:function(t,s,a,n){var i=n._originalDate||t,o=i.getTime();return Kt(o,s.length)}};function k1(e,t){var s=e>0?"-":"+",a=Math.abs(e),n=Math.floor(a/60),i=a%60;if(i===0)return s+String(n);var o=t;return s+String(n)+o+Kt(i,2)}function E1(e,t){if(e%60===0){var s=e>0?"-":"+";return s+Kt(Math.abs(e)/60,2)}return Io(e,t)}function Io(e,t){var s=t||"",a=e>0?"-":"+",n=Math.abs(e),i=Kt(Math.floor(n/60),2),o=Kt(n%60,2);return a+i+s+o}var O1=function(t,s){switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},J5=function(t,s){switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},LE=function(t,s){var a=t.match(/(P+)(p+)?/)||[],n=a[1],i=a[2];if(!i)return O1(t,s);var o;switch(n){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;case"PPPP":default:o=s.dateTime({width:"full"});break}return o.replace("{{date}}",O1(n,s)).replace("{{time}}",J5(i,s))},ME={p:J5,P:LE},DE=["D","DD"],IE=["YY","YYYY"];function RE(e){return DE.indexOf(e)!==-1}function FE(e){return IE.indexOf(e)!==-1}function T1(e,t,s){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var $E={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qE=function(t,s,a){var n,i=$E[t];return typeof i=="string"?n=i:s===1?n=i.one:n=i.other.replace("{{count}}",s.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function mc(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.width?String(t.width):e.defaultWidth,a=e.formats[s]||e.formats[e.defaultWidth];return a}}var BE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},UE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WE={date:mc({formats:BE,defaultWidth:"full"}),time:mc({formats:zE,defaultWidth:"full"}),dateTime:mc({formats:UE,defaultWidth:"full"})},VE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HE=function(t,s,a,n){return VE[t]};function En(e){return function(t,s){var a=s!=null&&s.context?String(s.context):"standalone",n;if(a==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=s!=null&&s.width?String(s.width):i;n=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=s!=null&&s.width?String(s.width):e.defaultWidth;n=e.values[c]||e.values[l]}var d=e.argumentCallback?e.argumentCallback(t):t;return n[d]}}var GE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},YE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},QE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZE=function(t,s){var a=Number(t),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},eO={ordinalNumber:ZE,era:En({values:GE,defaultWidth:"wide"}),quarter:En({values:KE,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:En({values:YE,defaultWidth:"wide"}),day:En({values:JE,defaultWidth:"wide"}),dayPeriod:En({values:XE,defaultWidth:"wide",formattingValues:QE,defaultFormattingWidth:"wide"})};function On(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(n);if(!i)return null;var o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?rO(l,function(h){return h.test(o)}):tO(l,function(h){return h.test(o)}),d;d=e.valueCallback?e.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;var u=t.slice(o.length);return{value:d,rest:u}}}function tO(e,t){for(var s in e)if(e.hasOwnProperty(s)&&t(e[s]))return s}function rO(e,t){for(var s=0;s<e.length;s++)if(t(e[s]))return s}function X5(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(e.matchPattern);if(!a)return null;var n=a[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;var l=t.slice(n.length);return{value:o,rest:l}}}var sO=/^(\d+)(th|st|nd|rd)?/i,aO=/\d+/i,nO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iO={any:[/^b/i,/^(a|c)/i]},oO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lO={any:[/1/i,/2/i,/3/i,/4/i]},cO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xO={ordinalNumber:X5({matchPattern:sO,parsePattern:aO,valueCallback:function(t){return parseInt(t,10)}}),era:On({matchPatterns:nO,defaultMatchWidth:"wide",parsePatterns:iO,defaultParseWidth:"any"}),quarter:On({matchPatterns:oO,defaultMatchWidth:"wide",parsePatterns:lO,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:On({matchPatterns:cO,defaultMatchWidth:"wide",parsePatterns:dO,defaultParseWidth:"any"}),day:On({matchPatterns:uO,defaultMatchWidth:"wide",parsePatterns:hO,defaultParseWidth:"any"}),dayPeriod:On({matchPatterns:mO,defaultMatchWidth:"any",parsePatterns:fO,defaultParseWidth:"any"})},Q5={code:"en-US",formatDistance:qE,formatLong:WE,formatRelative:HE,localize:eO,match:xO,options:{weekStartsOn:0,firstWeekContainsDate:1}},pO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bO=/^'([^]*?)'?$/,vO=/''/g,yO=/[a-zA-Z]/;function nm(e,t,s){var a,n,i,o,l,c,d,u,h,f,m,p,v,g,y,N,S,C;br(2,arguments);var M=String(t),D=mu(),L=(a=(n=s==null?void 0:s.locale)!==null&&n!==void 0?n:D.locale)!==null&&a!==void 0?a:Q5,A=sl((i=(o=(l=(c=s==null?void 0:s.firstWeekContainsDate)!==null&&c!==void 0?c:s==null||(d=s.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:D.firstWeekContainsDate)!==null&&o!==void 0?o:(h=D.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=sl((m=(p=(v=(g=s==null?void 0:s.weekStartsOn)!==null&&g!==void 0?g:s==null||(y=s.locale)===null||y===void 0||(N=y.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&v!==void 0?v:D.weekStartsOn)!==null&&p!==void 0?p:(S=D.locale)===null||S===void 0||(C=S.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&m!==void 0?m:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var H=ur(e);if(!hE(H))throw new RangeError("Invalid time value");var k=Bp(H),P=NE(H,k),O={firstWeekContainsDate:A,weekStartsOn:I,locale:L,_originalDate:H},$=M.match(gO).map(function(V){var T=V[0];if(T==="p"||T==="P"){var F=ME[T];return F(V,L.formatLong)}return V}).join("").match(pO).map(function(V){if(V==="''")return"'";var T=V[0];if(T==="'")return jO(V);var F=TE[T];if(F)return!(s!=null&&s.useAdditionalWeekYearTokens)&&FE(V)&&T1(V,t,String(e)),!(s!=null&&s.useAdditionalDayOfYearTokens)&&RE(V)&&T1(V,t,String(e)),F(P,V,L.localize,O);if(T.match(yO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return V}).join("");return $}function jO(e){var t=e.match(bO);return t?t[1].replace(vO,"'"):e}function Z5(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}function wO(e){return Z5({},e)}var L1=1440,NO=2520,kx=43200,_O=86400;function SO(e,t,s){var a,n;br(2,arguments);var i=mu(),o=(a=(n=s==null?void 0:s.locale)!==null&&n!==void 0?n:i.locale)!==null&&a!==void 0?a:Q5;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=Wh(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=Z5(wO(s),{addSuffix:!!(s!=null&&s.addSuffix),comparison:l}),d,u;l>0?(d=ur(t),u=ur(e)):(d=ur(e),u=ur(t));var h=wE(u,d),f=(Bp(u)-Bp(d))/1e3,m=Math.round((h-f)/60),p;if(m<2)return s!=null&&s.includeSeconds?h<5?o.formatDistance("lessThanXSeconds",5,c):h<10?o.formatDistance("lessThanXSeconds",10,c):h<20?o.formatDistance("lessThanXSeconds",20,c):h<40?o.formatDistance("halfAMinute",0,c):h<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):m===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",m,c);if(m<45)return o.formatDistance("xMinutes",m,c);if(m<90)return o.formatDistance("aboutXHours",1,c);if(m<L1){var v=Math.round(m/60);return o.formatDistance("aboutXHours",v,c)}else{if(m<NO)return o.formatDistance("xDays",1,c);if(m<kx){var g=Math.round(m/L1);return o.formatDistance("xDays",g,c)}else if(m<_O)return p=Math.round(m/kx),o.formatDistance("aboutXMonths",p,c)}if(p=jE(u,d),p<12){var y=Math.round(m/kx);return o.formatDistance("xMonths",y,c)}else{var N=p%12,S=Math.floor(p/12);return N<3?o.formatDistance("aboutXYears",S,c):N<9?o.formatDistance("overXYears",S,c):o.formatDistance("almostXYears",S+1,c)}}function PO(e,t){return br(1,arguments),SO(e,Date.now(),t)}var CO={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},AO=function(t,s,a){var n,i=CO[t];return typeof i=="string"?n=i:s===1?n=i.one:n=i.other.replace("{{count}}",String(s)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"em "+n:"há "+n:n},kO={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},EO={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},OO={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},TO={date:mc({formats:kO,defaultWidth:"full"}),time:mc({formats:EO,defaultWidth:"full"}),dateTime:mc({formats:OO,defaultWidth:"full"})},LO={lastWeek:function(t){var s=t.getUTCDay(),a=s===0||s===6?"último":"última";return"'"+a+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},MO=function(t,s,a,n){var i=LO[t];return typeof i=="function"?i(s):i},DO={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},IO={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},RO={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},FO={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},$O={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},qO={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},BO=function(t,s){var a=Number(t);return(s==null?void 0:s.unit)==="week"?a+"ª":a+"º"},zO={ordinalNumber:BO,era:En({values:DO,defaultWidth:"wide"}),quarter:En({values:IO,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:En({values:RO,defaultWidth:"wide"}),day:En({values:FO,defaultWidth:"wide"}),dayPeriod:En({values:$O,defaultWidth:"wide",formattingValues:qO,defaultFormattingWidth:"wide"})},UO=/^(\d+)[ºªo]?/i,WO=/\d+/i,VO={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},HO={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},GO={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},KO={any:[/1/i,/2/i,/3/i,/4/i]},YO={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},JO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},XO={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},QO={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},ZO={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},e8={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},t8={ordinalNumber:X5({matchPattern:UO,parsePattern:WO,valueCallback:function(t){return parseInt(t,10)}}),era:On({matchPatterns:VO,defaultMatchWidth:"wide",parsePatterns:HO,defaultParseWidth:"any"}),quarter:On({matchPatterns:GO,defaultMatchWidth:"wide",parsePatterns:KO,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:On({matchPatterns:YO,defaultMatchWidth:"wide",parsePatterns:JO,defaultParseWidth:"any"}),day:On({matchPatterns:XO,defaultMatchWidth:"wide",parsePatterns:QO,defaultParseWidth:"any"}),dayPeriod:On({matchPatterns:ZO,defaultMatchWidth:"any",parsePatterns:e8,defaultParseWidth:"any"})},e4={code:"pt-BR",formatDistance:AO,formatLong:TO,formatRelative:MO,localize:zO,match:t8,options:{weekStartsOn:0,firstWeekContainsDate:1}};const r8=()=>{const{unreadCount:e,isVisible:t,setIsVisible:s}=Ta();return r.jsxs("button",{onClick:()=>s(!t),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx(Cp,{className:"w-6 h-6"}),e>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:e>9?"9+":e})]})},s8=()=>{const{notifications:e,unreadCount:t,isVisible:s,setIsVisible:a,markAsRead:n,markAllAsRead:i,deleteNotification:o,notificationTypes:l,loading:c}=Ta(),[d,u]=j.useState("all"),h=Vt();if(!s)return null;const f=e.filter(y=>d==="all"?!0:d==="unread"?!y.read:y.type===d),m=async y=>{y.read||await n(y.id),y.action_url&&(h(y.action_url),a(!1))},p=async(y,N)=>{y.stopPropagation(),await n(N)},v=async(y,N)=>{y.stopPropagation(),await o(N)},g=y=>{try{return PO(new Date(y),{addSuffix:!0,locale:e4})}catch{return"Agora mesmo"}};return r.jsxs("div",{className:"absolute right-0 top-12 w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-[600px] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-brand-brown to-amber-600 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Cp,{className:"w-5 h-5"}),r.jsx("h3",{className:"font-semibold text-lg",children:"Notificações"}),t>0&&r.jsxs("span",{className:"bg-white bg-opacity-20 text-white text-xs px-2 py-1 rounded-full",children:[t," nova",t!==1?"s":""]})]}),r.jsx("button",{onClick:()=>a(!1),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"p-3 border-b border-gray-100 bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(g5,{className:"w-4 h-4 text-gray-500"}),r.jsxs("select",{value:d,onChange:y=>u(y.target.value),className:"text-sm border border-gray-200 rounded-lg px-2 py-1 focus:ring-2 focus:ring-brand-brown focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todas"}),r.jsx("option",{value:"unread",children:"Não lidas"}),r.jsx("option",{value:"financial",children:"Financeiro"}),r.jsx("option",{value:"stock",children:"Estoque"}),r.jsx("option",{value:"hr",children:"RH"}),r.jsx("option",{value:"alert",children:"Alertas"})]})]}),t>0&&r.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-sm text-brand-brown hover:text-brand-brown/80 font-medium",children:[r.jsx(bC,{className:"w-4 h-4"}),"Marcar todas como lidas"]})]})}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-brown border-t-transparent rounded-full mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Carregando notificações..."})]}):f.length===0?r.jsxs("div",{className:"p-6 text-center",children:[r.jsx(Cp,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 font-medium",children:d==="unread"?"Nenhuma notificação não lida":"Nenhuma notificação"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:d==="all"?"Você está em dia! 🎉":"Tudo certo por aqui!"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:f.map(y=>{const N=l[y.type]||l.info,S=N.icon;return r.jsx("div",{onClick:()=>m(y),className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors group ${y.read?"":"bg-blue-50 border-l-4 border-blue-500"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${N.bgColor} ${N.borderColor} border`,children:r.jsx(S,{className:`w-4 h-4 ${N.color}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("h4",{className:`font-medium text-sm ${y.read?"text-gray-700":"text-gray-900"}`,children:y.title}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!y.read&&r.jsx("button",{onClick:C=>p(C,y.id),className:"p-1 text-green-600 hover:bg-green-100 rounded transition-colors",title:"Marcar como lida",children:r.jsx(Xg,{className:"w-3 h-3"})}),r.jsx("button",{onClick:C=>v(C,y.id),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-3 h-3"})})]})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:y.message}),r.jsxs("div",{className:"flex items-center justify-between mt-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(Ds,{className:"w-3 h-3"}),g(y.created_at)]}),y.action_url&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-brand-brown font-medium",children:["Ver detalhes",r.jsx(Gi,{className:"w-3 h-3"})]})]}),y.priority==="high"&&r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Zt,{className:"w-3 h-3 text-red-500"}),r.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Alta prioridade"})]})]})]})},y.id)})})}),f.length>0&&r.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50",children:r.jsxs("button",{onClick:()=>{h("/admin/configuracoes?tab=notificacoes"),a(!1)},className:"w-full flex items-center justify-center gap-2 text-sm text-gray-600 hover:text-gray-900 py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx(b5,{className:"w-4 h-4"}),"Configurar notificações"]})})]})},a8=()=>r.jsxs("div",{className:"relative",children:[r.jsx(r8,{}),r.jsx(s8,{})]}),n8=()=>{var D;const{user:e,logout:t,profile:s}=ar(),{getCartItemsCountSafe:a}=Lc(),{isDark:n}=_5(),[i,o]=j.useState(!1),[l,c]=j.useState(!1),d=j.useRef(null),u=Vt(),h=Qg(),[f,m]=j.useState(!1),p=[{label:"Início",href:"/"},{label:"Marketplace",href:"/marketplace"},{label:"Gamificação",href:"/gamificacao"},{label:"Cursos",href:"/cursos"},{label:"Blog",href:"/blog"},{label:"Sobre",href:"/sobre"},{label:"Contato",href:"/contato"}];j.useEffect(()=>{const L=A=>{d.current&&!d.current.contains(A.target)&&c(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]),j.useEffect(()=>{const L=()=>{m(window.scrollY>20)};return window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L)},[]),j.useEffect(()=>{i&&o(!1)},[h.pathname]);const v=async()=>{await t(),c(!1),u("/")},g=L=>L.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2),y=(...L)=>L.filter(Boolean).join(" "),N=L=>h.pathname===L,S=!!e,C=(s==null?void 0:s.name)||((D=e==null?void 0:e.user_metadata)==null?void 0:D.name)||"Usuário",M=(s==null?void 0:s.role)||"customer";return r.jsx("header",{className:y("sticky top-0 z-50 transition-all duration-300",f||i?"backdrop-blur-sm shadow-lg":"backdrop-blur-none shadow-none"),style:{backgroundColor:f||i?"var(--color-bg-secondary)":"var(--color-bg-primary)",borderBottom:f||i?"1px solid var(--color-border-primary)":"1px solid transparent"},children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 md:h-20",children:[r.jsx(ct,{to:"/",className:"flex items-center shrink-0","aria-label":"Mestres do Café - Página Inicial",children:r.jsx(rl,{size:"medium",showText:!0,variant:"light"})}),r.jsx("nav",{className:"hidden lg:flex items-center space-x-5 xl:space-x-6","aria-label":"Navegação Principal",children:p.map(L=>r.jsxs(ct,{to:L.href,className:y("text-sm font-medium transition-colors duration-200 relative group",N(L.href)?"text-[var(--color-accent-primary)]":"hover:text-[var(--color-accent-primary)]"),style:{color:N(L.href)?"var(--color-accent-primary)":"var(--color-text-primary)"},children:[L.label,r.jsx("span",{className:y("absolute -bottom-1 left-0 h-[2px] transition-all duration-300",N(L.href)?"w-full":"w-0 group-hover:w-full"),style:{backgroundColor:"var(--color-accent-primary)"},"aria-hidden":"true"})]},L.label))}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(A1,{size:"md",className:"mr-1"}),S&&r.jsx("div",{className:"hidden lg:block",children:r.jsx(a8,{})}),r.jsx("div",{className:"hidden lg:block",children:r.jsx(lE,{})}),S?r.jsxs("div",{className:"hidden lg:flex items-center space-x-3 relative",ref:d,children:[r.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-brand-brown/10 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-brand-brown text-white rounded-full flex items-center justify-center text-sm font-medium",children:g(C)}),r.jsx("span",{className:"text-sm font-medium text-brand-dark",children:C})]}),l&&r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[r.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:C}),r.jsx("p",{className:"text-xs text-gray-500 capitalize",children:M.replace("_"," ")})]}),r.jsx(ct,{to:"/perfil",onClick:()=>c(!1),children:r.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4"}),"Meu Perfil"]})}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="super_admin")&&r.jsx(ct,{to:"/admin",onClick:()=>c(!1),children:r.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4"}),"Admin"]})}),r.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:r.jsxs("button",{onClick:v,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(vC,{className:"w-4 h-4"}),"Sair"]})})]})]}):r.jsxs("div",{className:"hidden lg:flex items-center space-x-1",children:[r.jsx(ct,{to:"/login",children:r.jsx("button",{className:"px-3 py-2 text-sm rounded-md transition-colors theme-btn-secondary",style:{color:"var(--color-text-primary)"},children:"Entrar"})}),r.jsx("span",{className:"hidden md:inline",style:{color:"var(--color-text-muted)"},children:"|"}),r.jsx(ct,{to:"/registro",children:r.jsx("button",{className:"px-3 py-2 text-sm shadow-md hover:shadow-lg transition-all rounded-md",style:{backgroundColor:"var(--color-accent-primary)",color:"var(--color-text-inverse)"},children:"Cadastrar"})})]}),r.jsx("button",{className:"lg:hidden p-2 text-brand-dark hover:text-brand-brown focus:outline-none focus:ring-2 focus:ring-inset focus:ring-brand-brown rounded-md",onClick:()=>o(!i),"aria-label":i?"Fechar menu de navegação":"Abrir menu de navegação","aria-expanded":i,"aria-controls":"mobile-menu",children:i?r.jsx(Nr,{className:"w-6 h-6"}):r.jsx(yC,{className:"w-6 h-6"})})]})]}),r.jsx("div",{id:"mobile-menu",className:y("lg:hidden overflow-hidden transition-all duration-300 ease-in-out",i?"max-h-[calc(100vh-4rem)] opacity-100 py-3 border-t border-brand-brown/10":"max-h-0 opacity-0 py-0 border-t border-transparent"),children:r.jsxs("nav",{className:"flex flex-col space-y-1.5","aria-label":"Navegação Móvel",children:[p.map(L=>r.jsx(ct,{to:L.href,onClick:()=>o(!1),className:y("block font-medium py-2.5 px-3 rounded-md transition-colors text-base",N(L.href)?"bg-brand-brown/10 text-brand-brown":"text-brand-dark hover:bg-brand-brown/5 hover:text-brand-brown"),children:L.label},`mobile-${L.label}`)),S?r.jsxs("div",{className:"mt-3 pt-3 border-t border-brand-brown/10",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-sm",children:[r.jsx("div",{className:"w-8 h-8 bg-brand-brown text-white rounded-full flex items-center justify-center text-sm font-medium",children:g(C)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-brand-dark",children:C}),r.jsx("div",{className:"text-xs text-gray-500 capitalize",children:M.replace("_"," ")})]})]}),r.jsx("button",{onClick:()=>{v(),o(!1)},className:"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-md",children:"Sair"})]}):r.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t border-brand-brown/10",children:[r.jsx(ct,{to:"/login",className:"flex-1",children:r.jsx("button",{className:"border-2 border-brand-brown text-brand-brown hover:bg-brand-brown/10 justify-center w-full py-2 px-4 rounded-md transition-colors bg-white",onClick:()=>o(!1),children:"Entrar"})}),r.jsx(ct,{to:"/registro",className:"flex-1",children:r.jsx("button",{className:"bg-brand-brown hover:bg-brand-brown/90 text-brand-light justify-center w-full py-2 px-4 rounded-md transition-colors",onClick:()=>o(!1),children:"Cadastrar"})})]}),r.jsx(ct,{to:"/carrinho",children:r.jsxs("button",{className:"flex items-center justify-start w-full mt-2 py-2.5 px-3 text-base rounded-md transition-colors theme-btn-secondary",onClick:()=>o(!1),style:{color:"var(--color-text-primary)"},children:[r.jsx(pn,{className:"w-5 h-5 mr-2"}),"Carrinho",a()>0&&r.jsx("span",{className:"ml-auto text-xs rounded-full w-5 h-5 flex items-center justify-center",style:{backgroundColor:"var(--color-accent-primary)",color:"var(--color-text-inverse)"},children:a()})]})}),r.jsxs("div",{className:"flex items-center justify-between w-full mt-2 py-2.5 px-3",children:[r.jsx("span",{style:{color:"var(--color-text-primary)"},className:"text-base",children:"Tema"}),r.jsx(A1,{size:"md"})]})]})})]})})},i8=()=>{const e=new Date().getFullYear();return r.jsx("footer",{className:"bg-brand-dark text-white",children:r.jsxs("div",{className:"container mx-auto px-4 py-12 md:py-16",children:[r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-10",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx(ct,{to:"/",className:"mb-5 group","aria-label":"Mestres do Café - Página Inicial",children:r.jsx(rl,{size:"large",showText:!0,variant:"dark",textColor:"text-white group-hover:text-brand-brown transition-colors"})}),r.jsx("p",{className:"text-brand-light/80 mb-6 max-w-md text-sm leading-relaxed",children:"Conectando você aos melhores cafés especiais do Brasil. Qualidade, tradição e sabor em cada xícara, desde 2019."}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("a",{href:"https://instagram.com/mestresdocafe",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram Mestres do Café",className:"w-9 h-9 bg-brand-light/10 rounded-full flex items-center justify-center hover:bg-brand-brown transition-colors",children:r.jsx(jC,{className:"w-4 h-4"})}),r.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook Mestres do Café",className:"w-9 h-9 bg-brand-light/10 rounded-full flex items-center justify-center hover:bg-brand-brown transition-colors",children:r.jsx(v5,{className:"w-4 h-4"})}),r.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter Mestres do Café",className:"w-9 h-9 bg-brand-light/10 rounded-full flex items-center justify-center hover:bg-brand-brown transition-colors",children:r.jsx(y5,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-base font-semibold mb-4 uppercase tracking-wider",children:"Links Rápidos"}),r.jsx("ul",{className:"space-y-2.5 text-sm",children:[{label:"Marketplace",href:"/marketplace"},{label:"Gamificação",href:"/gamificacao"},{label:"Cursos",href:"/cursos"},{label:"Blog",href:"/blog"},{label:"Sobre Nós",href:"/sobre"},{label:"Contato",href:"/contato"}].map(t=>r.jsx("li",{children:r.jsx(ct,{to:t.href,className:"text-brand-light/80 hover:text-brand-brown transition-colors",children:t.label})},t.label))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-base font-semibold mb-4 uppercase tracking-wider",children:"Contato"}),r.jsxs("div",{className:"space-y-3.5 text-sm",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ds,{className:"w-4 h-4 text-brand-brown mt-0.5 flex-shrink-0"}),r.jsx("a",{href:"mailto:financeiro.mestresdocafe@gmail.com",className:"text-brand-light/80 hover:text-brand-brown break-all transition-colors",children:"financeiro.mestresdocafe@gmail.com"})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(us,{className:"w-4 h-4 text-brand-brown mt-0.5 flex-shrink-0"}),r.jsx("a",{href:"tel:+55996458600",className:"text-brand-light/80 hover:text-brand-brown transition-colors",children:"(55) 99645-8600"})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(hs,{className:"w-4 h-4 text-brand-brown mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-brand-light/80",children:"Rua Riachuelo 351, Sala 102. Centro, Santa Maria / RS"})]})]})]})]}),r.jsx("div",{className:"border-t border-brand-light/10 mt-10 pt-8 text-center",children:r.jsxs("p",{className:"text-xs text-brand-light/60",children:["© ",e," Mestres do Café. Todos os direitos reservados. CNPJ: XX.XXX.XXX/0001-XX"]})})]})})},o8=ob("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function wc({className:e,variant:t,...s}){const a=(...n)=>n.filter(Boolean).join(" ");return r.jsx("div",{className:a(o8({variant:t}),e),...s})}var Nc={};const lb=typeof window>"u"&&typeof process<"u",cb=typeof window<"u",Ex="https://uicpqeruwwbnqbykymaj.supabase.co",Ox="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpY3BxZXJ1d3dibnFieWt5bWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzODM3NjksImV4cCI6MjA2NTk1OTc2OX0.hn-R8WzjKEqnusblaIWKZjCbm-nDqfBP5VQKymshMsM",db=cb?Ex:lb&&(Nc.VITE_SUPABASE_URL||Nc.SUPABASE_URL)||Ex,t4=cb?Ox:lb&&(Nc.VITE_SUPABASE_ANON_KEY||Nc.SUPABASE_ANON_KEY)||Ox,M1=cb?void 0:lb?Nc.VITE_SUPABASE_SERVICE_ROLE_KEY||Nc.SUPABASE_SERVICE_ROLE_KEY:null;!db||!t4?console.warn("⚠️ Variáveis VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY não encontradas, usando credenciais padrão"):console.log("✅ Configurações do Supabase carregadas com sucesso");const l8=ib(db,t4,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"mestres-do-cafe-frontend"}}});M1&&ib(db,M1,{auth:{autoRefreshToken:!1,persistSession:!1},global:{headers:{"X-Client-Info":"mestres-do-cafe-admin"}}});const c8=async(e,t={},s={})=>{try{const{orderBy:a="created_at",ascending:n=!1,limit:i=null,select:o="*"}=s;let l=l8.from(e).select(o);Object.entries(t).forEach(([u,h])=>{h!=null&&(typeof h=="boolean"?l=l.eq(u,h):typeof h=="string"&&h.includes("%")?l=l.ilike(u,h):Array.isArray(h)?l=l.in(u,h):l=l.eq(u,h))}),l=l.order(a,{ascending:n}),i&&(l=l.limit(i));const{data:c,error:d}=await l;return d?(console.error(`❌ Erro ao buscar ${e} com filtros:`,d),{success:!1,data:[],error:d.message}):(console.log(`✅ ${e} filtrado: ${(c==null?void 0:c.length)||0} registros`),{success:!0,data:c||[]})}catch(a){return console.error(`❌ Erro genérico ao buscar ${e} filtrado:`,a),{success:!1,data:[],error:a.message}}},d8=async(e=3)=>{try{console.log("🌟 Buscando testimonials em destaque...");const{data:t,error:s}=await ge.from("testimonials").select("*").eq("is_active",!0).eq("is_featured",!0).order("created_at",{ascending:!1}).limit(e);return s?(console.error("❌ Erro ao buscar testimonials em destaque:",s),{success:!1,error:s.message,data:[]}):(console.log(`✅ ${(t==null?void 0:t.length)||0} testimonials em destaque carregados`),{success:!0,data:t||[]})}catch(t){return console.error("❌ Erro na API getFeaturedTestimonials:",t),{success:!1,error:t.message,data:[]}}},u8=()=>{const{data:e,loading:t,error:s,execute:a}=oE([]),[n,i]=j.useState([]),[o,l]=j.useState(!1);j.useEffect(()=>{c(),h()},[]);const c=async()=>{await a(async()=>{const f=await c8("products",{is_featured:!0,is_active:!0},{limit:3,orderBy:"sca_score",ascending:!1});if(f.success&&f.data){const m=f.data.map(p=>({id:p.id,name:p.name,description:p.description,origin:p.origin||"Brasil",price:p.price,originalPrice:p.original_price,rating:p.rating||p.sca_score?p.sca_score/20:null,sca:p.sca_score||85,images:p.images||[]}));return console.log("✅ Produtos em destaque carregados:",m.length),m}else throw new Error(f.error||"Erro ao carregar produtos em destaque")})},d=[{number:"500+",label:"Clientes Satisfeitos"},{number:"50+",label:"Cafés Especiais"},{number:"5",label:"Anos de Experiência"},{number:"95%",label:"Avaliações 5 Estrelas"}],u=[{icon:r.jsx(Dr,{className:"w-6 h-6"}),title:"Certificação SCA",description:"Todos os nossos cafés possuem pontuação SCA acima de 80 pontos"},{icon:r.jsx(Ka,{className:"w-6 h-6"}),title:"Frete Grátis",description:"Entrega gratuita para compras acima de R$ 99 em todo o Brasil"},{icon:r.jsx(Is,{className:"w-6 h-6"}),title:"Compra Segura",description:"Pagamento seguro com garantia de qualidade ou dinheiro de volta"},{icon:r.jsx(yt,{className:"w-6 h-6"}),title:"Frescor Garantido",description:"Torrefação semanal para garantir máximo frescor e sabor"}],h=async()=>{l(!0);try{const f=await d8(3);f.success?(i(f.data),console.log(`✅ ${f.data.length} testimonials carregados`)):(console.log("⚠️ Erro ao carregar testimonials:",f.error),i([]))}catch(f){console.error("❌ Erro ao carregar testimonials:",f),i([])}finally{l(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 to-white",children:[r.jsxs("section",{className:"hero-section relative bg-brand-light overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-light via-amber-50 to-transparent"}),r.jsx("div",{className:"hidden lg:block absolute top-20 right-20 w-32 h-32 bg-brand-brown/5 rounded-full blur-3xl"}),r.jsx("div",{className:"hidden lg:block absolute bottom-40 left-10 w-24 h-24 bg-amber-200/30 rounded-full blur-2xl"}),r.jsx("div",{className:"hidden lg:block absolute top-1/2 left-1/4 w-2 h-2 bg-brand-brown/20 rounded-full"}),r.jsx("div",{className:"hidden lg:block absolute top-1/3 right-1/3 w-1 h-1 bg-brand-brown/30 rounded-full"})]}),r.jsx("div",{className:"relative container mx-auto px-4 py-16 z-10 lg:hidden",children:r.jsxs("div",{className:"text-center",children:[r.jsxs(wc,{variant:"outline",className:"mb-6 bg-brand-brown/10 text-brand-brown px-4 py-2 text-sm font-semibold border-brand-brown/30 rounded-xl inline-flex items-center",children:[r.jsx(Dr,{className:"w-4 h-4 mr-2"}),"SCA & Torra Artesanal"]}),r.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-brand-dark font-serif mb-4 leading-tight",children:["Cafés Especiais",r.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-brand-brown via-yellow-600 to-amber-700 mt-2",children:"Direto do Produtor"})]}),r.jsxs("p",{className:"text-lg text-brand-dark mb-8 leading-relaxed",children:["Descubra sabores únicos dos melhores cafés especiais do Brasil.",r.jsx("span",{className:"block mt-2 text-brand-brown font-bold",children:"Pontuação SCA acima de 80 pontos"})]}),r.jsxs("div",{className:"space-y-3 mb-12",children:[r.jsx(ct,{to:"/marketplace",className:"block",children:r.jsxs(Vs,{size:"lg",className:"bg-gradient-to-r from-brand-brown to-brand-brown/90 hover:from-brand-brown/90 hover:to-brand-brown text-white px-8 py-4 text-lg font-bold shadow-xl transform hover:scale-105 transition-all duration-300 w-full rounded-xl",children:["Explorar Cafés",r.jsx(ni,{className:"ml-3 w-5 h-5"})]})}),r.jsx(ct,{to:"/sobre",className:"block",children:r.jsxs(Vs,{variant:"outline",size:"lg",className:"border-2 border-brand-brown bg-white/95 text-brand-brown hover:bg-brand-brown hover:text-white px-8 py-4 text-lg font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 w-full rounded-xl",children:[r.jsx(Ap,{className:"mr-3 w-5 h-5"}),"Ver Processo"]})})]}),r.jsx("div",{className:"relative max-w-sm mx-auto",children:r.jsxs("div",{className:"relative w-full h-64 bg-gradient-to-br from-brand-brown/10 to-amber-100 rounded-2xl shadow-xl flex items-center justify-center overflow-hidden border border-brand-brown/20",children:[r.jsx("img",{src:"/images/caneca-mestres-cafe.jpg",alt:"Caneca Mestres do Café",className:"w-full h-full object-cover rounded-2xl",loading:"lazy",onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}}),r.jsxs("div",{className:"hidden w-full h-full items-center justify-center flex-col bg-gradient-to-br from-brand-brown/10 to-amber-100 rounded-2xl",children:[r.jsx("div",{className:"w-24 h-24 bg-brand-brown/20 rounded-2xl flex items-center justify-center mb-4",children:r.jsx(yt,{className:"w-12 h-12 text-brand-brown"})}),r.jsx("h3",{className:"text-xl font-bold text-brand-brown font-serif",children:"Mestres do Café"})]})]})})]})}),r.jsx("div",{className:"hidden lg:block relative container mx-auto px-4 py-32 xl:py-40 z-10",children:r.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[r.jsx("div",{className:"animate-fade-in-up",children:r.jsxs(wc,{variant:"outline",className:"mb-8 bg-brand-brown/10 text-brand-brown hover:bg-brand-brown/20 px-6 py-3 text-base font-semibold border-brand-brown/30 rounded-2xl transition-all duration-300 hover:scale-105 inline-flex items-center",children:[r.jsx(Dr,{className:"w-5 h-5 mr-3"}),"Certificação SCA & Torra Artesanal"]})}),r.jsx("div",{className:"animate-fade-in-up animation-delay-200",children:r.jsxs("h1",{className:"text-6xl xl:text-7xl 2xl:text-8xl font-bold text-brand-dark font-serif mb-8 leading-tight",children:[r.jsx("span",{className:"block",children:"Cafés Especiais"}),r.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-brand-brown via-yellow-600 to-amber-700 mt-4",children:"Direto do Produtor"})]})}),r.jsx("div",{className:"animate-fade-in-up animation-delay-400",children:r.jsxs("p",{className:"text-xl lg:text-2xl xl:text-3xl text-brand-dark mb-16 max-w-5xl mx-auto leading-relaxed",children:["Descubra sabores únicos dos melhores cafés especiais do Brasil. Nossos grãos possuem"," ",r.jsx("span",{className:"text-brand-brown font-bold bg-brand-brown/10 px-3 py-1 rounded-lg",children:"pontuação SCA acima de 80 pontos"}),", passam por torrefação artesanal e chegam frescos até você."]})}),r.jsx("div",{className:"animate-fade-in-up animation-delay-600",children:r.jsxs("div",{className:"flex gap-6 justify-center items-center mb-20",children:[r.jsx(ct,{to:"/marketplace",children:r.jsxs(Vs,{size:"lg",className:"bg-gradient-to-r from-brand-brown to-brand-brown/90 hover:from-brand-brown/90 hover:to-brand-brown text-white px-12 py-6 text-xl font-bold shadow-2xl hover:shadow-3xl transform hover:-translate-y-2 hover:scale-105 transition-all duration-300 rounded-2xl",children:["Explorar Cafés",r.jsx(ni,{className:"ml-3 w-6 h-6"})]})}),r.jsx(ct,{to:"/sobre",children:r.jsxs(Vs,{variant:"outline",size:"lg",className:"border-2 border-brand-brown bg-white/95 text-brand-brown hover:bg-brand-brown hover:text-white px-12 py-6 text-xl font-bold shadow-xl hover:shadow-2xl transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 rounded-2xl",children:[r.jsx(Ap,{className:"mr-3 w-6 h-6"}),"Ver Processo"]})})]})}),r.jsx("div",{className:"animate-fade-in-up animation-delay-800",children:r.jsxs("div",{className:"relative max-w-4xl mx-auto group",children:[r.jsx("div",{className:"absolute -inset-8 bg-gradient-to-r from-brand-brown/30 via-yellow-600/40 to-amber-500/30 rounded-3xl blur-3xl opacity-20 group-hover:opacity-40 transition-all duration-700 transform group-hover:rotate-2 group-hover:scale-110"}),r.jsxs("div",{className:"relative w-full h-96 xl:h-[28rem] theme-bg-secondary rounded-3xl shadow-2xl group-hover:shadow-4xl transition-all duration-700 flex items-center justify-center overflow-hidden border-2 border-brand-brown/20 group-hover:border-brand-brown/40",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),r.jsx("img",{src:"/images/caneca-mestres-cafe.jpg",alt:"Caneca Mestres do Café - Cafés Especiais Premium",className:"w-full h-full object-cover rounded-3xl transform group-hover:scale-110 transition-all duration-700 filter group-hover:brightness-110",loading:"lazy",onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}}),r.jsxs("div",{className:"hidden w-full h-full items-center justify-center flex-col theme-bg-secondary rounded-3xl relative",children:[r.jsxs("div",{className:"absolute inset-0 opacity-10",children:[r.jsx("div",{className:"absolute top-10 left-10 w-4 h-4 bg-brand-brown rounded-full"}),r.jsx("div",{className:"absolute top-20 right-16 w-2 h-2 bg-brand-brown rounded-full"}),r.jsx("div",{className:"absolute bottom-16 left-20 w-3 h-3 bg-brand-brown rounded-full"}),r.jsx("div",{className:"absolute bottom-10 right-10 w-5 h-5 bg-brand-brown rounded-full"})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-brand-brown/30 rounded-full blur-3xl scale-150 group-hover:scale-200 transition-transform duration-500"}),r.jsx("div",{className:"relative w-40 h-40 bg-gradient-to-br from-brand-brown/20 to-brand-brown/40 rounded-3xl flex items-center justify-center mb-8",children:r.jsx(yt,{className:"w-24 h-24 text-brand-brown drop-shadow-2xl"})})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-3xl font-bold text-brand-brown mb-2 font-serif",children:"Mestres do Café"}),r.jsx("p",{className:"text-lg theme-text-primary opacity-80 font-medium",children:"Cafés Especiais Premium"}),r.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-brand-brown to-amber-600 rounded-full mx-auto mt-4"})]})]}),r.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-brand-brown/30 rounded-tl-lg"}),r.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 border-r-2 border-t-2 border-brand-brown/30 rounded-tr-lg"}),r.jsx("div",{className:"absolute bottom-4 left-4 w-8 h-8 border-l-2 border-b-2 border-brand-brown/30 rounded-bl-lg"}),r.jsx("div",{className:"absolute bottom-4 right-4 w-8 h-8 border-r-2 border-b-2 border-brand-brown/30 rounded-br-lg"})]})]})})]})})]}),r.jsx("section",{className:"py-16 lg:py-20 bg-white transition-all duration-300",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"block md:hidden",children:r.jsxs("div",{className:"bg-gradient-to-br from-brand-brown/10 to-amber-50 rounded-2xl p-6 shadow-lg border border-brand-brown/20",children:[r.jsx("h3",{className:"text-xl font-bold text-brand-dark text-center mb-6 font-serif",children:"Nossos Números"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.map((f,m)=>r.jsxs("div",{className:"text-center bg-white/70 rounded-xl p-4 backdrop-blur-sm",children:[r.jsx("div",{className:"text-2xl font-bold text-brand-brown font-serif mb-1",children:f.number}),r.jsx("div",{className:"text-brand-dark text-xs font-medium leading-tight",children:f.label})]},m))})]})}),r.jsx("div",{className:"hidden md:block",children:r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12 max-w-5xl mx-auto",children:d.map((f,m)=>r.jsx("div",{className:"text-center group",children:r.jsxs("div",{className:"bg-gradient-to-br from-brand-brown/5 to-amber-50/50 rounded-2xl p-8 hover:shadow-2xl transition-all duration-500 border border-brand-brown/10 hover:border-brand-brown/30 transform hover:-translate-y-2",children:[r.jsx("div",{className:"text-4xl xl:text-5xl font-bold text-brand-brown font-serif mb-3 transform group-hover:scale-110 transition-all duration-300",children:f.number}),r.jsx("div",{className:"text-brand-dark text-base lg:text-lg font-medium",children:f.label})]})},m))})})]})}),r.jsxs("section",{className:"py-20 lg:py-28 bg-gradient-to-b from-white to-amber-50 relative overflow-hidden",children:[r.jsx("div",{className:"hidden lg:block absolute top-0 left-0 w-64 h-64 bg-brand-brown/5 rounded-full -translate-x-32 -translate-y-32"}),r.jsx("div",{className:"hidden lg:block absolute bottom-0 right-0 w-96 h-96 bg-brand-brown/3 rounded-full translate-x-48 translate-y-48"}),r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-16 lg:mb-20",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-brown/10 rounded-2xl mb-6 mx-auto",children:r.jsx(yt,{className:"w-8 h-8 text-brand-brown"})}),r.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-brand-dark font-serif mb-6 leading-tight",children:"Por que escolher nossos cafés?"}),r.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-brand-dark/80 max-w-3xl mx-auto leading-relaxed",children:"Oferecemos uma experiência completa em cafés especiais, do grão à xícara"})]}),r.jsx("div",{className:"block lg:hidden space-y-6",children:u.map((f,m)=>r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-brand-brown/10 overflow-hidden hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex items-start p-6",children:[r.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-brand-brown/10 to-brand-brown/20 rounded-xl flex items-center justify-center mr-4",children:ri.cloneElement(f.icon,{className:"w-7 h-7 text-brand-brown"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-brand-dark mb-2 leading-tight",children:f.title}),r.jsx("p",{className:"text-brand-dark/70 leading-relaxed",children:f.description})]})]})},m))}),r.jsx("div",{className:"hidden lg:grid lg:grid-cols-4 gap-8",children:u.map((f,m)=>r.jsx("div",{className:"group relative",children:r.jsxs("div",{className:"text-center p-8 bg-white rounded-2xl shadow-sm hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 border border-transparent hover:border-brand-brown/20 h-full",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-brown/10 to-brand-brown/20 rounded-2xl flex items-center justify-center mx-auto mb-6 text-brand-brown group-hover:scale-110 transition-transform duration-300",children:ri.cloneElement(f.icon,{className:"w-8 h-8"})}),r.jsx("div",{className:"absolute inset-0 w-16 h-16 bg-brand-brown/20 rounded-2xl mx-auto blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-300"})]}),r.jsx("h3",{className:"font-bold text-xl text-brand-dark mb-3 group-hover:text-brand-brown transition-colors duration-300 leading-tight",children:f.title}),r.jsx("p",{className:"text-brand-dark/70 leading-relaxed",children:f.description})]})},m))})]})]}),r.jsxs("section",{className:"py-20 lg:py-28 bg-amber-50 relative",children:[r.jsxs("div",{className:"absolute inset-0 opacity-5",children:[r.jsx("div",{className:"absolute top-20 left-10 w-8 h-8 bg-brand-brown rounded-full"}),r.jsx("div",{className:"absolute top-40 right-20 w-6 h-6 bg-brand-brown rounded-full"}),r.jsx("div",{className:"absolute bottom-20 left-1/4 w-4 h-4 bg-brand-brown rounded-full"}),r.jsx("div",{className:"absolute bottom-40 right-1/3 w-10 h-10 bg-brand-brown rounded-full"})]}),r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-16 lg:mb-20",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-brown/10 rounded-2xl mb-6 mx-auto",children:r.jsx(Et,{className:"w-8 h-8 text-brand-brown"})}),r.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-brand-dark font-serif mb-6 leading-tight",children:"Nossos Cafés Especiais"}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl text-brand-dark/80 max-w-3xl mx-auto leading-relaxed",children:"Conheça nossa seleção premium de cafés especiais, cuidadosamente escolhidos para você"})]}),r.jsx("div",{className:"block lg:hidden space-y-6",children:t?r.jsx(C1,{count:3}):s?r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center shadow-lg",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:r.jsx(yt,{className:"w-6 h-6 text-red-600"})}),r.jsx("h3",{className:"text-lg font-bold text-red-900 mb-2",children:"Erro ao Carregar"}),r.jsx("p",{className:"text-red-700 mb-4 text-sm",children:s}),r.jsx("button",{onClick:c,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-xl transition-all duration-300",children:"Tentar Novamente"})]}):e.length>0?e.slice(0,3).map((f,m)=>r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-brand-brown/10 overflow-hidden hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex",children:[r.jsxs("div",{className:"w-32 h-32 bg-gradient-to-br from-brand-brown/10 to-amber-100 flex items-center justify-center flex-shrink-0 overflow-hidden",children:[f.images&&f.images[0]?r.jsx("img",{src:f.images[0],alt:f.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}):null,r.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:f.images&&f.images[0]?"none":"flex"},children:r.jsx(yt,{className:"w-12 h-12 text-brand-brown/70"})})]}),r.jsxs("div",{className:"flex-1 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:"px-2 py-1 bg-brand-brown/10 text-brand-brown text-xs font-bold rounded-full",children:["SCA ",f.sca]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"w-3 h-3 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-xs text-brand-dark font-semibold",children:f.rating})]})]}),r.jsx("h3",{className:"font-serif font-bold text-lg text-brand-dark mb-1 leading-tight",children:f.name}),r.jsx("p",{className:"text-xs text-brand-brown font-medium mb-2",children:f.origin}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-bold text-lg text-brand-brown",children:["R$ ",f.price.toFixed(2).replace(".",",")]}),r.jsx(ct,{to:`/produto/${f.id}`,children:r.jsx("button",{className:"px-4 py-2 bg-brand-brown hover:bg-brand-brown/90 text-white font-semibold rounded-xl transition-all duration-300 text-sm",children:"Ver Mais"})})]})]})]})},f.id)):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-brand-brown/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(yt,{className:"w-8 h-8 text-brand-brown/60"})}),r.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-2",children:"Em breve!"}),r.jsx("p",{className:"text-brand-dark/60 mb-4",children:"Novos cafés especiais chegando."}),r.jsx("button",{onClick:c,className:"bg-brand-brown hover:bg-brand-brown/90 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300",children:"Atualizar"})]})}),r.jsx("div",{className:"hidden lg:grid lg:grid-cols-3 gap-8",children:t?r.jsx(C1,{count:3}):s?r.jsx("div",{className:"col-span-full",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-12 max-w-md mx-auto text-center shadow-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:r.jsx(yt,{className:"w-8 h-8 text-red-600"})}),r.jsx("h3",{className:"text-xl font-bold text-red-900 mb-3",children:"Erro ao Carregar Produtos"}),r.jsx("p",{className:"text-red-700 mb-6",children:s}),r.jsx("button",{onClick:c,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1",children:"Tentar Novamente"})]})}):e.length>0?e.map((f,m)=>r.jsx("div",{className:"group relative",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-md hover:shadow-2xl transition-all duration-500 overflow-hidden border border-transparent hover:border-brand-brown/20 transform hover:-translate-y-4",children:[r.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-brand-brown/10 via-amber-100/50 to-brand-brown/5 flex items-center justify-center overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),f.images&&f.images[0]?r.jsx("img",{src:f.images[0],alt:f.name,className:"w-full h-full object-cover group-hover:scale-110 transition-all duration-300",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}):null,r.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:f.images&&f.images[0]?"none":"flex"},children:r.jsx(yt,{className:"w-24 h-24 text-brand-brown/60 group-hover:text-brand-brown group-hover:scale-110 transition-all duration-300"})})]}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsxs("span",{className:"px-3 py-1.5 bg-gradient-to-r from-brand-brown/10 to-brand-brown/20 text-brand-brown text-xs font-bold rounded-full",children:["SCA ",f.sca]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-sm text-brand-dark font-semibold",children:f.rating})]})]}),r.jsx("h3",{className:"font-serif font-bold text-2xl text-brand-dark mb-2 group-hover:text-brand-brown transition-colors duration-300",children:f.name}),r.jsx("p",{className:"text-brand-dark/70 mb-2 leading-relaxed line-clamp-2",children:f.description}),r.jsx("p",{className:"text-sm text-brand-brown font-medium mb-6",children:f.origin}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-bold text-2xl text-brand-brown",children:["R$ ",f.price.toFixed(2).replace(".",",")]}),f.originalPrice&&f.originalPrice>f.price&&r.jsxs("span",{className:"text-sm text-brand-dark/60 line-through",children:["R$ ",f.originalPrice.toFixed(2).replace(".",",")]})]}),r.jsx(ct,{to:`/produto/${f.id}`,children:r.jsx("button",{className:"px-6 py-3 bg-brand-brown hover:bg-brand-brown/90 text-white font-semibold rounded-2xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Ver Detalhes"})})]})]})]})},f.id)):r.jsxs("div",{className:"col-span-full text-center py-20",children:[r.jsx("div",{className:"w-24 h-24 bg-brand-brown/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:r.jsx(yt,{className:"w-14 h-14 text-brand-brown/60"})}),r.jsx("h3",{className:"text-3xl font-bold text-brand-dark mb-4",children:"Em breve, novos cafés especiais!"}),r.jsx("p",{className:"text-lg text-brand-dark/60 mb-8 max-w-md mx-auto",children:"Estamos preparando uma seleção exclusiva para você."}),r.jsx("button",{onClick:c,className:"bg-brand-brown hover:bg-brand-brown/90 text-white font-semibold py-4 px-8 rounded-2xl transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1",children:"Atualizar Lista"})]})}),r.jsx("div",{className:"text-center mt-16 lg:mt-20",children:r.jsx(ct,{to:"/marketplace",children:r.jsxs("button",{className:"bg-gradient-to-r from-brand-brown to-brand-brown/90 hover:from-brand-brown/90 hover:to-brand-brown text-white font-bold px-10 py-4 lg:px-12 lg:py-5 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:["Ver Todos os Cafés",r.jsx(ni,{className:"ml-3 w-5 h-5 inline-block"})]})})})]})]}),r.jsx("section",{className:"py-20 lg:py-28 bg-white relative overflow-hidden",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-16 lg:mb-20",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-brown/10 rounded-2xl mb-6 mx-auto",children:r.jsx(Pt,{className:"w-8 h-8 text-brand-brown"})}),r.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-brand-dark font-serif mb-6 leading-tight",children:"O que nossos clientes dizem"}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl text-brand-dark/80 max-w-3xl mx-auto leading-relaxed",children:"Depoimentos reais de quem já experimentou nossos cafés especiais"})]}),o?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(f=>r.jsxs("div",{className:"bg-amber-50 rounded-2xl p-8 animate-pulse",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-brand-brown/20 rounded-full mr-4"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-4 bg-brand-brown/20 rounded w-24 mb-2"}),r.jsx("div",{className:"h-3 bg-brand-brown/10 rounded w-20"})]})]}),r.jsx("div",{className:"h-20 bg-brand-brown/10 rounded"})]},f))}):n.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((f,m)=>r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-8 shadow-lg border border-brand-brown/10 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsxs("div",{className:"w-12 h-12 bg-brand-brown/20 rounded-full flex items-center justify-center mr-4 flex-shrink-0",children:[f.avatar_url?r.jsx("img",{src:f.avatar_url,alt:f.name,className:"w-full h-full object-cover rounded-full",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}):null,r.jsx("div",{className:`w-full h-full flex items-center justify-center text-brand-brown font-bold text-lg ${f.avatar_url?"hidden":"flex"}`,children:f.name.charAt(0)})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-brand-dark",children:f.name}),r.jsx("p",{className:"text-brand-brown text-sm",children:f.role}),f.location&&r.jsx("p",{className:"text-brand-dark/60 text-xs",children:f.location})]})]}),r.jsxs("div",{className:"flex items-center mb-4",children:[[...Array(5)].map((p,v)=>r.jsx(Et,{className:`w-4 h-4 ${v<f.rating?"text-yellow-400 fill-current":"text-gray-300"}`},v)),r.jsxs("span",{className:"ml-2 text-sm text-brand-dark/70 font-medium",children:[f.rating,"/5"]})]}),r.jsxs("blockquote",{className:"text-brand-dark/80 italic leading-relaxed",children:['"',f.comment,'"']})]},f.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-brand-brown/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Pt,{className:"w-8 h-8 text-brand-brown/60"})}),r.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-2",children:"Em breve, depoimentos!"}),r.jsx("p",{className:"text-brand-dark/60",children:"Nossos clientes compartilharão suas experiências em breve."})]}),n.length>0&&r.jsxs("div",{className:"text-center mt-16",children:[r.jsx("p",{className:"text-lg text-brand-dark/70 mb-6",children:"Faça parte da nossa comunidade de amantes do café!"}),r.jsx(ct,{to:"/marketplace",children:r.jsxs("button",{className:"bg-brand-brown hover:bg-brand-brown/90 text-white font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:["Experimentar Nossos Cafés",r.jsx(ni,{className:"ml-2 w-5 h-5 inline-block"})]})})]})]})}),r.jsxs("section",{className:"py-16 sm:py-20 lg:py-32 bg-brand-dark text-white relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute top-0 left-0 w-48 sm:w-72 md:w-96 h-48 sm:h-72 md:h-96 bg-gradient-to-br from-brand-brown/20 to-transparent rounded-full blur-2xl sm:blur-3xl -translate-x-24 sm:-translate-x-36 md:-translate-x-48 -translate-y-24 sm:-translate-y-36 md:-translate-y-48"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-40 sm:w-60 md:w-80 h-40 sm:h-60 md:h-80 bg-gradient-to-tl from-amber-600/20 to-transparent rounded-full blur-2xl sm:blur-3xl translate-x-20 sm:translate-x-30 md:translate-x-40 translate-y-20 sm:translate-y-30 md:translate-y-40"}),r.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 hidden sm:block",children:[r.jsx("div",{className:"w-2 h-2 bg-brand-brown/30 rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-amber-400/40 rounded-full absolute top-20 left-32"}),r.jsx("div",{className:"w-1.5 h-1.5 bg-brand-brown/20 rounded-full absolute -top-16 -left-20"})]})]}),r.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-18 sm:h-18 md:w-20 md:h-20 bg-brand-brown/20 rounded-2xl sm:rounded-3xl mb-6 sm:mb-8 mx-auto",children:r.jsx(tl,{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 text-brand-brown"})}),r.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold font-serif mb-4 sm:mb-6 lg:mb-8 leading-tight px-4 sm:px-0",children:"Pronto para descobrir o seu café especial?"}),r.jsxs("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-brand-light/90 mb-8 sm:mb-12 lg:mb-16 max-w-4xl mx-auto leading-relaxed px-4 sm:px-6",children:["Junte-se a centenas de amantes do café que já descobriram sabores únicos com a gente.",r.jsx("span",{className:"block mt-1 sm:mt-2 text-brand-brown font-semibold text-sm sm:text-base md:text-lg lg:text-xl",children:"Sua jornada pelos melhores cafés do Brasil começa aqui."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 lg:gap-6 justify-center items-stretch sm:items-center mb-8 sm:mb-12 max-w-lg sm:max-w-none mx-auto",children:[r.jsx(ct,{to:"/marketplace",className:"w-full sm:w-auto flex-1 sm:flex-initial",children:r.jsxs("button",{className:"group bg-gradient-to-r from-brand-brown to-brand-brown/90 hover:from-brand-brown/90 hover:to-brand-brown text-white px-8 py-4 sm:px-12 sm:py-5 lg:px-16 lg:py-6 text-base sm:text-lg lg:text-xl font-bold rounded-xl sm:rounded-2xl shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:-translate-y-2 hover:scale-105 w-full sm:w-auto relative overflow-hidden min-h-[50px] sm:min-h-[56px]",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),r.jsxs("span",{className:"relative flex items-center justify-center",children:["Começar Jornada",r.jsx(Td,{className:"ml-2 sm:ml-3 w-5 h-5 sm:w-6 sm:h-6"})]})]})}),r.jsx(ct,{to:"/sobre",className:"w-full sm:w-auto flex-1 sm:flex-initial",children:r.jsx("button",{className:"border-2 border-brand-light/30 text-brand-light hover:bg-brand-light hover:text-brand-dark px-8 py-4 sm:px-12 sm:py-5 lg:px-16 lg:py-6 text-base sm:text-lg lg:text-xl font-bold rounded-xl sm:rounded-2xl transition-all duration-300 w-full sm:w-auto hover:shadow-xl transform hover:-translate-y-1 min-h-[50px] sm:min-h-[56px]",children:r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx("span",{className:"hidden sm:inline",children:"Nossa História"}),r.jsx("span",{className:"sm:hidden",children:"História"}),r.jsx(yt,{className:"ml-2 sm:ml-3 w-5 h-5 sm:w-6 sm:h-6"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center bg-brand-brown/10 rounded-xl p-3 sm:p-4 lg:p-6 border border-brand-brown/20",children:[r.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-brown mb-1",children:"500+"}),r.jsx("div",{className:"text-xs sm:text-sm lg:text-base text-brand-light/70 leading-tight",children:"Clientes Felizes"})]}),r.jsxs("div",{className:"text-center bg-brand-brown/10 rounded-xl p-3 sm:p-4 lg:p-6 border border-brand-brown/20",children:[r.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-brown mb-1",children:"50+"}),r.jsx("div",{className:"text-xs sm:text-sm lg:text-base text-brand-light/70 leading-tight",children:"Cafés Especiais"})]}),r.jsxs("div",{className:"text-center bg-brand-brown/10 rounded-xl p-3 sm:p-4 lg:p-6 border border-brand-brown/20",children:[r.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-brown mb-1",children:"5★"}),r.jsx("div",{className:"text-xs sm:text-sm lg:text-base text-brand-light/70 leading-tight",children:"Avaliação Média"})]}),r.jsxs("div",{className:"text-center bg-brand-brown/10 rounded-xl p-3 sm:p-4 lg:p-6 border border-brand-brown/20",children:[r.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-brown mb-1",children:"24h"}),r.jsx("div",{className:"text-xs sm:text-sm lg:text-base text-brand-light/70 leading-tight",children:"Entrega Rápida"})]})]})]})})]})]})},h8=()=>{const[e,t]=j.useState({email:"",password:""}),[s,a]=j.useState(!1),[n,i]=j.useState(""),[o,l]=j.useState(!1),{login:c,loginWithGoogle:d,profile:u,getUserProfile:h,isAdmin:f}=ar(),m=Vt(),p=[{icon:yt,title:"Cafés Premium",description:"Seleção exclusiva de grãos especiais certificados SCA"},{icon:Is,title:"Compra Segura",description:"Transações protegidas e dados seguros"},{icon:Et,title:"Qualidade Garantida",description:"Torrefação artesanal e frescor em cada entrega"}],v=N=>{t({...e,[N.target.name]:N.target.value}),n&&i("")},g=async N=>{N.preventDefault(),a(!0),i("");try{const S=await c(e.email,e.password);S.success?setTimeout(()=>{const C=h();if(C!=null&&C.criado_por_admin&&(C!=null&&C.pendente_ativacao)){console.log("Conta criada pelo admin detectada, redirecionando para ativação"),m("/ativar-conta");return}(C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin"||f?(console.log("Usuário admin detectado, redirecionando para /admin/crm"),m("/admin/crm")):(console.log("Usuário comum, redirecionando para /dashboard"),m("/dashboard"))},500):i(S.error||"Erro ao fazer login. Verifique suas credenciais.")}catch{i("Erro de conexão. Tente novamente.")}finally{a(!1)}},y=async()=>{a(!0),i("");try{const N=await d();N.success?console.log("Redirecionando para o Google..."):i(N.error||"Erro ao fazer login com Google. Tente novamente.")}catch{i("Erro de conexão. Tente novamente.")}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-slate-50",children:r.jsxs("div",{className:"grid lg:grid-cols-2 min-h-screen",children:[r.jsxs("div",{className:"hidden lg:flex bg-gradient-to-br from-slate-900 via-slate-800 to-amber-900 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_70%,rgba(245,158,11,0.1),transparent_70%)]"}),r.jsxs("div",{className:"relative flex flex-col justify-center p-12 text-white",children:[r.jsxs("div",{className:"mb-12",children:[r.jsx(rl,{size:"large",showText:!0,variant:"dark",textColor:"text-white",className:"items-start"}),r.jsx("p",{className:"text-slate-300 mt-2 ml-19",children:"Cafés especiais certificados SCA"})]}),r.jsx("div",{className:"space-y-8 mb-12",children:p.map((N,S)=>r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center flex-shrink-0",children:r.jsx(N.icon,{className:"w-6 h-6 text-amber-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white mb-1",children:N.title}),r.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:N.description})]})]},S))}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[r.jsx("div",{className:"flex items-center gap-2 mb-3",children:[1,2,3,4,5].map(N=>r.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-current"},N))}),r.jsx("p",{className:"text-white text-sm leading-relaxed mb-4",children:'"A melhor experiência em café especial. Qualidade excepcional e atendimento impecável!"'}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center",children:r.jsx(yt,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Maria Silva"}),r.jsx("div",{className:"text-slate-400 text-xs",children:"Cliente há 2 anos"})]})]})]}),r.jsx("div",{className:"absolute top-20 right-20 w-20 h-20 bg-amber-400/10 rounded-full"}),r.jsx("div",{className:"absolute bottom-20 left-20 w-32 h-32 bg-amber-400/5 rounded-full"})]})]}),r.jsx("div",{className:"flex flex-col justify-center p-8 lg:p-12",children:r.jsxs("div",{className:"max-w-md w-full mx-auto",children:[r.jsx("div",{className:"lg:hidden text-center mb-8",children:r.jsx(rl,{size:"large",showText:!0,variant:"light",className:"justify-center"})}),r.jsxs("div",{className:"text-center lg:text-left mb-8",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-3",children:"Bem-vindo de volta!"}),r.jsx("p",{className:"text-slate-600 text-lg",children:"Acesse sua conta e explore nossos cafés especiais"})]}),n&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs",children:"!"})}),r.jsx("span",{className:"text-sm",children:n})]})}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-slate-700 font-medium mb-2",children:"E-mail"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:v,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"seu@email.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-slate-700 font-medium mb-2",children:"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:o?"text":"password",id:"password",name:"password",value:e.password,onChange:v,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Sua senha"}),r.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:o?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 text-amber-600 border-slate-300 rounded focus:ring-amber-500"}),r.jsx("span",{className:"ml-2 text-slate-600 text-sm",children:"Lembrar de mim"})]}),r.jsx(ct,{to:"/esqueci-senha",className:"text-amber-600 hover:text-amber-700 transition-colors text-sm font-medium",children:"Esqueci minha senha"})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white font-semibold py-3 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 flex items-center justify-center gap-2",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{className:"w-5 h-5"}),"Entrar na Conta"]})})]}),r.jsxs("div",{className:"relative my-8",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-slate-50 text-slate-500",children:"ou continue com"})})]}),r.jsx("button",{onClick:y,disabled:s,className:"w-full bg-white hover:bg-gray-50 disabled:bg-gray-100 text-gray-700 font-semibold py-3 px-4 border border-gray-300 rounded-xl transition-all duration-300 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Conectando..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]})}),r.jsxs("div",{className:"text-center space-y-4 mt-8",children:[r.jsxs("p",{className:"text-slate-600",children:["Ainda não tem conta?"," ",r.jsx(ct,{to:"/registro",className:"text-amber-600 hover:text-amber-700 transition-colors font-semibold",children:"Cadastre-se gratuitamente"})]}),r.jsxs(ct,{to:"/",className:"inline-flex items-center text-slate-500 hover:text-amber-600 transition-colors text-sm gap-2",children:[r.jsx(ni,{className:"w-4 h-4 rotate-180"}),"Voltar ao início"]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-6 mt-8 pt-8 border-t border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[r.jsx(Is,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"SSL Seguro"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[r.jsx(dr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"SCA Certificado"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[r.jsx(Et,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Premium"})]})]})]})})]})})},m8=()=>{const[e,t]=j.useState(1),[s,a]=j.useState("pf"),[n,i]=j.useState({name:"",email:"",cpf_cnpj:"",company_name:"",company_segment:"",phone:"",password:"",confirmPassword:""}),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[f,m]=j.useState({}),{register:p,registerWithGoogle:v}=ar(),g=Vt(),y=[{icon:Dr,title:"Certificação SCA",description:"Cafés especiais com pontuação acima de 80 pontos"},{icon:Ka,title:"Entrega Rápida",description:"Frete grátis para Santa Maria e região"},{icon:yt,title:"Torrefação Artesanal",description:"Processo 100% artesanal com torra personalizada"},{icon:js,title:"Atendimento Premium",description:"Suporte especializado e consultoria em cafés"}],N=O=>{if(O=O.replace(/\D/g,""),O.length!==11)return!1;let $=0;for(let T=0;T<9;T++)$+=parseInt(O.charAt(T))*(10-T);let V=11-$%11;if((V===10||V===11)&&(V=0),V!==parseInt(O.charAt(9)))return!1;$=0;for(let T=0;T<10;T++)$+=parseInt(O.charAt(T))*(11-T);return V=11-$%11,(V===10||V===11)&&(V=0),V===parseInt(O.charAt(10))},S=O=>(O=O.replace(/\D/g,""),O.length===14),C=O=>O.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),M=O=>O.replace(/\D/g,"").replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"),D=O=>{const $=O.replace(/\D/g,"");return $.length<=10?$.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):$.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},L=O=>{const{name:$,value:V}=O.target;let T=V;if($==="cpf_cnpj"){const F=V.replace(/\D/g,"");s==="pf"?T=C(F.slice(0,11)):T=M(F.slice(0,14))}else $==="phone"&&(T=D(V));i(F=>({...F,[$]:T})),f[$]&&m(F=>({...F,[$]:""}))},A=()=>{const O={};return n.name.trim()||(O.name="Nome é obrigatório"),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(O.email="Email inválido"):O.email="Email é obrigatório",n.cpf_cnpj.trim()?(s==="pf"?N(n.cpf_cnpj):S(n.cpf_cnpj))||(O.cpf_cnpj=s==="pf"?"CPF inválido":"CNPJ inválido"):O.cpf_cnpj=s==="pf"?"CPF é obrigatório":"CNPJ é obrigatório",s==="pj"&&(n.company_name.trim()||(O.company_name="Razão social é obrigatória"),n.company_segment.trim()||(O.company_segment="Segmento é obrigatório")),m(O),Object.keys(O).length===0},I=()=>{const O={};return n.phone.trim()||(O.phone="Telefone é obrigatório"),n.password?n.password.length<6&&(O.password="Senha deve ter pelo menos 6 caracteres"):O.password="Senha é obrigatória",n.password!==n.confirmPassword&&(O.confirmPassword="Senhas não coincidem"),m(O),Object.keys(O).length===0},H=()=>{A()&&t(2)},k=async O=>{if(O.preventDefault(),!!I()){h(!0);try{const $=await p({...n,accountType:s});$.success?g("/dashboard"):m({submit:$.error||"Erro ao criar conta"})}catch{m({submit:"Erro de conexão. Tente novamente."})}finally{h(!1)}}},P=async()=>{h(!0),m({});try{const O=await v();O.success?console.log("Redirecionando para o Google..."):m({submit:O.error||"Erro ao criar conta com Google. Tente novamente."})}catch{m({submit:"Erro de conexão. Tente novamente."})}finally{h(!1)}};return r.jsx("div",{className:"min-h-screen bg-slate-50",children:r.jsxs("div",{className:"grid lg:grid-cols-2 min-h-screen",children:[r.jsxs("div",{className:"hidden lg:flex bg-gradient-to-br from-slate-900 via-slate-800 to-amber-900 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_70%,rgba(245,158,11,0.1),transparent_70%)]"}),r.jsxs("div",{className:"relative flex flex-col justify-center p-12 text-white",children:[r.jsxs("div",{className:"mb-12",children:[r.jsx(rl,{size:"large",showText:!0,variant:"dark",textColor:"text-white",className:"items-start"}),r.jsx("p",{className:"text-slate-300 mt-2 ml-19",children:"Sua jornada no café especial começa aqui"})]}),r.jsx("div",{className:"space-y-8 mb-12",children:y.map((O,$)=>r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center flex-shrink-0",children:r.jsx(O.icon,{className:"w-6 h-6 text-amber-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white mb-1",children:O.title}),r.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:O.description})]})]},$))}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[r.jsx("div",{className:"flex items-center gap-2 mb-3",children:[1,2,3,4,5].map(O=>r.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-current"},O))}),r.jsx("p",{className:"text-white text-sm leading-relaxed mb-4",children:'"Processo simples e rápido. Em poucos minutos já estava aproveitando os melhores cafés!"'}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium text-sm",children:"Carlos Silva"}),r.jsx("div",{className:"text-slate-400 text-xs",children:"Novo cliente"})]})]})]}),r.jsx("div",{className:"absolute top-20 right-20 w-20 h-20 bg-amber-400/10 rounded-full"}),r.jsx("div",{className:"absolute bottom-20 left-20 w-32 h-32 bg-amber-400/5 rounded-full"})]})]}),r.jsx("div",{className:"flex flex-col justify-center p-8 lg:p-12",children:r.jsxs("div",{className:"max-w-md w-full mx-auto",children:[r.jsx("div",{className:"lg:hidden text-center mb-8",children:r.jsx(rl,{size:"large",showText:!0,variant:"light",className:"justify-center"})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${e>=1?"bg-amber-600 text-white":"bg-slate-200 text-slate-600"}`,children:"1"}),r.jsx("div",{className:`w-20 h-1 mx-2 ${e>=2?"bg-amber-600":"bg-slate-200"}`}),r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${e>=2?"bg-amber-600 text-white":"bg-slate-200 text-slate-600"}`,children:"2"})]})}),r.jsxs("p",{className:"text-center text-slate-600 text-sm",children:["Etapa ",e," de 2 - ",e===1?"Dados Pessoais":"Contato e Segurança"]})]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-3",children:e===1?"Criar Conta":"Finalize seu Cadastro"}),r.jsx("p",{className:"text-slate-600 text-lg",children:e===1?"Escolha seu tipo de conta e preencha seus dados":"Adicione suas informações de contato e defina sua senha"})]}),f.submit&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs",children:"!"})}),r.jsx("span",{className:"text-sm",children:f.submit})]})}),r.jsxs("form",{onSubmit:e===1?O=>{O.preventDefault(),H()}:k,className:"space-y-6",children:[e===1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-3",children:"Tipo de Conta"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("button",{type:"button",onClick:()=>a("pf"),className:`p-4 border-2 rounded-2xl transition-all text-left ${s==="pf"?"border-amber-600 bg-amber-50":"border-slate-200 hover:border-amber-300"}`,children:[r.jsx("div",{className:"font-semibold text-slate-900",children:"👤 Pessoa Física"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Para uso pessoal"})]}),r.jsxs("button",{type:"button",onClick:()=>a("pj"),className:`p-4 border-2 rounded-2xl transition-all text-left ${s==="pj"?"border-amber-600 bg-amber-50":"border-slate-200 hover:border-amber-300"}`,children:[r.jsx("div",{className:"font-semibold text-slate-900",children:"🏢 Pessoa Jurídica"}),r.jsx("div",{className:"text-sm text-slate-600",children:"Empresa/Cafeteria"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-slate-700 font-medium mb-2",children:s==="pf"?"Nome Completo":"Nome do Responsável"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:L,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:s==="pf"?"Seu nome completo":"Nome do responsável"}),r.jsx(kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"})]}),f.name&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-slate-700 font-medium mb-2",children:"E-mail"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:L,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"seu@email.com"}),r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"})]}),f.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cpf_cnpj",className:"block text-slate-700 font-medium mb-2",children:s==="pf"?"CPF":"CNPJ"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",id:"cpf_cnpj",name:"cpf_cnpj",value:n.cpf_cnpj,onChange:L,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:s==="pf"?"000.000.000-00":"00.000.000/0000-00"}),r.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"})]}),f.cpf_cnpj&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.cpf_cnpj})]}),s==="pj"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"company_name",className:"block text-slate-700 font-medium mb-2",children:"Razão Social"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",id:"company_name",name:"company_name",value:n.company_name,onChange:L,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Nome da empresa"}),r.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"})]}),f.company_name&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.company_name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"company_segment",className:"block text-slate-700 font-medium mb-2",children:"Segmento de Atuação"}),r.jsxs("select",{id:"company_segment",name:"company_segment",value:n.company_segment,onChange:L,required:!0,className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",children:[r.jsx("option",{value:"",children:"Selecione o segmento"}),r.jsx("option",{value:"cafeteria",children:"Cafeteria"}),r.jsx("option",{value:"restaurante",children:"Restaurante"}),r.jsx("option",{value:"padaria",children:"Padaria"}),r.jsx("option",{value:"hotel",children:"Hotel/Pousada"}),r.jsx("option",{value:"escritorio",children:"Escritório"}),r.jsx("option",{value:"revenda",children:"Revenda"}),r.jsx("option",{value:"outros",children:"Outros"})]}),f.company_segment&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.company_segment})]})]})]}),e===2&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-slate-700 font-medium mb-2",children:"Telefone/WhatsApp"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:L,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"(55) 99999-9999"}),r.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"})]}),f.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.phone})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-slate-700 font-medium mb-2",children:"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:o?"text":"password",id:"password",name:"password",value:n.password,onChange:L,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Mínimo 6 caracteres"}),r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"}),r.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:o?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]}),f.password&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-slate-700 font-medium mb-2",children:"Confirmar Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:c?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:L,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Repita sua senha"}),r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-600 w-4 h-4"}),r.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:c?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]}),f.confirmPassword&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.confirmPassword})]})]}),r.jsx("div",{className:"flex flex-col gap-4",children:e===1?r.jsxs("button",{type:"submit",className:"w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 rounded-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",children:["Continuar",r.jsx(Gi,{className:"w-5 h-5"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"submit",disabled:u,className:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white font-semibold py-3 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 flex items-center justify-center gap-2",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{className:"w-5 h-5"}),"Criar Conta"]})}),r.jsxs("button",{type:"button",onClick:()=>t(1),className:"w-full bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",children:[r.jsx(kp,{className:"w-5 h-5"}),"Voltar"]})]})})]}),e===1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative my-8",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-slate-50 text-slate-500",children:"ou cadastre-se rapidamente com"})})]}),r.jsx("button",{onClick:P,disabled:u,className:"w-full bg-white hover:bg-gray-50 disabled:bg-gray-100 text-gray-700 font-semibold py-3 px-4 border border-gray-300 rounded-xl transition-all duration-300 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Conectando..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]})})]}),r.jsxs("div",{className:"text-center mt-8 space-y-4",children:[r.jsxs("p",{className:"text-slate-600",children:["Já tem uma conta?"," ",r.jsx(ct,{to:"/login",className:"text-amber-600 hover:text-amber-700 transition-colors font-semibold",children:"Fazer login"})]}),r.jsxs(ct,{to:"/",className:"inline-flex items-center text-slate-500 hover:text-amber-600 transition-colors text-sm gap-2",children:[r.jsx(kp,{className:"w-4 h-4"}),"Voltar ao início"]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-6 mt-8 pt-8 border-t border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[r.jsx(Is,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Dados Seguros"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[r.jsx(dr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Verificado"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[r.jsx(Et,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Premium"})]})]})]})})]})})},r4=async()=>{try{const{data:e,error:t}=await ge.from("products").select("*").eq("is_active",!0).order("created_at",{ascending:!1});return t?(console.error("Erro ao buscar produtos:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar produtos:",e),{success:!1,error:e.message,data:[]}}},_h=async()=>{try{const{data:e,error:t}=await ge.from("products").select("*").order("created_at",{ascending:!1});return t?(console.error("Erro ao buscar produtos admin:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar produtos admin:",e),{success:!1,error:e.message,data:[]}}},f8=async e=>{try{const{data:t,error:s}=await ge.from("products").insert([{name:e.name,description:e.description,price:parseFloat(e.price),category:e.category,origin:e.origin||"",roast_level:e.roast_level||"medium",sca_score:e.sca_score||80,images:e.images||[],stock:parseInt(e.stock)||0,is_active:e.is_active!==!1,is_featured:e.is_featured||!1,processing_method:e.processing_method||"",altitude:e.altitude||"",harvest_year:e.harvest_year||new Date().getFullYear(),flavor_notes:e.flavor_notes||[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();return s?(console.error("Erro ao criar produto:",s),{success:!1,error:s.message,data:null}):{success:!0,data:t,message:"Produto criado com sucesso!"}}catch(t){return console.error("Erro ao criar produto:",t),{success:!1,error:t.message,data:null}}},x8=async(e,t)=>{try{const{data:s,error:a}=await ge.from("products").update({name:t.name,description:t.description,price:parseFloat(t.price),category:t.category,origin:t.origin,roast_level:t.roast_level,sca_score:t.sca_score,images:t.images,stock:parseInt(t.stock),is_active:t.is_active,is_featured:t.is_featured,processing_method:t.processing_method,altitude:t.altitude,harvest_year:t.harvest_year,flavor_notes:t.flavor_notes,updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("Erro ao atualizar produto:",a),{success:!1,error:a.message,data:null}):{success:!0,data:s,message:"Produto atualizado com sucesso!"}}catch(s){return console.error("Erro ao atualizar produto:",s),{success:!1,error:s.message,data:null}}},p8=async e=>{try{const{data:t,error:s}=await ge.from("products").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",e).select().single();return s?(console.error("Erro ao deletar produto:",s),{success:!1,error:s.message,data:null}):{success:!0,data:t,message:"Produto removido com sucesso!"}}catch(t){return console.error("Erro ao deletar produto:",t),{success:!1,error:t.message,data:null}}},g8=async(e,t)=>{try{const{data:s,error:a}=await ge.from("products").update({is_active:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("Erro ao alterar status do produto:",a),{success:!1,error:a.message,data:null}):{success:!0,data:s,message:`Produto ${t?"ativado":"desativado"} com sucesso!`}}catch(s){return console.error("Erro ao alterar status do produto:",s),{success:!1,error:s.message,data:null}}},b8=async e=>{try{const{data:t,error:s}=await ge.from("products").select("*").eq("id",e).eq("is_active",!0).single();return s?(console.error("Erro ao buscar produto:",s),{success:!1,error:s.message,data:null}):{success:!0,data:t}}catch(t){return console.error("Erro ao buscar produto:",t),{success:!1,error:t.message,data:null}}},v8=()=>["espresso","filtrado","especial","descafeinado","blend","microlote"],y8=()=>["light","medium-light","medium","medium-dark","dark"],j8=e=>{const t=[];return(!e.name||e.name.trim().length<3)&&t.push("Nome deve ter pelo menos 3 caracteres"),(!e.description||e.description.trim().length<10)&&t.push("Descrição deve ter pelo menos 10 caracteres"),(!e.price||parseFloat(e.price)<=0)&&t.push("Preço deve ser maior que zero"),e.category||t.push("Categoria é obrigatória"),(!e.stock||parseInt(e.stock)<0)&&t.push("Estoque deve ser maior ou igual a zero"),{isValid:t.length===0,errors:t}},w8=()=>{const[e,t]=j.useState([]),[s,a]=j.useState(!0),[n,i]=j.useState(null),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState("all"),[f,m]=j.useState("all"),[p,v]=j.useState("all"),[g,y]=j.useState("name"),[N,S]=j.useState(!1),[C,M]=j.useState(new Set),{addToCart:D}=Lc(),{user:L}=ar(),A=Vt();j.useEffect(()=>{I()},[]);const I=async()=>{a(!0),i(null);try{const T=await r4();if(T.success)console.log("✅ Produtos carregados do Supabase:",T.data.length),t(T.data),l(T.data);else throw new Error(T.error||"Erro ao carregar produtos")}catch(T){console.error("❌ Erro ao carregar produtos:",T),i("Erro ao carregar produtos. Tente novamente.")}finally{a(!1)}};j.useEffect(()=>{let T=[...e];if(c&&(T=T.filter(F=>{var z,se,Y;return((z=F.name)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||((se=F.description)==null?void 0:se.toLowerCase().includes(c.toLowerCase()))||((Y=F.origin)==null?void 0:Y.toLowerCase().includes(c.toLowerCase()))})),u!=="all"&&(T=T.filter(F=>F.category===u)),f!=="all"&&(T=T.filter(F=>F.roast_level===f)),p!=="all"&&typeof p=="string"&&p.includes("-")){const F=p.split("-").map(Number),[z,se]=F.filter(Y=>!isNaN(Y));z!==void 0&&(T=T.filter(Y=>{const _e=Y.price;return se!==void 0?_e>=z&&_e<=se:_e>=z}))}else if(p!=="all"&&!isNaN(Number(p))){const F=Number(p);T=T.filter(z=>z.price>=F)}T.sort((F,z)=>{switch(g){case"price-low":return F.price-z.price;case"price-high":return z.price-F.price;case"rating":return(z.rating||0)-(F.rating||0);case"newest":return new Date(z.created_at)-new Date(F.created_at);default:return F.name.localeCompare(z.name)}}),l(T)},[e,c,u,f,p,g]);const H=async T=>{try{await D(T,1),alert(`${T.name} adicionado ao carrinho!`)}catch{alert("Erro ao adicionar produto ao carrinho")}},k=T=>{const F=new Set(C);F.has(T)?F.delete(T):F.add(T),M(F)},P=T=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T),O=(T,F)=>!T||T<=F?0:Math.round((T-F)/T*100),$=[...new Set(e.map(T=>T.category))].filter(Boolean),V=[...new Set(e.map(T=>T.roast_level))].filter(Boolean);return s?r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-20",children:[r.jsx(yt,{className:"w-16 h-16 text-amber-600 mx-auto mb-4 animate-pulse"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Carregando Produtos..."}),r.jsx("p",{className:"text-slate-600",children:"Buscando os melhores cafés para você"})]})})}):n?r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"text-center py-20",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 max-w-md mx-auto",children:[r.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),r.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Erro ao Carregar"}),r.jsx("p",{className:"text-red-700 mb-4",children:n}),r.jsx("button",{onClick:I,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-6 rounded-xl transition-colors",children:"Tentar Novamente"})]})})})}):r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"☕ Marketplace de Cafés Especiais"}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Descubra os melhores cafés especiais selecionados diretamente dos produtores. Qualidade, origem e sabor únicos em cada grão."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 text-center",children:[r.jsx(yt,{className:"w-8 h-8 text-amber-600 mx-auto mb-3"}),r.jsx("div",{className:"text-3xl font-bold text-slate-900 mb-1",children:e.length}),r.jsx("div",{className:"text-slate-600",children:"Cafés Disponíveis"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 text-center",children:[r.jsx(Et,{className:"w-8 h-8 text-yellow-500 mx-auto mb-3"}),r.jsx("div",{className:"text-3xl font-bold text-slate-900 mb-1",children:"86+"}),r.jsx("div",{className:"text-slate-600",children:"Pontuação SCA Média"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 text-center",children:[r.jsx(Ar,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),r.jsx("div",{className:"text-3xl font-bold text-slate-900 mb-1",children:"100%"}),r.jsx("div",{className:"text-slate-600",children:"Cafés Especiais"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar por nome, origem ou descrição...",value:c,onChange:T=>d(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),r.jsxs("button",{onClick:()=>S(!N),className:"flex items-center gap-2 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-xl transition-colors",children:[r.jsx(g5,{className:"w-5 h-5"}),"Filtros",r.jsx(wC,{className:`w-4 h-4 transition-transform ${N?"rotate-180":""}`})]})]}),N&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-slate-200",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Categoria"}),r.jsxs("select",{value:u,onChange:T=>h(T.target.value),className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todas as categorias"}),$.map(T=>r.jsx("option",{value:T,children:T.charAt(0).toUpperCase()+T.slice(1)},T))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nível de Torra"}),r.jsxs("select",{value:f,onChange:T=>m(T.target.value),className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todos os níveis"}),V.map(T=>r.jsx("option",{value:T,children:T==="light"?"Clara":T==="medium"?"Média":T==="medium-dark"?"Média-Escura":"Escura"},T))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Faixa de Preço"}),r.jsxs("select",{value:p,onChange:T=>v(T.target.value),className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todos os preços"}),r.jsx("option",{value:"0-40",children:"Até R$ 40"}),r.jsx("option",{value:"40-60",children:"R$ 40 - R$ 60"}),r.jsx("option",{value:"60-80",children:"R$ 60 - R$ 80"}),r.jsx("option",{value:"80-100",children:"R$ 80 - R$ 100"}),r.jsx("option",{value:"100",children:"Acima de R$ 100"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ordenar Por"}),r.jsxs("select",{value:g,onChange:T=>y(T.target.value),className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"name",children:"Nome A-Z"}),r.jsx("option",{value:"price-low",children:"Menor Preço"}),r.jsx("option",{value:"price-high",children:"Maior Preço"}),r.jsx("option",{value:"rating",children:"Melhor Avaliação"}),r.jsx("option",{value:"newest",children:"Mais Recentes"})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[o.length," produto",o.length!==1?"s":""," encontrado",o.length!==1?"s":""]}),o.length===0&&e.length>0&&r.jsx("button",{onClick:()=>{d(""),h("all"),m("all"),v("all")},className:"text-amber-600 hover:text-amber-700 font-medium",children:"Limpar filtros"})]}),o.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:o.map(T=>{const F=O(T.original_price,T.price),z=T.stock>0,se=C.has(T.id);return r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[r.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-amber-50 to-orange-50 overflow-hidden",children:[T.images&&T.images[0]?r.jsx("img",{src:T.images[0],alt:T.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:Y=>{Y.target.src="https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400"}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(yt,{className:"w-16 h-16 text-amber-400"})}),r.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[T.is_featured&&r.jsx("span",{className:"bg-amber-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"⭐ Destaque"}),F>0&&r.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:["-",F,"%"]}),!z&&r.jsx("span",{className:"bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:"Esgotado"})]}),r.jsx("button",{onClick:()=>k(T.id),className:`absolute top-3 right-3 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${se?"bg-red-500 text-white":"bg-white/80 text-slate-600 hover:bg-white"}`,children:r.jsx(tl,{className:`w-5 h-5 ${se?"fill-current":""}`})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1 line-clamp-2",children:T.name}),r.jsxs("p",{className:"text-slate-600 text-sm",children:[T.origin," • ",T.weight||"500g"]})]}),r.jsx("p",{className:"text-slate-600 text-sm mb-4 line-clamp-2",children:T.description}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-current"}),r.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[T.sca_score||85," SCA"]})]}),r.jsxs("div",{className:"text-sm text-slate-500",children:["Estoque: ",T.stock]})]}),T.flavor_notes&&T.flavor_notes.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Notas de sabor:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:T.flavor_notes.slice(0,3).map((Y,_e)=>r.jsx("span",{className:"text-xs bg-amber-50 text-amber-700 px-2 py-1 rounded-full",children:Y},_e))})]}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl font-bold text-slate-900",children:P(T.price)}),T.original_price&&T.original_price>T.price&&r.jsx("span",{className:"text-sm text-slate-500 line-through",children:P(T.original_price)})]})})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>A(`/produto/${T.id}`),className:"flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium py-3 px-4 rounded-xl transition-colors",children:"Ver Detalhes"}),r.jsxs("button",{onClick:()=>H(T),disabled:!z,className:`flex-1 font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 ${z?"bg-amber-600 hover:bg-amber-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(pn,{className:"w-4 h-4"}),z?"Comprar":"Esgotado"]})]})]})]},T.id)})}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Nenhum produto encontrado"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Tente ajustar os filtros ou remover alguns termos da busca."}),r.jsx("button",{onClick:()=>{d(""),h("all"),m("all"),v("all")},className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-6 rounded-xl transition-colors",children:"Limpar Filtros"})]})]})})},N8=async()=>{var e,t,s,a,n,i,o,l,c;try{console.log("📊 Buscando estatísticas do dashboard...");const[d,u,h]=await Promise.all([ge.from("users").select("id, user_type, role, created_at").neq("role","admin"),ge.from("orders").select("id, total_amount, status, created_at"),ge.from("products").select("id, price, is_active")]),f=((e=d.data)==null?void 0:e.length)||0,m=((t=d.data)==null?void 0:t.filter(D=>D.role==="customer").length)||0,p=((s=d.data)==null?void 0:s.filter(D=>{const L=new Date(D.created_at),A=new Date;return L.getMonth()===A.getMonth()&&L.getFullYear()===A.getFullYear()}).length)||0,v=((a=u.data)==null?void 0:a.length)||0,g=((n=u.data)==null?void 0:n.filter(D=>D.status==="pending").length)||0,y=((i=u.data)==null?void 0:i.filter(D=>D.status==="completed").length)||0,N=((o=u.data)==null?void 0:o.reduce((D,L)=>D+(parseFloat(L.total_amount)||0),0))||0,S=((l=h.data)==null?void 0:l.length)||0,C=((c=h.data)==null?void 0:c.filter(D=>D.is_active).length)||0,M={users:{total:f,active:m,new_this_month:p,growth_rate:5.2},orders:{total:v,pending:g,completed:y,revenue:N,average_value:v>0?N/v:0},products:{total:S,active:C,out_of_stock:0},revenue:{today:0,this_week:N*.3,this_month:N*.7,total:N}};return console.log("✅ Estatísticas calculadas:",M),{success:!0,stats:M}}catch(d){return console.error("❌ Erro ao buscar estatísticas:",d),{success:!1,error:d.message}}},_8=async(e="30d")=>{var t;try{console.log(`📈 Buscando dados de analytics para ${e}...`);const a=(P=>{const O=new Date;switch(P){case"7d":return new Date(O.setDate(O.getDate()-7));case"30d":return new Date(O.setDate(O.getDate()-30));case"90d":return new Date(O.setDate(O.getDate()-90));case"1y":return new Date(O.setFullYear(O.getFullYear()-1));default:return new Date(O.setDate(O.getDate()-30))}})(e),[n,i,o,l]=await Promise.all([ge.from("orders").select("*").gte("created_at",a.toISOString()),ge.from("users").select("*").gte("created_at",a.toISOString()),ge.from("products").select("*"),ge.from("order_items").select("*, orders!inner(created_at, status), products(name)").gte("orders.created_at",a.toISOString())]),c=n.data||[],d=i.data||[],u=o.data||[],h=l.data||[],f=c.reduce((P,O)=>P+parseFloat(O.total_amount||0),0),m=c.length,p=d.length,v=m>0?f/m:0,g=p>0?m/p*100:0,y=[],N=e==="7d"?7:e==="30d"?30:e==="90d"?90:365;for(let P=N-1;P>=0;P--){const O=new Date;O.setDate(O.getDate()-P);const V=c.filter(T=>new Date(T.created_at).toDateString()===O.toDateString()).reduce((T,F)=>T+parseFloat(F.total_amount||0),0);y.push({label:O.getDate().toString(),value:V,fullDate:O.toLocaleDateString("pt-BR")})}const S=p*10,C=[{label:"Visitantes",value:S,percentage:100},{label:"Visualizaram Produtos",value:Math.floor(S*.7),percentage:70},{label:"Adicionaram ao Carrinho",value:Math.floor(S*.3),percentage:30},{label:"Iniciaram Checkout",value:Math.floor(S*.15),percentage:15},{label:"Concluíram Compra",value:m,percentage:g}],M={};h.forEach(P=>{var $;const O=(($=P.products)==null?void 0:$.name)||"Produto";M[O]||(M[O]={sales:0,revenue:0}),M[O].sales+=P.quantity,M[O].revenue+=parseFloat(P.total_price||0)});const D=Object.entries(M).map(([P,O])=>({label:P,value:O.sales,revenue:O.revenue})).sort((P,O)=>O.value-P.value).slice(0,5),L=c.reduce((P,O)=>{const $=O.status||"pending";return P[$]=(P[$]||0)+1,P},{}),A=[{label:"Entregues",value:Math.max(0,L.delivered||0)},{label:"Processando",value:Math.max(0,L.processing||0)},{label:"Pendentes",value:Math.max(0,L.pending||0)},{label:"Cancelados",value:Math.max(0,L.cancelled||0)}].filter(P=>P.value>0),I=[],H=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];for(let P=5;P>=0;P--){const O=new Date;O.setMonth(O.getMonth()-P);const $=d.filter(V=>{const T=new Date(V.created_at);return T.getMonth()===O.getMonth()&&T.getFullYear()===O.getFullYear()});I.push({label:H[O.getMonth()],value:Math.max(0,$.length)})}const k={metrics:{totalRevenue:Math.max(0,f),totalOrders:Math.max(0,m),totalUsers:Math.max(0,p),avgOrderValue:Math.max(0,v),conversionRate:Math.max(0,Math.min(100,g)),roas:Math.max(0,4.2)},charts:{revenueByDay:y.map(P=>({...P,value:Math.max(0,P.value||0)})),conversionFunnel:C.map(P=>({...P,value:Math.max(0,P.value||0),percentage:Math.max(0,Math.min(100,P.percentage||0))})),topProducts:D.length>0?D:[{label:"Nenhum produto vendido",value:0,revenue:0}],statusDistribution:A.length>0?A:[{label:"Sem pedidos",value:1}],userGrowth:I.map(P=>({...P,value:Math.max(0,P.value||0)}))},insights:{topPerformingProduct:((t=D[0])==null?void 0:t.label)||"N/A",conversionTrend:g>10?"positive":"negative",revenueGrowth:y.length>1&&y[0].value>0?Math.max(-100,Math.min(1e3,(y[y.length-1].value-y[0].value)/y[0].value*100)):0}};return console.log("✅ Dados de analytics calculados:",k),{success:!0,data:k}}catch(s){return console.error("❌ Erro ao buscar dados de analytics:",s),{success:!1,error:s.message}}},S8=async(e="30d")=>{try{console.log(`💰 Buscando dados financeiros para ${e}...`);const s=($=>{const V=new Date;switch($){case"7d":return new Date(V.setDate(V.getDate()-7));case"30d":return new Date(V.setDate(V.getDate()-30));case"90d":return new Date(V.setDate(V.getDate()-90));default:return new Date(V.setDate(V.getDate()-30))}})(e),[a,n]=await Promise.all([ge.from("orders").select("*").gte("created_at",s.toISOString()),ge.from("order_items").select("*, orders!inner(created_at, status), products(name, price)").gte("orders.created_at",s.toISOString())]),i=a.data||[],o=n.data||[],l=i.reduce(($,V)=>$+parseFloat(V.total_amount||0),0),c=i.reduce(($,V)=>$+parseFloat(V.shipping_cost||0),0),d=i.reduce(($,V)=>$+parseFloat(V.discount_amount||0),0),u=l-d,h=l*.45,f=c*.8,m=l*.15,p=l*.12,v=l*.08,g=h+f+m+p+v,y=u-g,N=u>0?y/u*100:0,S=[],C=e==="7d"?7:e==="30d"?30:90;for(let $=C-1;$>=0;$--){const V=new Date;V.setDate(V.getDate()-$);const F=i.filter(z=>new Date(z.created_at).toDateString()===V.toDateString()).reduce((z,se)=>z+parseFloat(se.total_amount||0),0);S.push({label:($+1).toString(),value:F})}const M=[{label:"Matéria Prima",value:g>0?Math.max(0,h/g*100):0,amount:Math.max(0,h)},{label:"Logística",value:g>0?Math.max(0,f/g*100):0,amount:Math.max(0,f)},{label:"Marketing",value:g>0?Math.max(0,m/g*100):0,amount:Math.max(0,m)},{label:"Operacional",value:g>0?Math.max(0,p/g*100):0,amount:Math.max(0,p)},{label:"Pessoal",value:g>0?Math.max(0,v/g*100):0,amount:Math.max(0,v)}].filter($=>$.value>0&&!isNaN($.value));M.length===0&&M.push({label:"Sem custos registrados",value:100,amount:0});const D=l>0?[{label:"E-commerce",value:85.2,amount:Math.max(0,l*.852)},{label:"Assinaturas",value:8.8,amount:Math.max(0,l*.088)},{label:"Marketplace",value:4.5,amount:Math.max(0,l*.045)},{label:"Atacado",value:1.5,amount:Math.max(0,l*.015)}]:[{label:"Sem receita registrada",value:100,amount:0}],L=[],A=["Jan","Fev","Mar","Abr","Mai","Jun"];for(let $=5;$>=0;$--){const V=new Date;V.setMonth(V.getMonth()-$);const F=i.filter(se=>{const Y=new Date(se.created_at);return Y.getMonth()===V.getMonth()&&Y.getFullYear()===V.getFullYear()}).reduce((se,Y)=>se+parseFloat(Y.total_amount||0),0),z=F*.7;L.push({label:A[V.getMonth()],inflow:Math.max(0,F),outflow:Math.max(0,z),net:Math.max(-z,F-z)})}const I=i.length>0?Math.max(0,l/i.length):0,H=Math.max(0,I*3.5),k=4.2,P=m>0?Math.max(0,l/m):0,O={metrics:{totalRevenue:Math.max(0,l),netRevenue:Math.max(0,u),totalCosts:Math.max(0,g),grossProfit:y,profitMargin:Math.max(-100,Math.min(100,N)),avgOrderValue:Math.max(0,I),customerLifetimeValue:Math.max(0,H),paybackPeriod:Math.max(0,k),roas:Math.max(0,P)},charts:{revenueByDay:S.map($=>({...$,value:Math.max(0,$.value||0)})),expensesByCategory:M,revenueStreams:D,cashFlowData:L.map($=>({...$,inflow:Math.max(0,$.inflow||0),outflow:Math.max(0,$.outflow||0),net:$.net||0}))},kpis:{profitMargin:Math.max(-100,Math.min(100,N)).toFixed(1),growthRate:23.5,burnRate:Math.max(0,g/Math.max(1,C)),runway:y>0&&g>0?Math.max(0,y/(g/Math.max(1,C))/30):0},alerts:[{type:N<20?"warning":"success",title:"Margem de Lucro",message:N<20?`Margem atual de ${Math.max(-100,N).toFixed(1)}% está abaixo do ideal (>20%)`:`Margem saudável de ${N.toFixed(1)}%`},{type:P<3?"warning":"success",title:"ROAS Marketing",message:P<3?`ROAS de ${P.toFixed(1)}x está abaixo do recomendado (>3x)`:`ROAS eficiente de ${P.toFixed(1)}x`}]};return console.log("✅ Dados financeiros calculados:",O),{success:!0,data:O}}catch(t){return console.error("❌ Erro ao buscar dados financeiros:",t),{success:!1,error:t.message}}},P8=async(e={})=>{try{console.log("👥 Buscando usuários para gerenciamento...");let t=ge.from("users").select("*").neq("role","admin").order("created_at",{ascending:!1});e.role&&(t=t.eq("role",e.role)),e.search&&(t=t.or(`name.ilike.%${e.search}%,email.ilike.%${e.search}%`));const{data:s,error:a}=await t;return a?(console.error("❌ Erro ao buscar usuários:",a),{success:!1,error:a.message}):(console.log(`✅ ${(s==null?void 0:s.length)||0} usuários encontrados`),{success:!0,users:s||[]})}catch(t){return console.error("❌ Erro ao buscar usuários:",t),{success:!1,error:t.message}}},C8=async(e,t)=>{try{console.log(`📝 Atualizando usuário ${e}:`,t);const s={name:t.name,email:t.email,phone:t.phone,cpf_cnpj:t.cpf_cnpj,address:t.address,city:t.city,state:t.state,zip_code:t.zip_code,company_name:t.company_name,role:t.role,updated_at:new Date().toISOString()};Object.keys(s).forEach(i=>{(s[i]===void 0||s[i]===null||s[i]==="")&&delete s[i]});const{data:a,error:n}=await ge.from("users").update(s).eq("id",e).select().single();return n?(console.error("❌ Erro ao atualizar usuário:",n),{success:!1,error:n.message}):(console.log("✅ Usuário atualizado com sucesso"),{success:!0,user:a})}catch(s){return console.error("❌ Erro ao atualizar usuário:",s),{success:!1,error:s.message}}},A8=async e=>{try{console.log(`🗑️ Excluindo usuário ${e}...`);const{error:t}=await ge.from("users").delete().eq("id",e);return t?(console.error("❌ Erro ao excluir usuário:",t),{success:!1,error:t.message}):(console.log("✅ Usuário excluído com sucesso"),{success:!0})}catch(t){return console.error("❌ Erro ao excluir usuário:",t),{success:!1,error:t.message}}},s4=async(e={})=>{try{console.log("📦 Buscando pedidos para gerenciamento...");let t=ge.from("orders").select(`
        *,
        users (name, email),
        order_items (
          *,
          products (name, price)
        )
      `).order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status));const{data:s,error:a}=await t;return a?(console.error("❌ Erro ao buscar pedidos:",a),{success:!1,error:a.message}):(console.log(`✅ ${(s==null?void 0:s.length)||0} pedidos encontrados`),{success:!0,orders:s||[]})}catch(t){return console.error("❌ Erro ao buscar pedidos:",t),{success:!1,error:t.message}}},k8=async e=>{try{if(console.log(`📦 Buscando pedidos do usuário ${e}...`),!e||e==="undefined"||typeof e!="string")return console.error("❌ userId inválido ou não fornecido:",e),{success:!1,error:"ID do usuário é obrigatório e deve ser válido",orders:[]};const{data:t,error:s}=await ge.from("orders").select(`
        *,
        order_items (
          *,
          products (name, price, images)
        )
      `).eq("user_id",e).order("created_at",{ascending:!1});return s?(console.error("❌ Erro ao buscar pedidos do usuário:",s),{success:!1,error:s.message}):(console.log(`✅ ${(t==null?void 0:t.length)||0} pedidos do usuário encontrados`),{success:!0,orders:t||[]})}catch(t){return console.error("❌ Erro ao buscar pedidos do usuário:",t),{success:!1,error:t.message}}},a4=async(e,t)=>{try{console.log(`📝 Atualizando status do pedido ${e} para: ${t}`);const{data:s,error:a}=await ge.from("orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("❌ Erro ao atualizar status do pedido:",a),{success:!1,error:a.message}):(console.log("✅ Status do pedido atualizado com sucesso"),{success:!0,order:s})}catch(s){return console.error("❌ Erro ao atualizar status do pedido:",s),{success:!1,error:s.message}}},E8=async()=>(console.log("⚠️ Sincronização auth->public desabilitada (precisa service role key)"),{success:!0,synced:0,total:0,message:"Sincronização não disponível"}),D1=async(e={})=>{try{console.log("🔍 Buscando todos os clientes da tabela public.users...");let t=ge.from("users").select("*").neq("role","admin").order("created_at",{ascending:!1});e.origin&&(e.origin==="admin"?t=t.eq("created_by_admin",!0):e.origin==="auto"&&(t=t.neq("created_by_admin",!0))),e.search&&(t=t.or(`name.ilike.%${e.search}%,email.ilike.%${e.search}%,phone.ilike.%${e.search}%`));const{data:s,error:a}=await t;return a?(console.error("❌ Erro na query do Supabase:",a),{success:!1,error:a.message}):(console.log(`✅ ${(s==null?void 0:s.length)||0} clientes encontrados na public.users`),console.log("📋 Dados dos clientes:",s),{success:!0,customers:s||[],pagination:{total:(s==null?void 0:s.length)||0,page:1,limit:100,totalPages:1}})}catch(t){return console.error("❌ Erro ao buscar todos os clientes:",t),{success:!1,error:t.message}}},O8=async(e={})=>{try{console.log("🔍 Buscando clientes criados pelo admin...");let t=ge.from("users").select("*").neq("role","admin").or("user_type.eq.cliente_pj,company_name.not.is.null").order("created_at",{ascending:!1});e.search&&(t=t.or(`name.ilike.%${e.search}%,email.ilike.%${e.search}%,company_name.ilike.%${e.search}%`));const{data:s,error:a}=await t;return a?(console.error("❌ Erro na query do Supabase:",a),{success:!1,error:a.message}):(console.log(`✅ ${(s==null?void 0:s.length)||0} clientes admin encontrados`),{success:!0,customers:s||[],pagination:{total:(s==null?void 0:s.length)||0,page:1,limit:100,totalPages:1}})}catch(t){return console.error("❌ Erro ao buscar clientes do admin:",t),{success:!1,error:t.message}}},n4=async(e,t)=>{try{console.log(`🔄 Alterando status do cliente ${e} para: ${t}`);const{data:s,error:a}=await ge.from("users").update({updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("❌ Erro ao alterar status:",a),{success:!1,error:a.message}):(console.log("✅ Status alterado com sucesso:",s),{success:!0,customer:{...s,status:t}})}catch(s){return console.error("❌ Erro ao alterar status do cliente:",s),{success:!1,error:s.message}}},T8=n4,L8=async e=>{var t;try{console.log(`🔍 Buscando detalhes completos do cliente ${e}...`);const{data:s,error:a}=await ge.from("users").select("*").eq("id",e).single();if(a)return console.error("❌ Erro ao buscar cliente:",a),{success:!1,error:a.message};const{data:n,error:i}=await ge.from("orders").select(`
        *,
        order_items (
          *,
          products (name, price)
        )
      `).eq("user_id",e).order("created_at",{ascending:!1});i&&console.error("❌ Erro ao buscar pedidos:",i);const{data:o,error:l}=await ge.from("customer_notes").select(`
        *,
        admin:admin_id (name)
      `).eq("customer_id",e).order("created_at",{ascending:!1});l&&console.error("❌ Erro ao buscar notas:",l);const{data:c,error:d}=await ge.from("customer_interactions").select(`
        *,
        admin:admin_id (name)
      `).eq("customer_id",e).order("created_at",{ascending:!1});d&&console.error("❌ Erro ao buscar interações:",d);const{data:u,error:h}=await ge.from("customer_tasks").select(`
        *,
        admin:admin_id (name)
      `).eq("customer_id",e).order("created_at",{ascending:!1});h&&console.error("❌ Erro ao buscar tarefas:",h);const f=(n==null?void 0:n.reduce((g,y)=>g+parseFloat(y.total_amount||0),0))||0,m=(n==null?void 0:n.length)||0,p=((t=n==null?void 0:n[0])==null?void 0:t.created_at)||null,v={...s,orders:n||[],orders_count:m,total_spent:f,last_order_date:p,notes:(o==null?void 0:o.map(g=>{var y;return{...g,admin_name:((y=g.admin)==null?void 0:y.name)||"Admin"}}))||[],interactions:(c==null?void 0:c.map(g=>{var y;return{...g,admin_name:((y=g.admin)==null?void 0:y.name)||"Admin"}}))||[],tasks:(u==null?void 0:u.map(g=>{var y;return{...g,admin_name:((y=g.admin)==null?void 0:y.name)||"Admin"}}))||[]};return console.log("✅ Detalhes do cliente carregados com sucesso"),{success:!0,customer:v}}catch(s){return console.error("❌ Erro ao buscar detalhes do cliente:",s),{success:!1,error:s.message}}},M8=async(e,t)=>{try{console.log(`📝 Adicionando nota para cliente ${e}...`);const{data:{user:s}}=await ge.auth.getUser();if(!s)return{success:!1,error:"Usuário não autenticado"};const{data:a,error:n}=await ge.from("customer_notes").insert({customer_id:e,admin_id:s.id,content:t,created_at:new Date().toISOString()}).select().single();return n?(console.error("❌ Erro ao salvar nota:",n),{success:!1,error:n.message}):(console.log("✅ Nota salva com sucesso"),{success:!0,note:a})}catch(s){return console.error("❌ Erro ao salvar nota:",s),{success:!1,error:s.message}}},i4=async(e,t)=>{try{console.log(`🤝 Registrando interação para cliente ${e}...`);const{data:{user:s}}=await ge.auth.getUser();if(!s)return{success:!1,error:"Usuário não autenticado"};const{data:a,error:n}=await ge.from("customer_interactions").insert({customer_id:e,admin_id:s.id,type:t.type,description:t.description,created_at:new Date().toISOString()}).select().single();return n?(console.error("❌ Erro ao registrar interação:",n),{success:!1,error:n.message}):(console.log("✅ Interação registrada com sucesso"),{success:!0,interaction:a})}catch(s){return console.error("❌ Erro ao registrar interação:",s),{success:!1,error:s.message}}},D8=async(e,t)=>{try{console.log(`📋 Criando tarefa para cliente ${e}...`);const{data:{user:s}}=await ge.auth.getUser();if(!s)return{success:!1,error:"Usuário não autenticado"};const{data:a,error:n}=await ge.from("customer_tasks").insert({customer_id:e,admin_id:s.id,title:t.title,description:t.description,priority:t.priority||"medium",due_date:t.due_date,status:"pending",created_at:new Date().toISOString()}).select().single();return n?(console.error("❌ Erro ao criar tarefa:",n),{success:!1,error:n.message}):(console.log("✅ Tarefa criada com sucesso"),{success:!0,task:a})}catch(s){return console.error("❌ Erro ao criar tarefa:",s),{success:!1,error:s.message}}},I1=async(e,t)=>{try{console.log(`📋 Atualizando status da tarefa ${e} para ${t}...`);const{data:s,error:a}=await ge.from("customer_tasks").update({status:t,completed_at:t==="completed"?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("❌ Erro ao atualizar tarefa:",a),{success:!1,error:a.message}):(console.log("✅ Status da tarefa atualizado com sucesso"),{success:!0,task:s})}catch(s){return console.error("❌ Erro ao atualizar tarefa:",s),{success:!1,error:s.message}}},I8=async(e,t)=>{try{console.log(`🔐 Redefinindo senha do cliente ${e}...`);const{data:s,error:a}=await ge.from("users").select("email").eq("id",e).single();if(a)return console.error("❌ Cliente não encontrado:",a),{success:!1,error:"Cliente não encontrado"};const{data:n,error:i}=await ge.auth.admin.updateUserById(e,{password:t});return i?(console.error("❌ Erro ao redefinir senha:",i),{success:!1,error:i.message}):(await i4(e,{type:"admin_action",description:"Senha redefinida pelo administrador"}),console.log("✅ Senha redefinida com sucesso"),{success:!0,message:"Senha redefinida com sucesso"})}catch(s){return console.error("❌ Erro ao redefinir senha:",s),{success:!1,error:s.message}}},R8=async()=>{try{console.log("📊 Buscando estatísticas gerais do dashboard...");const e=await Wd("users"),t=await Wd("orders"),s=await Wd("products"),a=[];e?a.push(ge.from("users").select("id, role, created_at, total_spent, orders_count").neq("role","admin")):a.push(Promise.resolve({data:[]})),t?a.push(ge.from("orders").select("id, total_amount, status, created_at")):a.push(Promise.resolve({data:[]})),s?a.push(ge.from("products").select("id, price, is_active, stock")):a.push(Promise.resolve({data:[]}));const[n,i,o]=await Promise.allSettled(a),l=n.status==="fulfilled"?n.value.data||[]:[],c=l.length,d=l.filter(A=>A.role==="customer").length,u=l.filter(A=>{const I=new Date(A.created_at),H=new Date;return I.getMonth()===H.getMonth()&&I.getFullYear()===H.getFullYear()}).length,h=i.status==="fulfilled"?i.value.data||[]:[],f=h.length,m=h.filter(A=>A.status==="pending").length,p=h.filter(A=>A.status==="completed"||A.status==="delivered").length,v=h.reduce((A,I)=>A+(parseFloat(I.total_amount)||0),0),g=new Date().getMonth(),y=new Date().getFullYear(),N=h.filter(A=>{const I=new Date(A.created_at);return I.getMonth()===g&&I.getFullYear()===y&&(A.status==="completed"||A.status==="delivered")}).reduce((A,I)=>A+(parseFloat(I.total_amount)||0),0),S=o.status==="fulfilled"?o.value.data||[]:[],C=S.length,M=S.filter(A=>A.is_active).length,D=S.filter(A=>(A.stock||0)<10).length,L={users:{total:c,active:d,new_this_month:u,growth_rate:c>0?u/c*100:0},orders:{total:f,pending:m,completed:p,revenue:v,average_value:f>0?v/f:0,monthly_revenue:N},products:{total:C,active:M,low_stock:D,out_of_stock:S.filter(A=>(A.stock||0)===0).length},revenue:{today:0,this_week:N*.25,this_month:N,total:v}};return console.log("✅ Estatísticas calculadas:",L),{success:!0,stats:L}}catch(e){return console.error("❌ Erro ao buscar estatísticas:",e),{success:!1,error:e.message,stats:{}}}},F8=async(e=null)=>{try{if(console.log("👥 Buscando usuários da tabela public.users..."),!await Wd("users"))return console.log("⚠️ Tabela users não existe, retornando lista vazia"),{success:!0,users:[]};const s=await Vh("users","created_at");let a=ge.from("users").select("*").neq("role","admin").order(s?"created_at":"id",{ascending:!1});e&&typeof e=="number"&&(a=a.limit(e));const{data:n,error:i}=await a;return i?(console.error("❌ Erro ao buscar usuários:",i),{success:!1,error:i.message,users:[]}):(console.log(`✅ ${(n==null?void 0:n.length)||0} usuários encontrados na public.users (limite: ${e||"sem limite"})`),{success:!0,users:n||[]})}catch(t){return console.error("❌ Erro ao buscar usuários:",t),{success:!1,error:t.message,users:[]}}},$8=async(e=5)=>{try{if(console.log("🏆 Buscando top produtos por receita real..."),!await Wd("order_items"))return console.log("⚠️ Tabela order_items não existe, usando dados demo"),{success:!0,data:[]};const s=await Vh("order_items","total_price"),a=await Vh("order_items","unit_price"),n=await Vh("order_items","price");let i="";if(s)i="total_price";else if(a)i="unit_price";else if(n)i="price";else return console.log("⚠️ Nenhuma coluna de preço encontrada em order_items"),{success:!0,data:[]};const{data:o,error:l}=await ge.from("order_items").select(`
        quantity,
        ${i},
        products (
          id,
          name,
          description,
          price,
          images
        )
      `);if(l)return console.error("❌ Erro ao buscar order_items:",l),{success:!1,error:l.message,data:[]};const c={};o.forEach(u=>{if(u.products){const h=u.products.id;c[h]||(c[h]={product:u.products,totalQuantity:0,totalRevenue:0}),c[h].totalQuantity+=u.quantity||0;let f=0;i==="total_price"?f=u.total_price||0:i==="unit_price"?f=(u.unit_price||0)*(u.quantity||0):i==="price"&&(f=(u.price||0)*(u.quantity||0)),c[h].totalRevenue+=f}});const d=Object.values(c).map(({product:u,totalQuantity:h,totalRevenue:f})=>({id:u.id,name:u.name,description:u.description,price:u.price,images:u.images,estimatedSales:h,revenue:f})).sort((u,h)=>h.revenue-u.revenue).slice(0,e);return console.log(`✅ Top ${d.length} produtos calculados`),{success:!0,data:d}}catch(t){return console.error("❌ Erro ao calcular top produtos:",t),{success:!1,error:t.message,data:[]}}},Wd=async e=>{try{const{data:t,error:s}=await ge.from(e).select("*").limit(1);return!s}catch{return!1}},Vh=async(e,t)=>{try{const{data:s,error:a}=await ge.from(e).select(t).limit(1);return!a}catch{return!1}},o4={async getStats(){try{const e=await N8();if(!e.success)throw new Error(e.error);return{stats:e.stats}}catch(e){throw console.error("Erro ao buscar estatísticas:",e),e}},async getUsers(){try{const e=await P8();if(!e.success)throw new Error(e.error);return{users:e.users}}catch(e){throw console.error("Erro ao buscar usuários:",e),e}},async updateUser(e,t){try{const s=await C8(e,t);if(!s.success)throw new Error(s.error);return s}catch(s){throw console.error("Erro ao atualizar usuário:",s),s}},async deleteUser(e){try{const t=await A8(e);if(!t.success)throw new Error(t.error);return t}catch(t){throw console.error("Erro ao deletar usuário:",t),t}},async getOrders(){try{const e=await s4();if(!e.success)throw new Error(e.error);return{orders:e.orders}}catch(e){throw console.error("Erro ao buscar pedidos:",e),e}},async updateOrderStatus(e,t){try{const s=await a4(e,t);if(!s.success)throw new Error(s.error);return s}catch(s){throw console.error("Erro ao atualizar status do pedido:",s),s}},async getAnalytics(e="30d"){try{const t=await _8(e);if(!t.success)throw new Error(t.error);return t.data}catch(t){throw console.error("Erro ao buscar dados de analytics:",t),t}},async getFinancialData(e="30d"){try{const t=await S8(e);if(!t.success)throw new Error(t.error);return t.data}catch(t){throw console.error("Erro ao buscar dados financeiros:",t),t}}},l4={async getAll(e={}){try{const t=await s4(e);if(!t.success)throw new Error(t.error);return{orders:t.orders}}catch(t){throw console.error("Erro ao buscar todos os pedidos:",t),t}},async getUserOrders(e){try{if(!e||e==="undefined")throw console.error("❌ getUserOrders: userId é obrigatório:",e),new Error("ID do usuário é obrigatório");console.log("📦 Buscando pedidos para usuário:",e);const t=await k8(e);if(!t.success)throw new Error(t.error);return t.orders}catch(t){throw console.error("Erro ao buscar pedidos do usuário:",t),t}},async updateStatus(e,t){try{const s=await a4(e,t);if(!s.success)throw new Error(s.error);return s.order}catch(s){throw console.error("Erro ao atualizar status do pedido:",s),s}}},q8=j.createContext(),ub=()=>{const e=j.useContext(q8);if(!e)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e},B8=()=>{const{id:e}=Zg(),t=Vt(),{addToCart:s}=Lc(),{user:a}=ar(),[n,i]=j.useState(null),[o,l]=j.useState(!0),[c,d]=j.useState(null),[u,h]=j.useState(1),[f,m]=j.useState(""),[p,v]=j.useState(0),[g,y]=j.useState(!1),[N,S]=j.useState([]);j.useEffect(()=>{e&&C()},[e]),j.useEffect(()=>{var T,F;if(n&&!f){const z=((F=(T=n==null?void 0:n.available_weights)==null?void 0:T[0])==null?void 0:F.size)||"250g";m(z)}},[n,f]);const C=async()=>{l(!0),d(null);try{const T=await b8(e);if(T.success)console.log("✅ Produto carregado:",T.data),i(T.data),await M(T.data.category);else throw new Error(T.error||"Produto não encontrado")}catch(T){console.error("❌ Erro ao carregar produto:",T),d("Produto não encontrado")}finally{l(!1)}},M=async T=>{try{const F=await r4();if(F.success){const z=F.data.filter(se=>se.id!==e&&se.category===T).slice(0,4);S(z)}}catch(F){console.error("Erro ao carregar produtos relacionados:",F)}},D=async()=>{try{await s(n,u),alert(`${u}x ${n.name} adicionado ao carrinho!`)}catch{alert("Erro ao adicionar produto ao carrinho")}},L=T=>{const F=u+T;F>=1&&F<=10&&h(F)},A=n!=null&&n.available_weights?n.available_weights.map(T=>({value:T.size,label:T.size,priceMultiplier:T.price_multiplier||1})):[{value:"250g",label:"250g",priceMultiplier:1},{value:"500g",label:"500g",priceMultiplier:1.8},{value:"1kg",label:"1kg",priceMultiplier:3.5}],I=A.find(T=>T.value===f)||A[0],H=n&&I?n.price*I.priceMultiplier:0,k=(n==null?void 0:n.images)||[(n==null?void 0:n.image)||"/default-coffee.jpg"],P=()=>{y(!g)},O=(T,F)=>!T||T<=F?0:Math.round((T-F)/T*100);if(o)return r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-20",children:[r.jsx(yt,{className:"w-16 h-16 text-amber-600 mx-auto mb-4 animate-pulse"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Carregando Produto..."}),r.jsx("p",{className:"text-slate-600",children:"Buscando informações detalhadas"})]})})});if(c||!n)return r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"text-center py-20",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 max-w-md mx-auto",children:[r.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"😔"}),r.jsx("h2",{className:"text-2xl font-bold text-red-900 mb-2",children:"Produto Não Encontrado"}),r.jsx("p",{className:"text-red-700 mb-4",children:c}),r.jsx("button",{onClick:()=>t("/marketplace"),className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-6 rounded-xl transition-colors",children:"Ver Outros Produtos"})]})})})});const $=O(n.original_price,n.price),V=n.stock>0;return r.jsx("div",{className:"min-h-screen bg-slate-50 font-inter",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[r.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-slate-600 mb-8",children:[r.jsx("button",{onClick:()=>t("/"),className:"hover:text-amber-600",children:"Início"}),r.jsx("span",{children:"/"}),r.jsx("button",{onClick:()=>t("/marketplace"),className:"hover:text-amber-600",children:"Marketplace"}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-slate-900 font-medium",children:n.name})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 mb-16",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative aspect-square bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl overflow-hidden",children:[r.jsx("img",{src:k[p],alt:n.name,className:"w-full h-full object-cover",onError:T=>{T.target.src="https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=600"}}),r.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[n.is_featured&&r.jsx("span",{className:"bg-amber-500 text-white text-sm font-bold px-3 py-1 rounded-full",children:"⭐ Destaque"}),$>0&&r.jsxs("span",{className:"bg-red-500 text-white text-sm font-bold px-3 py-1 rounded-full",children:["-",$,"% OFF"]}),!V&&r.jsx("span",{className:"bg-gray-500 text-white text-sm font-bold px-3 py-1 rounded-full",children:"Esgotado"})]}),r.jsx("button",{onClick:P,className:`absolute top-4 right-4 w-12 h-12 rounded-full flex items-center justify-center transition-colors ${g?"bg-red-500 text-white":"bg-white/80 text-slate-600 hover:bg-white"}`,children:r.jsx(tl,{className:`w-6 h-6 ${g?"fill-current":""}`})})]}),k.length>1&&r.jsx("div",{className:"flex gap-2 overflow-x-auto",children:k.map((T,F)=>r.jsx("button",{onClick:()=>v(F),className:`flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-2 transition-colors ${p===F?"border-amber-500":"border-slate-200 hover:border-slate-300"}`,children:r.jsx("img",{src:T,alt:`${n.name} ${F+1}`,className:"w-full h-full object-cover"})},F))})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("span",{className:"bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium",children:n.category||"Café Especial"}),n.is_featured&&r.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:"Destaque"})]}),r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:n.name}),r.jsx("p",{className:"text-slate-600 mb-4",children:n.description}),r.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((T,F)=>r.jsx(Et,{size:20,className:`${F<n.rating?"text-yellow-400 fill-current":"text-slate-300"}`},F))}),r.jsxs("span",{className:"text-slate-600",children:["(",n.reviews_count||0," avaliações)"]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-baseline space-x-3 mb-4",children:[r.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["R$ ",H.toFixed(2)]}),I&&I.priceMultiplier!==1&&r.jsxs("span",{className:"text-lg text-slate-500 line-through",children:["R$ ",(n.price*I.priceMultiplier*1.2).toFixed(2)]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Peso"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:A.map(T=>r.jsxs("button",{onClick:()=>m(T.value),className:`p-3 rounded-xl border-2 transition-all duration-300 ${f===T.value?"border-amber-600 bg-amber-50 text-amber-900":"border-slate-200 hover:border-amber-300"}`,children:[r.jsx("div",{className:"text-sm font-medium",children:T.label}),r.jsxs("div",{className:"text-xs text-slate-600",children:["R$ ",(n.price*T.priceMultiplier).toFixed(2)]})]},T.value))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Quantidade"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center border-2 border-slate-200 rounded-xl",children:[r.jsx("button",{onClick:()=>L(-1),disabled:u<=1,className:"p-2 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(p5,{size:16})}),r.jsx("span",{className:"px-4 py-2 min-w-[60px] text-center font-medium",children:u}),r.jsx("button",{onClick:()=>L(1),disabled:u>=10,className:"p-2 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(gr,{size:16})})]}),r.jsxs("span",{className:"text-sm text-slate-600",children:["Total: R$ ",(H*u).toFixed(2)]})]})]}),r.jsxs("button",{onClick:D,disabled:!V,className:`w-full font-semibold py-4 px-6 rounded-xl transition-colors flex items-center justify-center gap-3 ${V?"bg-amber-600 hover:bg-amber-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(pn,{className:"w-5 h-5"}),V?`Adicionar ${u}x ao Carrinho`:"Produto Esgotado"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[r.jsx(Dr,{className:"mx-auto text-amber-600 mb-2",size:24}),r.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Origem"}),r.jsx("div",{className:"text-xs text-slate-600",children:n.origin||"Brasil"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[r.jsx(yt,{className:"mx-auto text-amber-600 mb-2",size:24}),r.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Intensidade"}),r.jsxs("div",{className:"text-xs text-slate-600",children:[n.intensity||4,"/5"]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[r.jsx(Ka,{className:"mx-auto text-amber-600 mb-2",size:24}),r.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Entrega"}),r.jsx("div",{className:"text-xs text-slate-600",children:"2-5 dias úteis"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[r.jsx(Is,{className:"mx-auto text-amber-600 mb-2",size:24}),r.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Garantia"}),r.jsx("div",{className:"text-xs text-slate-600",children:"Satisfação 100%"})]})]})]})]}),r.jsx("div",{className:"bg-white rounded-3xl shadow-lg p-8 mb-16",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Descrição Detalhada"}),r.jsx("p",{className:"text-slate-600 leading-relaxed mb-6",children:n.detailed_description||n.description}),n.tasting_notes&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Notas de Degustação"}),r.jsx("p",{className:"text-slate-600",children:n.tasting_notes})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Especificações"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Tipo:"}),r.jsx("span",{className:"font-medium",children:n.type||"Café Torrado"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Origem:"}),r.jsx("span",{className:"font-medium",children:n.origin||"Brasil"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Processo:"}),r.jsx("span",{className:"font-medium",children:n.process||"Natural"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Intensidade:"}),r.jsxs("span",{className:"font-medium",children:[n.intensity||4,"/5"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Altitude:"}),r.jsx("span",{className:"font-medium",children:n.altitude||"1200m"})]})]})]})]})})}),N.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-8 text-center",children:"Produtos Relacionados"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map(T=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden group hover:shadow-xl transition-all duration-300",children:[r.jsx("div",{className:"aspect-square overflow-hidden bg-slate-50 flex items-center justify-center",children:T.image&&T.image.match(/^[\u{1F300}-\u{1F9FF}]/u)?r.jsx("div",{className:"text-6xl",children:T.image}):r.jsx("img",{src:T.image||"/default-coffee.jpg",alt:T.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:T.name}),r.jsx("p",{className:"text-slate-600 text-sm mb-4 line-clamp-2",children:T.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xl font-bold text-amber-600",children:["R$ ",T.price.toFixed(2)]}),r.jsx("button",{onClick:()=>t(`/produto/${T.id}`),className:"bg-slate-100 hover:bg-amber-600 hover:text-white p-2 rounded-full transition-all duration-300",children:r.jsx(Yt,{size:16})})]})]})]},T.id))})]})]})})},z8=()=>{const{cartItems:e,updateQuantity:t,removeFromCart:s,getTotalPrice:a}=Lc(),{user:n}=ub(),i=Vt(),o=(c,d)=>{d<=0?s(c):t(c,d)},l=()=>{if(!n){i("/login");return}i("/checkout")};return e.length===0?r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsx("main",{className:"py-20 px-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx("div",{className:"w-32 h-32 bg-coffee-cream rounded-full flex items-center justify-center mx-auto mb-8",children:r.jsx("span",{className:"text-coffee-gold text-6xl",children:"🛒"})}),r.jsx("h1",{className:"font-cormorant font-bold text-4xl text-coffee-intense mb-4",children:"Seu carrinho está vazio"}),r.jsx("p",{className:"text-coffee-gray text-lg mb-8",children:"Que tal explorar nossos cafés especiais e adicionar alguns ao seu carrinho?"}),r.jsx(ct,{to:"/marketplace",className:"btn-primary inline-flex items-center px-8 py-3",children:"Explorar Cafés"})]})})}):r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsx("main",{className:"py-20 px-4",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"font-cormorant font-bold text-4xl text-coffee-intense mb-4",children:"Meu Carrinho"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Confira os produtos selecionados e finalize sua compra"})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("div",{className:"space-y-4",children:e.map(c=>r.jsx("div",{className:"card",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-24 h-24 bg-coffee-cream rounded-lg flex items-center justify-center flex-shrink-0",children:c.image?r.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover rounded-lg"}):r.jsx("span",{className:"text-coffee-gold text-2xl",children:"☕"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-1",children:c.name}),r.jsx("p",{className:"text-coffee-gray text-sm mb-2 line-clamp-2",children:c.description}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-coffee-gold font-bold text-lg",children:["R$ ",c.price.toFixed(2)]}),c.weight&&r.jsxs("span",{className:"text-coffee-gray text-sm",children:[c.weight,"g"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>o(c.id,c.quantity-1),className:"w-8 h-8 rounded-full bg-coffee-cream text-coffee-intense hover:bg-coffee-gold hover:text-coffee-white transition-colors flex items-center justify-center",children:"-"}),r.jsx("span",{className:"w-12 text-center font-medium text-coffee-intense",children:c.quantity}),r.jsx("button",{onClick:()=>o(c.id,c.quantity+1),className:"w-8 h-8 rounded-full bg-coffee-cream text-coffee-intense hover:bg-coffee-gold hover:text-coffee-white transition-colors flex items-center justify-center",children:"+"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold text-coffee-intense mb-2",children:["R$ ",(c.price*c.quantity).toFixed(2)]}),r.jsx("button",{onClick:()=>s(c.id),className:"text-red-500 hover:text-red-700 text-sm transition-colors",children:"Remover"})]})]})},c.id))}),r.jsx("div",{className:"mt-8",children:r.jsx(ct,{to:"/marketplace",className:"btn-secondary inline-flex items-center px-6 py-3",children:"← Continuar Comprando"})})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"card sticky top-8",children:[r.jsx("h2",{className:"font-cormorant font-bold text-2xl text-coffee-intense mb-6",children:"Resumo do Pedido"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-coffee-gray",children:["Subtotal (",e.length," ",e.length===1?"item":"itens",")"]}),r.jsxs("span",{className:"text-coffee-intense font-medium",children:["R$ ",a().toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-coffee-gray",children:"Frete"}),r.jsx("span",{className:"text-coffee-gold font-medium",children:a()>=80?"Grátis":"R$ 15,00"})]}),a()<80&&r.jsx("div",{className:"bg-coffee-cream p-3 rounded-lg",children:r.jsxs("p",{className:"text-coffee-gray text-sm",children:["Faltam R$ ",(80-a()).toFixed(2)," para frete grátis!"]})}),r.jsx("div",{className:"border-t border-coffee-cream pt-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-cormorant font-bold text-xl text-coffee-intense",children:"Total"}),r.jsxs("span",{className:"font-cormorant font-bold text-2xl text-coffee-gold",children:["R$ ",(a()+(a()>=80?0:15)).toFixed(2)]})]})})]}),r.jsx("button",{onClick:l,className:"btn-primary w-full py-4 text-lg",children:"Finalizar Compra"}),!n&&r.jsxs("p",{className:"text-coffee-gray text-sm text-center mt-4",children:["Faça ",r.jsx(ct,{to:"/login",className:"text-coffee-gold hover:text-coffee-intense",children:"login"})," para continuar"]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"font-cormorant font-bold text-lg text-coffee-intense mb-4",children:"Métodos de Pagamento"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx("div",{className:"bg-coffee-cream p-2 rounded text-center text-xs text-coffee-gray",children:"PIX"}),r.jsx("div",{className:"bg-coffee-cream p-2 rounded text-center text-xs text-coffee-gray",children:"Cartão"}),r.jsx("div",{className:"bg-coffee-cream p-2 rounded text-center text-xs text-coffee-gray",children:"Boleto"})]})]}),r.jsxs("div",{className:"mt-8 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-coffee-gold",children:"🔒"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Compra 100% segura"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-coffee-gold",children:"🚚"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Entrega garantida"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-coffee-gold",children:"⭐"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Qualidade premium"})]})]})]})})]})]})})})},U8=()=>{const{cartItems:e,getTotalPrice:t,clearCart:s}=Lc(),{user:a}=ub(),n=Vt(),[i,o]=j.useState({address:"",city:"",zipCode:"",paymentMethod:"pix"}),[l,c]=j.useState(!1);ri.useEffect(()=>{if(!a){n("/login");return}if(e.length===0){n("/cart");return}},[a,e,n]);const d=m=>{o({...i,[m.target.name]:m.target.value})},u=async m=>{m.preventDefault(),c(!0);try{await new Promise(p=>setTimeout(p,2e3)),s(),alert("Pedido realizado com sucesso!"),n("/orders")}catch{alert("Erro ao processar pedido. Tente novamente.")}finally{c(!1)}},h=t()>=80?0:15,f=t()+h;return!a||e.length===0?null:r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsx("main",{className:"py-20 px-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"font-cormorant font-bold text-4xl text-coffee-intense mb-4",children:"Finalizar Compra"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Revise seu pedido e complete as informações de entrega"})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"card",children:[r.jsx("h2",{className:"font-cormorant font-bold text-2xl text-coffee-intense mb-6",children:"Dados de Entrega"}),r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"address",className:"block text-coffee-intense font-medium mb-2",children:"Endereço Completo *"}),r.jsx("input",{type:"text",id:"address",name:"address",value:i.address,onChange:d,required:!0,className:"w-full p-3 border-2 border-coffee-cream rounded-lg focus:border-coffee-gold focus:ring-2 focus:ring-coffee-gold/10 transition-all",placeholder:"Rua, número, complemento"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"city",className:"block text-coffee-intense font-medium mb-2",children:"Cidade *"}),r.jsx("input",{type:"text",id:"city",name:"city",value:i.city,onChange:d,required:!0,className:"w-full p-3 border-2 border-coffee-cream rounded-lg focus:border-coffee-gold focus:ring-2 focus:ring-coffee-gold/10 transition-all",placeholder:"Sua cidade"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"zipCode",className:"block text-coffee-intense font-medium mb-2",children:"CEP *"}),r.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:i.zipCode,onChange:d,required:!0,className:"w-full p-3 border-2 border-coffee-cream rounded-lg focus:border-coffee-gold focus:ring-2 focus:ring-coffee-gold/10 transition-all",placeholder:"00000-000"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-coffee-intense font-medium mb-4",children:"Forma de Pagamento *"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center p-4 border-2 border-coffee-cream rounded-lg cursor-pointer hover:bg-coffee-cream/50 transition-colors",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"pix",checked:i.paymentMethod==="pix",onChange:d,className:"text-coffee-gold focus:ring-coffee-gold"}),r.jsxs("span",{className:"ml-3 text-coffee-intense",children:[r.jsx("span",{className:"font-medium",children:"PIX"})," - Aprovação instantânea"]})]}),r.jsxs("label",{className:"flex items-center p-4 border-2 border-coffee-cream rounded-lg cursor-pointer hover:bg-coffee-cream/50 transition-colors",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"credit",checked:i.paymentMethod==="credit",onChange:d,className:"text-coffee-gold focus:ring-coffee-gold"}),r.jsxs("span",{className:"ml-3 text-coffee-intense",children:[r.jsx("span",{className:"font-medium",children:"Cartão de Crédito"})," - Em até 12x sem juros"]})]}),r.jsxs("label",{className:"flex items-center p-4 border-2 border-coffee-cream rounded-lg cursor-pointer hover:bg-coffee-cream/50 transition-colors",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"boleto",checked:i.paymentMethod==="boleto",onChange:d,className:"text-coffee-gold focus:ring-coffee-gold"}),r.jsxs("span",{className:"ml-3 text-coffee-intense",children:[r.jsx("span",{className:"font-medium",children:"Boleto Bancário"})," - Vencimento em 3 dias"]})]})]})]}),r.jsx("button",{type:"submit",disabled:l,className:"btn-primary w-full py-4 text-lg disabled:opacity-50",children:l?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-coffee-white mr-2"}),"Processando..."]}):"Finalizar Pedido"})]})]}),r.jsxs("div",{className:"card sticky top-8",children:[r.jsx("h2",{className:"font-cormorant font-bold text-2xl text-coffee-intense mb-6",children:"Resumo do Pedido"}),r.jsx("div",{className:"space-y-4 mb-6",children:e.map(m=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-coffee-cream rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-coffee-gold text-lg",children:"☕"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-coffee-intense",children:m.name}),r.jsxs("p",{className:"text-coffee-gray text-sm",children:["Quantidade: ",m.quantity]})]}),r.jsxs("div",{className:"text-coffee-gold font-medium",children:["R$ ",(m.price*m.quantity).toFixed(2)]})]},m.id))}),r.jsxs("div",{className:"border-t border-coffee-cream pt-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-coffee-gray",children:"Subtotal"}),r.jsxs("span",{className:"text-coffee-intense font-medium",children:["R$ ",t().toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-coffee-gray",children:"Frete"}),r.jsx("span",{className:"text-coffee-gold font-medium",children:h===0?"Grátis":`R$ ${h.toFixed(2)}`})]}),r.jsx("div",{className:"border-t border-coffee-cream pt-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-cormorant font-bold text-xl text-coffee-intense",children:"Total"}),r.jsxs("span",{className:"font-cormorant font-bold text-2xl text-coffee-gold",children:["R$ ",f.toFixed(2)]})]})})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-coffee-cream space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-coffee-gold",children:"🔒"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Pagamento 100% seguro"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-coffee-gold",children:"🚚"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Entrega garantida"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-coffee-gold",children:"⭐"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Qualidade premium"})]})]})]})]})]})})})},W8=()=>{var C,M,D,L,A;const[e,t]=j.useState([]),[s,a]=j.useState(!0),[n,i]=j.useState("overview"),{user:o,isAdmin:l,profile:c}=ar(),d=Vt();j.useEffect(()=>{if(c&&(c.role==="admin"||c.role==="super_admin"||l)){console.log("👑 Admin detectado no CustomerDashboard, redirecionando para área administrativa..."),d("/admin/crm");return}o!=null&&o.id&&u()},[o,c,l,d]);const u=async()=>{if(!(o!=null&&o.id)){console.warn("Usuário não logado ou sem ID"),a(!1);return}try{console.log("🔍 Buscando pedidos para o usuário:",o.id);const I=await l4.getUserOrders(o.id);t(I||[])}catch(I){console.error("Erro ao carregar pedidos:",I)}finally{a(!1)}},h=I=>({pending:"text-yellow-600 bg-yellow-100",confirmed:"text-blue-600 bg-blue-100",processing:"text-purple-600 bg-purple-100",shipped:"text-orange-600 bg-orange-100",delivered:"text-green-600 bg-green-100",cancelled:"text-red-600 bg-red-100"})[I]||"text-gray-600 bg-gray-100",f=I=>({pending:"Pendente",confirmed:"Confirmado",processing:"Processando",shipped:"Enviado",delivered:"Entregue",cancelled:"Cancelado"})[I]||I,m=I=>I<100?{name:"Bronze",color:"text-orange-600",bg:"bg-orange-100"}:I<500?{name:"Prata",color:"text-gray-500",bg:"bg-gray-100"}:I<1e3?{name:"Ouro",color:"text-yellow-600",bg:"bg-yellow-100"}:I<2500?{name:"Platina",color:"text-blue-600",bg:"bg-blue-100"}:{name:"Diamante",color:"text-purple-600",bg:"bg-purple-100"},p=I=>I<100?100:I<500?500:I<1e3?1e3:I<2500?2500:5e3,v=I=>{const H=p(I);let k=0;return H===500?k=100:H===1e3?k=500:H===2500?k=1e3:H===5e3&&(k=2500),(I-k)/(H-k)*100},g=e.filter(I=>["confirmed","processing","shipped","delivered"].includes(I.status)).reduce((I,H)=>I+(H.total_amount||0),0),y=e.filter(I=>I.status==="delivered").length,N=((C=o==null?void 0:o.profile)==null?void 0:C.points)||0,S=m(N);return o?c&&(c.role==="admin"||c.role==="super_admin"||l)?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-500 to-amber-600 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Xh,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Área Administrativa"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Como administrador, você será redirecionado para o painel administrativo."}),r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Redirecionando..."})]})}):r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-12",children:r.jsxs("div",{className:"text-center lg:text-left",children:[r.jsxs("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:["Olá, ",((M=o==null?void 0:o.profile)==null?void 0:M.name)||(o==null?void 0:o.name)||"Usuário","! ☕"]}),r.jsx("p",{className:"text-xl text-slate-600",children:"Bem-vindo ao seu painel de controle. Acompanhe seus pedidos e progresso."})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-amber-400/20 to-amber-600/20 rounded-full -mr-10 -mt-10"}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Et,{className:"text-white w-6 h-6"})}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S.color} ${S.bg}`,children:S.name})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Pontos"}),r.jsx("p",{className:"text-3xl font-bold text-amber-600 mb-3",children:N}),r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 mb-2",children:r.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 h-2 rounded-full transition-all duration-500",style:{width:`${v(N)}%`}})}),r.jsxs("p",{className:"text-xs text-slate-500",children:[p(N)-N," pontos para ",p(N)===5e3?"manter":"próximo nível"]})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-full -mr-10 -mt-10"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Ar,{className:"text-white w-6 h-6"})})}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Total Investido"}),r.jsxs("p",{className:"text-3xl font-bold text-green-600 mb-2",children:["R$ ",g.toFixed(2)]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Em todos os pedidos"})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-full -mr-10 -mt-10"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Bt,{className:"text-white w-6 h-6"})})}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Pedidos"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600 mb-2",children:e.length}),r.jsxs("p",{className:"text-xs text-slate-500",children:[y," entregues"]})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-400/20 to-purple-600/20 rounded-full -mr-10 -mt-10"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(kr,{className:"text-white w-6 h-6"})})}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Conta"}),r.jsx("p",{className:"text-lg font-bold text-purple-600 mb-1",children:((D=o==null?void 0:o.profile)==null?void 0:D.user_type)==="cliente_pj"?"Empresarial":"Pessoal"}),r.jsx("p",{className:"text-xs text-slate-500",children:((L=o==null?void 0:o.profile)==null?void 0:L.user_type)==="cliente_pj"?"2x pontos":"1x pontos"})]})]})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("button",{onClick:()=>d("/marketplace"),className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 text-left hover:shadow-xl transition-all group",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(dc,{className:"text-white w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:"Explorar Cafés"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Descubra novos sabores"})]})]})}),r.jsx("button",{onClick:()=>d("/perfil"),className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 text-left hover:shadow-xl transition-all group",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(kr,{className:"text-white w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:"Meu Perfil"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Editar informações"})]})]})}),r.jsx("button",{onClick:()=>d("/pedidos"),className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6 text-left hover:shadow-xl transition-all group",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(Bt,{className:"text-white w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:"Meus Pedidos"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Acompanhar entregas"})]})]})})]})}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200",children:[r.jsx("div",{className:"border-b border-slate-200",children:r.jsx("nav",{className:"flex space-x-8 px-8",children:[{id:"overview",label:"Visão Geral",icon:js},{id:"orders",label:"Meus Pedidos",icon:Bt},{id:"rewards",label:"Recompensas",icon:Dr}].map(I=>r.jsxs("button",{onClick:()=>i(I.id),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${n===I.id?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(I.icon,{className:"w-4 h-4"}),I.label]},I.id))})}),r.jsxs("div",{className:"p-8",children:[n==="overview"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Últimos Pedidos"}),s?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando pedidos..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(yt,{className:"w-8 h-8 text-slate-400"})}),r.jsx("h4",{className:"text-lg font-medium text-slate-900 mb-2",children:"Nenhum pedido ainda"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Que tal explorar nossos cafés especiais?"}),r.jsx("button",{onClick:()=>d("/marketplace"),className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-6 rounded-xl transition-colors",children:"Explorar Cafés"})]}):r.jsxs("div",{className:"space-y-4",children:[e.slice(0,3).map(I=>{var H;return r.jsx("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-900 mb-1",children:["Pedido #",I.id]}),r.jsxs("p",{className:"text-slate-600 text-sm flex items-center gap-1",children:[r.jsx(Ds,{className:"w-4 h-4"}),new Date(I.created_at).toLocaleDateString("pt-BR")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-amber-600 mb-1",children:["R$ ",(H=I.total_amount)==null?void 0:H.toFixed(2)]}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${h(I.status)}`,children:f(I.status)})]})]})},I.id)}),e.length>3&&r.jsx("button",{onClick:()=>i("orders"),className:"w-full py-3 text-amber-600 hover:text-amber-700 font-medium transition-colors",children:"Ver todos os pedidos →"})]})]})}),n==="orders"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Todos os Pedidos"}),s?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando pedidos..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Bt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Você ainda não fez nenhum pedido."})]}):r.jsx("div",{className:"space-y-6",children:e.map(I=>{var H;return r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-1",children:["Pedido #",I.id]}),r.jsxs("p",{className:"text-slate-600 text-sm flex items-center gap-1",children:[r.jsx(Ds,{className:"w-4 h-4"}),new Date(I.created_at).toLocaleDateString("pt-BR")," às"," ",new Date(I.created_at).toLocaleTimeString("pt-BR")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-amber-600 mb-2",children:["R$ ",(H=I.total_amount)==null?void 0:H.toFixed(2)]}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${h(I.status)}`,children:f(I.status)})]})]}),I.items&&I.items.length>0&&r.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[r.jsx("h5",{className:"font-medium text-slate-900 mb-3",children:"Itens do Pedido"}),r.jsx("div",{className:"space-y-2",children:I.items.map((k,P)=>{var O,$;return r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-slate-700",children:[k.quantity,"x ",(O=k.product)==null?void 0:O.name," (",k.weight_option,")"]}),r.jsxs("span",{className:"font-medium text-slate-900",children:["R$ ",(((($=k.product)==null?void 0:$.price)||0)*k.quantity).toFixed(2)]})]},P)})})]}),I.tracking_code&&r.jsx("div",{className:"border-t border-slate-200 pt-4 mt-4",children:r.jsxs("p",{className:"text-slate-700 text-sm",children:[r.jsx("strong",{children:"Código de Rastreamento:"}),r.jsx("span",{className:"font-mono bg-slate-100 px-2 py-1 rounded ml-2",children:I.tracking_code})]})})]},I.id)})})]}),n==="rewards"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Sistema de Recompensas"}),r.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 rounded-2xl p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-semibold text-slate-900",children:["Nível Atual: ",S.name]}),r.jsxs("p",{className:"text-slate-600",children:["Você tem ",N," pontos"]})]}),r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${S.bg}`,children:r.jsx(Dr,{className:`w-8 h-8 ${S.color}`})})]}),r.jsx("div",{className:"w-full bg-white rounded-full h-3 mb-2",children:r.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 h-3 rounded-full transition-all duration-500",style:{width:`${v(N)}%`}})}),r.jsx("p",{className:"text-sm text-slate-600",children:p(N)===5e3&&N>=2500?"Você já atingiu o nível máximo!":`Faltam ${p(N)-N} pontos para o próximo nível`})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(Jd,{className:"w-5 h-5 text-amber-500"}),"Como Ganhar Pontos"]}),r.jsxs("ul",{className:"space-y-3 text-slate-700",children:[r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"}),r.jsxs("span",{children:[((A=o==null?void 0:o.profile)==null?void 0:A.user_type)==="cliente_pf"?"1 ponto":"2 pontos"," para cada R$ 1,00 gasto"]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"}),r.jsx("span",{children:"Bônus em compras acima de R$ 100,00"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"}),r.jsx("span",{children:"Pontos extras em produtos especiais"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"}),r.jsx("span",{children:"Avaliações de produtos"})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(Dr,{className:"w-5 h-5 text-amber-500"}),"Níveis e Benefícios"]}),r.jsx("ul",{className:"space-y-3",children:[{name:"Bronze",range:"0-99 pontos",color:"text-orange-600"},{name:"Prata",range:"100-499 pontos",color:"text-gray-500"},{name:"Ouro",range:"500-999 pontos",color:"text-yellow-600"},{name:"Platina",range:"1000-2499 pontos",color:"text-blue-600"},{name:"Diamante",range:"2500+ pontos",color:"text-purple-600"}].map(I=>r.jsxs("li",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`font-medium ${I.color}`,children:I.name}),r.jsx("span",{className:"text-sm text-slate-600",children:I.range})]},I.name))})]})]})]})})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando dashboard..."})]})})},V8=({isOpen:e,onClose:t,product:s=null,onSuccess:a})=>{const[n,i]=j.useState({name:"",description:"",price:"",category:"",origin:"",roast_level:"medium",sca_score:80,stock:0,is_active:!0,is_featured:!1,processing_method:"",altitude:"",harvest_year:new Date().getFullYear(),flavor_notes:[],images:[]}),[o,l]=j.useState(!1),[c,d]=j.useState([]),[u,h]=j.useState(""),[f,m]=j.useState("");j.useEffect(()=>{var C;s&&e?i({name:s.name||"",description:s.description||"",price:((C=s.price)==null?void 0:C.toString())||"",category:s.category||"",origin:s.origin||"",roast_level:s.roast_level||"medium",sca_score:s.sca_score||80,stock:s.stock||0,is_active:s.is_active!==!1,is_featured:s.is_featured||!1,processing_method:s.processing_method||"",altitude:s.altitude||"",harvest_year:s.harvest_year||new Date().getFullYear(),flavor_notes:s.flavor_notes||[],images:s.images||[]}):!s&&e&&i({name:"",description:"",price:"",category:"",origin:"",roast_level:"medium",sca_score:80,stock:0,is_active:!0,is_featured:!1,processing_method:"",altitude:"",harvest_year:new Date().getFullYear(),flavor_notes:[],images:[]}),d([])},[s,e]);const p=(C,M)=>{i(D=>({...D,[C]:M})),d([])},v=()=>{u.trim()&&!n.flavor_notes.includes(u.trim())&&(i(C=>({...C,flavor_notes:[...C.flavor_notes,u.trim()]})),h(""))},g=C=>{i(M=>({...M,flavor_notes:M.flavor_notes.filter(D=>D!==C)}))},y=()=>{f.trim()&&!n.images.includes(f.trim())&&(i(C=>({...C,images:[...C.images,f.trim()]})),m(""))},N=C=>{i(M=>({...M,images:M.images.filter(D=>D!==C)}))},S=async C=>{C.preventDefault(),l(!0);const M=j8(n);if(!M.isValid){d(M.errors),l(!1);return}try{let D;s!=null&&s.id?D=await x8(s.id,n):D=await f8(n),D.success?(a&&a(D.data,s?"updated":"created"),t()):d([D.error||"Erro ao salvar produto"])}catch(D){console.error("Erro ao salvar produto:",D),d(["Erro interno do servidor"])}finally{l(!1)}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center",children:r.jsx(yt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:s?"Editar Produto":"Novo Produto"}),r.jsx("p",{className:"text-sm text-slate-600",children:s?"Atualize as informações do produto":"Adicione um novo café ao catálogo"})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-xl transition-colors",children:r.jsx(Nr,{className:"w-5 h-5 text-slate-500"})})]}),r.jsxs("form",{onSubmit:S,className:"p-6",children:[c.length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Zt,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:"font-medium text-red-800",children:"Corrija os seguintes erros:"})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:c.map((C,M)=>r.jsx("li",{children:C},M))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"📝 Informações Básicas"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Produto *"}),r.jsx("input",{type:"text",value:n.name,onChange:C=>p("name",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Ex: Café Arabica Premium",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrição *"}),r.jsx("textarea",{value:n.description,onChange:C=>p("description",C.target.value),rows:4,className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Descreva as características, origem e notas do café...",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Preço (R$) *"}),r.jsx("input",{type:"number",step:"0.01",value:n.price,onChange:C=>p("price",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Estoque *"}),r.jsx("input",{type:"number",value:n.stock,onChange:C=>p("stock",parseInt(C.target.value)||0),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"0",min:"0",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Categoria *"}),r.jsxs("select",{value:n.category,onChange:C=>p("category",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Selecione..."}),v8().map(C=>r.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nível de Torra"}),r.jsx("select",{value:n.roast_level,onChange:C=>p("roast_level",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:y8().map(C=>r.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1).replace("-"," ")},C))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Origem"}),r.jsx("input",{type:"text",value:n.origin,onChange:C=>p("origin",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Ex: Brasil, Minas Gerais"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Score SCA"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"60",max:"100",value:n.sca_score,onChange:C=>p("sca_score",parseInt(C.target.value)||80),className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),r.jsx(Et,{className:"w-4 h-4 text-amber-500"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"⚙️ Detalhes Avançados"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Processamento"}),r.jsx("input",{type:"text",value:n.processing_method,onChange:C=>p("processing_method",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Ex: Lavado, Natural, Honey"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Altitude"}),r.jsx("input",{type:"text",value:n.altitude,onChange:C=>p("altitude",C.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Ex: 1200m"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ano da Safra"}),r.jsx("input",{type:"number",min:"2020",max:new Date().getFullYear()+1,value:n.harvest_year,onChange:C=>p("harvest_year",parseInt(C.target.value)||new Date().getFullYear()),className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notas de Sabor"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:u,onChange:C=>h(C.target.value),className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Ex: Chocolate, Caramelo, Cítrico",onKeyPress:C=>C.key==="Enter"&&(C.preventDefault(),v())}),r.jsx("button",{type:"button",onClick:v,className:"px-3 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors",children:r.jsx(gr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.flavor_notes.map((C,M)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-sm",children:[C,r.jsx("button",{type:"button",onClick:()=>g(C),className:"hover:text-amber-900",children:r.jsx(Nr,{className:"w-3 h-3"})})]},M))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Imagens"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"url",value:f,onChange:C=>m(C.target.value),className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"URL da imagem",onKeyPress:C=>C.key==="Enter"&&(C.preventDefault(),y())}),r.jsx("button",{type:"button",onClick:y,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r.jsx(gr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-2",children:n.images.map((C,M)=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded-lg",children:[r.jsx(NC,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"flex-1 text-sm text-slate-700 truncate",children:C}),r.jsx("button",{type:"button",onClick:()=>N(C),className:"p-1 text-red-600 hover:text-red-800",children:r.jsx(Nr,{className:"w-3 h-3"})})]},M))})]}),r.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-200",children:[r.jsx("h4",{className:"font-medium text-slate-900",children:"Status do Produto"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:n.is_active,onChange:C=>p("is_active",C.target.checked),className:"rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:"Produto ativo no marketplace"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:n.is_featured,onChange:C=>p("is_featured",C.target.checked),className:"rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:"Produto em destaque"})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Xg,{className:"w-4 h-4"}),s?"Atualizar Produto":"Criar Produto"]})})]})]})]})}):null},c4=async e=>{try{const{data:t,error:s}=await ge.from(e).select("*").limit(1);return!s}catch{return!1}},d4=async(e,t)=>{try{const{data:s,error:a}=await ge.from(e).select(`${t}`).limit(1);return!a}catch{return!1}},Md=async()=>{try{if(console.log("📚 Buscando todos os cursos do Supabase..."),!await c4("courses"))return console.log("⚠️ Tabela courses não existe, retornando array vazio"),{success:!0,data:[],message:"Tabela de cursos não encontrada"};const s=await d4("courses","created_at")?"created_at":"id",{data:a,error:n}=await ge.from("courses").select("*").order(s,{ascending:!1});return n?(console.error("❌ Erro ao buscar cursos:",n),{success:!0,error:n.message,data:[]}):(console.log(`✅ ${(a==null?void 0:a.length)||0} cursos carregados do Supabase`),{success:!0,data:a||[]})}catch(e){return console.error("❌ Erro genérico ao buscar cursos:",e),{success:!0,error:e.message,data:[]}}},H8=async()=>{try{if(console.log("📚 Buscando cursos ativos do Supabase..."),!await c4("courses"))return console.log("⚠️ Tabela courses não existe, retornando array vazio"),{success:!0,data:[],message:"Tabela de cursos não encontrada"};const s=await d4("courses","created_at")?"created_at":"id",{data:a,error:n}=await ge.from("courses").select("*").eq("is_active",!0).order(s,{ascending:!1});return n?(console.error("❌ Erro ao buscar cursos ativos:",n),{success:!0,error:n.message,data:[]}):(console.log(`✅ ${(a==null?void 0:a.length)||0} cursos ativos carregados do Supabase`),{success:!0,data:a||[]})}catch(e){return console.error("❌ Erro genérico ao buscar cursos ativos:",e),{success:!0,error:e.message,data:[]}}},G8=async e=>{try{console.log("📝 Criando novo curso...");const{data:t,error:s}=await ge.from("courses").insert({title:e.title,description:e.description,detailed_description:e.detailed_description,duration:e.duration,level:e.level,price:e.price,original_price:e.original_price,instructor:e.instructor,max_students:e.max_students,image:e.image,tags:e.tags||[],is_active:e.is_active!==!1,is_featured:e.is_featured||!1,schedule:e.schedule,location:e.location,enrolled_students:0,rating:0}).select().single();return s?(console.error("❌ Erro ao criar curso:",s),{success:!1,error:s.message,data:null}):(console.log("✅ Curso criado com sucesso:",t.title),{success:!0,data:t})}catch(t){return console.error("❌ Erro ao criar curso:",t),{success:!1,error:t.message,data:null}}},K8=async(e,t)=>{try{console.log(`📝 Atualizando curso ${e}...`);const{data:s,error:a}=await ge.from("courses").update({title:t.title,description:t.description,detailed_description:t.detailed_description,duration:t.duration,level:t.level,price:t.price,original_price:t.original_price,instructor:t.instructor,max_students:t.max_students,image:t.image,tags:t.tags||[],is_active:t.is_active!==!1,is_featured:t.is_featured||!1,schedule:t.schedule,location:t.location,updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("❌ Erro ao atualizar curso:",a),{success:!1,error:a.message,data:null}):(console.log("✅ Curso atualizado com sucesso:",s.title),{success:!0,data:s})}catch(s){return console.error("❌ Erro ao atualizar curso:",s),{success:!1,error:s.message,data:null}}},Y8=async e=>{try{console.log(`🗑️ Removendo curso ${e}...`);const{error:t}=await ge.from("courses").delete().eq("id",e);return t?(console.error("❌ Erro ao remover curso:",t),{success:!1,error:t.message}):(console.log("✅ Curso removido com sucesso"),{success:!0,message:"Curso removido com sucesso"})}catch(t){return console.error("❌ Erro ao remover curso:",t),{success:!1,error:t.message}}},J8=async(e,t)=>{try{console.log(`🔄 Alterando status do curso ${e} para ${t?"ativo":"inativo"}...`);const{data:s,error:a}=await ge.from("courses").update({is_active:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();return a?(console.error("❌ Erro ao alterar status do curso:",a),{success:!1,error:a.message}):(console.log("✅ Status do curso alterado com sucesso"),{success:!0,data:s,message:`Curso ${t?"ativado":"desativado"} com sucesso`})}catch(s){return console.error("❌ Erro ao alterar status do curso:",s),{success:!1,error:s.message}}},X8=async(e=10,t=0)=>{try{const{data:s,error:a,count:n}=await ge.from("blog_posts").select("*",{count:"exact"}).eq("status","published").order("created_at",{ascending:!1}).range(t,t+e-1);return a?(console.error("Erro ao buscar posts:",a),{success:!1,error:a.message,data:[],total:0}):{success:!0,data:s||[],total:n||0}}catch(s){return console.error("Erro ao buscar posts:",s),{success:!1,error:s.message,data:[],total:0}}},Q8=async e=>{try{const{data:t,error:s}=await ge.from("blog_posts").select("*").eq("slug",e).eq("status","published").single();return s?(console.error("Erro ao buscar post por slug:",s),{success:!1,error:s.message,data:null}):{success:!0,data:t}}catch(t){return console.error("Erro ao buscar post por slug:",t),{success:!1,error:t.message,data:null}}},Dd=async()=>{try{const{data:e,error:t}=await ge.from("blog_posts").select("*").order("created_at",{ascending:!1});return t?(console.error("Erro ao buscar posts admin:",t),{success:!1,error:t.message,data:[]}):{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar posts admin:",e),{success:!1,error:e.message,data:[]}}},u4=async e=>{try{const t=e.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-"),{data:s,error:a}=await ge.from("blog_posts").insert([{title:e.title,slug:t,excerpt:e.excerpt,content:e.content,featured_image:e.featured_image||"",category:e.category||"geral",tags:e.tags||[],author_name:e.author_name||"Mestres do Café",status:e.status||"draft",is_featured:e.is_featured||!1,seo_title:e.seo_title||e.title,seo_description:e.seo_description||e.excerpt,published_at:e.status==="published"?new Date().toISOString():null}]).select().single();return a?(console.error("Erro ao criar post:",a),{success:!1,error:a.message,data:null}):{success:!0,data:s,message:"Post criado com sucesso!"}}catch(t){return console.error("Erro ao criar post:",t),{success:!1,error:t.message,data:null}}},im=async(e,t)=>{try{const s={title:t.title,excerpt:t.excerpt,content:t.content,featured_image:t.featured_image,category:t.category,tags:t.tags,status:t.status,is_featured:t.is_featured,seo_title:t.seo_title,seo_description:t.seo_description,updated_at:new Date().toISOString()};t.status==="published"&&!t.published_at&&(s.published_at=new Date().toISOString());const{data:a,error:n}=await ge.from("blog_posts").update(s).eq("id",e).select().single();return n?(console.error("Erro ao atualizar post:",n),{success:!1,error:n.message,data:null}):{success:!0,data:a,message:"Post atualizado com sucesso!"}}catch(s){return console.error("Erro ao atualizar post:",s),{success:!1,error:s.message,data:null}}},h4=async e=>{try{const{error:t}=await ge.from("blog_posts").delete().eq("id",e);return t?(console.error("Erro ao deletar post:",t),{success:!1,error:t.message}):{success:!0,message:"Post deletado com sucesso!"}}catch(t){return console.error("Erro ao deletar post:",t),{success:!1,error:t.message}}},Z8=async e=>{try{const{error:t}=await ge.rpc("increment_post_views",{post_id:e});t&&console.error("Erro ao incrementar visualizações:",t)}catch(t){console.error("Erro ao incrementar visualizações:",t)}},eT=async(e,t)=>{try{const{data:s,error:a}=await ge.from("blog_likes").select("id").eq("post_id",e).eq("user_id",t).single();if(a&&a.code!=="PGRST116")return console.error("Erro ao verificar like:",a),{success:!1,error:a.message};if(s){const{error:n}=await ge.from("blog_likes").delete().eq("post_id",e).eq("user_id",t);return n?(console.error("Erro ao remover like:",n),{success:!1,error:n.message}):{success:!0,liked:!1,message:"Like removido!"}}else{const{error:n}=await ge.from("blog_likes").insert([{post_id:e,user_id:t}]);return n?(console.error("Erro ao adicionar like:",n),{success:!1,error:n.message}):{success:!0,liked:!0,message:"Post curtido!"}}}catch(s){return console.error("Erro ao curtir/descurtir post:",s),{success:!1,error:s.message}}},tT=async(e,t)=>{try{const{data:s,error:a}=await ge.from("blog_likes").select("id").eq("post_id",e).eq("user_id",t).single();return a&&a.code!=="PGRST116"?(console.error("Erro ao verificar like:",a),{success:!1,error:a.message,liked:!1}):{success:!0,liked:!!s}}catch(s){return console.error("Erro ao verificar like:",s),{success:!1,error:s.message,liked:!1}}},rT=async(e,t,s,a)=>{try{const{data:n,error:i}=await ge.from("blog_comments").insert([{post_id:e,user_id:t,content:s,user_name:a}]).select().single();return i?(console.error("Erro ao adicionar comentário:",i),{success:!1,error:i.message}):{success:!0,data:n,message:"Comentário adicionado!"}}catch(n){return console.error("Erro ao adicionar comentário:",n),{success:!1,error:n.message}}},sT=async e=>{try{const{data:t,error:s}=await ge.from("blog_comments").select("*").eq("post_id",e).order("created_at",{ascending:!1});return s?(console.error("Erro ao buscar comentários:",s),{success:!1,error:s.message,data:[]}):{success:!0,data:t||[]}}catch(t){return console.error("Erro ao buscar comentários:",t),{success:!1,error:t.message,data:[]}}},aT=async(e,t)=>{try{const{data:s,error:a}=await ge.from("blog_comments").select("user_id, post_id").eq("id",e).single();if(a)return console.error("Erro ao buscar comentário:",a),{success:!1,error:a.message};if(s.user_id!==t)return{success:!1,error:"Você só pode deletar seus próprios comentários"};const{error:n}=await ge.from("blog_comments").delete().eq("id",e);return n?(console.error("Erro ao deletar comentário:",n),{success:!1,error:n.message}):{success:!0,message:"Comentário removido!"}}catch(s){return console.error("Erro ao deletar comentário:",s),{success:!1,error:s.message}}},nT=async(e,t)=>{try{const{error:s}=await ge.from("blog_shares").insert([{post_id:e,platform:t}]);return s?(console.error("Erro ao registrar compartilhamento:",s),{success:!1,error:s.message}):{success:!0,message:"Compartilhamento registrado!"}}catch(s){return console.error("Erro ao registrar compartilhamento:",s),{success:!1,error:s.message}}},hb=async()=>{try{const{data:e,error:t}=await ge.from("blog_posts").select("category").eq("status","published");if(t)return console.error("Erro ao buscar categorias:",t),{success:!1,error:t.message,data:[]};const s={};return e.forEach(n=>{n.category&&(s[n.category]=(s[n.category]||0)+1)}),{success:!0,data:Object.entries(s).map(([n,i])=>({name:n,count:i,slug:n.toLowerCase().replace(/\s+/g,"-")}))}}catch(e){return console.error("Erro ao buscar categorias:",e),{success:!1,error:e.message,data:[]}}},m4=e=>!e||!Array.isArray(e)?[]:e.map(t=>({...t,value:Number(t.value)||0,label:String(t.label||"")})).filter(t=>!isNaN(t.value)&&t.value>=0),iT=e=>{if(!e||!Array.isArray(e))return[{label:"Sem dados",value:100}];const t=e.map(s=>({...s,value:Number(s.value)||0,label:String(s.label||"Item")})).filter(s=>!isNaN(s.value)&&s.value>0);return t.length===0?[{label:"Sem dados",value:100}]:t},oT=({data:e=[],height:t=200,color:s="#3b82f6"})=>{const a=m4(e);if(a.length===0)return r.jsx("div",{className:"flex items-center justify-center",style:{height:t},children:r.jsx("p",{className:"text-slate-400",children:"Sem dados para exibir"})});const n=Math.max(...a.map(m=>m.value),1),i=Math.min(...a.map(m=>m.value),0),o=n-i||1,l=300,c=t,d=20,u=l-2*d,h=c-2*d,f=a.map((m,p)=>{const v=d+p/Math.max(a.length-1,1)*u,g=d+(n-m.value)/o*h;return`${v},${g}`}).join(" ");return r.jsxs("div",{className:"w-full",children:[r.jsxs("svg",{viewBox:`0 0 ${l} ${c}`,className:"w-full",style:{height:t},children:[r.jsx("defs",{children:r.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:r.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#f1f5f9",strokeWidth:"1"})})}),r.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),a.length>1&&r.jsx("polygon",{points:`${d},${d+h} ${f} ${d+u},${d+h}`,fill:s,fillOpacity:"0.1"}),a.length>1&&r.jsx("polyline",{points:f,fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.map((m,p)=>{const v=d+p/Math.max(a.length-1,1)*u,g=d+(n-m.value)/o*h;return r.jsx("circle",{cx:v,cy:g,r:"3",fill:s},p)})]}),r.jsx("div",{className:"flex justify-between mt-2 text-xs text-slate-500",children:a.map((m,p)=>r.jsx("span",{children:m.label},p))})]})},lT=({data:e=[],height:t=200,color:s="#10b981"})=>{const a=m4(e);if(a.length===0)return r.jsx("div",{className:"flex items-center justify-center",style:{height:t},children:r.jsx("p",{className:"text-slate-400",children:"Sem dados para exibir"})});const n=Math.max(...a.map(i=>i.value),1);return r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"flex items-end justify-between gap-2",style:{height:t},children:a.map((i,o)=>r.jsxs("div",{className:"flex flex-col items-center flex-1",children:[r.jsx("div",{className:"w-full rounded-t",style:{height:`${i.value/n*80}%`,backgroundColor:s,minHeight:"4px"}}),r.jsx("span",{className:"text-xs text-slate-500 mt-2 truncate",children:i.label})]},o))})})},cT=({data:e=[],size:t=160})=>{const s=iT(e),a=s.reduce((c,d)=>c+d.value,0);if(a===0)return r.jsx("div",{className:"flex items-center justify-center",style:{width:t,height:t},children:r.jsx("p",{className:"text-slate-400 text-sm",children:"Sem dados"})});const n=t/2-10,i=t/2;let o=0;const l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];return r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("svg",{width:t,height:t,className:"flex-shrink-0",children:s.map((c,d)=>{c.value/a*100;const u=c.value/a*360,h=o,f=o+u,m=i+n*Math.cos((h-90)*Math.PI/180),p=i+n*Math.sin((h-90)*Math.PI/180),v=i+n*Math.cos((f-90)*Math.PI/180),g=i+n*Math.sin((f-90)*Math.PI/180),y=u>180?1:0,N=[`M ${i} ${i}`,`L ${m} ${p}`,`A ${n} ${n} 0 ${y} 1 ${v} ${g}`,"Z"].join(" ");return o+=u,r.jsx("path",{d:N,fill:l[d%l.length],stroke:"white",strokeWidth:"2"},d)})}),r.jsx("div",{className:"flex flex-col gap-1",children:s.map((c,d)=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l[d%l.length]}}),r.jsx("span",{className:"text-slate-600",children:c.label}),r.jsxs("span",{className:"text-slate-500",children:["(",(c.value/a*100).toFixed(1),"%)"]})]},d))})]})},Sh=({title:e,value:t,change:s,icon:a,color:n="blue"})=>{const i=Number(t)||0,o=Number(s)||0,l={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",amber:"from-amber-500 to-amber-600",red:"from-red-500 to-red-600"};return r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-slate-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${l[n]} rounded-xl flex items-center justify-center`,children:a&&r.jsx(a,{className:"text-white w-6 h-6"})}),r.jsxs("div",{className:`text-sm font-medium ${o>=0?"text-green-600":"text-red-600"}`,children:[o>=0?"+":"",o.toFixed(1),"%"]})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:e}),r.jsx("p",{className:`text-2xl font-bold text-${n}-600`,children:typeof i=="number"?i.toLocaleString("pt-BR"):i})]})},R1=()=>{var _s,qn,La,Xs,Qs,Zs,fa,$s,xa,Nn;const{user:e,hasPermission:t,profile:s,loading:a}=ar(),[n,i]=j.useState(!0),[o,l]=j.useState("overview"),[c,d]=j.useState({}),[u,h]=j.useState([]),[f,m]=j.useState([]),[p,v]=j.useState([]),[g,y]=j.useState([]),[N,S]=j.useState([]),[C,M]=j.useState([]),[D,L]=j.useState([]),[A,I]=j.useState({totalEmployees:0,activeEmployees:0,totalPayroll:0,averageSalary:0,departments:[]}),[H,k]=j.useState(""),P=Vt(),[O,$]=j.useState(!1),[V,T]=j.useState(null),[F,z]=j.useState(null),[se,Y]=j.useState(!1),[_e,R]=j.useState({customer_id:"",type:"call",description:"",outcome:"pending"}),[Q,re]=j.useState(!1),[te,le]=j.useState(null),[be,we]=j.useState(null),[oe,Ce]=j.useState(!1),[ye,fe]=j.useState(null),[Le,Te]=j.useState(null),K=j.useMemo(()=>e&&s&&t("admin"),[e,s,t]);j.useMemo(()=>e&&s&&!a&&!t("admin"),[e,s,t,a]),j.useEffect(()=>{if(console.log("🔄 AdminDashboard useEffect triggered"),console.log("Auth loading:",a,"User:",!!e,"Profile:",!!s),a){console.log("⏳ Aguardando autenticação...");return}if(!e){console.log("❌ Sem usuário, redirecionando para login"),P("/login");return}if(!t("admin")){console.log("❌ Sem permissão admin, redirecionando"),P("/dashboard");return}n&&(console.log("✅ Usuário admin confirmado, carregando dados..."),J())},[a,e,s]);const J=async()=>{try{console.log("📊 Iniciando carregamento de dados..."),i(!0);const ce=setTimeout(()=>{console.log("⏰ Timeout atingido, finalizando carregamento"),i(!1)},15e3),[Re,st,Ut,qs,bl,vl,Bn,yo,yl]=await Promise.allSettled([R8().catch(Rt=>({stats:{}})),F8(null).catch(Rt=>({users:[]})),_h().catch(Rt=>({data:[]})),l4.getAll().catch(Rt=>({orders:[]})),Md().catch(Rt=>({data:[]})),Dd().catch(Rt=>({data:[]})),hb().catch(Rt=>({data:[]})),$8(5).catch(Rt=>({data:[]})),Promise.all([ii.getEmployees().catch(Rt=>({success:!1,data:[]})),ii.getDepartments().catch(Rt=>({success:!1,data:[]}))]).catch(Rt=>[{success:!1,data:[]},{success:!1,data:[]}])]),ji=Re.status==="fulfilled"?Re.value.stats||{}:{};console.log("📊 Stats carregadas:",ji);const ea=st.status==="fulfilled"?st.value.users||[]:[];console.log("👥 Usuários carregados:",ea==null?void 0:ea.length,"usuários"),console.log("👥 Primeiros usuários:",ea==null?void 0:ea.slice(0,3)),st.status==="rejected"&&console.error("❌ Erro ao carregar usuários:",st.reason);const Ma=Ut.status==="fulfilled"?Ut.value.data||[]:[];console.log("☕ Produtos carregados:",Ma==null?void 0:Ma.length,"produtos");const en=qs.status==="fulfilled"?qs.value.orders||[]:[];console.log("🛒 Pedidos carregados:",en==null?void 0:en.length,"pedidos");const tn=bl.status==="fulfilled"?bl.value.data||[]:[];console.log("📚 Cursos carregados:",tn==null?void 0:tn.length,"cursos");const wi=vl.status==="fulfilled"?vl.value.data||[]:[];console.log("📝 Posts do blog carregados:",wi==null?void 0:wi.length,"posts");const nr=Bn.status==="fulfilled"?Bn.value.data||[]:[];console.log("🏷️ Categorias do blog carregadas:",nr==null?void 0:nr.length,"categorias");const zn=yo.status==="fulfilled"?yo.value.data||[]:[];console.log("🏆 Top produtos:",zn==null?void 0:zn.length,"produtos");const jl=yl.status==="fulfilled"?yl.value:[{success:!1,data:[]},{success:!1,data:[]}],[jo,Ni]=jl,_n=jo.success?jo.data||[]:[],pa=Ni.success?Ni.data||[]:[],Un={totalEmployees:_n.length,activeEmployees:_n.filter(Rt=>Rt.status==="ativo"||Rt.is_active).length,totalPayroll:_n.reduce((Rt,rn)=>Rt+(rn.salario||rn.salary||0),0),averageSalary:_n.length>0?_n.reduce((Rt,rn)=>Rt+(rn.salario||rn.salary||0),0)/_n.length:0,departments:pa};console.log("👥 Dados RH processados:",Un),d(ji),h(ea),m(Ma),v(en),y(tn),S(wi),M(nr),L(zn),I(Un),console.log("🔄 Estados atualizados:"),console.log("- Users state será:",ea==null?void 0:ea.length,"usuários"),console.log("- Products state será:",Ma==null?void 0:Ma.length,"produtos"),console.log("- Orders state será:",en==null?void 0:en.length,"pedidos"),clearTimeout(ce),console.log("✅ Dados carregados com sucesso!")}catch(ce){console.error("❌ Erro ao carregar dados:",ce)}finally{i(!1)}},ve=()=>{le(null),re(!0)},qe=ce=>{le(ce),re(!0)},ie=async ce=>{try{const Re=await Y8(ce);if(Re.success){const st=await Md();st.success&&y(st.data),we(null),alert("Curso removido com sucesso!")}else alert("Erro ao remover curso: "+Re.error)}catch(Re){console.error("Erro ao deletar curso:",Re),alert("Erro ao remover curso")}},ne=async ce=>{try{const Re=g.find(Ut=>Ut.id===ce),st=await J8(ce,!Re.is_active);if(st.success){const Ut=await Md();Ut.success&&y(Ut.data),alert(st.message)}else alert("Erro ao alterar status: "+st.error)}catch(Re){console.error("Erro ao alterar status:",Re),alert("Erro ao alterar status do curso")}},Ae=async ce=>{try{let Re;if(te?Re=await K8(te.id,ce):Re=await G8(ce),Re.success){const st=await Md();st.success&&y(st.data),re(!1),le(null),alert(te?"Curso atualizado com sucesso!":"Curso criado com sucesso!")}else alert("Erro ao salvar curso: "+Re.error)}catch(Re){console.error("Erro ao salvar curso:",Re),alert("Erro ao salvar curso")}},Fe=()=>{fe(null),Ce(!0)},Ve=ce=>{fe(ce),Ce(!0)},Ne=async ce=>{try{const Re=await h4(ce);if(Re.success){const st=await Dd();st.success&&S(st.data),Te(null),alert("Post removido com sucesso!")}else alert("Erro ao remover post: "+Re.error)}catch(Re){console.error("Erro ao deletar post:",Re),alert("Erro ao remover post")}},Z=async ce=>{try{const Re=N.find(qs=>qs.id===ce),st=Re.status==="published"?"draft":"published",Ut=await im(ce,{...Re,status:st});if(Ut.success){const qs=await Dd();qs.success&&S(qs.data),alert(Ut.message)}else alert("Erro ao alterar status: "+Ut.error)}catch(Re){console.error("Erro ao alterar status:",Re),alert("Erro ao alterar status do post")}},xe=async ce=>{try{let Re;if(ye?Re=await im(ye.id,ce):Re=await u4(ce),Re.success){const st=await Dd();st.success&&S(st.data),Ce(!1),fe(null),alert(ye?"Post atualizado com sucesso!":"Post criado com sucesso!")}else alert("Erro ao salvar post: "+Re.error)}catch(Re){console.error("Erro ao salvar post:",Re),alert("Erro ao salvar post")}},We=()=>{T(null),$(!0)},ht=ce=>{T(ce),$(!0)},Qe=async ce=>{try{const Re=await p8(ce);if(Re.success){const st=await _h();st.success&&m(st.data),z(null),alert("Produto removido com sucesso!")}else alert("Erro ao remover produto: "+Re.error)}catch(Re){console.error("Erro ao deletar produto:",Re),alert("Erro ao remover produto")}},Ue=async(ce,Re)=>{try{const st=await g8(ce,!Re);if(st.success){const Ut=await _h();Ut.success&&m(Ut.data),alert(st.message)}else alert("Erro ao alterar status: "+st.error)}catch(st){console.error("Erro ao alterar status:",st),alert("Erro ao alterar status do produto")}},ze=async(ce,Re)=>{const st=await _h();st.success&&m(st.data),alert(Re==="created"?"Produto criado com sucesso!":"Produto atualizado com sucesso!")},ot=Math.max(0,((_s=c.revenue)==null?void 0:_s.total)||0),gt=Math.max(0,((qn=c.revenue)==null?void 0:qn.this_month)||0),Ot=Math.max(0,((La=c.users)==null?void 0:La.total)||0),jt=Math.max(0,((Xs=c.products)==null?void 0:Xs.active)||0),wt=Math.max(0,((Qs=c.orders)==null?void 0:Qs.total)||0),ps=Ot>0?(wt/Ot*100).toFixed(1):"0.0",St=wt>0?(ot/wt).toFixed(0):0,tt=ot>0?(ot/Math.max(ot*.2,1)).toFixed(1):"0.0",_t=Ot>50?"+0.8":Ot>20?"+0.4":"+0.2",Xe=new Date,Ys=p.filter(ce=>new Date(ce.created_at||ce.date).toDateString()===Xe.toDateString()).length||Math.floor(wt*.03),Mt=f.filter(ce=>(ce.stock||0)<10).length||Math.floor(jt*.15),dt=new Date().getMonth(),Dt=u.filter(ce=>new Date(ce.created_at||ce.date).getMonth()===dt).length||Math.floor(Ot*.08),wn=p.sort((ce,Re)=>new Date(Re.created_at||Re.date)-new Date(ce.created_at||ce.date)).slice(0,3),$r=u.sort((ce,Re)=>new Date(Re.created_at||Re.date)-new Date(ce.created_at||ce.date)).slice(0,2),ha=Ot>0?(ot/Ot*3.2).toFixed(0):0,ma=Ot>0?Math.min(95,wt/Ot*100*.65).toFixed(1):0,nt=wt>0?Math.min(5,4.2+wt/100*.1).toFixed(1):4.2,Fs=ot>0?Math.max(35,Math.min(55,ot/1e3*2+35)).toFixed(1):45,Js=u.filter(ce=>{var Re,st;return((Re=ce.name)==null?void 0:Re.toLowerCase().includes(H.toLowerCase()))||((st=ce.email)==null?void 0:st.toLowerCase().includes(H.toLowerCase()))}),Hr=f.filter(ce=>{var Re,st;return((Re=ce.name)==null?void 0:Re.toLowerCase().includes(H.toLowerCase()))||((st=ce.description)==null?void 0:st.toLowerCase().includes(H.toLowerCase()))}),vr=g.filter(ce=>{var Re,st,Ut;return((Re=ce.title)==null?void 0:Re.toLowerCase().includes(H.toLowerCase()))||((st=ce.description)==null?void 0:st.toLowerCase().includes(H.toLowerCase()))||((Ut=ce.instructor)==null?void 0:Ut.toLowerCase().includes(H.toLowerCase()))}),mr=N.filter(ce=>{var Re,st,Ut,qs;return((Re=ce.title)==null?void 0:Re.toLowerCase().includes(H.toLowerCase()))||((st=ce.content)==null?void 0:st.toLowerCase().includes(H.toLowerCase()))||((Ut=ce.excerpt)==null?void 0:Ut.toLowerCase().includes(H.toLowerCase()))||((qs=ce.category)==null?void 0:qs.toLowerCase().includes(H.toLowerCase()))});return a?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Verificando Autenticação"}),r.jsx("p",{className:"text-slate-600",children:"Aguarde..."})]})}):n?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Carregando Dashboard Admin"}),r.jsx("p",{className:"text-slate-600",children:"Aguarde enquanto carregamos os dados..."})]})}):!K&&e&&s?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Xh,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acesso Restrito"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Você precisa de permissões de administrador para acessar esta área."}),r.jsx("button",{onClick:()=>P("/dashboard"),className:"bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg",children:"Voltar ao Dashboard"})]})}):r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-12",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Xh,{className:"w-8 h-8 text-amber-600"}),r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Painel Administrativo"})]}),r.jsxs("p",{className:"text-xl text-slate-600",children:["Bem-vindo, ",(s==null?void 0:s.name)||((Zs=e==null?void 0:e.user_metadata)==null?void 0:Zs.name)||"Admin","! Controle total do Mestres do Café."]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Sistema Online"]})})]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4 flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-green-800 font-medium",children:"Sistema Online"}),r.jsx("span",{className:"text-green-600",children:"•"}),r.jsxs("span",{className:"text-green-700",children:[Ot," clientes • ",jt," produtos • ",wt," pedidos"]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center",children:r.jsx(rr,{className:"text-white w-6 h-6"})}),r.jsx(Ar,{className:"text-green-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Faturamento Total"}),r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",ot.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center",children:r.jsx(Pt,{className:"text-white w-6 h-6"})}),r.jsx(Xi,{className:"text-blue-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Clientes Ativos"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:Ot})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl flex items-center justify-center",children:r.jsx(yt,{className:"text-white w-6 h-6"})}),r.jsx(Bt,{className:"text-amber-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Produtos Ativos"}),r.jsx("p",{className:"text-3xl font-bold text-amber-600",children:jt})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center",children:r.jsx(pn,{className:"text-white w-6 h-6"})}),r.jsx(oa,{className:"text-purple-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Total Pedidos"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:wt})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200",children:[r.jsx("div",{className:"border-b border-slate-200",children:r.jsx("nav",{className:"flex space-x-8 px-8 overflow-x-auto",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"users",label:"Usuários",icon:Pt},{id:"products",label:"Produtos",icon:Bt},{id:"courses",label:"Cursos",icon:Fd},{id:"blog",label:"Blog",icon:is},{id:"crm",label:"CRM",icon:gx},{id:"analytics",label:"Analytics",icon:Ar},{id:"financeiro",label:"Financeiro",icon:rr},{id:"estoque",label:"Estoque",icon:Bt},{id:"rh",label:"RH",icon:Pt}].map(ce=>r.jsxs("button",{onClick:()=>l(ce.id),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${o===ce.id?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(ce.icon,{className:"w-4 h-4"}),ce.label]},ce.id))})}),r.jsxs("div",{className:"p-8",children:[o==="overview"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Dashboard Executivo"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Atualizado em tempo real"]}),r.jsx("span",{className:"bg-slate-100 text-slate-700 px-3 py-1 rounded-lg text-sm font-medium",children:new Date().toLocaleDateString("pt-BR")})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6"})}),r.jsx(Ar,{className:"w-5 h-5"})]}),r.jsx("h4",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Receita Total"}),r.jsxs("p",{className:"text-2xl font-bold mb-2",children:["R$ ",ot.toLocaleString("pt-BR")]}),r.jsx("div",{className:"flex items-center gap-2 text-emerald-100 text-sm",children:r.jsx("span",{children:"+12.5% vs mês anterior"})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6"})}),r.jsx(Xi,{className:"w-5 h-5"})]}),r.jsx("h4",{className:"text-blue-100 text-sm font-medium mb-1",children:"Clientes Ativos"}),r.jsx("p",{className:"text-2xl font-bold mb-2",children:Ot}),r.jsx("div",{className:"flex items-center gap-2 text-blue-100 text-sm",children:r.jsxs("span",{children:["+",Dt," novos este mês"]})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(yt,{className:"w-6 h-6"})}),r.jsx(Bt,{className:"w-5 h-5"})]}),r.jsx("h4",{className:"text-amber-100 text-sm font-medium mb-1",children:"Produtos Ativos"}),r.jsx("p",{className:"text-2xl font-bold mb-2",children:jt}),r.jsx("div",{className:"flex items-center gap-2 text-amber-100 text-sm",children:r.jsxs("span",{children:[Math.floor(jt*.85)," em estoque"]})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(js,{className:"w-6 h-6"})}),r.jsx(oa,{className:"w-5 h-5"})]}),r.jsx("h4",{className:"text-purple-100 text-sm font-medium mb-1",children:"Taxa Conversão"}),r.jsxs("p",{className:"text-2xl font-bold mb-2",children:[ps,"%"]}),r.jsx("div",{className:"flex items-center gap-2 text-purple-100 text-sm",children:r.jsxs("span",{children:[_t,"% vs mês anterior"]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-green-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Saúde Financeira"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Receita Mensal"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["R$ ",gt.toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Lucro Estimado"}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:["R$ ",(ot*.35).toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Margem Bruta"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:[Fs,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3",children:[r.jsx("span",{className:"text-slate-600",children:"ROAS"}),r.jsxs("span",{className:"font-semibold text-purple-600",children:[tt,"x"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Insights de Clientes"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Ticket Médio"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["R$ ",St]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"LTV Médio"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:["R$ ",ha]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Retenção"}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:[ma,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3",children:[r.jsx("span",{className:"text-slate-600",children:"Satisfação"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-500 fill-current"}),r.jsxs("span",{className:"font-semibold text-slate-900",children:[nt,"/5"]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:r.jsx(oa,{className:"w-5 h-5 text-amber-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Status Operacional"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Pedidos Hoje"}),r.jsx("span",{className:"font-semibold text-green-600",children:Ys})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Estoque Baixo"}),r.jsx("span",{className:"font-semibold text-orange-600",children:Mt})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Uptime Sistema"}),r.jsx("span",{className:"font-semibold text-green-600",children:"99.9%"})]}),r.jsxs("div",{className:"flex items-center justify-between py-3",children:[r.jsx("span",{className:"text-slate-600",children:"Tempo Resposta"}),r.jsx("span",{className:"font-semibold text-blue-600",children:"1.2s"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Atividades Recentes"}),r.jsx("button",{className:"text-slate-500 hover:text-slate-700 text-sm",children:"Ver todas"})]}),r.jsx("div",{className:"space-y-4",children:wn.length>0?wn.map((ce,Re)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(pn,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["Pedido #",ce.id||wt+Re]}),r.jsxs("p",{className:"text-xs text-slate-600",children:["Cliente - R$ ",(ce.total||Math.floor(Math.random()*500+100)).toLocaleString("pt-BR")]})]}),r.jsxs("span",{className:"text-xs text-slate-500",children:[Re*15+2," min"]})]},ce.id||Re)):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(pn,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["Pedido #",wt+1]}),r.jsxs("p",{className:"text-xs text-slate-600",children:["Cliente Premium - R$ ",St]})]}),r.jsx("span",{className:"text-xs text-slate-500",children:"2 min"})]}),r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Novo cliente cadastrado"}),r.jsxs("p",{className:"text-xs text-slate-600",children:[((fa=$r[0])==null?void 0:fa.name)||"Cliente Novo"," - Cliente PF"]})]}),r.jsx("span",{className:"text-xs text-slate-500",children:"15 min"})]}),r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:r.jsx(Bt,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Alerta de estoque"}),r.jsxs("p",{className:"text-xs text-slate-600",children:[Mt," produtos com estoque baixo"]})]}),r.jsx("span",{className:"text-xs text-slate-500",children:"1h"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Top Produtos (Este Mês)"}),r.jsx("button",{className:"text-slate-500 hover:text-slate-700 text-sm",children:"Ver relatório"})]}),r.jsx("div",{className:"space-y-4",children:D.map((ce,Re)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center",children:r.jsxs("span",{className:"text-white font-bold text-sm",children:["#",Re+1]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:ce.name}),r.jsxs("p",{className:"text-xs text-slate-600",children:[ce.estimatedSales," vendas"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["R$ ",ce.revenue.toLocaleString("pt-BR")]}),r.jsx("p",{className:"text-xs text-slate-500",children:"receita"})]})]},ce.id))})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-100 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Yt,{className:"w-4 h-4 text-blue-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Insights Executivos"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:"Performance Excepcional"})]}),r.jsxs("p",{className:"text-slate-700 text-sm",children:["Faturamento de ",r.jsxs("strong",{children:["R$ ",ot.toLocaleString("pt-BR")]})," representa crescimento de 12.5% vs mês anterior. Continue investindo em marketing digital."]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:"Oportunidade Identificada"})]}),r.jsxs("p",{className:"text-slate-700 text-sm",children:["Com ",r.jsxs("strong",{children:[Ot," clientes ativos"]}),", há potencial para aumentar ticket médio em 15-20% através de estratégias de cross-selling."]})]})]})]})]}),o==="users"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"👥 Gerenciamento de Usuários"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[u.length," / ",Ot," usuários"]}),r.jsxs("button",{onClick:()=>P("/admin/crm"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(gx,{className:"w-4 h-4"}),"CRM Completo"]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar usuários por nome ou email...",value:H,onChange:ce=>k(ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Js.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Js.map((ce,Re)=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:(ce.name||ce.email||"U").charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900 truncate",children:ce.name||"Nome não informado"}),r.jsx("p",{className:"text-sm text-slate-600 truncate",children:ce.email})]})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Tipo:"}),r.jsx("span",{className:`font-medium px-2 py-1 rounded-full text-xs ${ce.user_type==="cliente_pj"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:ce.user_type==="cliente_pj"?"Pessoa Jurídica":"Pessoa Física"})]}),ce.created_at&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Cadastro:"}),r.jsx("span",{className:"text-slate-900",children:new Date(ce.created_at).toLocaleDateString("pt-BR")})]}),ce.role&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Perfil:"}),r.jsx("span",{className:`font-medium px-2 py-1 rounded-full text-xs ${ce.role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ce.role==="admin"?"Administrador":"Cliente"})]})]})]},ce.id||Re))}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("button",{onClick:()=>P("/admin/crm"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:["Abrir CRM Completo (",Js.length," usuários)"]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),u.length===0?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum usuário cadastrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Os usuários cadastrados no sistema aparecerão aqui."})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum usuário encontrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Tente pesquisar com outros termos ou limpe o filtro para ver todos."}),r.jsx("button",{onClick:()=>k(""),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Limpar filtro"})]})]})]}),o==="products"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"☕ Gerenciamento de Produtos"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium",children:[f.length," produtos cadastrados"]}),r.jsxs("button",{onClick:We,className:"bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(gr,{className:"w-4 h-4"}),"Novo Produto"]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar produtos por nome, categoria ou descrição...",value:H,onChange:ce=>k(ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),Hr.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Hr.map((ce,Re)=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center",children:r.jsx(yt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:ce.name||"Nome não informado"}),r.jsx("p",{className:"text-sm text-slate-600",children:ce.category||"Categoria não informada"})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${ce.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ce.is_active?"Ativo":"Inativo"})]}),ce.description&&r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:ce.description}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",parseFloat(ce.price||0).toFixed(2)]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[r.jsx(Bt,{className:"w-4 h-4"}),r.jsxs("span",{children:["Estoque: ",ce.stock||0]})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[ce.origin&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:ce.origin}),ce.sca_score&&r.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full",children:[ce.sca_score," SCA"]}),ce.is_featured&&r.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"⭐ Destaque"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>ht(ce),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar produto",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Ue(ce.id,ce.is_active),className:`p-2 rounded-lg transition-colors ${ce.is_active?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:ce.is_active?"Desativar produto":"Ativar produto",children:ce.is_active?r.jsx(Yt,{className:"w-4 h-4"}):r.jsx(ca,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>z(ce.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Deletar produto",children:r.jsx(as,{className:"w-4 h-4"})})]}),ce.created_at&&r.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:r.jsxs("p",{className:"text-xs text-slate-500",children:["Criado em ",new Date(ce.created_at).toLocaleDateString("pt-BR")]})})]},ce.id||Re))}),f.length>Hr.length&&r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-slate-600 mb-4",children:["Mostrando ",Hr.length," de ",f.length," produtos encontrados"]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(yt,{className:"w-8 h-8 text-slate-400"})}),f.length===0?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum produto cadastrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Crie seu primeiro produto para começar a vender no marketplace."}),r.jsx("button",{onClick:We,className:"bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-lg font-medium",children:"Criar Primeiro Produto"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum produto encontrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Tente pesquisar com outros termos ou limpe o filtro para ver todos."}),r.jsx("button",{onClick:()=>k(""),className:"text-amber-600 hover:text-amber-700 font-medium",children:"Limpar filtro"})]})]}),F&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(as,{className:"w-6 h-6 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Confirmar Exclusão"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Tem certeza que deseja remover este produto? Esta ação não pode ser desfeita."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>z(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancelar"}),r.jsx("button",{onClick:()=>Qe(F),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})})})]}),o==="courses"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"📚 Gestão de Cursos"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[g.length," cursos cadastrados"]}),r.jsxs("button",{onClick:ve,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(gr,{className:"w-4 h-4"}),"Novo Curso"]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar cursos por título, instrutor ou descrição...",value:H,onChange:ce=>k(ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),vr.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:vr.map((ce,Re)=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Fd,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:ce.title||"Título não informado"}),r.jsx("p",{className:"text-sm text-slate-600",children:ce.instructor||"Instrutor não informado"})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${ce.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ce.is_active?"Ativo":"Inativo"})]}),ce.description&&r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:ce.description}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["R$ ",parseFloat(ce.price||0).toFixed(0)]}),ce.duration&&r.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsxs("span",{children:[ce.duration,"h"]})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[ce.level&&r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:ce.level==="beginner"?"Iniciante":ce.level==="intermediate"?"Intermediário":ce.level==="advanced"?"Avançado":ce.level}),ce.category&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:ce.category}),ce.rating&&r.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full",children:["⭐ ",ce.rating,"/5"]}),ce.is_featured&&r.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"🎯 Destaque"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>qe(ce),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar curso",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>ne(ce.id),className:`p-2 rounded-lg transition-colors ${ce.is_active?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:ce.is_active?"Desativar curso":"Ativar curso",children:ce.is_active?r.jsx(Yt,{className:"w-4 h-4"}):r.jsx(ca,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>we(ce.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Deletar curso",children:r.jsx(as,{className:"w-4 h-4"})})]}),ce.created_at&&r.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:r.jsxs("p",{className:"text-xs text-slate-500",children:["Criado em ",new Date(ce.created_at).toLocaleDateString("pt-BR")]})})]},ce.id||Re))}),g.length>vr.length&&r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-slate-600 mb-4",children:["Mostrando ",vr.length," de ",g.length," cursos encontrados"]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Fd,{className:"w-8 h-8 text-slate-400"})}),g.length===0?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum curso cadastrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Crie seu primeiro curso para começar a oferecer educação em café."}),r.jsx("button",{onClick:ve,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"Criar Primeiro Curso"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum curso encontrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Tente pesquisar com outros termos ou limpe o filtro para ver todos."}),r.jsx("button",{onClick:()=>k(""),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Limpar filtro"})]})]}),be&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(as,{className:"w-6 h-6 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Confirmar Exclusão"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Tem certeza que deseja remover este curso? Esta ação não pode ser desfeita."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>we(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancelar"}),r.jsx("button",{onClick:()=>ie(be),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})})})]}),o==="blog"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"📝 Gestão do Blog"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:[N.length," posts cadastrados"]}),r.jsxs("button",{onClick:()=>P("/admin/blog"),className:"bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(is,{className:"w-4 h-4"}),"Blog Completo"]}),r.jsxs("button",{onClick:Fe,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(gr,{className:"w-4 h-4"}),"Novo Post"]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar posts por título, conteúdo ou categoria...",value:H,onChange:ce=>k(ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),mr.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:mr.map((ce,Re)=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(is,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:ce.title||"Título não informado"}),r.jsx("p",{className:"text-sm text-slate-600",children:ce.author||"Autor não informado"})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${ce.status==="published"?"bg-green-100 text-green-800":ce.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:ce.status==="published"?"Publicado":ce.status==="draft"?"Rascunho":"Inativo"})]}),ce.excerpt&&r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-3",children:ce.excerpt}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[ce.category&&r.jsx("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:r.jsxs("span",{children:["📂 ",ce.category]})}),ce.reading_time&&r.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsxs("span",{children:[ce.reading_time," min"]})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[ce.tags&&ce.tags.map&&ce.tags.map((st,Ut)=>r.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:st},Ut)),ce.featured&&r.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"⭐ Destaque"}),ce.views&&r.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["👁️ ",ce.views," views"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>Ve(ce),className:"p-2 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar post",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Z(ce.id),className:`p-2 rounded-lg transition-colors ${ce.status==="published"?"text-green-600 hover:bg-green-50":"text-yellow-600 hover:bg-yellow-50"}`,title:ce.status==="published"?"Despublicar post":"Publicar post",children:ce.status==="published"?r.jsx(Yt,{className:"w-4 h-4"}):r.jsx(ca,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Te(ce.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Deletar post",children:r.jsx(as,{className:"w-4 h-4"})})]}),ce.created_at&&r.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:r.jsxs("p",{className:"text-xs text-slate-500",children:["Criado em ",new Date(ce.created_at).toLocaleDateString("pt-BR")]})})]},ce.id||Re))}),N.length>mr.length&&r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-slate-600 mb-4",children:["Mostrando ",mr.length," de ",N.length," posts encontrados"]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(is,{className:"w-8 h-8 text-slate-400"})}),N.length===0?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum post cadastrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Crie seu primeiro post para começar a compartilhar conteúdo sobre café."}),r.jsx("button",{onClick:Fe,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium",children:"Criar Primeiro Post"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum post encontrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Tente pesquisar com outros termos ou limpe o filtro para ver todos."}),r.jsx("button",{onClick:()=>k(""),className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Limpar filtro"})]})]}),Le&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(as,{className:"w-6 h-6 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Confirmar Exclusão"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Tem certeza que deseja remover este post? Esta ação não pode ser desfeita."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>Te(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancelar"}),r.jsx("button",{onClick:()=>Ne(Le),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})})})]}),o==="crm"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"🔥 CRM - Gestão de Relacionamento"}),r.jsxs("button",{onClick:()=>P("/admin/crm"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(gx,{className:"w-4 h-4"}),"CRM Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Total Clientes"})]}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:Ot}),r.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:["+",Dt," este mês"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(Xi,{className:"w-5 h-5 text-green-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Clientes Ativos"})]}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:Math.floor(Ot*.85)}),r.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:[(Math.floor(Ot*.85)/Ot*100).toFixed(1),"% do total"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:r.jsx(js,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Taxa Conversão"})]}),r.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[ps,"%"]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Leads → Clientes"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-amber-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"LTV Médio"})]}),r.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["R$ ",ha]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Lifetime Value"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Clientes Recentes"}),r.jsx("button",{onClick:()=>P("/admin/crm"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver todos"})]}),r.jsx("div",{className:"space-y-4",children:$r.slice(0,3).map((ce,Re)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:(ce.name||ce.email||"U").charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:ce.name||"Nome não informado"}),r.jsx("p",{className:"text-xs text-slate-600",children:ce.email})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${ce.user_type==="cliente_pj"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:ce.user_type==="cliente_pj"?"PJ":"PF"})})]},ce.id||Re))})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Análise CRM"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Clientes PF vs PJ"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm font-medium text-green-600",children:[u.filter(ce=>ce.user_type!=="cliente_pj").length," PF"]}),r.jsx("span",{className:"text-slate-400",children:"|"}),r.jsxs("span",{className:"text-sm font-medium text-purple-600",children:[u.filter(ce=>ce.user_type==="cliente_pj").length," PJ"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Taxa de Retenção"}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:[ma,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Ticket Médio"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:["R$ ",St]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Satisfação Cliente"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-500 fill-current"}),r.jsxs("span",{className:"font-semibold text-slate-900",children:[nt,"/5"]})]})]})]})]})]})]}),o==="analytics"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"📊 Analytics & Performance"}),r.jsxs("button",{onClick:()=>P("/admin/analytics"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(ls,{className:"w-4 h-4"}),"Analytics Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-5 h-5 text-emerald-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Crescimento"})]}),r.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:"+12.5%"}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"vs mês anterior"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(oa,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Engajamento"})]}),r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[Math.floor(Ot*.73),"%"]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Taxa ativa mensal"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:r.jsx(js,{className:"w-5 h-5 text-orange-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Conversão"})]}),r.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[ps,"%"]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Visitante → Cliente"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-xl flex items-center justify-center",children:r.jsx(Et,{className:"w-5 h-5 text-violet-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Satisfação"})]}),r.jsx("p",{className:"text-3xl font-bold text-violet-600",children:nt}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Rating médio /5"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Performance de Vendas"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Janeiro"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-32 bg-slate-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"85%"}})}),r.jsx("span",{className:"text-sm font-medium",children:"85%"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Fevereiro"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-32 bg-slate-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"92%"}})}),r.jsx("span",{className:"text-sm font-medium",children:"92%"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Março"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-32 bg-slate-200 rounded-full h-2",children:r.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"78%"}})}),r.jsx("span",{className:"text-sm font-medium",children:"78%"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Top Categorias"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Cafés Especiais"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:"42%"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Cursos Online"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:"28%"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Acessórios"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:"18%"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Consultoria"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:"12%"})]})]})]})]})]}),o==="financeiro"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"💰 Módulo Financeiro"}),r.jsxs("button",{onClick:()=>P("/admin/financeiro"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(rr,{className:"w-4 h-4"}),"Módulo Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-green-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Receita Total"})]}),r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",ot.toLocaleString("pt-BR")]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"+12.5% vs mês anterior"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Receita Mensal"})]}),r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["R$ ",gt.toLocaleString("pt-BR")]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Mês atual"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:r.jsx(oa,{className:"w-5 h-5 text-emerald-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Margem Bruta"})]}),r.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:[Fs,"%"]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Média do período"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:r.jsx(js,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"ROAS"})]}),r.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[tt,"x"]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Return on Ad Spend"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Breakdown Financeiro"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Receita Bruta"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["R$ ",ot.toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Custos Operacionais"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["R$ ",(ot*.35).toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[r.jsx("span",{className:"text-slate-600",children:"Lucro Líquido"}),r.jsxs("span",{className:"font-semibold text-emerald-600",children:["R$ ",(ot*.65).toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3",children:[r.jsx("span",{className:"text-slate-600",children:"Impostos Estimados"}),r.jsxs("span",{className:"font-semibold text-orange-600",children:["R$ ",(ot*.15).toLocaleString("pt-BR")]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Fluxo de Caixa"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Entradas (Vendas)"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["+R$ ",gt.toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Saídas (Operacional)"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-R$ ",(gt*.3).toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Investimentos"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:["-R$ ",(gt*.15).toLocaleString("pt-BR")]})]}),r.jsx("div",{className:"border-t border-slate-200 pt-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-900 font-semibold",children:"Saldo Líquido"}),r.jsxs("span",{className:"font-bold text-emerald-600",children:["+R$ ",(gt*.55).toLocaleString("pt-BR")]})]})})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border border-green-100 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(rr,{className:"w-4 h-4 text-green-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Insights Financeiros"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-green-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:"Crescimento Sustentável"})]}),r.jsxs("p",{className:"text-slate-700 text-sm",children:["Receita de ",r.jsxs("strong",{children:["R$ ",ot.toLocaleString("pt-BR")]})," com margem bruta de ",r.jsxs("strong",{children:[Fs,"%"]}),"indica saúde financeira excelente. Continue investindo em produtos premium."]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-green-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:"Oportunidade de Expansão"})]}),r.jsxs("p",{className:"text-slate-700 text-sm",children:["Com ",r.jsxs("strong",{children:["ROAS de ",tt,"x"]})," e ticket médio de ",r.jsxs("strong",{children:["R$ ",St]}),", há potencial para aumentar investimento em marketing em 25%."]})]})]})]})]}),o==="estoque"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"📦 Módulo Estoque & Logística"}),r.jsxs("button",{onClick:()=>P("/admin/estoque"),className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(Bt,{className:"w-4 h-4"}),"Módulo Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(Bt,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Total Produtos"})]}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:jt}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Itens cadastrados"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:r.jsx(Zt,{className:"w-5 h-5 text-red-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Estoque Baixo"})]}),r.jsx("p",{className:"text-3xl font-bold text-red-600",children:Mt}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Requer atenção"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-green-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Valor Estoque"})]}),r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",(ot*.4).toLocaleString("pt-BR")]}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Investido"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:r.jsx(oa,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Movimentações"})]}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Math.floor(wt*1.8)}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Este mês"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Status do Estoque"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Estoque Normal"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:Math.floor(jt*.7)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Estoque Médio"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:Math.floor(jt*.2)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Estoque Baixo"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:Mt})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),r.jsx("span",{className:"text-slate-700",children:"Sem Estoque"})]}),r.jsx("span",{className:"font-semibold text-slate-900",children:Math.floor(jt*.05)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Produtos Mais Movimentados"}),r.jsx("div",{className:"space-y-4",children:D.slice(0,4).map((ce,Re)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-500 to-amber-600 rounded-lg flex items-center justify-center",children:r.jsxs("span",{className:"text-white font-bold text-xs",children:["#",Re+1]})}),r.jsx("span",{className:"text-slate-700",children:ce.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[ce.estimatedSales," vendas"]}),r.jsxs("p",{className:"text-xs text-slate-500",children:["estoque: ",Math.floor(Math.random()*50+10)]})]})]},ce.id))})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-2xl border border-orange-100 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(Bt,{className:"w-4 h-4 text-orange-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Insights de Estoque"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-orange-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:"Reposição Necessária"})]}),r.jsxs("p",{className:"text-slate-700 text-sm",children:[r.jsxs("strong",{children:[Mt," produtos"]})," estão abaixo do estoque mínimo. Valor total para reposição: ",r.jsxs("strong",{children:["R$ ",(ot*.12).toLocaleString("pt-BR")]}),"."]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-orange-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:"Giro Otimizado"})]}),r.jsxs("p",{className:"text-slate-700 text-sm",children:["Giro médio de estoque de ",r.jsx("strong",{children:"6.2x ao ano"}),". Top produtos vendem ",r.jsx("strong",{children:"2.5x mais rápido"})," que a média."]})]})]})]})]}),o==="rh"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"👥 Módulo Recursos Humanos"}),r.jsxs("button",{onClick:()=>P("/admin/rh"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[r.jsx(Pt,{className:"w-4 h-4"}),"Módulo Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Funcionários"})]}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:A.totalEmployees||0}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Total cadastrados"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(Xi,{className:"w-5 h-5 text-green-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Presença"})]}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:A.activeEmployees||0}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Funcionários ativos"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Folha"})]}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:A.totalPayroll?`R$ ${(A.totalPayroll/1e3).toFixed(0)}k`:"R$ 0"}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Mensal"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-5 h-5 text-orange-600"})}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Produtividade"})]}),r.jsx("p",{className:"text-3xl font-bold text-orange-600",children:(($s=A.departments)==null?void 0:$s.length)||0}),r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Departamentos"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Departamentos"}),r.jsx("div",{className:"space-y-4",children:A.departments&&A.departments.length>0?A.departments.map((ce,Re)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${Re%3===0?"bg-blue-500":Re%3===1?"bg-green-500":"bg-purple-500"}`}),r.jsx("span",{className:"text-slate-700",children:ce.name||ce.nome})]}),r.jsxs("span",{className:"font-semibold text-slate-900",children:[ce.employee_count||ce.funcionarios_count||0," funcionários"]})]},ce.id||Re)):r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(Pt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Nenhum departamento cadastrado"})]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Métricas de RH"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Funcionários Ativos"}),r.jsxs("span",{className:"font-semibold text-green-600",children:[A.activeEmployees||0," de ",A.totalEmployees||0]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Departamentos"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:[((xa=A.departments)==null?void 0:xa.length)||0," cadastrados"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Folha de Pagamento"}),r.jsx("span",{className:"font-semibold text-purple-600",children:A.totalPayroll?`R$ ${(A.totalPayroll/1e3).toFixed(1)}k`:"R$ 0"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Salário Médio"}),r.jsx("span",{className:"font-semibold text-orange-600",children:A.averageSalary?`R$ ${(A.averageSalary/1e3).toFixed(1)}k`:"R$ 0"})]})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-100 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Pt,{className:"w-4 h-4 text-blue-600"})}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Status do RH"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:A.totalEmployees>0?"Módulo Configurado":"Aguardando Configuração"})]}),r.jsx("p",{className:"text-slate-700 text-sm",children:A.totalEmployees>0?`Sistema RH com ${A.totalEmployees} funcionários cadastrados em ${((Nn=A.departments)==null?void 0:Nn.length)||0} departamentos.`:"Configure funcionários e departamentos para ativar o módulo de RH completo."})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("h5",{className:"font-semibold text-slate-900",children:A.totalPayroll>0?"Folha Ativa":"Folha Pendente"})]}),r.jsx("p",{className:"text-slate-700 text-sm",children:A.totalPayroll>0?`Folha de pagamento ativa com total mensal de R$ ${(A.totalPayroll/1e3).toFixed(1)}k.`:"Configure salários dos funcionários para ativar a folha de pagamento."})]})]})]})]})]})]}),O&&r.jsx(V8,{isOpen:O,onClose:()=>$(!1),product:V,onSuccess:ze}),Q&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:te?"Editar Curso":"Novo Curso"}),r.jsx("button",{onClick:()=>re(!1),className:"p-2 hover:bg-slate-100 rounded-xl transition-colors",children:r.jsx(Nr,{className:"w-5 h-5 text-slate-500"})})]}),r.jsxs("form",{onSubmit:ce=>{ce.preventDefault();const Re=new FormData(ce.target),st={title:Re.get("title"),description:Re.get("description"),instructor:Re.get("instructor"),price:parseFloat(Re.get("price"))||0,duration:parseFloat(Re.get("duration"))||0,level:Re.get("level"),category:Re.get("category"),is_active:Re.get("is_active")==="on",is_featured:Re.get("is_featured")==="on"};Ae(st)},className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Título do Curso *"}),r.jsx("input",{type:"text",name:"title",required:!0,defaultValue:(te==null?void 0:te.title)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Curso de Barista Profissional"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrição *"}),r.jsx("textarea",{name:"description",required:!0,rows:3,defaultValue:(te==null?void 0:te.description)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva o conteúdo e objetivos do curso..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Instrutor *"}),r.jsx("input",{type:"text",name:"instructor",required:!0,defaultValue:(te==null?void 0:te.instructor)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do instrutor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Preço (R$) *"}),r.jsx("input",{type:"number",name:"price",step:"0.01",required:!0,defaultValue:(te==null?void 0:te.price)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Duração (horas)"}),r.jsx("input",{type:"number",name:"duration",step:"0.5",defaultValue:(te==null?void 0:te.duration)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"8"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nível"}),r.jsxs("select",{name:"level",defaultValue:(te==null?void 0:te.level)||"beginner",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"beginner",children:"Iniciante"}),r.jsx("option",{value:"intermediate",children:"Intermediário"}),r.jsx("option",{value:"advanced",children:"Avançado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Categoria"}),r.jsx("input",{type:"text",name:"category",defaultValue:(te==null?void 0:te.category)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Barista, Torra, Análise Sensorial"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:(te==null?void 0:te.is_active)!==!1,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:"Curso ativo"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"is_featured",defaultChecked:(te==null?void 0:te.is_featured)||!1,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:"Curso em destaque"})]})]})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:()=>re(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancelar"}),r.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[te?"Atualizar":"Criar"," Curso"]})]})]})]})}),oe&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:ye?"Editar Post":"Novo Post"}),r.jsx("button",{onClick:()=>Ce(!1),className:"p-2 hover:bg-slate-100 rounded-xl transition-colors",children:r.jsx(Nr,{className:"w-5 h-5 text-slate-500"})})]}),r.jsxs("form",{onSubmit:ce=>{ce.preventDefault();const Re=new FormData(ce.target),st={title:Re.get("title"),excerpt:Re.get("excerpt"),content:Re.get("content"),author:Re.get("author"),category:Re.get("category"),status:Re.get("status"),featured:Re.get("featured")==="on",reading_time:parseInt(Re.get("reading_time"))||5};xe(st)},className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Título do Post *"}),r.jsx("input",{type:"text",name:"title",required:!0,defaultValue:(ye==null?void 0:ye.title)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: As Melhores Técnicas de Extração de Café"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resumo *"}),r.jsx("textarea",{name:"excerpt",required:!0,rows:2,defaultValue:(ye==null?void 0:ye.excerpt)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Breve resumo do post que aparecerá na listagem..."})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Conteúdo *"}),r.jsx("textarea",{name:"content",required:!0,rows:8,defaultValue:(ye==null?void 0:ye.content)||"",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Conteúdo completo do post..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Autor *"}),r.jsx("input",{type:"text",name:"author",required:!0,defaultValue:(ye==null?void 0:ye.author)||(s==null?void 0:s.name)||"Admin",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Nome do autor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Categoria"}),r.jsxs("select",{name:"category",defaultValue:(ye==null?void 0:ye.category)||"café",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"café",children:"Café"}),r.jsx("option",{value:"barista",children:"Barista"}),r.jsx("option",{value:"torra",children:"Torra"}),r.jsx("option",{value:"receitas",children:"Receitas"}),r.jsx("option",{value:"equipamentos",children:"Equipamentos"}),r.jsx("option",{value:"dicas",children:"Dicas"}),r.jsx("option",{value:"negócios",children:"Negócios"}),r.jsx("option",{value:"cultura",children:"Cultura"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),r.jsxs("select",{name:"status",defaultValue:(ye==null?void 0:ye.status)||"draft",className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"draft",children:"Rascunho"}),r.jsx("option",{value:"published",children:"Publicado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tempo de Leitura (min)"}),r.jsx("input",{type:"number",name:"reading_time",min:"1",max:"60",defaultValue:(ye==null?void 0:ye.reading_time)||5,className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"5"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",name:"featured",defaultChecked:(ye==null?void 0:ye.featured)||!1,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:"Post em destaque"})]})})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:()=>Ce(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancelar"}),r.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[ye?"Atualizar":"Criar"," Post"]})]})]})]})})]})})},dT=()=>{const[e,t]=j.useState("overview"),s=[{id:1,name:"Aprendiz do Café",points:0,color:"bg-gray-500",icon:yt,benefits:["5% desconto em compras","Acesso a conteúdo básico"],description:"Primeiros passos no mundo dos cafés especiais"},{id:2,name:"Conhecedor",points:500,color:"bg-green-500",icon:Et,benefits:["10% desconto em compras","Degustações gratuitas mensais","Acesso a workshops básicos"],description:"Já conhece bem os diferentes tipos de café"},{id:3,name:"Especialista",points:1500,color:"bg-blue-500",icon:js,benefits:["15% desconto em compras","Acesso VIP a lançamentos","Consultoria personalizada"],description:"Domina as técnicas de preparo e degustação"},{id:4,name:"Mestre do Café",points:3e3,color:"bg-purple-500",icon:Xh,benefits:["20% desconto em compras","Participação em júris","Acesso a cafés exclusivos"],description:"Reconhecido expertise no mundo do café"},{id:5,name:"Lenda",points:5e3,color:"bg-yellow-500",icon:Td,benefits:["25% desconto em compras","Status VIP permanente","Cafés limitados exclusivos"],description:"O nível mais alto de conhecimento e paixão pelo café"}],a=[{activity:"Compra de produtos",points:"+10 pontos por R$ 10",icon:yt},{activity:"Primeira compra",points:"+100 pontos",icon:bx},{activity:"Avaliação de produto",points:"+25 pontos",icon:Et},{activity:"Compartilhamento nas redes",points:"+15 pontos",icon:Pt},{activity:"Participação em workshops",points:"+50 pontos",icon:js},{activity:"Indicação de amigos",points:"+200 pontos",icon:Dr},{activity:"Compra mensal recorrente",points:"+50 pontos bonus",icon:Jd},{activity:"Feedback detalhado",points:"+30 pontos",icon:Et}],n={bronze:{name:"Bronze Corporativo",requirement:"R$ 1.000/mês",benefits:["10% desconto corporativo","Entrega prioritária","Relatórios de consumo"]},silver:{name:"Prata Corporativo",requirement:"R$ 5.000/mês",benefits:["15% desconto corporativo","Coffee break personalizado","Treinamentos para equipe"]},gold:{name:"Ouro Corporativo",requirement:"R$ 10.000/mês",benefits:["20% desconto corporativo","Barista dedicado","Máquinas profissionais em comodato"]}};return r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsx("main",{className:"py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-coffee rounded-full mb-6",children:r.jsx(Td,{className:"w-10 h-10 text-coffee-white"})}),r.jsxs("h1",{className:"font-cormorant font-bold text-5xl lg:text-6xl text-coffee-intense mb-6",children:["Sistema de ",r.jsx("span",{className:"text-coffee-gold",children:"Gamificação"})]}),r.jsx("p",{className:"text-xl text-coffee-gray max-w-3xl mx-auto leading-relaxed",children:"Transforme sua paixão pelo café em recompensas exclusivas. Ganhe pontos, desbloqueie níveis e desfrute de benefícios únicos em cada compra e interação."})]}),r.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:[{id:"overview",label:"Visão Geral",icon:Et},{id:"levels",label:"Níveis",icon:Td},{id:"points",label:"Como Ganhar Pontos",icon:js},{id:"corporate",label:"Programa Corporativo",icon:Pt}].map(i=>r.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ${e===i.id?"bg-coffee-gold text-coffee-white shadow-lg":"bg-coffee-cream text-coffee-gray hover:bg-coffee-gold/10 hover:text-coffee-gold"}`,children:[r.jsx(i.icon,{className:"w-5 h-5"}),i.label]},i.id))}),e==="overview"&&r.jsxs("div",{className:"space-y-12",children:[r.jsxs("section",{className:"card",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-intense mb-4",children:"Como Funciona"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Um sistema revolucionário que recompensa sua jornada no mundo dos cafés especiais"})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-coffee-gold/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(yt,{className:"w-8 h-8 text-coffee-gold"})}),r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-3",children:"1. Interaja & Compre"}),r.jsx("p",{className:"text-coffee-gray",children:"Ganhe pontos em cada compra, avaliação, compartilhamento e participação em eventos."})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-coffee-gold/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Td,{className:"w-8 h-8 text-coffee-gold"})}),r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-3",children:"2. Suba de Nível"}),r.jsx("p",{className:"text-coffee-gray",children:"Acumule pontos para desbloquear novos níveis com benefícios exclusivos crescentes."})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-coffee-gold/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(bx,{className:"w-8 h-8 text-coffee-gold"})}),r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-3",children:"3. Desfrute dos Benefícios"}),r.jsx("p",{className:"text-coffee-gray",children:"Aproveite descontos, acessos VIP, produtos exclusivos e experiências únicas."})]})]})]}),r.jsxs("section",{className:"bg-gradient-coffee/5 rounded-xl p-8",children:[r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-intense text-center mb-8",children:"Benefícios Exclusivos"}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:bx,title:"Descontos Progressivos",desc:"Até 25% off em compras"},{icon:Et,title:"Acesso VIP",desc:"Lançamentos e eventos exclusivos"},{icon:yt,title:"Cafés Limitados",desc:"Edições especiais reservadas"},{icon:Pt,title:"Comunidade",desc:"Rede de especialistas em café"}].map((i,o)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-coffee-gold rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(i.icon,{className:"w-6 h-6 text-coffee-white"})}),r.jsx("h3",{className:"font-medium text-coffee-intense mb-2",children:i.title}),r.jsx("p",{className:"text-sm text-coffee-gray",children:i.desc})]},o))})]})]}),e==="levels"&&r.jsxs("section",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-intense mb-4",children:"Níveis de Especialista"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Evolua através dos níveis e desbloqueie benefícios exclusivos"})]}),r.jsx("div",{className:"space-y-6",children:s.map((i,o)=>r.jsx("div",{className:"card hover:shadow-gold transition-all duration-300",children:r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:`w-16 h-16 ${i.color} rounded-full flex items-center justify-center flex-shrink-0`,children:r.jsx(i.icon,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense",children:i.name}),r.jsxs("span",{className:"px-3 py-1 bg-coffee-gold/10 text-coffee-gold text-sm font-medium rounded-full",children:[i.points,"+ pontos"]})]}),r.jsx("p",{className:"text-coffee-gray mb-4",children:i.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.benefits.map((l,c)=>r.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-coffee-cream text-coffee-intense text-sm rounded-full",children:[r.jsx(Et,{className:"w-3 h-3 text-coffee-gold"}),l]},c))})]}),o<s.length-1&&r.jsx(Gi,{className:"w-6 h-6 text-coffee-gray flex-shrink-0"})]})},i.id))})]}),e==="points"&&r.jsxs("section",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-intense mb-4",children:"Como Ganhar Pontos"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Múltiplas formas de acumular pontos e acelerar sua evolução"})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:a.map((i,o)=>r.jsx("div",{className:"card hover:shadow-gold transition-all duration-300",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-coffee-gold/10 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(i.icon,{className:"w-6 h-6 text-coffee-gold"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-coffee-intense mb-1",children:i.activity}),r.jsx("p",{className:"text-coffee-gold font-bold",children:i.points})]})]})},o))}),r.jsxs("div",{className:"card bg-coffee-gold/5 border-coffee-gold/20",children:[r.jsxs("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-4 flex items-center gap-2",children:[r.jsx(Jd,{className:"w-5 h-5 text-coffee-gold"}),"Dicas para Maximizar Pontos"]}),r.jsxs("ul",{className:"space-y-2 text-coffee-gray",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-4 h-4 text-coffee-gold"}),"Faça avaliações detalhadas dos produtos para ganhar pontos bonus"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-4 h-4 text-coffee-gold"}),"Compartilhe suas experiências nas redes sociais com nossa hashtag"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-4 h-4 text-coffee-gold"}),"Participe de workshops e eventos para acelerar sua evolução"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-4 h-4 text-coffee-gold"}),"Indique amigos e ganhe pontos quando eles fizerem a primeira compra"]})]})]})]}),e==="corporate"&&r.jsxs("section",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-intense mb-4",children:"Programa Corporativo"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Benefícios especiais para empresas que valorizam a qualidade"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Object.entries(n).map(([i,o])=>r.jsxs("div",{className:"card hover:shadow-gold transition-all duration-300",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 ${i==="bronze"?"bg-amber-600":i==="silver"?"bg-gray-400":"bg-yellow-500"}`,children:r.jsx(Dr,{className:"w-8 h-8 text-white"})}),r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-2",children:o.name}),r.jsx("p",{className:"text-coffee-gold font-bold text-lg",children:o.requirement})]}),r.jsx("div",{className:"space-y-3",children:o.benefits.map((l,c)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Et,{className:"w-4 h-4 text-coffee-gold flex-shrink-0"}),r.jsx("span",{className:"text-coffee-gray",children:l})]},c))})]},i))}),r.jsxs("div",{className:"card bg-gradient-coffee text-coffee-white text-center",children:[r.jsx("h3",{className:"font-cormorant font-bold text-2xl mb-4",children:"Interessado no Programa Corporativo?"}),r.jsx("p",{className:"text-coffee-cream mb-6",children:"Entre em contato conosco para uma proposta personalizada para sua empresa"}),r.jsx("button",{className:"bg-coffee-gold text-coffee-intense px-8 py-3 rounded-lg font-medium hover:bg-coffee-gold/90 transition-colors",children:"Solicitar Proposta"})]})]}),r.jsx("section",{className:"text-center mt-16",children:r.jsxs("div",{className:"card bg-gradient-coffee/5",children:[r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-intense mb-4",children:"Pronto para Começar sua Jornada?"}),r.jsx("p",{className:"text-coffee-gray text-lg mb-8",children:"Cadastre-se agora e comece a acumular pontos na sua primeira compra"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs("button",{className:"btn-primary px-8 py-3 flex items-center gap-2",children:[r.jsx(_C,{className:"w-5 h-5"}),"Começar Agora"]}),r.jsx("button",{className:"btn-secondary px-8 py-3",children:"Saiba Mais"})]})]})})]})})})},uT=()=>{var k,P,O,$,V,T;const{user:e,updateProfile:t,logout:s,loading:a}=ar(),n=Vt(),[i,o]=j.useState({name:"",email:"",phone:""}),[l,c]=j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,u]=j.useState(!1),[h,f]=j.useState(!1),[m,p]=j.useState({current:!1,new:!1,confirm:!1}),[v,g]=j.useState(!1),[y,N]=j.useState({type:"",text:""});j.useEffect(()=>{var F,z;e&&o({name:((F=e.profile)==null?void 0:F.name)||e.name||"",email:e.email||"",phone:((z=e.profile)==null?void 0:z.phone)||""})},[e]);const S=F=>{const{name:z,value:se}=F.target;o(Y=>({...Y,[z]:se})),y.text&&N({type:"",text:""})},C=F=>{const{name:z,value:se}=F.target;c(Y=>({...Y,[z]:se})),y.text&&N({type:"",text:""})},M=F=>{p(z=>({...z,[F]:!z[F]}))},D=async F=>{F.preventDefault(),g(!0),N({type:"",text:""});try{const z=await t(i);z.success?(N({type:"success",text:"Perfil atualizado com sucesso!"}),u(!1)):N({type:"error",text:z.error||"Erro ao atualizar perfil"})}catch{N({type:"error",text:"Erro de conexão. Tente novamente."})}finally{g(!1)}},L=async F=>{if(F.preventDefault(),g(!0),N({type:"",text:""}),l.newPassword!==l.confirmPassword){N({type:"error",text:"As senhas não coincidem"}),g(!1);return}if(l.newPassword.length<6){N({type:"error",text:"A nova senha deve ter pelo menos 6 caracteres"}),g(!1);return}try{N({type:"success",text:"Senha alterada com sucesso!"}),c({currentPassword:"",newPassword:"",confirmPassword:""}),f(!1)}catch{N({type:"error",text:"Erro ao alterar senha. Tente novamente."})}finally{g(!1)}},A=async()=>{await s(),n("/")},I=()=>{var F,z;o({name:((F=e.profile)==null?void 0:F.name)||e.name||"",email:e.email||"",phone:((z=e.profile)==null?void 0:z.phone)||""}),u(!1),N({type:"",text:""})},H=()=>{c({currentPassword:"",newPassword:"",confirmPassword:""}),f(!1),N({type:"",text:""})};return a||!e?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando perfil..."})]})}):r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Meu Perfil"}),r.jsx("p",{className:"text-xl text-slate-600",children:"Gerencie suas informações pessoais e preferências"})]}),y.text&&r.jsx("div",{className:`mb-8 p-4 rounded-2xl border ${y.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[y.type==="success"?r.jsx(dr,{className:"w-5 h-5"}):r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:y.text})]})}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500 to-amber-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx("span",{className:"text-white font-bold text-2xl",children:((O=(P=((k=e.profile)==null?void 0:k.name)||e.name||e.email)==null?void 0:P.charAt(0))==null?void 0:O.toUpperCase())||"U"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:(($=e.profile)==null?void 0:$.name)||e.name||"Usuário"}),r.jsx("p",{className:"text-slate-600",children:e.email}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[r.jsx(Et,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"text-sm text-slate-600",children:((V=e.profile)==null?void 0:V.user_type)==="cliente_pj"?"Pessoa Jurídica":"Pessoa Física"})]})]}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dl,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Membro desde"})]}),r.jsx("span",{className:"text-sm font-medium text-slate-900",children:new Date(e.created_at||Date.now()).toLocaleDateString("pt-BR")})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Pontos"})]}),r.jsxs("span",{className:"text-sm font-medium text-amber-600",children:[((T=e.profile)==null?void 0:T.points)||0," pts"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>n("/dashboard"),className:"w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 rounded-xl transition-colors",children:"Ver Dashboard"}),r.jsx("button",{onClick:A,className:"w-full bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium py-3 rounded-xl transition-colors",children:"Sair da Conta"})]})]})}),r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Informações Pessoais"}),!d&&r.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 text-amber-600 hover:bg-amber-50 rounded-xl transition-colors",children:[r.jsx(SC,{className:"w-4 h-4"}),"Editar"]})]}),r.jsx("form",{onSubmit:D,children:r.jsxs("div",{className:"grid gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Nome Completo"}),r.jsxs("div",{className:"relative",children:[r.jsx(kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:S,disabled:!d,required:!0,className:`w-full pl-10 pr-4 py-3 border rounded-xl transition-all ${d?"border-slate-200 focus:ring-2 focus:ring-amber-500 focus:border-transparent":"border-slate-100 bg-slate-50 text-slate-600"}`,placeholder:"Seu nome completo"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"E-mail"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"email",name:"email",value:i.email,onChange:S,disabled:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-100 bg-slate-50 text-slate-600 rounded-xl",placeholder:"seu@email.com"})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"O e-mail não pode ser alterado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Telefone"}),r.jsxs("div",{className:"relative",children:[r.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:S,disabled:!d,className:`w-full pl-10 pr-4 py-3 border rounded-xl transition-all ${d?"border-slate-200 focus:ring-2 focus:ring-amber-500 focus:border-transparent":"border-slate-100 bg-slate-50 text-slate-600"}`,placeholder:"(55) 99999-9999"})]})]}),d&&r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white font-medium py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pi,{className:"w-4 h-4"}),"Salvar Alterações"]})}),r.jsxs("button",{type:"button",onClick:I,className:"px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(Nr,{className:"w-4 h-4"}),"Cancelar"]})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Segurança"}),r.jsx("p",{className:"text-slate-600",children:"Altere sua senha para manter sua conta segura"})]}),!h&&r.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 text-amber-600 hover:bg-amber-50 rounded-xl transition-colors",children:[r.jsx(Ca,{className:"w-4 h-4"}),"Alterar Senha"]})]}),h?r.jsx("form",{onSubmit:L,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Senha Atual"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:m.current?"text":"password",name:"currentPassword",value:l.currentPassword,onChange:C,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Digite sua senha atual"}),r.jsx("button",{type:"button",onClick:()=>M("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:m.current?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:m.new?"text":"password",name:"newPassword",value:l.newPassword,onChange:C,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Digite a nova senha (mín. 6 caracteres)"}),r.jsx("button",{type:"button",onClick:()=>M("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:m.new?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Confirmar Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:m.confirm?"text":"password",name:"confirmPassword",value:l.confirmPassword,onChange:C,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Confirme a nova senha"}),r.jsx("button",{type:"button",onClick:()=>M("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:m.confirm?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white font-medium py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Alterando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Is,{className:"w-4 h-4"}),"Alterar Senha"]})}),r.jsxs("button",{type:"button",onClick:H,className:"px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(Nr,{className:"w-4 h-4"}),"Cancelar"]})]})]})}):r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(Is,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:"Senha protegida"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Sua senha está segura e criptografada"})]})]})]})]})]})]})})},hT=()=>{const{user:e}=ub(),t=Vt(),[s,a]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState("all");j.useEffect(()=>{if(!e){t("/login");return}u()},[e,t]);const u=async()=>{i(!0);try{const{data:m,error:p}=await ge.from("orders").select(`
          *,
          order_items (
            *,
            products (name, price)
          ),
          users (name, email)
        `).eq("user_id",e.id).order("created_at",{ascending:!1});if(p)console.error("Erro ao carregar pedidos:",p),a([]);else{const v=(m==null?void 0:m.map(g=>{var y,N;return{id:g.id,date:((y=g.created_at)==null?void 0:y.split("T")[0])||new Date().toISOString().split("T")[0],status:g.status||"pending",total:parseFloat(g.total_amount||0),items:((N=g.order_items)==null?void 0:N.map(S=>{var C,M;return{name:((C=S.products)==null?void 0:C.name)||"Produto não encontrado",quantity:S.quantity,price:parseFloat(S.unit_price||((M=S.products)==null?void 0:M.price)||0)}}))||[],shipping:{method:g.shipping_method||"Entrega Padrão",address:g.shipping_address||"Endereço não informado",tracking:g.tracking_code||null}}}))||[];a(v),console.log(`✅ ${v.length} pedidos carregados do Supabase`)}}catch(m){console.error("❌ Erro ao carregar pedidos:",m),a([])}finally{i(!1)}},h=m=>{switch(m){case"pending":return{label:"Pendente",color:"bg-yellow-100 text-yellow-800"};case"completed":return{label:"Entregue",color:"bg-green-100 text-green-800"};case"cancelled":return{label:"Cancelado",color:"bg-red-100 text-red-800"};default:return{label:"Desconhecido",color:"bg-gray-100 text-gray-800"}}},f=s.filter(m=>c==="all"||m.status===c);return n?r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-coffee-gold mx-auto mb-4"}),r.jsx("p",{className:"text-coffee-gray",children:"Carregando seus pedidos..."})]})}):s.length===0?r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx("div",{className:"w-32 h-32 bg-coffee-cream rounded-full flex items-center justify-center mx-auto mb-8",children:r.jsx("span",{className:"text-coffee-gold text-6xl",children:"📦"})}),r.jsx("h1",{className:"font-cormorant font-bold text-4xl text-coffee-intense mb-4",children:"Nenhum pedido encontrado"}),r.jsx("p",{className:"text-coffee-gray text-lg mb-8",children:"Você ainda não fez nenhum pedido. Que tal explorar nossos cafés especiais?"}),r.jsx("button",{onClick:()=>t("/marketplace"),className:"btn-primary inline-flex items-center px-8 py-3",children:"Explorar Cafés"})]})}):r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"font-cormorant font-bold text-4xl text-coffee-intense mb-4",children:"Meus Pedidos"}),r.jsx("p",{className:"text-coffee-gray text-lg",children:"Acompanhe o status dos seus pedidos e histórico de compras"})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex space-x-4 justify-center",children:[r.jsxs("button",{onClick:()=>d("all"),className:`px-6 py-2 rounded-full transition-colors ${c==="all"?"bg-coffee-gold text-coffee-white":"bg-coffee-cream text-coffee-gray hover:bg-coffee-gold/20"}`,children:["Todos (",s.length,")"]}),r.jsxs("button",{onClick:()=>d("pending"),className:`px-6 py-2 rounded-full transition-colors ${c==="pending"?"bg-coffee-gold text-coffee-white":"bg-coffee-cream text-coffee-gray hover:bg-coffee-gold/20"}`,children:["Pendentes (",s.filter(m=>m.status==="pending").length,")"]}),r.jsxs("button",{onClick:()=>d("completed"),className:`px-6 py-2 rounded-full transition-colors ${c==="completed"?"bg-coffee-gold text-coffee-white":"bg-coffee-cream text-coffee-gray hover:bg-coffee-gold/20"}`,children:["Entregues (",s.filter(m=>m.status==="completed").length,")"]})]})}),r.jsx("div",{className:"space-y-6",children:f.map(m=>{const p=h(m.status);return r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[r.jsxs("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense",children:["Pedido #",m.id]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${p.color}`,children:p.label})]}),r.jsxs("p",{className:"text-coffee-gray",children:["Realizado em ",new Date(m.date).toLocaleDateString("pt-BR")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-cormorant font-bold text-2xl text-coffee-gold",children:["R$ ",m.total.toFixed(2)]}),r.jsxs("p",{className:"text-coffee-gray text-sm",children:[m.items.length," ",m.items.length===1?"item":"itens"]})]})]}),r.jsx("div",{className:"border-t border-coffee-cream pt-4 mb-4",children:r.jsx("div",{className:"space-y-2",children:m.items.map((v,g)=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-coffee-cream rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-coffee-gold",children:"☕"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-coffee-intense",children:v.name}),r.jsxs("p",{className:"text-coffee-gray text-sm",children:["Quantidade: ",v.quantity]})]})]}),r.jsxs("div",{className:"text-coffee-gold font-medium",children:["R$ ",v.price.toFixed(2)]})]},g))})}),r.jsx("div",{className:"border-t border-coffee-cream pt-4",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-coffee-intense mb-2",children:"Endereço de Entrega"}),r.jsx("p",{className:"text-coffee-gray text-sm",children:m.shipping.address})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-coffee-intense mb-2",children:"Método de Entrega"}),r.jsx("p",{className:"text-coffee-gray text-sm",children:m.shipping.method}),m.shipping.tracking&&r.jsxs("p",{className:"text-coffee-gold text-sm",children:["Rastreamento: ",m.shipping.tracking]})]})]})}),r.jsx("div",{className:"border-t border-coffee-cream pt-4 mt-4",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>l(o===m.id?null:m.id),className:"btn-secondary px-4 py-2 text-sm",children:o===m.id?"Ocultar Detalhes":"Ver Detalhes"}),m.status==="completed"&&r.jsx("button",{onClick:()=>t("/marketplace"),className:"btn-primary px-4 py-2 text-sm",children:"Comprar Novamente"}),m.status==="pending"&&r.jsx("button",{className:"px-4 py-2 text-sm text-red-600 hover:text-red-800 transition-colors",children:"Cancelar Pedido"})]})}),o===m.id&&r.jsxs("div",{className:"border-t border-coffee-cream pt-4 mt-4 bg-coffee-cream/30 -mx-6 -mb-6 px-6 pb-6 rounded-b-lg",children:[r.jsx("h4",{className:"font-cormorant font-bold text-lg text-coffee-intense mb-4",children:"Detalhes do Pedido"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium text-coffee-intense mb-3",children:"Timeline"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-coffee-gold rounded-full"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Pedido realizado"})]}),m.status!=="cancelled"&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${m.status==="completed"?"bg-coffee-gold":"bg-coffee-cream"}`}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Em preparação"})]}),m.status==="completed"&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-coffee-gold rounded-full"}),r.jsx("span",{className:"text-coffee-gray text-sm",children:"Entregue"})]})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium text-coffee-intense mb-3",children:"Suporte"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{className:"text-coffee-gold hover:text-coffee-intense text-sm transition-colors",children:"Entrar em contato"}),r.jsx("br",{}),r.jsx("button",{className:"text-coffee-gold hover:text-coffee-intense text-sm transition-colors",children:"Solicitar reembolso"})]})]})]})]})]},m.id)})})]})})},mT=()=>{const e=[{number:"1000+",label:"Clientes Satisfeitos",icon:Pt,color:"from-blue-500 to-blue-600"},{number:"50+",label:"Variedades Premium",icon:yt,color:"from-amber-500 to-amber-600"},{number:"85+",label:"Pontuação SCA",icon:Dr,color:"from-green-500 to-green-600"},{number:"15+",label:"Produtores Parceiros",icon:hs,color:"from-purple-500 to-purple-600"}],t=[{icon:js,title:"Excelência",description:"Buscamos a perfeição em cada grão, desde a seleção até a torra artesanal.",gradient:"from-emerald-500 to-teal-600"},{icon:tl,title:"Paixão",description:"O amor pelo café especial move cada decisão e processo da nossa torrefação.",gradient:"from-yellow-500 to-orange-600"},{icon:Jy,title:"Sustentabilidade",description:"Práticas responsáveis que respeitam o meio ambiente e os produtores.",gradient:"from-blue-500 to-purple-600"}],s=[{step:"01",title:"Seleção Rigorosa",description:"Visitamos produtores e selecionamos apenas grãos com pontuação SCA acima de 80 pontos."},{step:"02",title:"Análise Sensorial",description:"Degustação profissional para identificar perfis únicos e características especiais."},{step:"03",title:"Torra Artesanal",description:"Processo controlado por mestres torradores para realçar as melhores qualidades."},{step:"04",title:"Controle de Qualidade",description:"Cada lote é testado para garantir consistência e excelência no produto final."}],a=[{name:"Daniel Nascimento",role:"Fundador & Mestre Torrador",avatar:"👨‍💼",description:"15 anos de experiência em café especial. Certificado Q-Grader SCA."},{name:"Maria Santos",role:"Coordenadora de Qualidade",avatar:"👩‍🔬",description:"Especialista em análise sensorial e controle de qualidade dos cafés."},{name:"João Silva",role:"Relacionamento com Produtores",avatar:"👨‍🌾",description:"Responsável pela seleção e parcerias com os melhores caficultores."}];return r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-amber-900 py-20 lg:py-32",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_70%,rgba(245,158,11,0.1),transparent_70%)]"}),r.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-20 items-center",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-600/20 border border-amber-600/30 rounded-full px-4 py-2",children:[r.jsx(Dr,{className:"w-4 h-4 text-amber-400"}),r.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"Certificação SCA"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-white leading-tight",children:["Nossa História no",r.jsx("span",{className:"block text-amber-400",children:"Café Especial"})]}),r.jsx("p",{className:"text-xl text-slate-300 leading-relaxed",children:"Há mais de 5 anos dedicados à arte da torrefação artesanal, transformando grãos especiais em experiências inesquecíveis para nossos clientes."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"text-center lg:text-left",children:[r.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-amber-400 mb-1",children:"5+"}),r.jsx("div",{className:"text-slate-300 text-sm",children:"Anos de Experiência"})]}),r.jsxs("div",{className:"text-center lg:text-left",children:[r.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-amber-400 mb-1",children:"92"}),r.jsx("div",{className:"text-slate-300 text-sm",children:"Pontuação Máxima"})]})]})]}),r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"relative bg-gradient-to-br from-amber-100 to-amber-200 rounded-3xl p-8 lg:p-12 shadow-2xl",children:[r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"text-7xl lg:text-8xl",children:"☕"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(Dr,{className:"w-6 h-6 text-amber-600"}),r.jsx("span",{className:"font-bold text-slate-900",children:"Certificação SCA"})]}),r.jsx("p",{className:"text-slate-700 text-sm",children:"Associação Americana de Cafés Especiais"})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx("div",{className:"flex",children:[1,2,3,4,5].map(n=>r.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-current"},n))}),r.jsx("span",{className:"font-bold text-slate-900",children:"4.9/5"})]}),r.jsx("p",{className:"text-slate-700 text-xs text-center mt-1",children:"Satisfação dos Clientes"})]})]})]}),r.jsx("div",{className:"absolute -top-6 -right-6 bg-green-500 text-white rounded-2xl p-4 shadow-xl",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jy,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Sustentável"})]})}),r.jsx("div",{className:"absolute -bottom-6 -left-6 bg-purple-500 text-white rounded-2xl p-4 shadow-xl",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Qualidade"})]})})]})})]})})]}),r.jsx("section",{className:"py-20 lg:py-32 bg-slate-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900 mb-6",children:"Nossas Conquistas"}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Números que refletem nosso compromisso com a excelência e a satisfação dos nossos clientes"})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((n,i)=>r.jsxs("div",{className:"group text-center",children:[r.jsx("div",{className:"relative mb-8",children:r.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${n.color} rounded-3xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:r.jsx(n.icon,{className:"w-10 h-10 text-white"})})}),r.jsx("div",{className:"text-4xl lg:text-5xl font-bold text-slate-900 mb-2",children:n.number}),r.jsx("div",{className:"text-slate-600 font-medium",children:n.label})]},i))})]})}),r.jsx("section",{className:"py-20 lg:py-32",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-100 rounded-full px-4 py-2",children:[r.jsx(yt,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-amber-800 font-medium text-sm",children:"Nossa História"})]}),r.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900",children:["Paixão que Moveu uma",r.jsx("span",{className:"block text-amber-600",children:"Revolução no Café"})]}),r.jsxs("div",{className:"space-y-4 text-lg text-slate-600 leading-relaxed",children:[r.jsx("p",{children:"Tudo começou com uma viagem às montanhas de Minas Gerais, onde Daniel Nascimento, nosso fundador, se apaixonou pela complexidade e riqueza dos cafés especiais brasileiros."}),r.jsx("p",{children:"Em 2019, decidiu transformar essa paixão em missão: levar cafés de qualidade excepcional diretamente dos melhores produtores para a mesa dos brasileiros."}),r.jsx("p",{children:"Hoje, somos reconhecidos como uma das principais torrefações artesanais do Sul do Brasil, com certificação SCA e parcerias diretas com mais de 15 produtores especializados."})]})]}),r.jsxs("div",{className:"flex items-center gap-4 p-6 bg-amber-50 rounded-2xl border border-amber-200",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center",children:r.jsx(dr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-900 mb-1",children:"Compromisso com a Excelência"}),r.jsx("div",{className:"text-slate-600 text-sm",children:"Cada café que torrefamos passa por rigoroso controle de qualidade"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-100 to-amber-50 rounded-3xl p-8 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"🌱"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Origem Sustentável"}),r.jsx("p",{className:"text-slate-600",children:"Trabalhamos diretamente com produtores que praticam agricultura sustentável"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-3xl p-8 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Qualidade Certificada"}),r.jsx("p",{className:"text-slate-600",children:"Todos os nossos cafés são avaliados pelos rigorosos padrões SCA"})]})]})]})})}),r.jsx("section",{className:"py-20 lg:py-32 bg-slate-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-white rounded-full px-4 py-2 mb-6 shadow-sm",children:[r.jsx(tl,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-slate-700 font-medium text-sm",children:"Nossos Valores"})]}),r.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900 mb-6",children:"O Que Nos Move"}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Valores que guiam cada decisão e definem nossa identidade como torrefação artesanal"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map((n,i)=>r.jsxs("div",{className:"group bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2",children:[r.jsx("div",{className:"relative mb-8",children:r.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${n.gradient} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:r.jsx(n.icon,{className:"w-8 h-8 text-white"})})}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:n.title}),r.jsx("p",{className:"text-slate-600 leading-relaxed text-lg",children:n.description})]},i))})]})}),r.jsx("section",{className:"py-20 lg:py-32",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 rounded-full px-4 py-2 mb-6",children:[r.jsx(Ar,{className:"w-4 h-4 text-slate-600"}),r.jsx("span",{className:"text-slate-700 font-medium text-sm",children:"Nosso Processo"})]}),r.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900 mb-6",children:"Do Grão à Xícara Perfeita"}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Cada etapa é cuidadosamente planejada para garantir a máxima qualidade e sabor"})]}),r.jsx("div",{className:"space-y-8",children:s.map((n,i)=>r.jsxs("div",{className:"relative",children:[i<s.length-1&&r.jsx("div",{className:"absolute left-8 top-20 w-0.5 h-16 bg-slate-200 z-0"}),r.jsxs("div",{className:"flex items-start gap-8 relative z-10",children:[r.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-r from-amber-500 to-amber-600 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-white font-bold text-xl",children:n.step})}),r.jsxs("div",{className:"flex-1 bg-white rounded-3xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:n.title}),r.jsx("p",{className:"text-slate-600 text-lg leading-relaxed",children:n.description})]})]})]},i))})]})}),r.jsxs("section",{className:"py-20 lg:py-32 bg-slate-900 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_30%,rgba(245,158,11,0.1),transparent_70%)]"}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-600/20 border border-amber-600/30 rounded-full px-4 py-2 mb-6",children:[r.jsx(Pt,{className:"w-4 h-4 text-amber-400"}),r.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"Nossa Equipe"})]}),r.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold text-white mb-6",children:["Pessoas Apaixonadas",r.jsx("span",{className:"block text-amber-400",children:"Por Café Especial"})]}),r.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:"Conheça os especialistas que tornam possível levar a você os melhores cafés do Brasil"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:a.map((n,i)=>r.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-3xl p-8 border border-white/20 hover:bg-white/20 transition-all duration-300",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-amber-600/20 rounded-full flex items-center justify-center mx-auto mb-6 text-3xl",children:n.avatar}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:n.name}),r.jsx("div",{className:"text-amber-400 font-medium mb-4",children:n.role}),r.jsx("p",{className:"text-slate-300 leading-relaxed",children:n.description})]})},i))})]})]}),r.jsxs("section",{className:"py-20 lg:py-32 bg-slate-900 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-amber-400/10 rounded-full animate-pulse"}),r.jsx("div",{className:"absolute bottom-20 right-10 w-32 h-32 bg-amber-400/5 rounded-full animate-pulse delay-300"}),r.jsx("div",{className:"absolute top-40 right-20 w-16 h-16 bg-amber-400/10 rounded-full animate-pulse delay-700"})]}),r.jsx("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:r.jsxs("div",{className:"space-y-16",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-white mb-8",children:"Impacto que Fazemos"}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-4xl lg:text-5xl font-bold text-amber-400",children:"98%"}),r.jsx("div",{className:"text-slate-300",children:"Satisfação"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-4xl lg:text-5xl font-bold text-amber-400",children:"24h"}),r.jsx("div",{className:"text-slate-300",children:"Entrega Rápida"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-4xl lg:text-5xl font-bold text-amber-400",children:"100%"}),r.jsx("div",{className:"text-slate-300",children:"Café Fresco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-4xl lg:text-5xl font-bold text-amber-400",children:"7"}),r.jsx("div",{className:"text-slate-300",children:"Dias Garantia"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 text-slate-400",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"SSL Seguro"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dr,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Certificação SCA"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Qualidade Premium"})]})]})]})})]}),r.jsx("section",{className:"py-20 lg:py-32 bg-amber-50",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"text-6xl",children:"🤝"}),r.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900",children:["Faça Parte da Nossa",r.jsx("span",{className:"block text-amber-600",children:"Comunidade do Café"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed",children:"Junte-se a milhares de apreciadores que já descobriram o verdadeiro sabor do café especial brasileiro."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs("button",{className:"group inline-flex items-center justify-center gap-2 bg-amber-600 hover:bg-amber-700 text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[r.jsx(yt,{className:"w-5 h-5"}),"Experimente Nossos Cafés",r.jsx(ni,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]}),r.jsxs("button",{className:"inline-flex items-center justify-center gap-2 border-2 border-slate-300 hover:border-amber-600 text-slate-700 hover:text-amber-600 font-semibold px-8 py-4 rounded-2xl transition-all duration-300",children:[r.jsx(Pt,{className:"w-5 h-5"}),"Conheça Nossa História"]})]})]})})})]})},fT=()=>{const[e,t]=j.useState({name:"",email:"",phone:"",subject:"geral",message:""}),[s,a]=j.useState(!1),[n,i]=j.useState(!1),o=[{icon:Zi,title:"WhatsApp Premium",description:"Atendimento direto e rápido",contact:"(55) 99645-8600",action:"Chamar no WhatsApp",available:"Online agora",gradient:"from-green-500 to-emerald-600",badge:"Mais Rápido"},{icon:ds,title:"E-mail Executivo",description:"Para parcerias e orçamentos",contact:"contato@mestresdocafe.com.br",action:"Enviar E-mail",available:"Resposta em 2h",gradient:"from-blue-500 to-purple-600",badge:"Profissional"},{icon:hs,title:"Matriz Santa Maria",description:"Venha conhecer nossa torrefação",contact:"Rua do Café, 123 - Centro",action:"Ver no Mapa",available:"Seg-Sex 8h-18h",gradient:"from-orange-500 to-red-600",badge:"Presencial"}],l=[{value:"geral",label:"Informações Gerais"},{value:"pedidos",label:"Pedidos e Entregas"},{value:"qualidade",label:"Qualidade dos Produtos"},{value:"parceria",label:"Parcerias Comerciais"},{value:"franquia",label:"Oportunidades de Franquia"},{value:"suporte",label:"Suporte Técnico"}],c=[{question:"Qual o prazo de entrega?",answer:"Para Santa Maria: 24-48h. Demais regiões: 3-7 dias úteis. Frete grátis acima de R$ 99."},{question:"Como garantem o frescor do café?",answer:"Torramos sob demanda e embalamos com válvula desgaseificante. Cada pacote tem data de torra."},{question:"Têm certificação SCA?",answer:"Sim! Todos os nossos cafés especiais são avaliados pelos padrões SCA com pontuação acima de 80."},{question:"Posso visitar a torrefação?",answer:"Claro! Agende uma visita pelo WhatsApp. Oferecemos tours guiados e degustações."}],d=async h=>{h.preventDefault(),a(!0),await new Promise(f=>setTimeout(f,2e3)),i(!0),a(!1),setTimeout(()=>{t({name:"",email:"",phone:"",subject:"geral",message:""}),i(!1)},3e3)},u=h=>{t({...e,[h.target.name]:h.target.value})};return n?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md mx-auto text-center p-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(dr,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Mensagem Enviada!"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Recebemos sua mensagem e responderemos em breve. Obrigado pelo contato!"}),r.jsx("button",{onClick:()=>i(!1),className:"bg-amber-600 hover:bg-amber-700 text-white font-semibold px-6 py-3 rounded-xl transition-colors",children:"Enviar Nova Mensagem"})]})}):r.jsxs("div",{className:"min-h-screen bg-slate-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-amber-900 py-20 lg:py-32",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-600/20 border border-amber-600/30 rounded-full px-4 py-2 mb-6",children:[r.jsx(Zi,{className:"w-4 h-4 text-amber-400"}),r.jsx("span",{className:"text-amber-400 font-medium text-sm",children:"Atendimento Premium"})]}),r.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-white mb-6",children:["Fale ",r.jsx("span",{className:"text-amber-400",children:"Conosco"})]}),r.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto mb-8",children:"Estamos aqui para ajudar! Nossa equipe especializada está pronta para esclarecer dúvidas, receber sugestões e oferecer o melhor atendimento em café especial."}),r.jsxs("div",{className:"flex items-center justify-center gap-8 text-slate-400",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Seg-Sex 8h-18h"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zi,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"WhatsApp 24h"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ds,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Resposta em 2h"})]})]})]})})}),r.jsx("section",{className:"py-20 lg:py-32",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900 mb-6",children:"Como Podemos Ajudar?"}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Escolha o canal que preferir para entrar em contato. Nosso time está pronto para atendê-lo!"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:o.map((h,f)=>r.jsxs("div",{className:"group bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 border border-slate-100",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs font-semibold px-3 py-1 rounded-full",children:h.badge}),r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),r.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${h.gradient} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:r.jsx(h.icon,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:h.title}),r.jsx("p",{className:"text-slate-600 mb-4",children:h.description})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"font-semibold text-slate-900",children:h.contact}),r.jsx("div",{className:"text-sm text-green-600 font-medium",children:h.available})]}),r.jsx("button",{className:`w-full bg-gradient-to-r ${h.gradient} hover:opacity-90 text-white font-semibold py-3 rounded-xl transition-all duration-300 transform hover:scale-105`,children:h.action})]})]},f))})]})}),r.jsx("section",{className:"py-20 lg:py-32 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-start",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 rounded-full px-4 py-2 mb-6",children:[r.jsx(uc,{className:"w-4 h-4 text-slate-600"}),r.jsx("span",{className:"text-slate-700 font-medium text-sm",children:"Formulário Premium"})]}),r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-6",children:"Envie sua Mensagem"}),r.jsx("p",{className:"text-xl text-slate-600",children:"Preencha o formulário abaixo e nossa equipe entrará em contato rapidamente."})]}),r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Nome Completo *"}),r.jsxs("div",{className:"relative",children:[r.jsx(kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",name:"name",value:e.name,onChange:u,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Seu nome"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"E-mail *"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"email",name:"email",value:e.email,onChange:u,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"seu@email.com"})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Telefone"}),r.jsxs("div",{className:"relative",children:[r.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"tel",name:"phone",value:e.phone,onChange:u,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"(00) 00000-0000"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Assunto *"}),r.jsxs("div",{className:"relative",children:[r.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("select",{name:"subject",value:e.subject,onChange:u,required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all appearance-none",children:l.map(h=>r.jsx("option",{value:h.value,children:h.label},h.value))})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Mensagem *"}),r.jsx("textarea",{name:"message",value:e.message,onChange:u,required:!0,rows:"6",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all resize-none",placeholder:"Conte-nos como podemos ajudar..."})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white font-semibold py-4 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 flex items-center justify-center gap-2",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(uc,{className:"w-5 h-5"}),"Enviar Mensagem"]})})]})]}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-3xl p-8 border border-amber-200",children:[r.jsx("div",{className:"flex items-center gap-2 mb-4",children:[1,2,3,4,5].map(h=>r.jsx(Et,{className:"w-5 h-5 text-yellow-400 fill-current"},h))}),r.jsx("blockquote",{className:"text-slate-700 text-lg leading-relaxed mb-6",children:'"Atendimento excepcional! Eles realmente entendem de café e sempre têm as melhores recomendações. Equipe muito profissional."'}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold",children:"MC"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900",children:"Maria Clara"}),r.jsx("div",{className:"text-slate-600 text-sm",children:"Cliente há 2 anos"})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-3xl p-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(PC,{className:"w-6 h-6 text-amber-600"}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Perguntas Frequentes"})]}),r.jsx("div",{className:"space-y-6",children:c.map((h,f)=>r.jsxs("div",{className:"border-b border-slate-200 pb-4 last:border-b-0 last:pb-0",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:h.question}),r.jsx("p",{className:"text-slate-600 text-sm",children:h.answer})]},f))})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-white rounded-2xl border border-slate-200",children:[r.jsx(Is,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("div",{className:"text-xs font-medium text-slate-700",children:"SSL Seguro"})]}),r.jsxs("div",{className:"text-center p-4 bg-white rounded-2xl border border-slate-200",children:[r.jsx(Dr,{className:"w-8 h-8 text-amber-500 mx-auto mb-2"}),r.jsx("div",{className:"text-xs font-medium text-slate-700",children:"SCA Certificado"})]}),r.jsxs("div",{className:"text-center p-4 bg-white rounded-2xl border border-slate-200",children:[r.jsx(yt,{className:"w-8 h-8 text-amber-600 mx-auto mb-2"}),r.jsx("div",{className:"text-xs font-medium text-slate-700",children:"Premium"})]})]})]})]})})}),r.jsx("section",{className:"py-20 lg:py-32 bg-slate-100",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl lg:text-5xl font-bold text-slate-900 mb-6",children:"Venha nos Visitar"}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:"Nossa torrefação está localizada no coração de Santa Maria. Agende uma visita e conheça todo o processo de produção!"})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"aspect-square bg-gradient-to-br from-slate-200 to-slate-300 rounded-3xl flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(hs,{className:"w-16 h-16 text-slate-500 mx-auto mb-4"}),r.jsx("div",{className:"text-slate-600 font-medium",children:"Mapa Interativo"}),r.jsx("div",{className:"text-slate-500 text-sm",children:"Rua do Café, 123 - Santa Maria/RS"})]})}),r.jsx("div",{className:"absolute top-6 right-6",children:r.jsx("button",{className:"bg-white text-slate-700 px-4 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all font-medium text-sm",children:"Ver no Google Maps"})})]}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Torrefação Mestres do Café"}),r.jsx("p",{className:"text-slate-600 text-lg leading-relaxed",children:"Nossa sede conta com torrefação artesanal, laboratório de qualidade, área de degustação e loja conceito. Venha conhecer todo o processo de produção!"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(hs,{className:"w-6 h-6 text-amber-600 mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900",children:"Endereço"}),r.jsxs("div",{className:"text-slate-600",children:["Rua do Café, 123 - Centro",r.jsx("br",{}),"Santa Maria - RS, 97010-000"]})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Ds,{className:"w-6 h-6 text-amber-600 mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900",children:"Horário de Funcionamento"}),r.jsxs("div",{className:"text-slate-600",children:["Segunda a Sexta: 8h às 18h",r.jsx("br",{}),"Sábado: 8h às 12h",r.jsx("br",{}),"Domingo: Fechado"]})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(us,{className:"w-6 h-6 text-amber-600 mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900",children:"Agendamento"}),r.jsxs("div",{className:"text-slate-600",children:["WhatsApp: (55) 99645-8600",r.jsx("br",{}),"E-mail: visita@mestresdocafe.com.br"]})]})]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(yt,{className:"w-6 h-6 text-amber-600"}),r.jsx("span",{className:"font-semibold text-slate-900",children:"Tour Gratuito"})]}),r.jsx("p",{className:"text-slate-700",children:"Agende um tour gratuito pela nossa torrefação e ganhe uma degustação exclusiva dos nossos melhores cafés especiais!"})]})]})]})]})})]})},xT=()=>{var D,L;const[e,t]=j.useState([]),[s,a]=j.useState(null),[n,i]=j.useState(null),[o,l]=j.useState("all"),[c,d]=j.useState(!0),[u,h]=j.useState(""),[f,m]=j.useState(null),p=j.useRef(null),v=j.useRef(null);j.useEffect(()=>{(async()=>{if(typeof window<"u"&&!window.L){const I=document.createElement("link");I.rel="stylesheet",I.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(I);const H=document.createElement("script");H.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",H.onload=()=>{d(!1),N()},document.head.appendChild(H)}else window.L&&(d(!1),N())})()},[]),j.useEffect(()=>{g(),y()},[]);const g=async()=>{try{const I=await(await fetch("http://localhost:5000/api/locations")).json();I.success&&t(I.locations)}catch(A){console.error("Erro ao carregar localizações:",A)}},y=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(A=>{i({lat:A.coords.latitude,lng:A.coords.longitude})},A=>{console.log("Erro ao obter localização:",A)})},N=()=>{if(!window.L||!p.current||v.current)return;const A=[-29.6842,-53.8069],I=window.L.map(p.current).setView(A,13);window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(I),v.current=I,e.length>0&&S(I)};j.useEffect(()=>{v.current&&e.length>0&&S(v.current)},[e,o]);const S=A=>{if(A.eachLayer(H=>{H instanceof window.L.Marker&&A.removeLayer(H)}),(Array.isArray(e)?o==="all"?e:e.filter(H=>H.type===o):[]).forEach(H=>{const k=C(H.type),P=window.L.marker([H.latitude,H.longitude],{icon:k}).addTo(A),O=`
        <div class="p-3 min-w-[250px]">
          <h3 class="font-bold text-coffee-intense text-lg mb-2">${H.name}</h3>
          <p class="text-coffee-gray mb-2 flex items-center">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"/>
            </svg>
            ${H.address}
          </p>
          <p class="text-coffee-gray mb-2 flex items-center">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
            </svg>
            ${H.phone}
          </p>
          <div class="flex items-center mb-2">
            ${[...Array(5)].map(($,V)=>`<svg class="w-4 h-4 ${V<Math.floor(H.rating)?"text-yellow-400":"text-gray-300"}" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>`).join("")}
            <span class="ml-1 text-sm text-coffee-gray">${H.rating}</span>
          </div>
          <button 
            onclick="window.selectLocation(${H.id})"
            class="w-full bg-coffee-gold text-white px-4 py-2 rounded hover:bg-coffee-intense transition-colors"
          >
            Ver Detalhes
          </button>
        </div>
      `;P.bindPopup(O)}),n){const H=window.L.divIcon({html:'<div class="w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-lg"></div>',className:"user-location-marker",iconSize:[16,16],iconAnchor:[8,8]});window.L.marker([n.lat,n.lng],{icon:H}).addTo(A).bindPopup("📍 Sua localização")}},C=A=>{const I={loja:"#BC9F35",fazenda:"#4B2E2B",pickup:"#E0D2B6"},H={loja:"🏪",fazenda:"🌱",pickup:"📦"};return window.L.divIcon({html:`<div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold shadow-lg" style="background-color: ${I[A]}">${H[A]}</div>`,className:"custom-marker",iconSize:[32,32],iconAnchor:[16,32]})};j.useEffect(()=>(window.selectLocation=A=>{const I=e.find(H=>H.id===A);a(I)},()=>{delete window.selectLocation}),[e]);const M=async()=>{if(u.trim())try{const I=await(await fetch("http://localhost:5000/api/delivery/check-area",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:u})})).json();m(I)}catch(A){console.error("Erro ao verificar entrega:",A)}};return c?r.jsx("div",{className:"min-h-screen bg-coffee-white flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-coffee-gold border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-coffee-gray",children:"Carregando mapa..."})]})}):r.jsxs("div",{className:"min-h-screen bg-coffee-white",children:[r.jsx("div",{className:"bg-coffee-intense text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-cormorant mb-4",children:"📍 Nossas Localizações"}),r.jsx("p",{className:"text-coffee-cream text-lg",children:"Encontre a cafeteria mais próxima de você em Santa Maria/RS"})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-coffee-intense mb-4",children:"Filtrar por tipo"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>l("all"),className:`w-full text-left px-4 py-2 rounded transition-colors ${o==="all"?"bg-coffee-gold text-white":"bg-coffee-cream text-coffee-intense hover:bg-coffee-gold hover:text-white"}`,children:"🗺️ Todas as localizações"}),r.jsx("button",{onClick:()=>l("loja"),className:`w-full text-left px-4 py-2 rounded transition-colors ${o==="loja"?"bg-coffee-gold text-white":"bg-coffee-cream text-coffee-intense hover:bg-coffee-gold hover:text-white"}`,children:"🏪 Lojas"}),r.jsx("button",{onClick:()=>l("fazenda"),className:`w-full text-left px-4 py-2 rounded transition-colors ${o==="fazenda"?"bg-coffee-gold text-white":"bg-coffee-cream text-coffee-intense hover:bg-coffee-gold hover:text-white"}`,children:"🌱 Fazendas"}),r.jsx("button",{onClick:()=>l("pickup"),className:`w-full text-left px-4 py-2 rounded transition-colors ${o==="pickup"?"bg-coffee-gold text-white":"bg-coffee-cream text-coffee-intense hover:bg-coffee-gold hover:text-white"}`,children:"📦 Pontos de retirada"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-coffee-intense mb-4 flex items-center",children:[r.jsx(Ka,{className:"w-5 h-5 mr-2"}),"Área de Entrega"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Digite seu endereço...",value:u,onChange:A=>h(A.target.value),className:"w-full px-4 py-2 border-2 border-coffee-cream rounded focus:border-coffee-gold outline-none"}),r.jsx("button",{onClick:M,className:"w-full bg-coffee-gold text-white px-4 py-2 rounded hover:bg-coffee-intense transition-colors",children:"Verificar entrega"}),f&&r.jsxs("div",{className:`p-4 rounded ${f.success&&f.inDeliveryArea?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[r.jsx("p",{className:"font-semibold",children:f.message}),f.success&&f.inDeliveryArea&&r.jsxs("div",{className:"mt-2 text-sm",children:[r.jsxs("p",{children:["📏 Distância: ",f.distanceText]}),r.jsxs("p",{children:["💰 Taxa de entrega: R$ ",(D=f.deliveryFee)==null?void 0:D.toFixed(2)]}),r.jsxs("p",{children:["🆓 Frete grátis acima de R$ ",(L=f.freeDeliveryMinimum)==null?void 0:L.toFixed(2)]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-coffee-intense mb-4",children:"Localizações"}),r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Array.isArray(e)&&e.length>0?e.filter(A=>o==="all"||A.type===o).map(A=>r.jsxs("div",{className:"border-l-4 border-coffee-gold pl-4 py-2 cursor-pointer hover:bg-coffee-cream transition-colors",onClick:()=>a(A),children:[r.jsx("h4",{className:"font-semibold text-coffee-intense",children:A.name}),r.jsxs("p",{className:"text-sm text-coffee-gray flex items-center",children:[r.jsx(hs,{className:"w-3 h-3 mr-1"}),A.address]}),r.jsxs("p",{className:"text-sm text-coffee-gray flex items-center",children:[r.jsx(us,{className:"w-3 h-3 mr-1"}),A.phone]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-400 mr-1"}),r.jsx("span",{className:"text-sm text-coffee-gray",children:A.rating})]})]},A.id)):r.jsxs("div",{className:"text-center py-4 text-coffee-gray",children:[r.jsx(hs,{className:"w-8 h-8 mx-auto mb-2 text-coffee-cream"}),r.jsx("p",{children:"Nenhuma localização encontrada"})]})})]})]}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:r.jsx("div",{ref:p,className:"w-full h-96 lg:h-[600px]",style:{minHeight:"400px"}})}),s&&r.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("h3",{className:"text-2xl font-bold text-coffee-intense",children:s.name}),r.jsx("button",{onClick:()=>a(null),className:"text-coffee-gray hover:text-coffee-intense",children:"✕"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-coffee-intense mb-2 flex items-center",children:[r.jsx(hs,{className:"w-4 h-4 mr-2"}),"Endereço"]}),r.jsxs("p",{className:"text-coffee-gray mb-4",children:[s.address,r.jsx("br",{}),s.city,", ",s.state,r.jsx("br",{}),"CEP: ",s.zipCode]}),r.jsxs("h4",{className:"font-semibold text-coffee-intense mb-2 flex items-center",children:[r.jsx(us,{className:"w-4 h-4 mr-2"}),"Contato"]}),r.jsx("p",{className:"text-coffee-gray mb-4",children:s.phone}),r.jsxs("h4",{className:"font-semibold text-coffee-intense mb-2 flex items-center",children:[r.jsx(Et,{className:"w-4 h-4 mr-2"}),"Avaliação"]}),r.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((A,I)=>r.jsx(Et,{className:`w-4 h-4 ${I<Math.floor(s.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},I)),r.jsxs("span",{className:"ml-2 text-coffee-gray",children:[s.rating," / 5.0"]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-coffee-intense mb-2 flex items-center",children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Horário de Funcionamento"]}),r.jsxs("div",{className:"text-coffee-gray space-y-1 text-sm mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Segunda-feira:"}),r.jsx("span",{children:s.hours.monday})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Terça-feira:"}),r.jsx("span",{children:s.hours.tuesday})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Quarta-feira:"}),r.jsx("span",{children:s.hours.wednesday})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Quinta-feira:"}),r.jsx("span",{children:s.hours.thursday})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Sexta-feira:"}),r.jsx("span",{children:s.hours.friday})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Sábado:"}),r.jsx("span",{children:s.hours.saturday})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Domingo:"}),r.jsx("span",{children:s.hours.sunday})]})]}),r.jsx("h4",{className:"font-semibold text-coffee-intense mb-2",children:"Serviços"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.services.map((A,I)=>r.jsx("span",{className:"bg-coffee-cream text-coffee-intense px-3 py-1 rounded-full text-sm",children:A},I))})]})]}),r.jsxs("div",{className:"mt-6 flex gap-4",children:[r.jsxs("button",{onClick:()=>{const A=`https://www.google.com/maps/dir/?api=1&destination=${s.latitude},${s.longitude}`;window.open(A,"_blank")},className:"flex items-center bg-coffee-gold text-white px-4 py-2 rounded hover:bg-coffee-intense transition-colors",children:[r.jsx(CC,{className:"w-4 h-4 mr-2"}),"Como chegar"]}),r.jsxs("button",{onClick:()=>{const A=s.phone.replace(/[^\d]/g,"");window.open(`https://wa.me/55${A}`,"_blank")},className:"flex items-center bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors",children:[r.jsx(us,{className:"w-4 h-4 mr-2"}),"WhatsApp"]})]})]})]})]})})]})},pT=()=>{const[e,t]=j.useState([]),[s,a]=j.useState(!0),[n,i]=j.useState("");j.useEffect(()=>{o()},[]);const o=async()=>{a(!0);try{console.log("📚 Carregando cursos da página pública...");let d=await H8();(!d.success||d.data&&d.data.length===0)&&(console.log("⚠️ Nenhum curso ativo encontrado, buscando todos os cursos..."),d=await Md()),d.success&&d.data&&d.data.length>0?(t(d.data),console.log(`✅ ${d.data.length} cursos carregados do Supabase`)):(console.log("⚠️ Nenhum curso encontrado no Supabase"),t([]))}catch(d){console.error("❌ Erro ao carregar cursos:",d),i("Erro ao carregar cursos")}finally{a(!1)}},l=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d),c=d=>({beginner:"Iniciante",intermediate:"Intermediário",advanced:"Avançado"})[d]||d;return s?r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-coffee-gold mx-auto mb-4"}),r.jsx("p",{className:"text-coffee-gray",children:"Carregando cursos..."})]})}):r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsx("main",{className:"py-20 px-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("h1",{className:"font-cormorant font-bold text-4xl lg:text-5xl text-coffee-intense mb-4",children:["Cursos de ",r.jsx("span",{className:"text-coffee-gold",children:"Especialização"})]}),r.jsx("p",{className:"text-coffee-gray text-lg max-w-3xl mx-auto",children:"Desenvolva suas habilidades no mundo do café com nossos cursos ministrados por especialistas certificados. Do básico ao avançado, temos o curso perfeito para você."})]}),n&&r.jsx("div",{className:"mb-8 p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl text-center",children:n}),r.jsxs("div",{className:"bg-gradient-coffee rounded-2xl p-8 mb-16 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-coffee-gold rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Dr,{className:"w-10 h-10 text-coffee-white"})}),r.jsx("h2",{className:"font-cormorant font-bold text-3xl text-coffee-white mb-4",children:"🏆 Certificação Reconhecida"}),r.jsx("p",{className:"text-coffee-cream text-lg mb-6",children:"Nossos cursos são certificados pela Associação Brasileira de Cafés Especiais (ABCE) e reconhecidos no mercado nacional."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-coffee-gold mb-1",children:["+",Array.isArray(e)?e.reduce((d,u)=>d+(u.enrolled_students||0),0):0]}),r.jsx("div",{className:"text-coffee-cream text-sm",children:"Alunos Formados"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-coffee-gold mb-1",children:"4.8★"}),r.jsx("div",{className:"text-coffee-cream text-sm",children:"Avaliação Média"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-coffee-gold mb-1",children:"98%"}),r.jsx("div",{className:"text-coffee-cream text-sm",children:"Taxa de Satisfação"})]})]})]}),e.length>0?r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:e.map(d=>r.jsx("div",{className:"card hover:shadow-gold transition-all duration-300",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-coffee-gold/20 rounded-xl flex items-center justify-center text-2xl",children:r.jsx(Fd,{className:"w-8 h-8 text-coffee-gold"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-2",children:d.title}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-coffee-gray",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ds,{className:"w-4 h-4"}),d.duration,"h"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Pt,{className:"w-4 h-4"}),d.enrolled_students||0," alunos"]}),d.rating&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.rating]})]})]})]}),r.jsx("p",{className:"text-coffee-gray mb-6 flex-1",children:d.description}),Array.isArray(d.highlights)&&d.highlights.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-coffee-intense mb-3",children:"O que você vai aprender:"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:d.highlights.map((u,h)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm text-coffee-gray",children:[r.jsx("div",{className:"w-2 h-2 bg-coffee-gold rounded-full"}),u]},h))})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-coffee-cream",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-cormorant font-bold text-2xl text-coffee-gold",children:l(d.price||0)}),r.jsxs("div",{className:"text-sm text-coffee-gray",children:["Nível ",c(d.level)]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{className:"btn-secondary px-4 py-2 text-sm flex items-center gap-2",children:[r.jsx(Ap,{className:"w-4 h-4"}),"Ver Prévia"]}),r.jsx("button",{className:"btn-primary px-6 py-2 text-sm",children:"Inscrever-se"})]})]})]})},d.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Fd,{className:"w-16 h-16 text-coffee-gray mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-coffee-intense mb-2",children:"Nenhum curso disponível"}),r.jsx("p",{className:"text-coffee-gray",children:"Os cursos serão disponibilizados em breve. Acompanhe nossas novidades!"})]}),r.jsx("div",{className:"mt-16 text-center",children:r.jsxs("div",{className:"bg-coffee-cream rounded-xl p-8",children:[r.jsx("h3",{className:"font-cormorant font-bold text-2xl text-coffee-intense mb-4",children:"Não encontrou o curso ideal?"}),r.jsx("p",{className:"text-coffee-gray mb-6 max-w-2xl mx-auto",children:"Entre em contato conosco para cursos personalizados ou para grupos. Oferecemos treinamentos in-company e workshops especiais."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(ct,{to:"/contato",className:"btn-primary px-8 py-3",children:"Falar com Especialista"}),r.jsx("button",{className:"btn-secondary px-8 py-3",children:"Ver Agenda de Turmas"})]})]})})]})})})},gT=()=>{const[e,t]=j.useState("all"),[s,a]=j.useState(""),n=[{id:"all",name:"Todos os Tópicos",count:247},{id:"beginners",name:"Iniciantes",count:89},{id:"brewing",name:"Métodos de Preparo",count:65},{id:"roasting",name:"Torrefação",count:43},{id:"business",name:"Negócios",count:31},{id:"equipment",name:"Equipamentos",count:19}],o=[{id:1,title:"Como ajustar a moagem para V60?",author:"Maria Silva",authorLevel:"Especialista",category:"brewing",replies:23,views:156,likes:15,lastActivity:"2 horas atrás",isSticky:!1,hasAnswer:!0,excerpt:"Estou tendo dificuldades para acertar a moagem do meu café para o V60. Às vezes fica muito amargo..."},{id:2,title:"📌 Guia Completo para Iniciantes no Café Especial",author:"João Santos",authorLevel:"Mestre",category:"beginners",replies:45,views:892,likes:67,lastActivity:"1 dia atrás",isSticky:!0,hasAnswer:!1,excerpt:"Um guia completo para quem está começando no mundo dos cafés especiais. Tudo que você precisa saber..."},{id:3,title:"Diferenças entre torra clara e escura no sabor",author:"Ana Costa",authorLevel:"Conhecedor",category:"roasting",replies:18,views:234,likes:12,lastActivity:"5 horas atrás",isSticky:!1,hasAnswer:!0,excerpt:"Gostaria de entender melhor como o nível de torra afeta o sabor final do café..."},{id:4,title:"Equipamentos essenciais para abrir uma cafeteria",author:"Carlos Mendes",authorLevel:"Especialista",category:"business",replies:31,views:445,likes:28,lastActivity:"3 horas atrás",isSticky:!1,hasAnswer:!1,excerpt:"Estou planejando abrir uma cafeteria em Santa Maria e gostaria de sugestões de equipamentos..."},{id:5,title:"Prensa francesa vs AeroPress: qual escolher?",author:"Fernanda Lima",authorLevel:"Aprendiz",category:"equipment",replies:27,views:178,likes:19,lastActivity:"1 hora atrás",isSticky:!1,hasAnswer:!0,excerpt:"Estou em dúvida entre comprar uma prensa francesa ou AeroPress para casa..."}].filter(c=>{const d=e==="all"||c.category===e,u=c.title.toLowerCase().includes(s.toLowerCase())||c.excerpt.toLowerCase().includes(s.toLowerCase());return d&&u}),l=c=>({Aprendiz:"bg-gray-500",Conhecedor:"bg-green-500",Especialista:"bg-blue-500",Mestre:"bg-purple-500",Lenda:"bg-yellow-500"})[c]||"bg-gray-500";return r.jsx("div",{className:"min-h-screen bg-coffee-white font-montserrat",children:r.jsx("main",{className:"py-20 px-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("h1",{className:"font-cormorant font-bold text-4xl lg:text-5xl text-coffee-intense mb-4",children:["Fórum dos ",r.jsx("span",{className:"text-coffee-gold",children:"Mestres"})]}),r.jsx("p",{className:"text-coffee-gray text-lg max-w-3xl mx-auto",children:"Conecte-se com outros apaixonados por café. Compartilhe conhecimento, tire dúvidas e descubra novas técnicas com nossa comunidade de especialistas."})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1",children:[r.jsxs("div",{className:"card mb-6",children:[r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-4",children:"Categorias"}),r.jsx("div",{className:"space-y-2",children:n.map(c=>r.jsx("button",{onClick:()=>t(c.id),className:`w-full text-left p-3 rounded-lg transition-all ${e===c.id?"bg-coffee-gold text-coffee-white":"hover:bg-coffee-cream text-coffee-gray"}`,children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:c.name}),r.jsx("span",{className:"text-sm opacity-75",children:c.count})]})},c.id))})]}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"font-cormorant font-bold text-xl text-coffee-intense mb-4",children:"Estatísticas"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-coffee-gray",children:"Total de Tópicos:"}),r.jsx("span",{className:"font-semibold text-coffee-intense",children:"247"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-coffee-gray",children:"Membros Ativos:"}),r.jsx("span",{className:"font-semibold text-coffee-intense",children:"1.234"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-coffee-gray",children:"Respostas Hoje:"}),r.jsx("span",{className:"font-semibold text-coffee-intense",children:"89"})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-3",children:[r.jsx("div",{className:"card mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-coffee-gray w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar no fórum...",value:s,onChange:c=>a(c.target.value),className:"w-full pl-10 pr-4 py-3 bg-coffee-cream border-2 border-coffee-cream rounded-lg text-coffee-intense placeholder-coffee-gray focus:outline-none focus:border-coffee-gold focus:bg-coffee-white transition-all"})]}),r.jsxs("button",{className:"btn-primary flex items-center gap-2 whitespace-nowrap",children:[r.jsx(AC,{className:"w-4 h-4"}),"Novo Tópico"]})]})}),r.jsx("div",{className:"space-y-4",children:o.map(c=>r.jsx("div",{className:"card hover:shadow-gold transition-all duration-300",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-gradient-coffee rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"w-6 h-6 text-coffee-white"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.isSticky&&r.jsx("span",{className:"bg-coffee-gold text-coffee-white px-2 py-1 rounded-full text-xs font-bold",children:"FIXADO"}),c.hasAnswer&&r.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"RESOLVIDO"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-coffee-gray",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yt,{className:"w-4 h-4"}),c.views]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(kC,{className:"w-4 h-4"}),c.likes]})]})]}),r.jsx("h3",{className:"font-cormorant font-bold text-lg text-coffee-intense mb-2 hover:text-coffee-gold transition-colors cursor-pointer",children:c.title}),r.jsx("p",{className:"text-coffee-gray text-sm mb-3 line-clamp-2",children:c.excerpt}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm text-coffee-intense font-medium",children:c.author}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs text-white font-medium ${l(c.authorLevel)}`,children:c.authorLevel})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-coffee-gray",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Zi,{className:"w-4 h-4"}),c.replies," respostas"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ds,{className:"w-4 h-4"}),c.lastActivity]})]})]})]})]})},c.id))}),r.jsx("div",{className:"mt-8 flex justify-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-4 py-2 text-coffee-gray hover:text-coffee-gold transition-colors",children:"← Anterior"}),r.jsx("button",{className:"px-4 py-2 bg-coffee-gold text-coffee-white rounded-lg",children:"1"}),r.jsx("button",{className:"px-4 py-2 text-coffee-gray hover:text-coffee-gold transition-colors",children:"2"}),r.jsx("button",{className:"px-4 py-2 text-coffee-gray hover:text-coffee-gold transition-colors",children:"3"}),r.jsx("button",{className:"px-4 py-2 text-coffee-gray hover:text-coffee-gold transition-colors",children:"Próximo →"})]})})]})]}),r.jsx("div",{className:"mt-16 text-center",children:r.jsxs("div",{className:"bg-gradient-coffee rounded-xl p-8 text-center",children:[r.jsx("h3",{className:"font-cormorant font-bold text-2xl text-coffee-white mb-4",children:"Junte-se à Comunidade!"}),r.jsx("p",{className:"text-coffee-cream mb-6 max-w-2xl mx-auto",children:"Faça login ou crie uma conta para participar das discussões, fazer perguntas e compartilhar seu conhecimento sobre café."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(ct,{to:"/registro",className:"btn-primary px-8 py-3 bg-coffee-gold hover:bg-coffee-white hover:text-coffee-intense",children:"Criar Conta Grátis"}),r.jsx(ct,{to:"/login",className:"btn-secondary px-8 py-3 border-coffee-gold text-coffee-gold hover:bg-coffee-gold hover:text-coffee-white",children:"Fazer Login"})]})]})})]})})})};function f4({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:mo("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function x4({className:e,...t}){return r.jsx("div",{"data-slot":"card-header",className:mo("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function bT({className:e,...t}){return r.jsx("div",{"data-slot":"card-title",className:mo("leading-none font-semibold",e),...t})}function vT({className:e,...t}){return r.jsx("div",{"data-slot":"card-description",className:mo("text-muted-foreground text-sm",e),...t})}function p4({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:mo("px-6",e),...t})}function yT({className:e,...t}){return r.jsx("div",{"data-slot":"card-footer",className:mo("flex items-center px-6 [.border-t]:pt-6",e),...t})}const jT=()=>{const[e,t]=j.useState([]),[s,a]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState("all"),[c,d]=j.useState(null);j.useEffect(()=>{u()},[]);const u=async()=>{i(!0),d(null);try{const[p,v]=await Promise.all([X8(20),hb()]);p.success?t(p.data):(d("Erro ao carregar artigos"),console.error("Erro ao carregar posts:",p.error)),v.success?a(v.data):console.error("Erro ao carregar categorias:",v.error)}catch(p){d("Erro ao carregar dados do blog"),console.error("Erro ao carregar dados do blog:",p)}finally{i(!1)}},h=p=>new Date(p).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}),f=p=>{if(!p)return"5 min";const v=200,g=p.split(/\s+/).length;return`${Math.ceil(g/v)} min de leitura`},m=o==="all"?e:e.filter(p=>{var v;return((v=p.category)==null?void 0:v.toLowerCase())===o.toLowerCase()});return n?r.jsx("div",{className:"flex flex-col min-h-screen bg-brand-light",children:r.jsx("main",{className:"flex-grow container mx-auto px-4 py-8 md:py-12 flex items-center justify-center",children:r.jsx(rm,{})})}):c?r.jsx("div",{className:"flex flex-col min-h-screen bg-brand-light",children:r.jsx("main",{className:"flex-grow container mx-auto px-4 py-8 md:py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(fh,{className:"w-16 h-16 text-brand-brown mx-auto mb-4"}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-serif text-brand-dark mb-3",children:"Blog dos Mestres"}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 max-w-md mx-auto",children:[r.jsx("p",{className:"text-red-600 mb-4",children:c}),r.jsx(Vs,{onClick:u,className:"bg-brand-brown hover:bg-brand-brown/90 text-brand-light",children:"Tentar Novamente"})]})]})})}):r.jsx("div",{className:"flex flex-col min-h-screen bg-brand-light",children:r.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 md:py-12",children:[r.jsxs("div",{className:"text-center mb-10 md:mb-16",children:[r.jsx(fh,{className:"w-16 h-16 text-brand-brown mx-auto mb-4"}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-serif text-brand-dark mb-3",children:"Blog dos Mestres"}),r.jsx("p",{className:"text-lg md:text-xl text-brand-dark/80 max-w-2xl mx-auto",children:"Artigos, dicas, novidades e curiosidades do universo do café, escritos por quem entende e ama o assunto."})]}),s.length>0&&r.jsx("div",{className:"mb-10",children:r.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[r.jsxs(Vs,{variant:o==="all"?"default":"outline",onClick:()=>l("all"),className:o==="all"?"bg-brand-brown hover:bg-brand-brown/90 text-brand-light":"border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light",children:["Todas (",e.length,")"]}),s.map(p=>r.jsxs(Vs,{variant:o===p.name?"default":"outline",onClick:()=>l(p.name),className:o===p.name?"bg-brand-brown hover:bg-brand-brown/90 text-brand-light":"border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light",children:[p.name," (",p.count,")"]},p.name))]})}),m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(fh,{className:"w-16 h-16 text-brand-brown/50 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"Nenhum artigo encontrado"}),r.jsx("p",{className:"text-brand-dark/60",children:o==="all"?"Ainda não há artigos publicados.":`Não há artigos na categoria "${o}".`})]}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-8 xl:gap-10",children:m.map(p=>r.jsxs(f4,{className:"flex flex-col overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 bg-white border border-brand-brown/10 rounded-xl group",children:[r.jsxs(x4,{className:"p-0 relative",children:[r.jsx(ct,{to:`/blog/${p.slug}`,className:"block","aria-label":`Ler artigo: ${p.title}`,children:p.featured_image?r.jsx("img",{src:p.featured_image,alt:p.title,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300"}):r.jsx("div",{className:"w-full h-56 bg-gradient-to-br from-brand-brown/10 to-brand-brown/20 flex items-center justify-center group-hover:scale-105 transition-transform duration-300",children:r.jsx(fh,{className:"w-16 h-16 text-brand-brown"})})}),r.jsxs(wc,{variant:"secondary",className:"absolute top-4 left-4 bg-brand-brown text-brand-light font-semibold",children:[r.jsx(Qh,{className:"w-3 h-3 mr-1.5"}),p.category]}),p.is_featured&&r.jsx(wc,{variant:"secondary",className:"absolute top-4 right-4 bg-amber-500 text-white font-semibold",children:"Destaque"})]}),r.jsxs(p4,{className:"p-6 flex-grow",children:[r.jsx(bT,{className:"font-serif text-2xl mb-3 text-brand-dark leading-tight",children:r.jsx(ct,{to:`/blog/${p.slug}`,className:"hover:text-brand-brown transition-colors duration-200",children:p.title})}),r.jsx(vT,{className:"text-brand-dark/80 text-base mb-4 line-clamp-3",children:p.excerpt}),r.jsxs("div",{className:"flex flex-wrap items-center text-xs text-brand-dark/70 gap-x-4 gap-y-1 mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(kr,{className:"w-3.5 h-3.5 mr-1.5 text-brand-brown"}),p.author_name||"Mestres do Café"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(dl,{className:"w-3.5 h-3.5 mr-1.5 text-brand-brown"}),h(p.published_at||p.created_at)]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ds,{className:"w-3.5 h-3.5 mr-1.5 text-brand-brown"}),f(p.content)]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-brand-dark/60",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Yt,{className:"w-3.5 h-3.5 mr-1"}),p.views_count||0]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(tl,{className:"w-3.5 h-3.5 mr-1"}),p.likes_count||0]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Zi,{className:"w-3.5 h-3.5 mr-1"}),p.comments_count||0]})]})]}),r.jsx(yT,{className:"p-6 bg-brand-light/30 border-t border-brand-brown/10 mt-auto",children:r.jsx(ct,{to:`/blog/${p.slug}`,className:"w-full","aria-label":`Continuar lendo: ${p.title}`,children:r.jsxs(Vs,{variant:"outline",className:"w-full border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light font-semibold transition-all duration-200 bg-white",children:["Ler Artigo Completo ",r.jsx(ni,{className:"w-4 h-4 ml-2"})]})})})]},p.id))})]})})},wT=()=>{var O,$;const{slug:e}=Zg(),t=Vt(),{user:s}=ar(),[a,n]=j.useState(null),[i,o]=j.useState(!0),[l,c]=j.useState(!1),[d,u]=j.useState(0),[h,f]=j.useState([]),[m,p]=j.useState(""),[v,g]=j.useState(!1),[y,N]=j.useState(!1),[S,C]=j.useState(!1);j.useEffect(()=>{e&&M()},[e]),j.useEffect(()=>{a&&s&&D()},[a,s]);const M=async()=>{o(!0);try{const V=await Q8(e);V.success?(n(V.data),u(V.data.likes_count||0),await Z8(V.data.id),await L(V.data.id)):(console.error("Erro ao carregar post:",V.error),t("/blog"))}catch(V){console.error("Erro ao carregar post:",V),t("/blog")}finally{o(!1)}},D=async()=>{if(!a||!s)return;const V=await tT(a.id,s.id);V.success&&c(V.liked)},L=async V=>{const T=await sT(V);T.success&&f(T.data)},A=async()=>{if(!s){t("/login");return}const V=await eT(a.id,s.id);V.success&&(c(V.liked),u(T=>V.liked?T+1:T-1))},I=async V=>{if(V.preventDefault(),!s){t("/login");return}if(!m.trim())return;g(!0),(await rT(a.id,s.id,m.trim(),s.name||s.email)).success&&(p(""),await L(a.id),n(F=>({...F,comments_count:(F.comments_count||0)+1}))),g(!1)},H=async V=>{if(!s)return;(await aT(V,s.id)).success&&(await L(a.id),n(F=>({...F,comments_count:Math.max((F.comments_count||0)-1,0)})))},k=async V=>{const T=window.location.href,F=`${a.title} - ${a.excerpt}`;switch(V){case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(T)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(T)}&text=${encodeURIComponent(F)}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(T)}`,"_blank");break;case"whatsapp":window.open(`https://wa.me/?text=${encodeURIComponent(F+" "+T)}`,"_blank");break;case"copy":try{await navigator.clipboard.writeText(T),C(!0),setTimeout(()=>C(!1),2e3)}catch(z){console.error("Erro ao copiar link:",z)}break}await nT(a.id,V),N(!1)},P=V=>new Date(V).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"});return i?r.jsx("div",{className:"min-h-screen bg-brand-light flex items-center justify-center",children:r.jsx(rm,{})}):a?r.jsx("div",{className:"min-h-screen bg-brand-light",children:r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsx("div",{className:"mb-8",children:r.jsx(ct,{to:"/blog",children:r.jsxs(Vs,{variant:"outline",className:"border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light mb-6",children:[r.jsx(ao,{className:"w-4 h-4 mr-2"}),"Voltar ao Blog"]})})}),r.jsxs("article",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"relative",children:[a.featured_image?r.jsx("img",{src:a.featured_image,alt:a.title,className:"w-full h-80 object-cover"}):r.jsx("div",{className:"w-full h-80 bg-gradient-to-br from-brand-brown/10 to-brand-brown/20 flex items-center justify-center",children:r.jsx(Qh,{className:"w-20 h-20 text-brand-brown"})}),r.jsx("div",{className:"absolute top-6 left-6",children:r.jsxs(wc,{className:"bg-brand-brown text-brand-light font-semibold px-4 py-2",children:[r.jsx(Qh,{className:"w-3 h-3 mr-1.5"}),a.category]})})]}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-serif text-brand-dark mb-6 leading-tight",children:a.title}),a.excerpt&&r.jsx("p",{className:"text-xl text-brand-dark/80 mb-6 leading-relaxed",children:a.excerpt}),r.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-brand-dark/70 mb-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(kr,{className:"w-4 h-4 mr-2 text-brand-brown"}),a.author_name||"Mestres do Café"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(dl,{className:"w-4 h-4 mr-2 text-brand-brown"}),P(a.published_at||a.created_at)]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ds,{className:"w-4 h-4 mr-2 text-brand-brown"}),Math.ceil((((O=a.content)==null?void 0:O.length)||0)/1e3)," min de leitura"]})]})]}),r.jsx("div",{className:"prose prose-lg max-w-none mb-8",children:r.jsx("div",{className:"text-brand-dark leading-relaxed",dangerouslySetInnerHTML:{__html:($=a.content)==null?void 0:$.replace(/\n/g,"<br>")}})}),a.tags&&a.tags.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-brand-dark mb-3",children:"Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((V,T)=>r.jsx(wc,{variant:"outline",className:"border-brand-brown/30 text-brand-brown",children:V},T))})]}),r.jsx("div",{className:"border-t border-brand-brown/10 pt-8",children:r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(Vs,{variant:l?"default":"outline",size:"sm",onClick:A,className:l?"bg-red-500 hover:bg-red-600 text-white":"border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light",children:[r.jsx(tl,{className:`w-4 h-4 mr-2 ${l?"fill-current":""}`}),d," ",d===1?"Curtida":"Curtidas"]}),r.jsxs("div",{className:"flex items-center text-brand-dark/70",children:[r.jsx(Zi,{className:"w-4 h-4 mr-2"}),a.comments_count||0," ",(a.comments_count||0)===1?"Comentário":"Comentários"]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(Vs,{variant:"outline",size:"sm",onClick:()=>N(!y),className:"border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light",children:[r.jsx(EC,{className:"w-4 h-4 mr-2"}),"Compartilhar"]}),y&&r.jsx("div",{className:"absolute right-0 top-12 bg-white border border-slate-200 rounded-lg shadow-lg p-3 z-10 w-48",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>k("facebook"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-slate-50 rounded-lg transition-colors",children:[r.jsx(v5,{className:"w-4 h-4 text-blue-600"}),"Facebook"]}),r.jsxs("button",{onClick:()=>k("twitter"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-slate-50 rounded-lg transition-colors",children:[r.jsx(y5,{className:"w-4 h-4 text-blue-400"}),"Twitter"]}),r.jsxs("button",{onClick:()=>k("linkedin"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-slate-50 rounded-lg transition-colors",children:[r.jsx(OC,{className:"w-4 h-4 text-blue-700"}),"LinkedIn"]}),r.jsxs("button",{onClick:()=>k("whatsapp"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-slate-50 rounded-lg transition-colors",children:[r.jsx(Ep,{className:"w-4 h-4 text-green-600"}),"WhatsApp"]}),r.jsxs("button",{onClick:()=>k("copy"),className:"w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-slate-50 rounded-lg transition-colors",children:[S?r.jsx(dr,{className:"w-4 h-4 text-green-600"}):r.jsx(TC,{className:"w-4 h-4 text-gray-600"}),S?"Copiado!":"Copiar Link"]})]})})]})]})})]})]}),r.jsxs(f4,{className:"mt-8",children:[r.jsx(x4,{children:r.jsxs("h2",{className:"text-2xl font-bold text-brand-dark",children:["Comentários (",a.comments_count||0,")"]})}),r.jsxs(p4,{children:[s?r.jsxs("form",{onSubmit:I,className:"mb-8",children:[r.jsx("div",{className:"mb-4",children:r.jsx("textarea",{value:m,onChange:V=>p(V.target.value),placeholder:"Adicione seu comentário...",className:"w-full p-4 border border-slate-300 rounded-xl focus:ring-2 focus:ring-brand-brown focus:border-transparent resize-none",rows:4,required:!0})}),r.jsx(Vs,{type:"submit",disabled:v||!m.trim(),className:"bg-brand-brown hover:bg-brand-brown/90 text-brand-light",children:v?r.jsxs(r.Fragment,{children:[r.jsx(rm,{className:"w-4 h-4 mr-2"}),"Enviando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(uc,{className:"w-4 h-4 mr-2"}),"Comentar"]})})]}):r.jsxs("div",{className:"mb-8 p-6 bg-brand-light/50 rounded-xl text-center",children:[r.jsx("p",{className:"text-brand-dark/70 mb-4",children:"Faça login para deixar um comentário"}),r.jsx(ct,{to:"/login",children:r.jsx(Vs,{className:"bg-brand-brown hover:bg-brand-brown/90 text-brand-light",children:"Fazer Login"})})]}),r.jsx("div",{className:"space-y-6",children:h.length===0?r.jsx("p",{className:"text-center text-brand-dark/60 py-8",children:"Ainda não há comentários. Seja o primeiro a comentar!"}):h.map(V=>r.jsxs("div",{className:"border-b border-slate-200 pb-6 last:border-b-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-brand-dark",children:V.user_name}),r.jsx("p",{className:"text-sm text-brand-dark/60",children:P(V.created_at)})]}),s&&s.id===V.user_id&&r.jsx(Vs,{variant:"ghost",size:"sm",onClick:()=>H(V.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(as,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-brand-dark leading-relaxed",children:V.content})]},V.id))})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-brand-light flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-brand-dark mb-4",children:"Post não encontrado"}),r.jsx(ct,{to:"/blog",children:r.jsxs(Vs,{variant:"outline",className:"border-brand-brown text-brand-brown hover:bg-brand-brown hover:text-brand-light",children:[r.jsx(ao,{className:"w-4 h-4 mr-2"}),"Voltar ao Blog"]})})]})})},NT=()=>{const[e,t]=j.useState([]),[s,a]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState("all"),[u,h]=j.useState("all"),[f,m]=j.useState(!1),[p,v]=j.useState(null),[g,y]=j.useState(!1),[N,S]=j.useState(!1),{user:C,hasPermission:M}=ar(),D=Vt(),[L,A]=j.useState({title:"",content:"",excerpt:"",category:"",tags:[],featured_image:"",status:"draft",seo_title:"",seo_description:"",is_featured:!1});j.useEffect(()=>{C&&M("admin")&&I()},[C,M]);const I=async()=>{i(!0);try{const[z,se]=await Promise.all([Dd(),hb()]);if(z.success?(console.log("✅ Posts carregados:",z.data.length),t(z.data)):console.error("Erro ao carregar posts:",z.error),se.success){const Y=se.data.map((_e,R)=>({..._e,color:["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-orange-100 text-orange-800","bg-red-100 text-red-800"][R%5]}));a(Y)}else console.error("Erro ao carregar categorias:",se.error)}catch(z){console.error("Erro ao carregar dados do blog:",z)}finally{i(!1)}},H=()=>{A({title:"",content:"",excerpt:"",category:"",tags:[],featured_image:"",status:"draft",seo_title:"",seo_description:"",is_featured:!1}),v(null),y(!1),m(!0)},k=z=>{A({title:z.title||"",content:z.content||"",excerpt:z.excerpt||"",category:z.category||"",tags:z.tags||[],featured_image:z.featured_image||"",status:z.status||"draft",seo_title:z.seo_title||"",seo_description:z.seo_description||"",is_featured:z.is_featured||!1}),v(z),y(!0),m(!0)},P=async()=>{if(!L.title||!L.content){alert("Título e conteúdo são obrigatórios");return}S(!0);try{let z;g?z=await im(p.id,L):z=await u4(L),z.success?(alert(z.message),m(!1),await I()):alert("Erro ao salvar post: "+z.error)}catch(z){alert("Erro ao salvar post: "+z.message)}finally{S(!1)}},O=async z=>{if(window.confirm(`Tem certeza que deseja deletar o post "${z.title}"?`))try{const se=await h4(z.id);se.success?(alert(se.message),await I()):alert("Erro ao deletar post: "+se.error)}catch(se){alert("Erro ao deletar post: "+se.message)}},$=async z=>{const se=z.status==="published"?"draft":"published";try{const Y=await im(z.id,{...z,status:se});Y.success?await I():alert("Erro ao alterar status: "+Y.error)}catch(Y){alert("Erro ao alterar status: "+Y.message)}},V=e.filter(z=>{var R,Q;const se=((R=z.title)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))||((Q=z.excerpt)==null?void 0:Q.toLowerCase().includes(o.toLowerCase())),Y=c==="all"||z.status===c,_e=u==="all"||z.category===u;return se&&Y&&_e}),T=z=>new Date(z).toLocaleDateString("pt-BR"),F=z=>{switch(z){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return!C||!M("admin")?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(is,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acesso Restrito"}),r.jsx("p",{className:"text-slate-600",children:"Você precisa de permissões de administrador para acessar esta área."})]})}):n?r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-20",children:[r.jsx(is,{className:"w-16 h-16 text-amber-600 mx-auto mb-4 animate-pulse"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Carregando Blog..."}),r.jsx("p",{className:"text-slate-600",children:"Aguarde um momento"})]})})}):r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:()=>D("/admin/dashboard"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors font-medium",children:[r.jsx(ao,{className:"w-4 h-4"}),"Voltar ao Dashboard"]})}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"📝 Gerenciador de Blog"}),r.jsx("p",{className:"text-slate-600",children:"Gerencie posts, categorias e conteúdo do blog"})]}),r.jsxs("button",{onClick:H,className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-6 rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Novo Post"]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:r.jsx(is,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:e.length}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Total Posts"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:r.jsx(Yt,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:e.filter(z=>z.status==="published").length}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Publicados"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:r.jsx(ws,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:e.filter(z=>z.status==="draft").length}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Rascunhos"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:r.jsx(Qh,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.length}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Categorias"})]})]})})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 mb-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar posts...",value:o,onChange:z=>l(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),r.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todos os Status"}),r.jsx("option",{value:"published",children:"Publicados"}),r.jsx("option",{value:"draft",children:"Rascunhos"}),r.jsx("option",{value:"archived",children:"Arquivados"})]}),r.jsxs("select",{value:u,onChange:z=>h(z.target.value),className:"px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todas as Categorias"}),s.map(z=>r.jsxs("option",{value:z.name,children:[z.name," (",z.count,")"]},z.name))]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Posts (",V.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Título"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Categoria"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Data"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Visualizações"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:V.map(z=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-slate-900",children:z.title}),r.jsx("p",{className:"text-sm text-slate-600 mt-1 line-clamp-2",children:z.excerpt})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:z.category})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(z.status)}`,children:z.status==="published"?"Publicado":z.status==="draft"?"Rascunho":"Arquivado"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:T(z.created_at)}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:z.views_count||0}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>k(z),className:"p-2 text-slate-600 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>$(z),className:`p-2 rounded-lg transition-colors ${z.status==="published"?"text-slate-600 hover:text-yellow-600 hover:bg-yellow-50":"text-slate-600 hover:text-green-600 hover:bg-green-50"}`,title:z.status==="published"?"Despublicar":"Publicar",children:z.status==="published"?r.jsx(ca,{className:"w-4 h-4"}):r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>O(z),className:"p-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Deletar",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},z.id))})]})}),V.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(is,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Nenhum post encontrado"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Crie seu primeiro post ou ajuste os filtros"}),r.jsx("button",{onClick:H,className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-xl transition-colors",children:"Criar Primeiro Post"})]})]}),f&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:g?"Editar Post":"Novo Post"}),r.jsx("button",{onClick:()=>m(!1),className:"p-2 text-slate-600 hover:text-slate-900 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Título *"}),r.jsx("input",{type:"text",value:L.title,onChange:z=>A({...L,title:z.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Digite o título do post..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resumo"}),r.jsx("textarea",{value:L.excerpt,onChange:z=>A({...L,excerpt:z.target.value}),rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Breve descrição do post..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Conteúdo *"}),r.jsx("textarea",{value:L.content,onChange:z=>A({...L,content:z.target.value}),rows:12,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Escreva o conteúdo do post..."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Categoria"}),r.jsxs("select",{value:L.category,onChange:z=>A({...L,category:z.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Selecione uma categoria"}),r.jsx("option",{value:"Processos",children:"Processos"}),r.jsx("option",{value:"Educação",children:"Educação"}),r.jsx("option",{value:"Mercado",children:"Mercado"}),r.jsx("option",{value:"Receitas",children:"Receitas"}),r.jsx("option",{value:"Equipamentos",children:"Equipamentos"}),r.jsx("option",{value:"Origem",children:"Origem"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),r.jsxs("select",{value:L.status,onChange:z=>A({...L,status:z.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"draft",children:"Rascunho"}),r.jsx("option",{value:"published",children:"Publicar"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Imagem de Destaque"}),r.jsx("input",{type:"url",value:L.featured_image,onChange:z=>A({...L,featured_image:z.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"URL da imagem..."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"is_featured",checked:L.is_featured,onChange:z=>A({...L,is_featured:z.target.checked}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("label",{htmlFor:"is_featured",className:"text-sm font-medium text-slate-700",children:"Post em destaque"})]}),r.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-slate-200",children:[r.jsx("button",{onClick:()=>m(!1),className:"px-6 py-3 text-slate-700 font-medium rounded-xl hover:bg-slate-100 transition-colors",children:"Cancelar"}),r.jsxs("button",{onClick:P,disabled:N,className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-6 rounded-xl transition-colors flex items-center gap-2 disabled:opacity-50",children:[r.jsx(pi,{className:"w-4 h-4"}),N?"Salvando...":"Salvar Post"]})]})]})]})})]})})};var g4="Toggle",b4=j.forwardRef((e,t)=>{const{pressed:s,defaultPressed:a,onPressedChange:n,...i}=e,[o,l]=LC({prop:s,onChange:n,defaultProp:a??!1,caller:g4});return r.jsx(MC.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:t,onClick:DC(e.onClick,()=>{e.disabled||l(!o)})})});b4.displayName=g4;var _T=b4;const ST=ob("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function PT({className:e,variant:t,size:s,...a}){return r.jsx(_T,{"data-slot":"toggle",className:mo(ST({variant:t,size:s,className:e})),...a})}const CT="http://localhost:5000",v4=async(e,t={})=>{const s=localStorage.getItem("access_token"),a={headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`}}},n=await fetch(`${CT}${e}`,{...a,...t,headers:{...a.headers,...t.headers}});if(!n.ok){const i=await n.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(i.error||`HTTP ${n.status}`)}return n.json()},AT=async e=>{try{const t=await v4("/api/admin/customers/create-customer",{method:"POST",body:JSON.stringify(e)});return{success:!0,data:t.customer,message:t.message}}catch(t){return console.error("Erro ao criar cliente manual:",t),{success:!1,error:t.message||"Erro ao criar cliente"}}},kT=async(e,t)=>{try{return{success:!0,message:(await v4(`/api/admin/customers/edit-customer/${e}`,{method:"PUT",body:JSON.stringify(t)})).message}}catch(s){return console.error("Erro ao editar cliente:",s),{success:!1,error:s.message||"Erro ao editar cliente"}}},ET=e=>{if(!e||(e=e.replace(/[^\d]/g,""),e.length!==11)||/^(\d)\1{10}$/.test(e))return!1;let t=0;for(let i=0;i<9;i++)t+=parseInt(e.charAt(i))*(10-i);let s=11-t%11,a=s<10?s:0;if(parseInt(e.charAt(9))!==a)return!1;t=0;for(let i=0;i<10;i++)t+=parseInt(e.charAt(i))*(11-i);s=11-t%11;let n=s<10?s:0;return parseInt(e.charAt(10))===n},OT=e=>{if(!e||(e=e.replace(/[^\d]/g,""),e.length!==14)||/^(\d)\1{13}$/.test(e))return!1;let t=[5,4,3,2,9,8,7,6,5,4,3,2],s=0;for(let o=0;o<12;o++)s+=parseInt(e.charAt(o))*t[o];let a=s%11,n=a<2?0:11-a;if(parseInt(e.charAt(12))!==n)return!1;t=[6,5,4,3,2,9,8,7,6,5,4,3,2],s=0;for(let o=0;o<13;o++)s+=parseInt(e.charAt(o))*t[o];a=s%11;let i=a<2?0:11-a;return parseInt(e.charAt(13))===i},TT=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),LT=e=>e?(e=e.replace(/[^\d]/g,""),e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")):"",MT=e=>e?(e=e.replace(/[^\d]/g,""),e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")):"",DT=e=>e?(e=e.replace(/[^\d]/g,""),e.length===11?e.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):e.length===10?e.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):e):"",IT=e=>e?(e=e.replace(/[^\d]/g,""),e.replace(/(\d{5})(\d{3})/,"$1-$2")):"",RT=async e=>{try{if(e=e.replace(/[^\d]/g,""),e.length!==8)throw new Error("CEP deve ter 8 dígitos");const s=await(await fetch(`https://viacep.com.br/ws/${e}/json/`)).json();if(s.erro)throw new Error("CEP não encontrado");return{success:!0,address:{street:s.logradouro,district:s.bairro,city:s.localidade,state:s.uf,cep:s.cep}}}catch(t){return{success:!1,error:t.message||"Erro ao buscar CEP"}}},FT=({isOpen:e,onClose:t,mode:s="create",customer:a=null,onSuccess:n})=>{const[i,o]=j.useState({name:"",email:"",user_type:"cliente_pf",phone:"",cpf_cnpj:"",address:"",city:"",state:"",zip_code:"",company_name:"",company_segment:"",observacao:""}),[l,c]=j.useState(!1),[d,u]=j.useState(""),[h,f]=j.useState(""),[m,p]=j.useState({}),[v,g]=j.useState(!1),y=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];j.useEffect(()=>{o(s==="edit"&&a?{name:a.name||"",email:a.email||"",user_type:a.user_type||"cliente_pf",phone:a.phone||"",cpf_cnpj:a.cpf_cnpj||"",address:a.address||"",city:a.city||"",state:a.state||"",zip_code:a.zip_code||"",company_name:a.company_name||"",company_segment:a.company_segment||"",observacao:a.observacao||""}:{name:"",email:"",user_type:"cliente_pf",phone:"",cpf_cnpj:"",address:"",city:"",state:"",zip_code:"",company_name:"",company_segment:"",observacao:""}),u(""),f(""),p({})},[s,a,e]);const N=L=>{const{name:A,value:I}=L.target;let H=I;A==="cpf_cnpj"?i.user_type==="cliente_pf"?H=LT(I):H=MT(I):A==="phone"?H=DT(I):A==="zip_code"&&(H=IT(I)),o(k=>({...k,[A]:H})),m[A]&&p(k=>({...k,[A]:""}))},S=L=>{const A=L.target.value;o(I=>({...I,user_type:A,cpf_cnpj:"",company_name:A==="cliente_pf"?"":I.company_name,company_segment:A==="cliente_pf"?"":I.company_segment}))},C=async()=>{const L=i.zip_code.replace(/[^\d]/g,"");if(L.length===8){g(!0);try{const A=await RT(L);A.success&&o(I=>({...I,address:A.address.street||I.address,city:A.address.city||I.city,state:A.address.state||I.state}))}catch(A){console.error("Erro ao buscar CEP:",A)}finally{g(!1)}}},M=()=>{const L={};return i.name.trim()||(L.name="Nome é obrigatório"),i.email.trim()||(L.email="Email é obrigatório"),i.email&&!TT(i.email)&&(L.email="Email inválido"),i.cpf_cnpj&&(i.user_type==="cliente_pf"?ET(i.cpf_cnpj)||(L.cpf_cnpj="CPF inválido"):OT(i.cpf_cnpj)||(L.cpf_cnpj="CNPJ inválido")),i.user_type==="cliente_pj"&&!i.company_name.trim()&&(L.company_name="Nome da empresa é obrigatório para pessoa jurídica"),p(L),Object.keys(L).length===0},D=async L=>{if(L.preventDefault(),!M()){u("Por favor, corrija os erros no formulário");return}c(!0),u(""),f("");try{let A;s==="create"?A=await AT(i):A=await kT(a.id,i),A.success?(f(A.message),setTimeout(()=>{n(),t()},1500)):u(A.error)}catch(A){console.error("Erro ao salvar cliente:",A),u("Erro interno. Tente novamente.")}finally{c(!1)}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl flex items-center justify-center",children:i.user_type==="cliente_pj"?r.jsx(gn,{className:"w-6 h-6 text-white"}):r.jsx(kr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:s==="create"?"Criar Novo Cliente":"Editar Cliente"}),r.jsx("p",{className:"text-slate-600",children:s==="create"?"Crie uma conta de cliente manualmente":"Edite as informações do cliente"})]})]}),r.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 transition-colors",children:r.jsx(Nr,{className:"w-6 h-6"})})]}),d&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:d})]}),h&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:h})]}),r.jsxs("form",{onSubmit:D,className:"space-y-6",children:[r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Tipo de Cliente"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("label",{className:"flex items-center p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-amber-300 transition-colors",children:[r.jsx("input",{type:"radio",name:"user_type",value:"cliente_pf",checked:i.user_type==="cliente_pf",onChange:S,className:"sr-only"}),r.jsx("div",{className:`w-4 h-4 rounded-full border-2 mr-3 ${i.user_type==="cliente_pf"?"border-amber-500 bg-amber-500":"border-slate-300"}`}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-5 h-5 text-slate-600"}),r.jsx("span",{className:"font-medium",children:"Pessoa Física"})]})]}),r.jsxs("label",{className:"flex items-center p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-amber-300 transition-colors",children:[r.jsx("input",{type:"radio",name:"user_type",value:"cliente_pj",checked:i.user_type==="cliente_pj",onChange:S,className:"sr-only"}),r.jsx("div",{className:`w-4 h-4 rounded-full border-2 mr-3 ${i.user_type==="cliente_pj"?"border-amber-500 bg-amber-500":"border-slate-300"}`}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gn,{className:"w-5 h-5 text-slate-600"}),r.jsx("span",{className:"font-medium",children:"Pessoa Jurídica"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Nome Completo *"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:N,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all ${m.name?"border-red-300":"border-slate-200"}`,placeholder:"Nome completo do cliente"}),m.name&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Email *"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"email",name:"email",value:i.email,onChange:N,disabled:s==="edit",className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all ${m.email?"border-red-300":"border-slate-200"} ${s==="edit"?"bg-slate-100":""}`,placeholder:"email@exemplo.com"})]}),m.email&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:i.user_type==="cliente_pf"?"CPF":"CNPJ"}),r.jsx("input",{type:"text",name:"cpf_cnpj",value:i.cpf_cnpj,onChange:N,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all ${m.cpf_cnpj?"border-red-300":"border-slate-200"}`,placeholder:i.user_type==="cliente_pf"?"000.000.000-00":"00.000.000/0000-00"}),m.cpf_cnpj&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.cpf_cnpj})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Telefone"}),r.jsxs("div",{className:"relative",children:[r.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",name:"phone",value:i.phone,onChange:N,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"(11) 99999-9999"})]})]})]}),i.user_type==="cliente_pj"&&r.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Informações da Empresa"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Nome da Empresa *"}),r.jsx("input",{type:"text",name:"company_name",value:i.company_name,onChange:N,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all ${m.company_name?"border-red-300":"border-slate-200"}`,placeholder:"Razão social da empresa"}),m.company_name&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.company_name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Segmento"}),r.jsxs("select",{name:"company_segment",value:i.company_segment,onChange:N,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",children:[r.jsx("option",{value:"",children:"Selecione o segmento"}),r.jsx("option",{value:"cafeteria",children:"Cafeteria"}),r.jsx("option",{value:"restaurante",children:"Restaurante"}),r.jsx("option",{value:"padaria",children:"Padaria"}),r.jsx("option",{value:"hotel",children:"Hotel"}),r.jsx("option",{value:"escritorio",children:"Escritório"}),r.jsx("option",{value:"varejo",children:"Varejo"}),r.jsx("option",{value:"industria",children:"Indústria"}),r.jsx("option",{value:"outros",children:"Outros"})]})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Endereço"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"CEP"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",name:"zip_code",value:i.zip_code,onChange:N,onBlur:C,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"00000-000"}),v&&r.jsx(Xy,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 animate-spin text-amber-600"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Endereço"}),r.jsxs("div",{className:"relative",children:[r.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",name:"address",value:i.address,onChange:N,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Rua, número, complemento"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Cidade"}),r.jsx("input",{type:"text",name:"city",value:i.city,onChange:N,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Nome da cidade"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Estado"}),r.jsxs("select",{name:"state",value:i.state,onChange:N,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",children:[r.jsx("option",{value:"",children:"Selecione"}),y.map(L=>r.jsx("option",{value:L,children:L},L))]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-700 font-medium mb-2",children:"Observações do Admin"}),r.jsxs("div",{className:"relative",children:[r.jsx(is,{className:"absolute left-3 top-3 text-slate-400 w-5 h-5"}),r.jsx("textarea",{name:"observacao",value:i.observacao,onChange:N,rows:4,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all resize-none",placeholder:"Ex: Cliente da loja física, sem WhatsApp, preferenciais, etc."})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-slate-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:l,className:"bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white font-semibold px-8 py-3 rounded-xl transition-all duration-300 flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Xy,{className:"w-5 h-5 animate-spin"}),s==="create"?"Criando...":"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pi,{className:"w-5 h-5"}),s==="create"?"Criar Cliente":"Salvar Alterações"]})})]})]})]})})}):null},y4="https://seu-dominio.com/api",$T=async(e,t,s)=>{try{return await(await fetch(`${y4}/newsletter/email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipients:e,subject:t,message:s,timestamp:new Date().toISOString()})})).json()}catch(a){throw console.error("Erro ao enviar newsletter por email:",a),a}},qT=async(e,t)=>{try{return await(await fetch(`${y4}/newsletter/whatsapp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipients:e,message:t,timestamp:new Date().toISOString()})})).json()}catch(s){throw console.error("Erro ao enviar newsletter por WhatsApp:",s),s}},BT=async(e,t)=>{const s={email:{success:0,failed:0,errors:[]},whatsapp:{success:0,failed:0,errors:[]},total:t.length},a=t.map(i=>({name:i.name,email:i.email,message:e.message.replace(/\[NOME\]/g,i.name).replace(/\[DATA\]/g,new Date().toLocaleDateString("pt-BR"))})),n=t.filter(i=>i.phone).map(i=>({name:i.name,phone:i.phone,message:e.message.replace(/\[NOME\]/g,i.name).replace(/\[DATA\]/g,new Date().toLocaleDateString("pt-BR"))}));try{if(e.sendMethod==="email"||e.sendMethod==="both")try{const i=await $T(a,e.title,e.message);i.success?s.email.success=i.sent||a.length:(s.email.failed=a.length,s.email.errors.push(i.error||"Erro desconhecido no envio de email"))}catch(i){s.email.failed=a.length,s.email.errors.push(i.message)}if(e.sendMethod==="whatsapp"||e.sendMethod==="both")try{const i=await qT(n,e.message);i.success?s.whatsapp.success=i.sent||n.length:(s.whatsapp.failed=n.length,s.whatsapp.errors.push(i.error||"Erro desconhecido no envio de WhatsApp"))}catch(i){s.whatsapp.failed=n.length,s.whatsapp.errors.push(i.message)}return{success:!0,results:s,message:`Newsletter enviada! Email: ${s.email.success}/${a.length}, WhatsApp: ${s.whatsapp.success}/${n.length}`}}catch(i){return{success:!1,error:i.message,results:s}}},zT=(e,t)=>{const s=[];if((!e.title||e.title.trim()==="")&&s.push("Título é obrigatório"),(!e.message||e.message.trim()==="")&&s.push("Mensagem é obrigatória"),(!t||t.length===0)&&s.push("Selecione pelo menos um cliente"),e.sendMethod==="email"||e.sendMethod==="both"){const a=t.filter(n=>!n.email);a.length>0&&s.push(`${a.length} cliente(s) sem email cadastrado`)}return(e.sendMethod==="whatsapp"||e.sendMethod==="both")&&t.filter(n=>!n.phone).length===t.length&&s.push("Nenhum cliente possui telefone cadastrado para WhatsApp"),{isValid:s.length===0,errors:s}},UT=()=>{const[e,t]=j.useState("admin-only"),[s,a]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState("all"),[u,h]=j.useState(null),[f,m]=j.useState(!1),[p,v]=j.useState("create"),[g,y]=j.useState({page:1,limit:20,total:0,pages:0}),[N,S]=j.useState(""),[C,M]=j.useState(""),[D,L]=j.useState({title:"",message:"",template:"custom",sendMethod:"both",audience:"all",schedule:"now"}),[A,I]=j.useState([]),[H,k]=j.useState(!1),[P,O]=j.useState(!1),[$,V]=j.useState(!1),T={promotion:{title:"🔥 OFERTA IMPERDÍVEL | Mestres do Café",message:`┌─────────────────────────────┐
│  🔥 OFERTA EXCLUSIVA 🔥    │
│     MESTRES DO CAFÉ         │
└─────────────────────────────┘

Olá, [NOME]! ☕✨

🎯 *LIQUIDAÇÃO ESPECIAL* acontecendo AGORA!

💰 *DESCONTOS INCRÍVEIS:*
├ 🏆 Premium: 25% OFF
├ ⭐ Especiais: 20% OFF  
├ 🌟 Tradicionais: 15% OFF
└ 🎁 FRETE GRÁTIS acima de R$ 89

⏰ *ÚLTIMAS HORAS* - Válido até [DATA]

🛒 *GARANTIR DESCONTO:*
🔗 mestrescafe.com.br/promocao
🏷️ Cupom: MESTRE25

🚚 *Entrega expressa em Santa Maria/RS*
📞 *Dúvidas: (55) 3220-1234*

┌─────────────────────────────┐
│ Não perca! Estoque limitado │
└─────────────────────────────┘

🌟 Equipe Mestres do Café
📍 Santa Maria/RS - Desde 2020`},newsletter:{title:"📰 Novidades Quentinhas | Mestres do Café",message:`┌─────────────────────────────┐
│   📰 NEWSLETTER SEMANAL    │
│     MESTRES DO CAFÉ         │
└─────────────────────────────┘

Olá, [NOME]! ☕📰

🗞️ *AS NOVIDADES DA SEMANA:*

🌟 *DESTAQUES:*
├ ☕ Lançamento: Café Bourbon Premium
├ 🏪 Nova loja na Rua do Acampamento  
├ 🎓 Workshop gratuito de barista
└ 🏆 Sistema de pontos renovado

📈 *CAFÉ DO MÊS:*
🥇 Geisha Especial - Notas florais
💝 Edição limitada com 30% OFF

🎯 *EVENTOS EM MARÇO:*
├ 📅 05/03 - Degustação gratuita
├ 📅 12/03 - Workshop de latte art
└ 📅 19/03 - Concurso de receitas

📚 *DICA DO ESPECIALISTA:*
"Para realçar notas frutais, use água entre 88-92°C"
- João, Mestre Barista

🔗 *LEIA MAIS:*
📖 mestrescafe.com.br/blog
📱 Nos siga: @mestres_do_cafe

☕ Até a próxima semana!
🌟 Equipe Mestres do Café`},welcome:{title:"🎊 Seja Bem-Vindo(a) à Família! | Mestres do Café",message:`┌─────────────────────────────┐
│  🎊 BEM-VINDO À FAMÍLIA!   │
│     MESTRES DO CAFÉ         │
└─────────────────────────────┘

Olá, [NOME]! ☕🤝

🌟 *Você agora faz parte da nossa família de apaixonados por café!*

🎁 *SEUS BENEFÍCIOS DE BOAS-VINDAS:*
├ 🏷️ 15% OFF na primeira compra
├ 🚚 FRETE GRÁTIS sem valor mínimo
├ ⭐ 200 PONTOS de bônus
├ 📱 Acesso VIP às promoções
└ 📰 Newsletter exclusiva

☕ *CONHEÇA NOSSA SELEÇÃO:*
🥇 Cafés Premium: Geisha, Bourbon
⭐ Especiais: Catuaí, Mundo Novo  
🌟 Tradicionais: Blend Supremo

🏆 *PROGRAMA MESTRES:*
💰 Acumule pontos a cada compra
🎯 Troque por descontos e brindes
📈 Evolua de Aprendiz à Lenda!

🛒 *FAZER PRIMEIRA COMPRA:*
🔗 mestrescafe.com.br
🏷️ Cupom: BEMVINDO15
⏰ Válido por 30 dias

📞 *CONTATO:*
💬 WhatsApp: (55) 99999-9999
📧 Email: contato@mestrescafe.com.br

☕ Bem-vindo(a) à jornada do café perfeito!
🌟 Equipe Mestres do Café`},birthday:{title:"🎂 Parabéns! Hoje é seu Dia Especial! | Mestres do Café",message:`┌─────────────────────────────┐
│   🎂 FELIZ ANIVERSÁRIO!    │
│     MESTRES DO CAFÉ         │
└─────────────────────────────┘

🎊 *PARABÉNS, [NOME]!* 🎊

Hoje é um dia muito especial! A família Mestres do Café deseja um feliz aniversário repleto de alegria e momentos especiais! ☕🎈

🎁 *SEU PRESENTE DE ANIVERSÁRIO:*
├ 🏷️ 30% OFF em TODA loja
├ ☕ Café de aniversário GRÁTIS*  
├ 🎂 Brownie especial na compra
├ 📦 Frete grátis para qualquer valor
└ ⭐ PONTOS EM DOBRO por 7 dias

🏪 *RETIRAR SEU CAFÉ GRÁTIS:*
📍 Qualquer uma de nossas lojas
🆔 Apresente este cupom
⏰ Válido até: [DATA]

🛒 *APROVEITAR 30% OFF:*
🔗 mestrescafe.com.br/aniversario
🏷️ Cupom: NIVER30
📅 Válido por 7 dias

☕ *SUGESTÃO ESPECIAL:*
🥇 Geisha Premium - Perfeito para celebrar!
🎯 Com seu desconto fica R$ 62,93

📞 *AGENDAR RETIRADA:*
💬 WhatsApp: (55) 99999-9999
📧 Email: aniversarios@mestrescafe.com.br

🎉 *Que seu novo ano seja repleto de cafés especiais e momentos inesquecíveis!*

☕ Com carinho,
🌟 Toda equipe Mestres do Café

*Café grátis: Tradicional 100g nas lojas físicas`},event:{title:"🎪 Evento Especial | Mestres do Café",message:`┌─────────────────────────────┐
│   🎪 EVENTO ESPECIAL       │
│     MESTRES DO CAFÉ         │
└─────────────────────────────┘

Olá, [NOME]! 🎭☕

🎯 *VOCÊ ESTÁ CONVIDADO(A) PARA:*

🎪 **FESTIVAL DO CAFÉ 2024**
📅 Data: [DATA]
🕐 Horário: 14h às 20h
📍 Local: Loja Centro - Rua do Acampamento, 123

🌟 *PROGRAMAÇÃO:*
├ 14h - Abertura e degustação
├ 15h - Workshop de métodos de preparo
├ 16h30 - Palestra sobre origens
├ 18h - Concurso de latte art
└ 19h - Sorteios e encerramento

🎁 *BENEFÍCIOS EXCLUSIVOS:*
├ 🎫 Entrada GRATUITA  
├ ☕ Degustação ilimitada
├ 🏷️ 20% OFF em compras no evento
├ 🎪 Brindes exclusivos
└ 📜 Certificado de participação

🏆 *CONCURSO LATTE ART:*
🥇 1º lugar: Kit barista completo
🥈 2º lugar: 1kg de café premium  
🥉 3º lugar: Xícara personalizada

📝 *CONFIRMAR PRESENÇA:*
💬 WhatsApp: (55) 99999-9999
🔗 mestrescafe.com.br/eventos
📧 eventos@mestrescafe.com.br

🎪 Venha viver uma experiência única no mundo do café!

☕ Te esperamos lá!
🌟 Equipe Mestres do Café`}},{user:F,hasPermission:z}=ar(),se=Vt();j.useEffect(()=>{if(!F||!z("admin")){se("/dashboard");return}e!=="newsletter"&&Y()},[F,z,se,g.page,o,c,e]);const Y=async()=>{console.log("🔄 Iniciando carregamento de clientes..."),console.log("📊 Parâmetros:",{activeTab:e,pagination:g,searchTerm:o,filterSource:c}),i(!0),S("");try{let ie;e==="admin-only"?(console.log("👤 Buscando clientes criados pelo admin..."),ie=await O8({page:g.page,limit:g.limit,search:o}),console.log("👤 Resultado admin clients:",ie)):(console.log("📋 Buscando todos os clientes..."),ie=await D1({page:g.page,limit:g.limit,search:o,origin:c==="admin"?"admin":c==="self"?"auto":void 0}),console.log("📋 Resultado all clients:",ie)),ie&&ie.success?(console.log(`✅ ${ie.customers.length} clientes carregados com sucesso`),a(ie.customers),ie.pagination&&y(ne=>({...ne,...ie.pagination}))):(console.error("❌ Erro na resposta:",ie),S(ie?ie.error:"Erro desconhecido ao carregar clientes"))}catch(ie){console.error("❌ Erro ao carregar dados de clientes:",ie),S("Erro ao carregar clientes: "+ie.message)}finally{i(!1),console.log("🏁 Carregamento finalizado")}},_e=()=>{h(null),v("create"),m(!0)},R=ie=>{h(ie),v("edit"),m(!0)},Q=()=>{Y(),M("Operação realizada com sucesso!"),setTimeout(()=>M(""),3e3)},re=async(ie,ne,Ae)=>{try{let Fe;const Ve=ne?"inactive":"active";Ae?Fe=await T8(ie,Ve):Fe=await n4(ie,Ve),Fe.success?(Y(),M("Status do cliente alterado com sucesso!"),setTimeout(()=>M(""),3e3)):(S(Fe.error),setTimeout(()=>S(""),3e3))}catch{S("Erro ao alterar status do cliente"),setTimeout(()=>S(""),3e3)}},te=ie=>{y(ne=>({...ne,page:ie}))},le=ie=>{t(ie),l(""),d("all"),y(ne=>({...ne,page:1})),ie==="newsletter"&&be()},be=async()=>{i(!0);try{const ie=await D1({page:1,limit:1e3,search:""});ie&&ie.success&&a(ie.customers)}catch(ie){console.error("Erro ao carregar clientes para newsletter:",ie)}finally{i(!1)}},we=ie=>{if(ie==="custom")L(ne=>({...ne,template:"custom",title:"",message:""}));else{const ne=T[ie];L(Ae=>({...Ae,template:ie,title:ne.title,message:ne.message}))}},oe=ie=>{let ne=[...s];switch(ie){case"admin-created":ne=s.filter(Ae=>Ae.criado_por_admin);break;case"self-registered":ne=s.filter(Ae=>!Ae.criado_por_admin);break;case"active":ne=s.filter(Ae=>Ae.is_active);break;case"inactive":ne=s.filter(Ae=>!Ae.is_active);break;default:ne=s}I(ne),L(Ae=>({...Ae,audience:ie}))},Ce=(ie,ne)=>ie.replace(/\[NOME\]/g,ne).replace(/\[DATA\]/g,new Date().toLocaleDateString("pt-BR")),ye=async()=>{const ie=zT(D,A);if(!ie.isValid){S(ie.errors.join(", "));return}k(!0);try{console.log("📧📱 Enviando newsletter...",{method:D.sendMethod,customers:A.length,title:D.title});const ne=await BT(D,A);ne.success?(M(ne.message),L({title:"",message:"",template:"custom",sendMethod:"both",audience:"all",schedule:"now"}),I([]),console.log("✅ Newsletter enviada com sucesso:",ne.results)):(S(ne.error||"Erro ao enviar newsletter"),console.error("❌ Erro no envio da newsletter:",ne))}catch(ne){S("Erro ao enviar newsletter: "+ne.message),console.error("❌ Erro crítico no envio da newsletter:",ne)}finally{k(!1),setTimeout(()=>{M(""),S("")},5e3)}},fe=s.length,Le=s.filter(ie=>ie.pendente_ativacao).length,Te=s.filter(ie=>ie.is_active).length,K=s.filter(ie=>ie.criado_por_admin).length,J=s.filter(ie=>!ie.criado_por_admin).length,ve=s.reduce((ie,ne)=>ie+(ne.total_spent||0),0),qe=fe>0?ve/fe:0;return r.jsxs("div",{className:"min-h-screen bg-slate-50 py-20",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:()=>se("/admin/dashboard"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors font-medium",children:[r.jsx(ao,{className:"w-4 h-4"}),"Voltar ao Dashboard"]})}),r.jsx("div",{className:"mb-12",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Pt,{className:"w-8 h-8 text-amber-600"}),r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"CRM - Gestão de Clientes"})]}),r.jsx("p",{className:"text-xl text-slate-600",children:e==="admin-only"?"Gerencie clientes criados manualmente pelo admin":e==="all-customers"?"Gerencie todos os clientes do sistema":"Gerencie newsletters"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:async()=>{V(!0),S(""),M("");try{console.log("🔄 Forçando sincronização manual de usuários...");const ie=await E8();ie.success?(M(`✅ Sincronização concluída! ${ie.synced} usuários sincronizados de ${ie.total} total`),await Y()):S(`❌ Erro na sincronização: ${ie.error}`)}catch(ie){console.error("❌ Erro ao forçar sincronização:",ie),S(`❌ Erro ao sincronizar usuários: ${ie.message}`)}finally{V(!1)}},disabled:$,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-4 rounded-xl transition-colors flex items-center gap-2",children:[$?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Pt,{className:"w-4 h-4"}),$?"Sincronizando...":"Sincronizar Usuários"]}),r.jsxs("button",{onClick:()=>{},className:"bg-slate-700 hover:bg-slate-800 text-white font-medium py-2 px-4 rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(ns,{className:"w-4 h-4"}),"Exportar"]}),r.jsxs("button",{onClick:_e,className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 px-6 rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(IC,{className:"w-4 h-4"}),"Criar Cliente Manual"]})]})]})}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-slate-200",children:r.jsxs("nav",{className:"flex space-x-8",children:[r.jsxs("button",{onClick:()=>le("admin-only"),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${e==="admin-only"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Is,{className:"w-4 h-4"}),"Clientes Criados pelo Admin"]}),r.jsxs("button",{onClick:()=>le("all-customers"),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${e==="all-customers"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Qy,{className:"w-4 h-4"}),"Todos os Clientes"]}),r.jsxs("button",{onClick:()=>le("newsletter"),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${e==="newsletter"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(uc,{className:"w-4 h-4"}),"Newsletters"]})]})})}),N&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:N})]}),C&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:C})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center",children:r.jsx(Pt,{className:"text-white w-6 h-6"})}),r.jsx(Ar,{className:"text-blue-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Total Clientes"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:fe}),r.jsx("p",{className:"text-xs text-slate-500",children:e==="admin-only"?"Criados pelo admin":"Todos os clientes"})]}),e==="all-customers"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center",children:r.jsx(Is,{className:"text-white w-6 h-6"})}),r.jsx(oa,{className:"text-purple-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Criados pelo Admin"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:K}),r.jsx("p",{className:"text-xs text-slate-500",children:"Cadastro manual"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl flex items-center justify-center",children:r.jsx(Qy,{className:"text-white w-6 h-6"})}),r.jsx(Xi,{className:"text-cyan-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Auto-cadastrados"}),r.jsx("p",{className:"text-3xl font-bold text-cyan-600",children:J}),r.jsx("p",{className:"text-xs text-slate-500",children:"Cadastro próprio"})]})]}),e==="admin-only"&&r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center",children:r.jsx(Ds,{className:"text-white w-6 h-6"})}),r.jsx(oa,{className:"text-orange-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Pendentes"}),r.jsx("p",{className:"text-3xl font-bold text-orange-600",children:Le}),r.jsx("p",{className:"text-xs text-slate-500",children:"Aguardando ativação"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center",children:r.jsx(Xi,{className:"text-white w-6 h-6"})}),r.jsx(dr,{className:"text-green-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Ativos"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:Te}),r.jsx("p",{className:"text-xs text-slate-500",children:"Contas ativadas"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl flex items-center justify-center",children:r.jsx(rr,{className:"text-white w-6 h-6"})}),r.jsx(js,{className:"text-amber-600 w-5 h-5"})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"LTV Médio"}),r.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["R$ ",qe.toFixed(0)]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Valor por cliente"})]})]}),e==="newsletter"?r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200",children:[r.jsxs("div",{className:"p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(uc,{className:"w-6 h-6 text-amber-600"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Criar Newsletter"})]}),r.jsx("p",{className:"text-slate-600",children:"Envie mensagens para seus clientes por email ou WhatsApp"})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:[r.jsx(is,{className:"w-4 h-4 inline mr-2"}),"Template"]}),r.jsxs("select",{value:D.template,onChange:ie=>we(ie.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"custom",children:"🎨 Personalizada"}),r.jsx("option",{value:"promotion",children:"🔥 Promoção Especial"}),r.jsx("option",{value:"newsletter",children:"📰 Newsletter Semanal"}),r.jsx("option",{value:"welcome",children:"🎊 Boas-vindas"}),r.jsx("option",{value:"birthday",children:"🎂 Aniversário"}),r.jsx("option",{value:"event",children:"🎪 Evento Especial"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Título"}),r.jsx("input",{type:"text",value:D.title,onChange:ie=>L(ne=>({...ne,title:ie.target.value})),placeholder:"Digite o título da newsletter...",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Mensagem"}),r.jsx("textarea",{value:D.message,onChange:ie=>L(ne=>({...ne,message:ie.target.value})),placeholder:"Digite sua mensagem... Use [NOME] para personalizar com o nome do cliente e [DATA] para a data atual.",rows:10,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"💡 Dica: Use [NOME] para personalizar com o nome do cliente e [DATA] para data atual"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:[r.jsx(Ep,{className:"w-4 h-4 inline mr-2"}),"Método de Envio"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>L(ie=>({...ie,sendMethod:"email"})),className:`p-3 rounded-xl border-2 transition-colors ${D.sendMethod==="email"?"border-amber-500 bg-amber-50 text-amber-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[r.jsx(ds,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("span",{className:"text-sm font-medium",children:"Email"})]}),r.jsxs("button",{onClick:()=>L(ie=>({...ie,sendMethod:"whatsapp"})),className:`p-3 rounded-xl border-2 transition-colors ${D.sendMethod==="whatsapp"?"border-amber-500 bg-amber-50 text-amber-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[r.jsx(Ep,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("span",{className:"text-sm font-medium",children:"WhatsApp"})]}),r.jsxs("button",{onClick:()=>L(ie=>({...ie,sendMethod:"both"})),className:`p-3 rounded-xl border-2 transition-colors ${D.sendMethod==="both"?"border-amber-500 bg-amber-50 text-amber-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[r.jsx(Jd,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("span",{className:"text-sm font-medium",children:"Ambos"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:[r.jsx(Pt,{className:"w-4 h-4 inline mr-2"}),"Público-alvo"]}),r.jsxs("select",{value:D.audience,onChange:ie=>oe(ie.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todos os clientes"}),r.jsx("option",{value:"admin-created",children:"Criados pelo admin"}),r.jsx("option",{value:"self-registered",children:"Auto-cadastrados"}),r.jsx("option",{value:"active",children:"Clientes ativos"}),r.jsx("option",{value:"inactive",children:"Clientes inativos"})]}),r.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:[A.length," cliente(s) selecionado(s)"]})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{onClick:ye,disabled:H||!D.title||!D.message||A.length===0,className:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-bold py-4 px-6 rounded-xl transition-colors flex items-center justify-center gap-2",children:H?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(uc,{className:"w-5 h-5"}),"Enviar Newsletter"]})})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5"}),"Preview da Mensagem"]}),r.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6",children:r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h5",{className:"font-bold text-slate-900 mb-3 border-b border-slate-200 pb-2",children:D.title||"Título da Newsletter"}),r.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:Ce(D.message||"Sua mensagem aparecerá aqui...","João Silva")})]})})]}),A.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(Pt,{className:"w-5 h-5"}),"Destinatários (",A.length,")"]}),r.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 max-h-60 overflow-y-auto",children:r.jsxs("div",{className:"space-y-2",children:[A.slice(0,10).map(ie=>r.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg p-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-500 to-amber-600 rounded-full flex items-center justify-center",children:ie.user_type==="cliente_pj"?r.jsx(gn,{className:"text-white w-4 h-4"}):r.jsx(kr,{className:"text-white w-4 h-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-slate-900 truncate",children:ie.name}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ds,{className:"w-3 h-3"}),ie.email]}),ie.phone&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(us,{className:"w-3 h-3"}),ie.phone]})]})]})]},ie.id)),A.length>10&&r.jsxs("div",{className:"text-center text-slate-500 text-sm py-2",children:["E mais ",A.length-10," cliente(s)..."]})]})})]})]})]})})]})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 mb-8",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Lista de Clientes"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar clientes...",value:o,onChange:ie=>l(ie.target.value),className:"pl-10 pr-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent w-64"})]}),e==="all-customers"&&r.jsxs("select",{value:c,onChange:ie=>d(ie.target.value),className:"px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todas as origens"}),r.jsx("option",{value:"admin",children:"Criados pelo admin"}),r.jsx("option",{value:"self",children:"Auto-cadastrados"})]})]})]})}),r.jsxs("div",{className:"p-6",children:[n?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando clientes..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Pt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Nenhum cliente encontrado"}),r.jsx("p",{className:"text-slate-500 mb-6",children:e==="admin-only"?"Crie o primeiro cliente manualmente para começar":e==="all-customers"?"Não há clientes que correspondam aos filtros aplicados":"Não há newsletters criadas"}),e==="admin-only"&&r.jsx("button",{onClick:_e,className:"bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-xl transition-colors",children:"Criar Primeiro Cliente"})]}):r.jsx("div",{className:"space-y-4",children:s.map(ie=>r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-full flex items-center justify-center",children:ie.user_type==="cliente_pj"?r.jsx(gn,{className:"text-white w-6 h-6"}):r.jsx(kr,{className:"text-white w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-slate-900 mb-1",children:ie.name}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ds,{className:"w-3 h-3"}),ie.email]}),ie.phone&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(us,{className:"w-3 h-3"}),ie.phone]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${ie.pendente_ativacao?"bg-orange-100 text-orange-700 border border-orange-200":ie.is_active?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:ie.pendente_ativacao?"Pendente":ie.is_active?"Ativo":"Inativo"}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${ie.user_type==="cliente_pj"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:ie.user_type==="cliente_pj"?"PJ":"PF"}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${ie.criado_por_admin?"bg-purple-100 text-purple-700":"bg-cyan-100 text-cyan-700"}`,children:ie.criado_por_admin?"Admin":"Auto"})]}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Criado em ",new Date(ie.created_at).toLocaleDateString("pt-BR")]}),ie.admin_name&&r.jsxs("p",{className:"text-xs text-slate-500",children:["por ",ie.admin_name]}),ie.orders_count>0&&r.jsxs("p",{className:"text-xs text-slate-500",children:[ie.orders_count," pedidos • R$ ",ie.total_spent.toFixed(2)]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>se(`/admin/customer/${ie.id}`),className:"p-2 text-slate-600 hover:text-blue-600 transition-colors",title:"Ver detalhes completos",children:r.jsx(Yt,{className:"w-4 h-4"})}),ie.criado_por_admin&&r.jsx("button",{onClick:()=>R(ie),className:"p-2 text-slate-600 hover:text-amber-600 transition-colors",title:"Editar cliente",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>re(ie.id,ie.is_active,ie.criado_por_admin),className:`p-2 transition-colors ${ie.is_active?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,title:ie.is_active?"Desativar":"Ativar",children:r.jsx(PT,{className:"w-4 h-4"})})]})]})]}),ie.observacao&&r.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:r.jsxs("p",{className:"text-sm text-amber-800",children:[r.jsx("strong",{children:"Observação:"})," ",ie.observacao]})})]},ie.id))}),g.pages>1&&r.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-slate-200",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Página ",g.page," de ",g.pages," (",g.total," clientes)"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>te(g.page-1),disabled:g.page===1,className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(kp,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>te(g.page+1),disabled:g.page===g.pages,className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Gi,{className:"w-4 h-4"})})]})]})]})]})})]}),r.jsx(FT,{isOpen:f,onClose:()=>m(!1),mode:p,customer:u,onSuccess:Q})]})},WT=()=>{var D,L,A,I,H,k,P,O,$,V,T,F,z,se,Y,_e,R,Q,re,te,le,be,we,oe,Ce,ye,fe,Le,Te,K,J,ve,qe,ie,ne,Ae,Fe,Ve,Ne,Z,xe,We,ht,Qe,Ue,ze,ot,gt,Ot,jt,wt,ps,St;const[e,t]=j.useState(!0),[s,a]=j.useState("overview"),[n,i]=j.useState("30d"),[o,l]=j.useState("revenue"),[c,d]=j.useState({}),[u,h]=j.useState(!1),{user:f,hasPermission:m}=ar(),p=Vt();j.useEffect(()=>{if(!f||!m("admin")){p("/dashboard");return}v()},[f,m,p,n]);const v=async()=>{var tt,_t;t(!0);try{console.log(`💰 Carregando dados financeiros reais para ${n}...`);const Xe=await o4.getFinancialData(n);if(!Xe){console.warn("⚠️ Nenhum dado financeiro retornado, usando fallbacks..."),d({revenue:{total:0,monthly:0,daily:0,growth:0},costs:{total:0,monthly:0,cogs:0,operational:0,marketing:0,growth:0},profit:{total:0,monthly:0,margin:0,grossMargin:0,netMargin:0,growth:0},orders:{total:0,monthly:0,avgValue:0,completionRate:0,growth:0},products:{bestSelling:[],categories:[]},customers:{acquisition:{cost:0,ltv:0,ratio:0},retention:0,churnRate:0},cashFlow:{inflow:0,outflow:0,balance:0,projection30d:0},kpis:{roas:0,roi:0,cac:0,ltv:0,arpu:0,churnRate:0,grossMargin:0,netMargin:0}});return}const Ys={revenue:{total:Xe.metrics.totalRevenue||0,monthly:(Xe.metrics.totalRevenue||0)*.3,daily:(Xe.metrics.totalRevenue||0)/30,growth:Xe.kpis.growthRate||0,monthlyGrowth:(Xe.kpis.growthRate||0)*.6,dailyGrowth:(Xe.kpis.growthRate||0)*.1},costs:{total:Xe.metrics.totalCosts||0,monthly:(Xe.metrics.totalCosts||0)*.3,cogs:(Xe.metrics.totalCosts||0)*.45,operational:(Xe.metrics.totalCosts||0)*.35,marketing:(Xe.metrics.totalCosts||0)*.2,growth:Math.max(0,(Xe.kpis.growthRate||0)*.8)},profit:{total:Xe.metrics.grossProfit||0,monthly:(Xe.metrics.grossProfit||0)*.3,margin:Xe.metrics.profitMargin||0,grossMargin:Math.max(0,(Xe.metrics.profitMargin||0)+10),netMargin:Xe.metrics.profitMargin||0,growth:Math.max(0,(Xe.kpis.growthRate||0)*1.2)},orders:{total:Xe.metrics.totalOrders||0,monthly:Math.max(0,Math.floor((Xe.metrics.totalOrders||0)*.3)),avgValue:Xe.metrics.avgOrderValue||0,completionRate:96.8,growth:Xe.kpis.growthRate||0},products:{bestSelling:((_t=(tt=Xe.charts)==null?void 0:tt.topProducts)==null?void 0:_t.map((Mt,dt)=>({name:Mt.label||`Produto ${dt+1}`,revenue:Mt.revenue||Mt.value*85,quantity:Mt.value||0,margin:42.5+dt*2})))||[],categories:[{name:"Cafés Especiais",revenue:(Xe.metrics.totalRevenue||0)*.415,percentage:41.5,growth:Xe.kpis.growthRate||0},{name:"Blends Tradicionais",revenue:(Xe.metrics.totalRevenue||0)*.278,percentage:27.8,growth:Math.max(0,(Xe.kpis.growthRate||0)*.7)},{name:"Cafés Gourmet",revenue:(Xe.metrics.totalRevenue||0)*.196,percentage:19.6,growth:Math.max(0,(Xe.kpis.growthRate||0)*1.3)},{name:"Acessórios",revenue:(Xe.metrics.totalRevenue||0)*.111,percentage:11.1,growth:Math.max(0,(Xe.kpis.growthRate||0)*.5)}]},customers:{acquisition:{cost:Xe.metrics.avgOrderValue?Xe.metrics.avgOrderValue*.3:45.8,ltv:Xe.metrics.customerLifetimeValue||890.5,ratio:Xe.metrics.customerLifetimeValue&&Xe.metrics.avgOrderValue?Xe.metrics.customerLifetimeValue/(Xe.metrics.avgOrderValue*.3):19.4},retention:78.5,churnRate:12.8},cashFlow:{inflow:Xe.metrics.totalRevenue||0,outflow:Xe.metrics.totalCosts||0,balance:Xe.metrics.grossProfit||0,projection30d:(Xe.metrics.grossProfit||0)*1.3},kpis:{roas:Xe.metrics.roas||4.2,roi:(Xe.metrics.grossProfit||0)/Math.max(1,Xe.metrics.totalCosts||1)*100,cac:Xe.metrics.avgOrderValue?Xe.metrics.avgOrderValue*.3:45.8,ltv:Xe.metrics.customerLifetimeValue||890.5,arpu:Xe.metrics.avgOrderValue||156.8,churnRate:12.8,grossMargin:Math.max(0,(Xe.metrics.profitMargin||0)+10),netMargin:Xe.metrics.profitMargin||0}};console.log("✅ Dados financeiros processados:",Ys),d(Ys)}catch(Xe){console.error("❌ Erro ao carregar dados financeiros:",Xe),d({revenue:{total:0,monthly:0,daily:0,growth:0},costs:{total:0,monthly:0,cogs:0,operational:0,marketing:0,growth:0},profit:{total:0,monthly:0,margin:0,grossMargin:0,netMargin:0,growth:0},orders:{total:0,monthly:0,avgValue:0,completionRate:0,growth:0},products:{bestSelling:[],categories:[]},customers:{acquisition:{cost:0,ltv:0,ratio:0},retention:0,churnRate:0},cashFlow:{inflow:0,outflow:0,balance:0,projection30d:0},kpis:{roas:0,roi:0,cac:0,ltv:0,arpu:0,churnRate:0,grossMargin:0,netMargin:0}})}finally{t(!1)}},g=async()=>{h(!0),await v(),h(!1)},y=()=>{const tt={type:"financial_report",dateRange:n,activeTab:s,data:c,generated:new Date().toISOString()},_t=`relatorio_financeiro_${s}_${new Date().toISOString().split("T")[0]}`;console.log("📊 Exportando relatório financeiro:",tt),alert(`💰 Relatório Financeiro Exportado com Sucesso!

📋 Detalhes:
• Tipo: ${s}
• Período: ${n}
• Arquivo: ${_t}.xlsx

✅ Dados incluídos:
• Receitas e custos reais
• Análise de margem
• KPIs financeiros
• Fluxo de caixa
• Top produtos por receita
• Métricas de performance`)},N=tt=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(tt),S=tt=>tt>0?"text-green-600":tt<0?"text-red-600":"text-slate-600",C=tt=>tt>0?r.jsx(FC,{className:"w-4 h-4"}):tt<0?r.jsx($C,{className:"w-4 h-4"}):r.jsx(Ar,{className:"w-4 h-4"}),M=[{value:"7d",label:"Últimos 7 dias"},{value:"30d",label:"Últimos 30 dias"},{value:"90d",label:"Últimos 90 dias"},{value:"1y",label:"Último ano"},{value:"custom",label:"Personalizado"}];return!f||!m("admin")?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ls,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acesso Restrito"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Você precisa de permissões administrativas para acessar os relatórios financeiros."}),r.jsx("button",{onClick:()=>p("/dashboard"),className:"bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg",children:"Voltar ao Dashboard"})]})}):e?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Carregando Relatórios Financeiros"}),r.jsx("p",{className:"text-slate-600",children:"Processando dados do Supabase..."})]})}):r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:()=>p("/admin/dashboard"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors font-medium",children:[r.jsx(ao,{className:"w-4 h-4"}),"Voltar ao Dashboard"]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4 flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-green-800 font-medium",children:"Dados Financeiros Atualizados"}),r.jsx("span",{className:"text-green-600",children:"•"}),r.jsxs("span",{className:"text-green-700",children:["Última atualização: ",new Date().toLocaleString("pt-BR")]})]})}),r.jsx("div",{className:"mb-12",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ls,{className:"w-8 h-8 text-amber-600"}),r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"💰 Relatórios Financeiros Detalhados"})]}),r.jsx("p",{className:"text-xl text-slate-600",children:"Análise completa de receitas, custos e lucratividade com dados reais do Supabase"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("select",{value:n,onChange:tt=>i(tt.target.value),className:"px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:M.map(tt=>r.jsx("option",{value:tt.value,children:tt.label},tt.value))}),r.jsx("button",{onClick:g,disabled:u,className:"p-2 border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors",children:r.jsx(j5,{className:`w-5 h-5 text-slate-600 ${u?"animate-spin":""}`})}),r.jsxs("button",{onClick:y,className:"bg-slate-700 hover:bg-slate-800 text-white font-medium py-2 px-4 rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(ns,{className:"w-4 h-4"}),"Exportar"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center",children:r.jsx(rr,{className:"text-white w-6 h-6"})}),r.jsxs("div",{className:`flex items-center gap-1 ${S((D=c.revenue)==null?void 0:D.growth)}`,children:[C((L=c.revenue)==null?void 0:L.growth),r.jsxs("span",{className:"text-sm font-medium",children:[((A=c.revenue)==null?void 0:A.growth)>0?"+":"",(I=c.revenue)==null?void 0:I.growth,"%"]})]})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Receita Total"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:N(Math.max(0,((H=c.revenue)==null?void 0:H.total)||0))}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Mensal: ",N(Math.max(0,((k=c.revenue)==null?void 0:k.monthly)||0))]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center",children:r.jsx(Ar,{className:"text-white w-6 h-6"})}),r.jsxs("div",{className:`flex items-center gap-1 ${S((P=c.profit)==null?void 0:P.growth)}`,children:[C((O=c.profit)==null?void 0:O.growth),r.jsxs("span",{className:"text-sm font-medium",children:[(($=c.profit)==null?void 0:$.growth)>0?"+":"",(V=c.profit)==null?void 0:V.growth,"%"]})]})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Lucro Líquido"}),r.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:N(((T=c.profit)==null?void 0:T.total)||0)}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Margem: ",(F=c.profit)==null?void 0:F.margin,"%"]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center",children:r.jsx(vx,{className:"text-white w-6 h-6"})}),r.jsxs("div",{className:`flex items-center gap-1 ${S((z=c.costs)==null?void 0:z.growth)}`,children:[C((se=c.costs)==null?void 0:se.growth),r.jsxs("span",{className:"text-sm font-medium",children:[((Y=c.costs)==null?void 0:Y.growth)>0?"+":"",(_e=c.costs)==null?void 0:_e.growth,"%"]})]})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Custos Totais"}),r.jsx("p",{className:"text-3xl font-bold text-red-600",children:N(((R=c.costs)==null?void 0:R.total)||0)}),r.jsxs("p",{className:"text-xs text-slate-500",children:["COGS: ",N(((Q=c.costs)==null?void 0:Q.cogs)||0)]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center",children:r.jsx(pn,{className:"text-white w-6 h-6"})}),r.jsxs("div",{className:`flex items-center gap-1 ${S((re=c.orders)==null?void 0:re.growth)}`,children:[C((te=c.orders)==null?void 0:te.growth),r.jsxs("span",{className:"text-sm font-medium",children:[((le=c.orders)==null?void 0:le.growth)>0?"+":"",(be=c.orders)==null?void 0:be.growth,"%"]})]})]}),r.jsx("h3",{className:"text-slate-700 font-medium mb-2",children:"Pedidos"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:((we=c.orders)==null?void 0:we.total)||0}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Ticket: ",N(((oe=c.orders)==null?void 0:oe.avgValue)||0)]})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200",children:[r.jsx("div",{className:"border-b border-slate-200",children:r.jsx("nav",{className:"flex space-x-8 px-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"revenue",label:"Receitas",icon:rr},{id:"costs",label:"Custos",icon:vx},{id:"products",label:"Produtos",icon:Bt},{id:"kpis",label:"KPIs",icon:js}].map(tt=>r.jsxs("button",{onClick:()=>a(tt.id),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ${s===tt.id?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(tt.icon,{className:"w-4 h-4"}),tt.label]},tt.id))})}),r.jsxs("div",{className:"p-8",children:[s==="overview"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Dashboard Financeiro"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Fluxo de Caixa"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Entradas"}),r.jsx("span",{className:"text-green-600 font-semibold",children:N(((Ce=c.cashFlow)==null?void 0:Ce.inflow)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Saídas"}),r.jsx("span",{className:"text-red-600 font-semibold",children:N(((ye=c.cashFlow)==null?void 0:ye.outflow)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[r.jsx("span",{className:"text-slate-900 font-semibold",children:"Saldo"}),r.jsx("span",{className:"text-emerald-600 font-bold text-lg",children:N(((fe=c.cashFlow)==null?void 0:fe.balance)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Projeção 30d"}),r.jsx("span",{className:"text-blue-600 font-semibold",children:N(((Le=c.cashFlow)==null?void 0:Le.projection30d)||0)})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Análise de Margem"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Margem Bruta"}),r.jsxs("span",{className:"text-emerald-600 font-semibold",children:[(Te=c.kpis)==null?void 0:Te.grossMargin,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Margem Líquida"}),r.jsxs("span",{className:"text-emerald-600 font-semibold",children:[(K=c.kpis)==null?void 0:K.netMargin,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"ROAS"}),r.jsxs("span",{className:"text-blue-600 font-semibold",children:[(J=c.kpis)==null?void 0:J.roas,"x"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"ROI"}),r.jsxs("span",{className:"text-purple-600 font-semibold",children:[(ve=c.kpis)==null?void 0:ve.roi,"%"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-4",children:"🏆 Top 5 Produtos por Receita (Dados Reais)"}),((ie=(qe=c.products)==null?void 0:qe.bestSelling)==null?void 0:ie.length)>0?r.jsx("div",{className:"space-y-3",children:c.products.bestSelling.slice(0,5).map((tt,_t)=>r.jsx("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 hover:bg-slate-100 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-slate-900",children:tt.name}),r.jsxs("p",{className:"text-slate-600 text-sm",children:[Math.max(0,tt.quantity)," unidades vendidas"]}),r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mt-1",children:["#",_t+1," em vendas"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-green-600 font-bold text-lg",children:N(Math.max(0,tt.revenue||0))}),r.jsxs("p",{className:"text-slate-600 text-sm",children:["Margem: ",Math.max(0,tt.margin||0).toFixed(1),"%"]}),r.jsx("div",{className:"w-20 bg-slate-200 rounded-full h-1.5 mt-1",children:r.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${Math.min(100,Math.max(0,tt.margin||0))}%`}})})]})]})},_t))}):r.jsxs("div",{className:"bg-slate-50 rounded-xl p-8 text-center border border-slate-200",children:[r.jsx(Bt,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),r.jsx("h5",{className:"text-slate-900 font-medium mb-2",children:"Nenhum produto vendido"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Ainda não há dados de vendas para exibir no período selecionado."})]})]})]})}),s==="revenue"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Análise de Receitas"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"📊 Receita por Categoria (Dados Reais)"}),((Ae=(ne=c.products)==null?void 0:ne.categories)==null?void 0:Ae.length)>0?r.jsx("div",{className:"space-y-4",children:c.products.categories.map((tt,_t)=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700 font-medium",children:tt.name}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-slate-900 font-semibold",children:N(Math.max(0,tt.revenue||0))}),r.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",Math.max(0,tt.percentage||0).toFixed(1),"%)"]})]})]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:r.jsx("div",{className:"bg-amber-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,tt.percentage||0))}%`}})}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-slate-500",children:"Crescimento"}),r.jsxs("span",{className:`font-semibold ${S(tt.growth||0)}`,children:[(tt.growth||0)>0?"+":"",Math.max(0,tt.growth||0).toFixed(1),"%"]})]})]},_t))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Op,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),r.jsx("h5",{className:"text-slate-900 font-medium mb-2",children:"Sem dados de categoria"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Ainda não há vendas por categoria no período selecionado."})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Gráfico de Receita"}),r.jsx("div",{className:"h-64 flex items-center justify-center bg-white rounded-xl border border-slate-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ls,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),r.jsx("p",{className:"text-slate-600",children:"Gráfico de receita mensal"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Em desenvolvimento"})]})})]})]})]}),s==="costs"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Análise de Custos"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Distribuição de Custos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Custo dos Produtos (COGS)"}),r.jsx("span",{className:"text-red-600 font-semibold",children:N(((Fe=c.costs)==null?void 0:Fe.cogs)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Custos Operacionais"}),r.jsx("span",{className:"text-orange-600 font-semibold",children:N(((Ve=c.costs)==null?void 0:Ve.operational)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Marketing"}),r.jsx("span",{className:"text-purple-600 font-semibold",children:N(((Ne=c.costs)==null?void 0:Ne.marketing)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[r.jsx("span",{className:"text-slate-900 font-semibold",children:"Total"}),r.jsx("span",{className:"text-slate-900 font-bold text-lg",children:N(((Z=c.costs)==null?void 0:Z.total)||0)})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Evolução dos Custos"}),r.jsx("div",{className:"h-64 flex items-center justify-center bg-white rounded-xl border border-slate-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Op,{className:"w-12 h-12 text-slate-400 mx-auto mb-2"}),r.jsx("p",{className:"text-slate-600",children:"Gráfico de custos"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Em desenvolvimento"})]})})]})]})]}),s==="products"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Performance de Produtos"}),r.jsx("div",{className:"space-y-6",children:(We=(xe=c.products)==null?void 0:xe.bestSelling)==null?void 0:We.map((tt,_t)=>r.jsx("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:tt.name}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-600 text-sm",children:"Receita"}),r.jsx("p",{className:"text-green-600 font-bold text-xl",children:N(tt.revenue)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-600 text-sm",children:"Unidades"}),r.jsx("p",{className:"text-blue-600 font-bold text-xl",children:tt.quantity})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-600 text-sm",children:"Margem"}),r.jsxs("p",{className:"text-purple-600 font-bold text-xl",children:[tt.margin,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-600 text-sm",children:"Preço Médio"}),r.jsx("p",{className:"text-amber-600 font-bold text-xl",children:N(tt.revenue/tt.quantity)})]})]})]}),r.jsx("div",{className:"ml-4",children:r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-emerald-100 text-emerald-800",children:["#",_t+1," mais vendido"]})})]})},_t))})]}),s==="kpis"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Indicadores Chave de Performance"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"CAC",value:N(((ht=c.kpis)==null?void 0:ht.cac)||0),description:"Custo de Aquisição de Cliente",color:"bg-red-100 text-red-800",icon:Pt},{title:"LTV",value:N(((Qe=c.kpis)==null?void 0:Qe.ltv)||0),description:"Lifetime Value",color:"bg-green-100 text-green-800",icon:js},{title:"LTV/CAC",value:`${(((Ue=c.kpis)==null?void 0:Ue.ltv)/((ze=c.kpis)==null?void 0:ze.cac)).toFixed(1)}x`,description:"Razão LTV/CAC",color:"bg-blue-100 text-blue-800",icon:vx},{title:"ARPU",value:N(((ot=c.kpis)==null?void 0:ot.arpu)||0),description:"Receita Média por Usuário",color:"bg-purple-100 text-purple-800",icon:rr},{title:"Churn Rate",value:`${(gt=c.kpis)==null?void 0:gt.churnRate}%`,description:"Taxa de Churn",color:"bg-orange-100 text-orange-800",icon:RC},{title:"ROI",value:`${(Ot=c.kpis)==null?void 0:Ot.roi}%`,description:"Retorno sobre Investimento",color:"bg-emerald-100 text-emerald-800",icon:Ar}].map((tt,_t)=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${tt.color}`,children:r.jsx(tt.icon,{className:"w-6 h-6"})}),r.jsx(Zt,{className:"w-5 h-5 text-slate-400"})]}),r.jsx("h4",{className:"text-slate-700 font-medium mb-2",children:tt.title}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:tt.value}),r.jsx("p",{className:"text-xs text-slate-500",children:tt.description})]},_t))}),r.jsxs("div",{className:"mt-8 bg-slate-50 rounded-2xl p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Insights dos KPIs"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),r.jsxs("p",{className:"text-slate-700",children:[r.jsxs("strong",{children:["LTV/CAC de ",(((jt=c.kpis)==null?void 0:jt.ltv)/((wt=c.kpis)==null?void 0:wt.cac)).toFixed(1),"x"]})," indica boa saúde financeira (ideal: 3x ou mais)"]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),r.jsxs("p",{className:"text-slate-700",children:[r.jsxs("strong",{children:["Margem líquida de ",(ps=c.kpis)==null?void 0:ps.netMargin,"%"]})," está acima da média do setor"]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"}),r.jsxs("p",{className:"text-slate-700",children:[r.jsxs("strong",{children:["Churn rate de ",(St=c.kpis)==null?void 0:St.churnRate,"%"]})," pode ser melhorado com estratégias de retenção"]})]})]})]})]})]})]})]})})},VT=()=>{const[e,t]=j.useState("30d"),[s,a]=j.useState("revenue"),[n,i]=j.useState(!0),[o,l]=j.useState(null),{user:c,hasPermission:d}=ar(),u=Vt();j.useEffect(()=>{if(!c||!d("admin")){u("/dashboard");return}h()},[c,d,u,e]);const h=async()=>{i(!0);try{const g=await o4.getAnalytics(e);l(g),console.log("📊 Dados de analytics carregados:",g)}catch(g){console.error("Erro ao carregar dados de analytics:",g)}finally{i(!1)}},f=g=>{const y={type:g,timeRange:e,data:o,generated:new Date().toISOString()};console.log(`Exportando dados de ${g}:`,y),alert(`📊 Relatório de ${g} exportado com sucesso!

✅ Dados incluídos:
• Métricas detalhadas
• Gráficos e tendências
• Insights automáticos

Arquivo: analytics_${g}_${new Date().toISOString().split("T")[0]}.xlsx`)};if(!c||!d("admin"))return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ls,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acesso Restrito"}),r.jsx("p",{className:"text-slate-600",children:"Você precisa de permissões de administrador."})]})});if(n)return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando dados de analytics..."})]})});if(!o)return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ls,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Erro ao carregar dados"}),r.jsx("p",{className:"text-slate-600",children:"Não foi possível carregar os dados de analytics."}),r.jsx("button",{onClick:h,className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"Tentar novamente"})]})});const{metrics:m,charts:p,insights:v}=o;return r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:()=>u("/admin/dashboard"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors font-medium",children:[r.jsx(ao,{className:"w-4 h-4"}),"Voltar ao Dashboard"]})}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ls,{className:"w-8 h-8 text-blue-600"}),r.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"📊 Analytics Avançados"})]}),r.jsx("p",{className:"text-xl text-slate-600",children:"Insights completos sobre performance, vendas e comportamento dos usuários"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("select",{value:e,onChange:g=>t(g.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"7d",children:"Últimos 7 dias"}),r.jsx("option",{value:"30d",children:"Últimos 30 dias"}),r.jsx("option",{value:"90d",children:"Últimos 90 dias"}),r.jsx("option",{value:"1y",children:"Último ano"})]}),r.jsxs("button",{onClick:()=>f("complete"),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(ns,{className:"w-4 h-4"}),"Exportar Completo"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(Sh,{title:"Receita Total",value:`R$ ${m.totalRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:`+${v.revenueGrowth}%`,changeType:"positive",icon:rr,color:"#10b981"}),r.jsx(Sh,{title:"Conversão Geral",value:`${m.conversionRate.toFixed(1)}%`,change:v.conversionTrend==="positive"?"+2.1%":"-1.2%",changeType:v.conversionTrend,icon:js,color:"#3b82f6"}),r.jsx(Sh,{title:"Ticket Médio",value:`R$ ${m.avgOrderValue.toFixed(2)}`,change:"+15.7%",changeType:"positive",icon:Ar,color:"#8b5cf6"}),r.jsx(Sh,{title:"ROAS",value:`${m.roas}x`,change:"+0.8x",changeType:"positive",icon:Jd,color:"#f59e0b"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"💰 Tendência de Receita"}),r.jsxs("button",{onClick:()=>f("revenue"),className:"text-green-600 hover:text-green-700 text-sm flex items-center gap-1",children:[r.jsx(ns,{className:"w-4 h-4"}),"Exportar"]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-green-200 p-4 mb-4",children:r.jsx(oT,{data:p.revenueByDay,height:250,color:"#10b981"})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Média Diária"}),r.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",(m.totalRevenue/p.revenueByDay.length).toFixed(0)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Pico"}),r.jsxs("p",{className:"font-bold text-green-700",children:["R$ ",Math.max(...p.revenueByDay.map(g=>g.value)).toFixed(0)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Crescimento"}),r.jsxs("p",{className:"font-bold text-emerald-600",children:["+",v.revenueGrowth,"%"]})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"🎯 Funil de Conversão"}),r.jsxs("button",{onClick:()=>f("conversion"),className:"text-blue-600 hover:text-blue-700 text-sm flex items-center gap-1",children:[r.jsx(ns,{className:"w-4 h-4"}),"Exportar"]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-blue-200 p-4",children:r.jsx("div",{className:"space-y-4",children:p.conversionFunnel.map((g,y)=>r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700",children:g.label}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-sm font-bold text-blue-600",children:g.value.toLocaleString()}),r.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(",g.percentage.toFixed(1),"%)"]})]})]}),r.jsx("div",{className:"w-full bg-blue-100 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-700",style:{width:`${g.percentage}%`}})})]},y))})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"🏆 Top Produtos"}),r.jsx(yt,{className:"w-5 h-5 text-amber-600"})]}),r.jsx("div",{className:"space-y-3",children:p.topProducts.map((g,y)=>{var N;return r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-amber-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700",children:g.label}),r.jsxs("span",{className:"text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded-full",children:["#",y+1]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-slate-600",children:[g.value," vendas"]}),r.jsxs("span",{className:"font-bold text-amber-600",children:["R$ ",g.revenue.toLocaleString()]})]}),r.jsx("div",{className:"w-full bg-amber-100 rounded-full h-1.5 mt-2",children:r.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:`${g.value/((N=p.topProducts[0])==null?void 0:N.value)*100}%`}})})]},y)})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"📦 Status dos Pedidos"}),r.jsx(oa,{className:"w-5 h-5 text-purple-600"})]}),r.jsx("div",{className:"bg-white rounded-xl border border-purple-200 p-4 mb-4",children:r.jsx(cT,{data:p.statusDistribution,size:140})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total de Pedidos"}),r.jsx("p",{className:"text-xl font-bold text-purple-600",children:m.totalOrders})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-2xl p-6 border border-cyan-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"👥 Crescimento de Usuários"}),r.jsx(Pt,{className:"w-5 h-5 text-cyan-600"})]}),r.jsx("div",{className:"bg-white rounded-xl border border-cyan-200 p-4 mb-4",children:r.jsx(lT,{data:p.userGrowth,height:140,color:"#06b6d4"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Total de Usuários"}),r.jsx("p",{className:"text-xl font-bold text-cyan-600",children:m.totalUsers})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-2xl p-8 border border-slate-200",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"🤖 Insights Automáticos Avançados"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"📈 Produto em Destaque"})]}),r.jsxs("p",{className:"text-slate-700 mb-3",children:[r.jsx("strong",{children:v.topPerformingProduct})," é o produto mais vendido no período. Considere destacar este produto em campanhas de marketing."]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Produto líder em vendas"]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${v.conversionTrend==="positive"?"bg-green-500":"bg-amber-500"}`}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"🎯 Taxa de Conversão"})]}),r.jsx("p",{className:"text-slate-700 mb-3",children:v.conversionTrend==="positive"?`Taxa de conversão de ${m.conversionRate.toFixed(1)}% está acima da média do setor.`:`Taxa de conversão de ${m.conversionRate.toFixed(1)}% pode ser otimizada.`}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${v.conversionTrend==="positive"?"text-green-600":"text-amber-600"}`,children:[r.jsx(js,{className:"w-4 h-4"}),v.conversionTrend==="positive"?"Performance excelente":"Oportunidade de melhoria"]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"💰 Receita"})]}),r.jsxs("p",{className:"text-slate-700 mb-3",children:["Crescimento de receita de ",v.revenueGrowth,"% demonstra tendência ",parseFloat(v.revenueGrowth)>0?"positiva":"negativa",parseFloat(v.revenueGrowth)>0?". Continue investindo em marketing.":". Revise estratégias de vendas."]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${parseFloat(v.revenueGrowth)>0?"text-blue-600":"text-red-600"}`,children:[r.jsx(Dr,{className:"w-4 h-4"}),parseFloat(v.revenueGrowth)>0?"Crescimento saudável":"Atenção necessária"]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"📊 Performance Geral"})]}),r.jsxs("p",{className:"text-slate-700 mb-3",children:["Com ",m.totalOrders," pedidos e ",m.totalUsers," usuários ativos, o sistema está processando dados reais em tempo real."]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-600",children:[r.jsx(Et,{className:"w-4 h-4"}),"Dados 100% reais do Supabase"]})]})]})]}),r.jsx("div",{className:"mt-6 flex items-center justify-center",children:r.jsxs("button",{onClick:()=>f("insights"),className:"bg-slate-700 hover:bg-slate-800 text-white font-medium py-3 px-6 rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(ns,{className:"w-5 h-5"}),"Exportar Relatório Completo de Insights"]})})]})]})})};var Tx={},Lx={},F1;function HT(){return F1||(F1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==="__proto__"}e.isUnsafeProperty=t}(Lx)),Lx}var Mx={},$1;function j4(){return $1||($1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){switch(typeof s){case"number":case"symbol":return!1;case"string":return s.includes(".")||s.includes("[")||s.includes("]")}}e.isDeepKey=t}(Mx)),Mx}var Dx={},q1;function w4(){return q1||(q1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){var a;return typeof s=="string"||typeof s=="symbol"?s:Object.is((a=s==null?void 0:s.valueOf)==null?void 0:a.call(s),-0)?"-0":String(s)}e.toKey=t}(Dx)),Dx}var Ix={},B1;function mb(){return B1||(B1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){const a=[],n=s.length;if(n===0)return a;let i=0,o="",l="",c=!1;for(s.charCodeAt(0)===46&&(a.push(""),i++);i<n;){const d=s[i];l?d==="\\"&&i+1<n?(i++,o+=s[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,a.push(o),o=""):o+=d:d==="["?(c=!0,o&&(a.push(o),o="")):d==="."?o&&(a.push(o),o=""):o+=d,i++}return o&&a.push(o),a}e.toPath=t}(Ix)),Ix}var z1;function fb(){return z1||(z1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HT(),s=j4(),a=w4(),n=mb();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?s.isDeepKey(c)?i(l,n.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i}(Tx)),Tx}var Rx,U1;function GT(){return U1||(U1=1,Rx=fb().get),Rx}var KT=GT();const io=bn(KT);var Fx={exports:{}},Xt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function YT(){if(W1)return Xt;W1=1;var e=60103,t=60106,s=60107,a=60108,n=60114,i=60109,o=60110,l=60112,c=60113,d=60120,u=60115,h=60116,f=60121,m=60122,p=60117,v=60129,g=60131;if(typeof Symbol=="function"&&Symbol.for){var y=Symbol.for;e=y("react.element"),t=y("react.portal"),s=y("react.fragment"),a=y("react.strict_mode"),n=y("react.profiler"),i=y("react.provider"),o=y("react.context"),l=y("react.forward_ref"),c=y("react.suspense"),d=y("react.suspense_list"),u=y("react.memo"),h=y("react.lazy"),f=y("react.block"),m=y("react.server.block"),p=y("react.fundamental"),v=y("react.debug_trace_mode"),g=y("react.legacy_hidden")}function N(O){if(typeof O=="object"&&O!==null){var $=O.$$typeof;switch($){case e:switch(O=O.type,O){case s:case n:case a:case c:case d:return O;default:switch(O=O&&O.$$typeof,O){case o:case l:case h:case u:case i:return O;default:return $}}case t:return $}}}var S=i,C=e,M=l,D=s,L=h,A=u,I=t,H=n,k=a,P=c;return Xt.ContextConsumer=o,Xt.ContextProvider=S,Xt.Element=C,Xt.ForwardRef=M,Xt.Fragment=D,Xt.Lazy=L,Xt.Memo=A,Xt.Portal=I,Xt.Profiler=H,Xt.StrictMode=k,Xt.Suspense=P,Xt.isAsyncMode=function(){return!1},Xt.isConcurrentMode=function(){return!1},Xt.isContextConsumer=function(O){return N(O)===o},Xt.isContextProvider=function(O){return N(O)===i},Xt.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===e},Xt.isForwardRef=function(O){return N(O)===l},Xt.isFragment=function(O){return N(O)===s},Xt.isLazy=function(O){return N(O)===h},Xt.isMemo=function(O){return N(O)===u},Xt.isPortal=function(O){return N(O)===t},Xt.isProfiler=function(O){return N(O)===n},Xt.isStrictMode=function(O){return N(O)===a},Xt.isSuspense=function(O){return N(O)===c},Xt.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===s||O===n||O===v||O===a||O===c||O===d||O===g||typeof O=="object"&&O!==null&&(O.$$typeof===h||O.$$typeof===u||O.$$typeof===i||O.$$typeof===o||O.$$typeof===l||O.$$typeof===p||O.$$typeof===f||O[0]===m)},Xt.typeOf=N,Xt}var V1;function JT(){return V1||(V1=1,Fx.exports=YT()),Fx.exports}var XT=JT(),cs=e=>e===0?0:e>0?1:-1,da=e=>typeof e=="number"&&e!=+e,Uo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ke=e=>(typeof e=="number"||e instanceof Number)&&!da(e),In=e=>Ke(e)||typeof e=="string",QT=0,al=e=>{var t=++QT;return"".concat(e||"").concat(t)},Gs=function(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ke(t)&&typeof t!="string")return a;var i;if(Uo(t)){if(s==null)return a;var o=t.indexOf("%");i=s*parseFloat(t.slice(0,o))/100}else i=+t;return da(i)&&(i=a),n&&s!=null&&i>s&&(i=s),i},N4=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,s={},a=0;a<t;a++)if(!s[e[a]])s[e[a]]=!0;else return!0;return!1},Vi=(e,t)=>Ke(e)&&Ke(t)?s=>e+s*(t-e):()=>t;function Zl(e,t,s){return Ke(e)&&Ke(t)?e+s*(t-e):t}function xb(e,t,s){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):io(a,t))===s)}var hr=e=>e===null||typeof e>"u",fu=e=>hr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),ZT=["viewBox","children"],eL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],H1=["points","pathLength"],$x={svg:ZT,polygon:H1,polyline:H1},pb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],gb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(j.isValidElement(e)&&(s=e.props),typeof s!="object"&&typeof s!="function")return null;var a={};return Object.keys(s).forEach(n=>{pb.includes(n)&&(a[n]=i=>s[n](s,i))}),a},tL=(e,t,s)=>a=>(e(t,s,a),null),xu=(e,t,s)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(n=>{var i=e[n];pb.includes(n)&&typeof i=="function"&&(a||(a={}),a[n]=tL(i,t,s))}),a},G1=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",K1=null,qx=null,_4=e=>{if(e===K1&&Array.isArray(qx))return qx;var t=[];return j.Children.forEach(e,s=>{hr(s)||(XT.isFragment(s)?t=t.concat(_4(s.props.children)):t.push(s))}),qx=t,K1=e,t};function pu(e,t){var s=[],a=[];return Array.isArray(t)?a=t.map(n=>G1(n)):a=[G1(t)],_4(e).forEach(n=>{var i=io(n,"type.displayName")||io(n,"type.name");a.indexOf(i)!==-1&&s.push(n)}),s}var S4=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,rL=(e,t,s,a)=>{var n,i=(n=a&&($x==null?void 0:$x[a]))!==null&&n!==void 0?n:[];return t.startsWith("data-")||typeof e!="function"&&(a&&i.includes(t)||eL.includes(t))||s&&pb.includes(t)},At=(e,t,s)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(j.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var n={};return Object.keys(a).forEach(i=>{var o;rL((o=a)===null||o===void 0?void 0:o[i],i,t,s)&&(n[i]=a[i])}),n},sL=["children","width","height","viewBox","className","style","title","desc"];function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},zp.apply(null,arguments)}function aL(e,t){if(e==null)return{};var s,a,n=nL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function nL(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var bb=j.forwardRef((e,t)=>{var{children:s,width:a,height:n,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=aL(e,sL),h=i||{width:a,height:n,x:0,y:0},f=Lt("recharts-surface",o);return j.createElement("svg",zp({},At(u,!0,"svg"),{className:f,width:a,height:n,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),j.createElement("title",null,c),j.createElement("desc",null,d),s)}),iL=["children","className"];function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Up.apply(null,arguments)}function oL(e,t){if(e==null)return{};var s,a,n=lL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function lL(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var Ir=j.forwardRef((e,t)=>{var{children:s,className:a}=e,n=oL(e,iL),i=Lt("recharts-layer",a);return j.createElement("g",Up({className:i},At(n,!0),{ref:t}),s)}),P4=j.createContext(null),cL=()=>j.useContext(P4);function cr(e){return function(){return e}}const C4=Math.cos,om=Math.sin,vn=Math.sqrt,lm=Math.PI,Gm=2*lm,Wp=Math.PI,Vp=2*Wp,Ro=1e-6,dL=Vp-Ro;function A4(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=arguments[t]+e[t]}function uL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return A4;const s=10**t;return function(a){this._+=a[0];for(let n=1,i=a.length;n<i;++n)this._+=Math.round(arguments[n]*s)/s+a[n]}}class hL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?A4:uL(t)}moveTo(t,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,s){this._append`L${this._x1=+t},${this._y1=+s}`}quadraticCurveTo(t,s,a,n){this._append`Q${+t},${+s},${this._x1=+a},${this._y1=+n}`}bezierCurveTo(t,s,a,n,i,o){this._append`C${+t},${+s},${+a},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(t,s,a,n,i){if(t=+t,s=+s,a=+a,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=n-s,u=o-t,h=l-s,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=s}`;else if(f>Ro)if(!(Math.abs(h*c-d*u)>Ro)||!i)this._append`L${this._x1=t},${this._y1=s}`;else{let m=a-o,p=n-l,v=c*c+d*d,g=m*m+p*p,y=Math.sqrt(v),N=Math.sqrt(f),S=i*Math.tan((Wp-Math.acos((v+f-g)/(2*y*N)))/2),C=S/N,M=S/y;Math.abs(C-1)>Ro&&this._append`L${t+C*u},${s+C*h}`,this._append`A${i},${i},0,0,${+(h*m>u*p)},${this._x1=t+M*c},${this._y1=s+M*d}`}}arc(t,s,a,n,i,o){if(t=+t,s=+s,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(n),c=a*Math.sin(n),d=t+l,u=s+c,h=1^o,f=o?n-i:i-n;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Ro||Math.abs(this._y1-u)>Ro)&&this._append`L${d},${u}`,a&&(f<0&&(f=f%Vp+Vp),f>dL?this._append`A${a},${a},0,1,${h},${t-l},${s-c}A${a},${a},0,1,${h},${this._x1=d},${this._y1=u}`:f>Ro&&this._append`A${a},${a},0,${+(f>=Wp)},${h},${this._x1=t+a*Math.cos(i)},${this._y1=s+a*Math.sin(i)}`)}rect(t,s,a,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}h${a=+a}v${+n}h${-a}Z`}toString(){return this._}}function vb(e){let t=3;return e.digits=function(s){if(!arguments.length)return t;if(s==null)t=null;else{const a=Math.floor(s);if(!(a>=0))throw new RangeError(`invalid digits: ${s}`);t=a}return e},()=>new hL(t)}function yb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function k4(e){this._context=e}k4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Km(e){return new k4(e)}function E4(e){return e[0]}function O4(e){return e[1]}function T4(e,t){var s=cr(!0),a=null,n=Km,i=null,o=vb(l);e=typeof e=="function"?e:e===void 0?E4:cr(e),t=typeof t=="function"?t:t===void 0?O4:cr(t);function l(c){var d,u=(c=yb(c)).length,h,f=!1,m;for(a==null&&(i=n(m=o())),d=0;d<=u;++d)!(d<u&&s(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:cr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:cr(+c),l):t},l.defined=function(c){return arguments.length?(s=typeof c=="function"?c:cr(!!c),l):s},l.curve=function(c){return arguments.length?(n=c,a!=null&&(i=n(a)),l):n},l.context=function(c){return arguments.length?(c==null?a=i=null:i=n(a=c),l):a},l}function Ph(e,t,s){var a=null,n=cr(!0),i=null,o=Km,l=null,c=vb(d);e=typeof e=="function"?e:e===void 0?E4:cr(+e),t=typeof t=="function"?t:cr(t===void 0?0:+t),s=typeof s=="function"?s:s===void 0?O4:cr(+s);function d(h){var f,m,p,v=(h=yb(h)).length,g,y=!1,N,S=new Array(v),C=new Array(v);for(i==null&&(l=o(N=c())),f=0;f<=v;++f){if(!(f<v&&n(g=h[f],f,h))===y)if(y=!y)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=m;--p)l.point(S[p],C[p]);l.lineEnd(),l.areaEnd()}y&&(S[f]=+e(g,f,h),C[f]=+t(g,f,h),l.point(a?+a(g,f,h):S[f],s?+s(g,f,h):C[f]))}if(N)return l=null,N+""||null}function u(){return T4().defined(n).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:cr(+h),a=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:cr(+h),d):e},d.x1=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:cr(+h),d):a},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:cr(+h),s=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:cr(+h),d):t},d.y1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:cr(+h),d):s},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(s)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(h){return arguments.length?(n=typeof h=="function"?h:cr(!!h),d):n},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class L4{constructor(t,s){this._context=t,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,s){switch(t=+t,s=+s,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,s,t,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,t,this._y0,t,s);break}}this._x0=t,this._y0=s}}function mL(e){return new L4(e,!0)}function fL(e){return new L4(e,!1)}const jb={draw(e,t){const s=vn(t/lm);e.moveTo(s,0),e.arc(0,0,s,0,Gm)}},xL={draw(e,t){const s=vn(t/5)/2;e.moveTo(-3*s,-s),e.lineTo(-s,-s),e.lineTo(-s,-3*s),e.lineTo(s,-3*s),e.lineTo(s,-s),e.lineTo(3*s,-s),e.lineTo(3*s,s),e.lineTo(s,s),e.lineTo(s,3*s),e.lineTo(-s,3*s),e.lineTo(-s,s),e.lineTo(-3*s,s),e.closePath()}},M4=vn(1/3),pL=M4*2,gL={draw(e,t){const s=vn(t/pL),a=s*M4;e.moveTo(0,-s),e.lineTo(a,0),e.lineTo(0,s),e.lineTo(-a,0),e.closePath()}},bL={draw(e,t){const s=vn(t),a=-s/2;e.rect(a,a,s,s)}},vL=.8908130915292852,D4=om(lm/10)/om(7*lm/10),yL=om(Gm/10)*D4,jL=-C4(Gm/10)*D4,wL={draw(e,t){const s=vn(t*vL),a=yL*s,n=jL*s;e.moveTo(0,-s),e.lineTo(a,n);for(let i=1;i<5;++i){const o=Gm*i/5,l=C4(o),c=om(o);e.lineTo(c*s,-l*s),e.lineTo(l*a-c*n,c*a+l*n)}e.closePath()}},Bx=vn(3),NL={draw(e,t){const s=-vn(t/(Bx*3));e.moveTo(0,s*2),e.lineTo(-Bx*s,-s),e.lineTo(Bx*s,-s),e.closePath()}},za=-.5,Ua=vn(3)/2,Hp=1/vn(12),_L=(Hp/2+1)*3,SL={draw(e,t){const s=vn(t/_L),a=s/2,n=s*Hp,i=a,o=s*Hp+s,l=-i,c=o;e.moveTo(a,n),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(za*a-Ua*n,Ua*a+za*n),e.lineTo(za*i-Ua*o,Ua*i+za*o),e.lineTo(za*l-Ua*c,Ua*l+za*c),e.lineTo(za*a+Ua*n,za*n-Ua*a),e.lineTo(za*i+Ua*o,za*o-Ua*i),e.lineTo(za*l+Ua*c,za*c-Ua*l),e.closePath()}};function PL(e,t){let s=null,a=vb(n);e=typeof e=="function"?e:cr(e||jb),t=typeof t=="function"?t:cr(t===void 0?64:+t);function n(){let i;if(s||(s=i=a()),e.apply(this,arguments).draw(s,+t.apply(this,arguments)),i)return s=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:cr(i),n):e},n.size=function(i){return arguments.length?(t=typeof i=="function"?i:cr(+i),n):t},n.context=function(i){return arguments.length?(s=i??null,n):s},n}function cm(){}function dm(e,t,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+s)/6)}function I4(e){this._context=e}I4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CL(e){return new I4(e)}function R4(e){this._context=e}R4.prototype={areaStart:cm,areaEnd:cm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AL(e){return new R4(e)}function F4(e){this._context=e}F4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(s,a):this._context.moveTo(s,a);break;case 3:this._point=4;default:dm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kL(e){return new F4(e)}function $4(e){this._context=e}$4.prototype={areaStart:cm,areaEnd:cm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function EL(e){return new $4(e)}function Y1(e){return e<0?-1:1}function J1(e,t,s){var a=e._x1-e._x0,n=t-e._x1,i=(e._y1-e._y0)/(a||n<0&&-0),o=(s-e._y1)/(n||a<0&&-0),l=(i*n+o*a)/(a+n);return(Y1(i)+Y1(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function X1(e,t){var s=e._x1-e._x0;return s?(3*(e._y1-e._y0)/s-t)/2:t}function zx(e,t,s){var a=e._x0,n=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,n+l*t,i-l,o-l*s,i,o)}function um(e){this._context=e}um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zx(this,this._t0,X1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var s=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zx(this,X1(this,s=J1(this,e,t)),s);break;default:zx(this,this._t0,s=J1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=s}}};function q4(e){this._context=new B4(e)}(q4.prototype=Object.create(um.prototype)).point=function(e,t){um.prototype.point.call(this,t,e)};function B4(e){this._context=e}B4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,s,a,n,i){this._context.bezierCurveTo(t,e,a,s,i,n)}};function OL(e){return new um(e)}function TL(e){return new q4(e)}function z4(e){this._context=e}z4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,s=e.length;if(s)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),s===2)this._context.lineTo(e[1],t[1]);else for(var a=Q1(e),n=Q1(t),i=0,o=1;o<s;++i,++o)this._context.bezierCurveTo(a[0][i],n[0][i],a[1][i],n[1][i],e[o],t[o]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Q1(e){var t,s=e.length-1,a,n=new Array(s),i=new Array(s),o=new Array(s);for(n[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<s-1;++t)n[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(n[s-1]=2,i[s-1]=7,o[s-1]=8*e[s-1]+e[s],t=1;t<s;++t)a=n[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(n[s-1]=o[s-1]/i[s-1],t=s-2;t>=0;--t)n[t]=(o[t]-n[t+1])/i[t];for(i[s-1]=(e[s]+n[s-1])/2,t=0;t<s-1;++t)i[t]=2*e[t+1]-n[t+1];return[n,i]}function LL(e){return new z4(e)}function Ym(e,t){this._context=e,this._t=t}Ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var s=this._x*(1-this._t)+e*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,t)}break}}this._x=e,this._y=t}};function ML(e){return new Ym(e,.5)}function DL(e){return new Ym(e,0)}function IL(e){return new Ym(e,1)}function _c(e,t){if((o=e.length)>1)for(var s=1,a,n,i=e[t[0]],o,l=i.length;s<o;++s)for(n=i,i=e[t[s]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}function Gp(e){for(var t=e.length,s=new Array(t);--t>=0;)s[t]=t;return s}function RL(e,t){return e[t]}function FL(e){const t=[];return t.key=e,t}function $L(){var e=cr([]),t=Gp,s=_c,a=RL;function n(i){var o=Array.from(e.apply(this,arguments),FL),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(h,o[l].key,d,i)]).data=h;for(l=0,u=yb(t(o));l<c;++l)o[u[l]].index=l;return s(o,u),o}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:cr(Array.from(i)),n):e},n.value=function(i){return arguments.length?(a=typeof i=="function"?i:cr(+i),n):a},n.order=function(i){return arguments.length?(t=i==null?Gp:typeof i=="function"?i:cr(Array.from(i)),n):t},n.offset=function(i){return arguments.length?(s=i??_c,n):s},n}function qL(e,t){if((a=e.length)>0){for(var s,a,n=0,i=e[0].length,o;n<i;++n){for(o=s=0;s<a;++s)o+=e[s][n][1]||0;if(o)for(s=0;s<a;++s)e[s][n][1]/=o}_c(e,t)}}function BL(e,t){if((n=e.length)>0){for(var s=0,a=e[t[0]],n,i=a.length;s<i;++s){for(var o=0,l=0;o<n;++o)l+=e[o][s][1]||0;a[s][1]+=a[s][0]=-l/2}_c(e,t)}}function zL(e,t){if(!(!((o=e.length)>0)||!((i=(n=e[t[0]]).length)>0))){for(var s=0,a=1,n,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[a][1]||0,f=u[a-1][1]||0,m=(h-f)/2,p=0;p<l;++p){var v=e[t[p]],g=v[a][1]||0,y=v[a-1][1]||0;m+=g-y}c+=h,d+=m*h}n[a-1][1]+=n[a-1][0]=s,c&&(s-=d/c)}n[a-1][1]+=n[a-1][0]=s,_c(e,t)}}var UL=["type","size","sizeType"];function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Kp.apply(null,arguments)}function Z1(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function e2(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Z1(Object(s),!0).forEach(function(a){WL(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z1(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function WL(e,t,s){return(t=VL(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function VL(e){var t=HL(e,"string");return typeof t=="symbol"?t:t+""}function HL(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GL(e,t){if(e==null)return{};var s,a,n=KL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function KL(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var U4={symbolCircle:jb,symbolCross:xL,symbolDiamond:gL,symbolSquare:bL,symbolStar:wL,symbolTriangle:NL,symbolWye:SL},YL=Math.PI/180,JL=e=>{var t="symbol".concat(fu(e));return U4[t]||jb},XL=(e,t,s)=>{if(t==="area")return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*YL;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},QL=(e,t)=>{U4["symbol".concat(fu(e))]=t},wb=e=>{var{type:t="circle",size:s=64,sizeType:a="area"}=e,n=GL(e,UL),i=e2(e2({},n),{},{type:t,size:s,sizeType:a}),o=()=>{var h=JL(t),f=PL().type(h).size(XL(s,a,t));return f()},{className:l,cx:c,cy:d}=i,u=At(i,!0);return c===+c&&d===+d&&s===+s?j.createElement("path",Kp({},u,{className:Lt("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};wb.registerSymbol=QL;function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Yp.apply(null,arguments)}function t2(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function ZL(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(s),!0).forEach(function(a){Nb(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t2(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Nb(e,t,s){return(t=e7(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function e7(e){var t=t7(e,"string");return typeof t=="symbol"?t:t+""}function t7(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wa=32;class _b extends j.PureComponent{renderIcon(t,s){var{inactiveColor:a}=this.props,n=Wa/2,i=Wa/6,o=Wa/3,l=t.inactive?a:t.color,c=s??t.type;if(c==="none")return null;if(c==="plainline")return j.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:Wa,y2:n,className:"recharts-legend-icon"});if(c==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(Wa,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(c==="rect")return j.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Wa/8,"h").concat(Wa,"v").concat(Wa*3/4,"h").concat(-Wa,"z"),className:"recharts-legend-icon"});if(j.isValidElement(t.legendIcon)){var d=ZL({},t);return delete d.legendIcon,j.cloneElement(t.legendIcon,d)}return j.createElement(wb,{fill:l,cx:n,cy:n,size:Wa,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:s,layout:a,formatter:n,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:Wa,height:Wa},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||n,m=Lt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var p=u.inactive?i:u.color,v=f?f(u.value,u,h):u.value;return j.createElement("li",Yp({className:m,style:c,key:"legend-item-".concat(h)},xu(this.props,u,h)),j.createElement(bb,{width:s,height:s,viewBox:l,style:d,"aria-label":"".concat(v," legend icon")},this.renderIcon(u,o)),j.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},v))})}render(){var{payload:t,layout:s,align:a}=this.props;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}Nb(_b,"displayName","Legend");Nb(_b,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ux={},Wx={},r2;function r7(){return r2||(r2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a){const n=new Map;for(let i=0;i<s.length;i++){const o=s[i],l=a(o);n.has(l)||n.set(l,o)}return Array.from(n.values())}e.uniqBy=t}(Wx)),Wx}var Vx={},s2;function W4(){return s2||(s2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s}e.identity=t}(Vx)),Vx}var Hx={},Gx={},Kx={},a2;function s7(){return a2||(a2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Number.isSafeInteger(s)&&s>=0}e.isLength=t}(Kx)),Kx}var n2;function Sb(){return n2||(n2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s7();function s(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=s}(Gx)),Gx}var Yx={},i2;function a7(){return i2||(i2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="object"&&s!==null}e.isObjectLike=t}(Yx)),Yx}var o2;function n7(){return o2||(o2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sb(),s=a7();function a(n){return s.isObjectLike(n)&&t.isArrayLike(n)}e.isArrayLikeObject=a}(Hx)),Hx}var Jx={},Xx={},l2;function i7(){return l2||(l2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fb();function s(a){return function(n){return t.get(n,a)}}e.property=s}(Xx)),Xx}var Qx={},Zx={},e0={},t0={},c2;function V4(){return c2||(c2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s!==null&&(typeof s=="object"||typeof s=="function")}e.isObject=t}(t0)),t0}var r0={},d2;function H4(){return d2||(d2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==null||typeof s!="object"&&typeof s!="function"}e.isPrimitive=t}(r0)),r0}var s0={},u2;function Pb(){return u2||(u2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a){return s===a||Number.isNaN(s)&&Number.isNaN(a)}e.eq=t}(s0)),s0}var h2;function o7(){return h2||(h2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cb(),s=V4(),a=H4(),n=Pb();function i(h,f,m){return typeof m!="function"?t.isMatch(h,f):o(h,f,function p(v,g,y,N,S,C){const M=m(v,g,y,N,S,C);return M!==void 0?!!M:o(v,g,p,C)},new Map)}function o(h,f,m,p){if(f===h)return!0;switch(typeof f){case"object":return l(h,f,m,p);case"function":return Object.keys(f).length>0?o(h,{...f},m,p):n.eq(h,f);default:return s.isObject(h)?typeof f=="string"?f==="":!0:n.eq(h,f)}}function l(h,f,m,p){if(f==null)return!0;if(Array.isArray(f))return d(h,f,m,p);if(f instanceof Map)return c(h,f,m,p);if(f instanceof Set)return u(h,f,m,p);const v=Object.keys(f);if(h==null)return v.length===0;if(v.length===0)return!0;if(p&&p.has(f))return p.get(f)===h;p&&p.set(f,h);try{for(let g=0;g<v.length;g++){const y=v[g];if(!a.isPrimitive(h)&&!(y in h)||f[y]===void 0&&h[y]!==void 0||f[y]===null&&h[y]!==null||!m(h[y],f[y],y,h,f,p))return!1}return!0}finally{p&&p.delete(f)}}function c(h,f,m,p){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[v,g]of f.entries()){const y=h.get(v);if(m(y,g,v,h,f,p)===!1)return!1}return!0}function d(h,f,m,p){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const v=new Set;for(let g=0;g<f.length;g++){const y=f[g];let N=!1;for(let S=0;S<h.length;S++){if(v.has(S))continue;const C=h[S];let M=!1;if(m(C,y,g,h,f,p)&&(M=!0),M){v.add(S),N=!0;break}}if(!N)return!1}return!0}function u(h,f,m,p){return f.size===0?!0:h instanceof Set?d([...h],[...f],m,p):!1}e.isMatchWith=i,e.isSetMatch=u}(e0)),e0}var m2;function Cb(){return m2||(m2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o7();function s(a,n){return t.isMatchWith(a,n,()=>{})}e.isMatch=s}(Zx)),Zx}var a0={},n0={},i0={},f2;function G4(){return f2||(f2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Object.getOwnPropertySymbols(s).filter(a=>Object.prototype.propertyIsEnumerable.call(s,a))}e.getSymbols=t}(i0)),i0}var o0={},x2;function Ab(){return x2||(x2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}e.getTag=t}(o0)),o0}var l0={},p2;function kb(){return p2||(p2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",s="[object String]",a="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",p="[object Error]",v="[object DataView]",g="[object Uint8Array]",y="[object Uint8ClampedArray]",N="[object Uint16Array]",S="[object Uint32Array]",C="[object BigUint64Array]",M="[object Int8Array]",D="[object Int16Array]",L="[object Int32Array]",A="[object BigInt64Array]",I="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=C,e.booleanTag=n,e.dataViewTag=v,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=I,e.float64ArrayTag=H,e.functionTag=h,e.int16ArrayTag=D,e.int32ArrayTag=L,e.int8ArrayTag=M,e.mapTag=c,e.numberTag=a,e.objectTag=m,e.regexpTag=t,e.setTag=d,e.stringTag=s,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=S,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=y}(l0)),l0}var c0={},g2;function l7(){return g2||(g2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}e.isTypedArray=t}(c0)),c0}var b2;function K4(){return b2||(b2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G4(),s=Ab(),a=kb(),n=H4(),i=l7();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,f,m=new Map,p=void 0){const v=p==null?void 0:p(u,h,f,m);if(v!=null)return v;if(n.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const g=new Array(u.length);m.set(u,g);for(let y=0;y<u.length;y++)g[y]=l(u[y],y,f,m,p);return Object.hasOwn(u,"index")&&(g.index=u.index),Object.hasOwn(u,"input")&&(g.input=u.input),g}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const g=new RegExp(u.source,u.flags);return g.lastIndex=u.lastIndex,g}if(u instanceof Map){const g=new Map;m.set(u,g);for(const[y,N]of u)g.set(y,l(N,y,f,m,p));return g}if(u instanceof Set){const g=new Set;m.set(u,g);for(const y of u)g.add(l(y,void 0,f,m,p));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const g=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,g);for(let y=0;y<u.length;y++)g[y]=l(u[y],y,f,m,p);return g}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const g=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,g),c(g,u,f,m,p),g}if(typeof File<"u"&&u instanceof File){const g=new File([u],u.name,{type:u.type});return m.set(u,g),c(g,u,f,m,p),g}if(u instanceof Blob){const g=new Blob([u],{type:u.type});return m.set(u,g),c(g,u,f,m,p),g}if(u instanceof Error){const g=new u.constructor;return m.set(u,g),g.message=u.message,g.name=u.name,g.stack=u.stack,g.cause=u.cause,c(g,u,f,m,p),g}if(typeof u=="object"&&d(u)){const g=Object.create(Object.getPrototypeOf(u));return m.set(u,g),c(g,u,f,m,p),g}return u}function c(u,h,f=u,m,p){const v=[...Object.keys(h),...t.getSymbols(h)];for(let g=0;g<v.length;g++){const y=v[g],N=Object.getOwnPropertyDescriptor(u,y);(N==null||N.writable)&&(u[y]=l(h[y],y,f,m,p))}}function d(u){switch(s.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(n0)),n0}var v2;function c7(){return v2||(v2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K4();function s(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=s}(a0)),a0}var y2;function d7(){return y2||(y2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cb(),s=c7();function a(n){return n=s.cloneDeep(n),i=>t.isMatch(i,n)}e.matches=a}(Qx)),Qx}var d0={},u0={},h0={},j2;function u7(){return j2||(j2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K4(),s=kb();function a(n,i){return t.cloneDeepWith(n,(o,l,c,d)=>{const u=i==null?void 0:i(o,l,c,d);if(u!=null)return u;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case s.numberTag:case s.stringTag:case s.booleanTag:{const h=new n.constructor(n==null?void 0:n.valueOf());return t.copyProperties(h,n),h}case s.argumentsTag:{const h={};return t.copyProperties(h,n),h.length=n.length,h[Symbol.iterator]=n[Symbol.iterator],h}default:return}})}e.cloneDeepWith=a}(h0)),h0}var w2;function h7(){return w2||(w2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u7();function s(a){return t.cloneDeepWith(a)}e.cloneDeep=s}(u0)),u0}var m0={},f0={},N2;function Y4(){return N2||(N2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function s(a,n=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<n;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=s}(f0)),f0}var x0={},_2;function m7(){return _2||(_2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ab();function s(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=s}(x0)),x0}var S2;function f7(){return S2||(S2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j4(),s=Y4(),a=m7(),n=mb();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=n.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||a.isArguments(d))&&s.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i}(m0)),m0}var P2;function x7(){return P2||(P2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cb(),s=w4(),a=h7(),n=fb(),i=f7();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=s.toKey(l);break}}return c=a.cloneDeep(c),function(d){const u=n.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(d0)),d0}var C2;function p7(){return C2||(C2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W4(),s=i7(),a=d7(),n=x7();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return s.property(o)}}e.iteratee=i}(Jx)),Jx}var A2;function g7(){return A2||(A2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r7(),s=W4(),a=n7(),n=p7();function i(o,l=s.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),n.iteratee(l)):[]}e.uniqBy=i}(Ux)),Ux}var p0,k2;function b7(){return k2||(k2=1,p0=g7().uniqBy),p0}var v7=b7();const E2=bn(v7);function J4(e,t,s){return t===!0?E2(e,s):typeof t=="function"?E2(e,t):e}var g0={exports:{}},b0={},v0={exports:{}},y0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function y7(){if(O2)return y0;O2=1;var e=eb();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var s=typeof Object.is=="function"?Object.is:t,a=e.useState,n=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,f){var m=f(),p=a({inst:{value:m,getSnapshot:f}}),v=p[0].inst,g=p[1];return i(function(){v.value=m,v.getSnapshot=f,c(v)&&g({inst:v})},[h,m,f]),n(function(){return c(v)&&g({inst:v}),h(function(){c(v)&&g({inst:v})})},[h]),o(m),m}function c(h){var f=h.getSnapshot;h=h.value;try{var m=f();return!s(h,m)}catch{return!0}}function d(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return y0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,y0}var T2;function j7(){return T2||(T2=1,v0.exports=y7()),v0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2;function w7(){if(L2)return b0;L2=1;var e=eb(),t=j7();function s(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var a=typeof Object.is=="function"?Object.is:s,n=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return b0.useSyncExternalStoreWithSelector=function(d,u,h,f,m){var p=i(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=l(function(){function y(D){if(!N){if(N=!0,S=D,D=f(D),m!==void 0&&v.hasValue){var L=v.value;if(m(L,D))return C=L}return C=D}if(L=C,a(S,D))return L;var A=f(D);return m!==void 0&&m(L,A)?(S=D,L):(S=D,C=A)}var N=!1,S,C,M=h===void 0?null:h;return[function(){return y(u())},M===null?void 0:function(){return y(M())}]},[u,h,f,m]);var g=n(d,p[0],p[1]);return o(function(){v.hasValue=!0,v.value=g},[g]),c(g),g},b0}var M2;function N7(){return M2||(M2=1,g0.exports=w7()),g0.exports}var _7=N7(),Eb=j.createContext(null),S7=e=>e,jr=()=>{var e=j.useContext(Eb);return e?e.store.dispatch:S7},Hh=()=>{},P7=()=>Hh,C7=(e,t)=>e===t;function rt(e){var t=j.useContext(Eb);return _7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:P7,t?t.store.getState:Hh,t?t.store.getState:Hh,t?e:Hh,C7)}function A7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function k7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function E7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(s=>typeof s=="function")){const s=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${s}]`)}}var D2=e=>Array.isArray(e)?e:[e];function O7(e){const t=Array.isArray(e[0])?e[0]:e;return E7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function T7(e,t){const s=[],{length:a}=e;for(let n=0;n<a;n++)s.push(e[n].apply(null,t));return s}var L7=class{constructor(e){this.value=e}deref(){return this.value}},M7=typeof WeakRef<"u"?WeakRef:L7,D7=0,I2=1;function Ch(){return{s:D7,v:void 0,o:null,p:null}}function X4(e,t={}){let s=Ch();const{resultEqualityCheck:a}=t;let n,i=0;function o(){var h;let l=s;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const g=v.get(p);g===void 0?(l=Ch(),v.set(p,l)):l=g}else{let v=l.p;v===null&&(l.p=v=new Map);const g=v.get(p);g===void 0?(l=Ch(),v.set(p,l)):l=g}}const d=l;let u;if(l.s===I2)u=l.v;else if(u=e.apply(null,arguments),i++,a){const f=((h=n==null?void 0:n.deref)==null?void 0:h.call(n))??n;f!=null&&a(f,u)&&(u=f,i!==0&&i--),n=typeof u=="object"&&u!==null||typeof u=="function"?new M7(u):u}return d.s=I2,d.v=u,u}return o.clearCache=()=>{s=Ch(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function I7(e,...t){const s=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...n)=>{let i=0,o=0,l,c={},d=n.pop();typeof d=="object"&&(c=d,d=n.pop()),A7(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...s,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=X4,argsMemoizeOptions:p=[]}=u,v=D2(f),g=D2(p),y=O7(n),N=h(function(){return i++,d.apply(null,arguments)},...v),S=m(function(){o++;const M=T7(y,arguments);return l=N.apply(null,M),l},...g);return Object.assign(S,{resultFunc:d,memoizedResultFunc:N,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:m})};return Object.assign(a,{withTypes:()=>a}),a}var ke=I7(X4),R7=Object.assign((e,t=ke)=>{k7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const s=Object.keys(e),a=s.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[s[c]]=l,o),{}))},{withTypes:()=>R7}),j0={},w0={},N0={},R2;function F7(){return R2||(R2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const s=(a,n,i)=>{if(a!==n){const o=t(a),l=t(n);if(o===l&&o===0){if(a<n)return i==="desc"?1:-1;if(a>n)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=s}(N0)),N0}var _0={},S0={},F2;function Q4(){return F2||(F2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"||s instanceof Symbol}e.isSymbol=t}(S0)),S0}var $2;function $7(){return $2||($2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q4(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!s.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=n}(_0)),_0}var q2;function q7(){return q2||(q2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F7(),s=$7(),a=mb();function n(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const d=(m,p)=>{let v=m;for(let g=0;g<p.length&&v!=null;++g)v=v[p[g]];return v},u=(m,p)=>p==null||m==null?p:typeof m=="object"&&"key"in m?Object.hasOwn(p,m.key)?p[m.key]:d(p,m.path):typeof m=="function"?m(p):Array.isArray(m)?d(p,m):typeof p=="object"?p[m]:p,h=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||s.isKey(m)?m:{key:m,path:a.toPath(m)}));return i.map(m=>({original:m,criteria:h.map(p=>u(p,m))})).slice().sort((m,p)=>{for(let v=0;v<h.length;v++){const g=t.compareValues(m.criteria[v],p.criteria[v],l[v]);if(g!==0)return g}return 0}).map(m=>m.original)}e.orderBy=n}(w0)),w0}var P0={},B2;function B7(){return B2||(B2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a=1){const n=[],i=Math.floor(a),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):n.push(u)}};return o(s,0),n}e.flatten=t}(P0)),P0}var C0={},z2;function Z4(){return z2||(z2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y4(),s=Sb(),a=V4(),n=Pb();function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&s.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?n.eq(c[l],o):!1}e.isIterateeCall=i}(C0)),C0}var U2;function z7(){return U2||(U2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q7(),s=B7(),a=Z4();function n(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,s.flatten(o),["asc"])}e.sortBy=n}(j0)),j0}var A0,W2;function U7(){return W2||(W2=1,A0=z7().sortBy),A0}var W7=U7();const Jm=bn(W7);var e3=e=>e.legend.settings,V7=e=>e.legend.size,H7=e=>e.legend.payload,G7=ke([H7,e3],(e,t)=>{var{itemSorter:s}=t,a=e.flat(1);return s?Jm(a,s):a});function K7(){return rt(G7)}var Ah=1;function t3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,s]=j.useState({height:0,left:0,top:0,width:0}),a=j.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Ah||Math.abs(o.left-t.left)>Ah||Math.abs(o.top-t.top)>Ah||Math.abs(o.width-t.width)>Ah)&&s({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function vs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Y7=typeof Symbol=="function"&&Symbol.observable||"@@observable",V2=Y7,k0=()=>Math.random().toString(36).substring(7).split("").join("."),J7={INIT:`@@redux/INIT${k0()}`,REPLACE:`@@redux/REPLACE${k0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${k0()}`},hm=J7;function Ob(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function r3(e,t,s){if(typeof e!="function")throw new Error(vs(2));if(typeof t=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(vs(0));if(typeof t=="function"&&typeof s>"u"&&(s=t,t=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(vs(1));return s(r3)(e,t)}let a=e,n=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((g,y)=>{o.set(y,g)}))}function u(){if(c)throw new Error(vs(3));return n}function h(g){if(typeof g!="function")throw new Error(vs(4));if(c)throw new Error(vs(5));let y=!0;d();const N=l++;return o.set(N,g),function(){if(y){if(c)throw new Error(vs(6));y=!1,d(),o.delete(N),i=null}}}function f(g){if(!Ob(g))throw new Error(vs(7));if(typeof g.type>"u")throw new Error(vs(8));if(typeof g.type!="string")throw new Error(vs(17));if(c)throw new Error(vs(9));try{c=!0,n=a(n,g)}finally{c=!1}return(i=o).forEach(N=>{N()}),g}function m(g){if(typeof g!="function")throw new Error(vs(10));a=g,f({type:hm.REPLACE})}function p(){const g=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(vs(11));function N(){const C=y;C.next&&C.next(u())}return N(),{unsubscribe:g(N)}},[V2](){return this}}}return f({type:hm.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:m,[V2]:p}}function X7(e){Object.keys(e).forEach(t=>{const s=e[t];if(typeof s(void 0,{type:hm.INIT})>"u")throw new Error(vs(12));if(typeof s(void 0,{type:hm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vs(13))})}function s3(e){const t=Object.keys(e),s={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(s[o]=e[o])}const a=Object.keys(s);let n;try{X7(s)}catch(i){n=i}return function(o={},l){if(n)throw n;let c=!1;const d={};for(let u=0;u<a.length;u++){const h=a[u],f=s[h],m=o[h],p=f(m,l);if(typeof p>"u")throw l&&l.type,new Error(vs(14));d[h]=p,c=c||p!==m}return c=c||a.length!==Object.keys(o).length,c?d:o}}function mm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,s)=>(...a)=>t(s(...a)))}function Q7(...e){return t=>(s,a)=>{const n=t(s,a);let i=()=>{throw new Error(vs(15))};const o={getState:n.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=mm(...l)(n.dispatch),{...n,dispatch:i}}}function a3(e){return Ob(e)&&"type"in e&&typeof e.type=="string"}var n3=Symbol.for("immer-nothing"),H2=Symbol.for("immer-draftable"),Ea=Symbol.for("immer-state");function fn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sc=Object.getPrototypeOf;function nl(e){return!!e&&!!e[Ea]}function ui(e){var t;return e?i3(e)||Array.isArray(e)||!!e[H2]||!!((t=e.constructor)!=null&&t[H2])||Qm(e)||Zm(e):!1}var Z7=Object.prototype.constructor.toString();function i3(e){if(!e||typeof e!="object")return!1;const t=Sc(e);if(t===null)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return s===Object?!0:typeof s=="function"&&Function.toString.call(s)===Z7}function fm(e,t){Xm(e)===0?Reflect.ownKeys(e).forEach(s=>{t(s,e[s],e)}):e.forEach((s,a)=>t(a,s,e))}function Xm(e){const t=e[Ea];return t?t.type_:Array.isArray(e)?1:Qm(e)?2:Zm(e)?3:0}function Jp(e,t){return Xm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function o3(e,t,s){const a=Xm(e);a===2?e.set(t,s):a===3?e.add(s):e[t]=s}function eM(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Qm(e){return e instanceof Map}function Zm(e){return e instanceof Set}function Fo(e){return e.copy_||e.base_}function Xp(e,t){if(Qm(e))return new Map(e);if(Zm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=i3(e);if(t===!0||t==="class_only"&&!s){const a=Object.getOwnPropertyDescriptors(e);delete a[Ea];let n=Reflect.ownKeys(a);for(let i=0;i<n.length;i++){const o=n[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Sc(e),a)}else{const a=Sc(e);if(a!==null&&s)return{...e};const n=Object.create(a);return Object.assign(n,e)}}function Tb(e,t=!1){return ef(e)||nl(e)||!ui(e)||(Xm(e)>1&&(e.set=e.add=e.clear=e.delete=tM),Object.freeze(e),t&&Object.entries(e).forEach(([s,a])=>Tb(a,!0))),e}function tM(){fn(2)}function ef(e){return Object.isFrozen(e)}var rM={};function il(e){const t=rM[e];return t||fn(0,e),t}var Qd;function l3(){return Qd}function sM(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function G2(e,t){t&&(il("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Qp(e){Zp(e),e.drafts_.forEach(aM),e.drafts_=null}function Zp(e){e===Qd&&(Qd=e.parent_)}function K2(e){return Qd=sM(Qd,e)}function aM(e){const t=e[Ea];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Y2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return e!==void 0&&e!==s?(s[Ea].modified_&&(Qp(t),fn(4)),ui(e)&&(e=xm(t,e),t.parent_||pm(t,e)),t.patches_&&il("Patches").generateReplacementPatches_(s[Ea].base_,e,t.patches_,t.inversePatches_)):e=xm(t,s,[]),Qp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==n3?e:void 0}function xm(e,t,s){if(ef(t))return t;const a=t[Ea];if(!a)return fm(t,(n,i)=>J2(e,a,t,n,i,s)),t;if(a.scope_!==e)return t;if(!a.modified_)return pm(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const n=a.copy_;let i=n,o=!1;a.type_===3&&(i=new Set(n),n.clear(),o=!0),fm(i,(l,c)=>J2(e,a,n,l,c,s,o)),pm(e,n,!1),s&&e.patches_&&il("Patches").generatePatches_(a,s,e.patches_,e.inversePatches_)}return a.copy_}function J2(e,t,s,a,n,i,o){if(nl(n)){const l=i&&t&&t.type_!==3&&!Jp(t.assigned_,a)?i.concat(a):void 0,c=xm(e,n,l);if(o3(s,a,c),nl(c))e.canAutoFreeze_=!1;else return}else o&&s.add(n);if(ui(n)&&!ef(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xm(e,n),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(s,a)&&pm(e,n)}}function pm(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Tb(t,s)}function nM(e,t){const s=Array.isArray(e),a={type_:s?1:0,scope_:t?t.scope_:l3(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,i=Lb;s&&(n=[a],i=Zd);const{revoke:o,proxy:l}=Proxy.revocable(n,i);return a.draft_=l,a.revoke_=o,l}var Lb={get(e,t){if(t===Ea)return e;const s=Fo(e);if(!Jp(s,t))return iM(e,s,t);const a=s[t];return e.finalized_||!ui(a)?a:a===E0(e.base_,t)?(O0(e),e.copy_[t]=tg(a,e)):a},has(e,t){return t in Fo(e)},ownKeys(e){return Reflect.ownKeys(Fo(e))},set(e,t,s){const a=c3(Fo(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,s),!0;if(!e.modified_){const n=E0(Fo(e),t),i=n==null?void 0:n[Ea];if(i&&i.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(eM(s,n)&&(s!==void 0||Jp(e.base_,t)))return!0;O0(e),eg(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty(e,t){return E0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,O0(e),eg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=Fo(e),a=Reflect.getOwnPropertyDescriptor(s,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:s[t]}},defineProperty(){fn(11)},getPrototypeOf(e){return Sc(e.base_)},setPrototypeOf(){fn(12)}},Zd={};fm(Lb,(e,t)=>{Zd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Zd.deleteProperty=function(e,t){return Zd.set.call(this,e,t,void 0)};Zd.set=function(e,t,s){return Lb.set.call(this,e[0],t,s,e[0])};function E0(e,t){const s=e[Ea];return(s?Fo(s):e)[t]}function iM(e,t,s){var n;const a=c3(t,s);return a?"value"in a?a.value:(n=a.get)==null?void 0:n.call(e.draft_):void 0}function c3(e,t){if(!(t in e))return;let s=Sc(e);for(;s;){const a=Object.getOwnPropertyDescriptor(s,t);if(a)return a;s=Sc(s)}}function eg(e){e.modified_||(e.modified_=!0,e.parent_&&eg(e.parent_))}function O0(e){e.copy_||(e.copy_=Xp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oM=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,s,a)=>{if(typeof t=="function"&&typeof s!="function"){const i=s;s=t;const o=this;return function(c=i,...d){return o.produce(c,u=>s.call(this,u,...d))}}typeof s!="function"&&fn(6),a!==void 0&&typeof a!="function"&&fn(7);let n;if(ui(t)){const i=K2(this),o=tg(t,void 0);let l=!0;try{n=s(o),l=!1}finally{l?Qp(i):Zp(i)}return G2(i,a),Y2(n,i)}else if(!t||typeof t!="object"){if(n=s(t),n===void 0&&(n=t),n===n3&&(n=void 0),this.autoFreeze_&&Tb(n,!0),a){const i=[],o=[];il("Patches").generateReplacementPatches_(t,n,i,o),a(i,o)}return n}else fn(1,t)},this.produceWithPatches=(t,s)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,n;return[this.produce(t,s,(o,l)=>{a=o,n=l}),a,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ui(e)||fn(8),nl(e)&&(e=eo(e));const t=K2(this),s=tg(e,void 0);return s[Ea].isManual_=!0,Zp(t),s}finishDraft(e,t){const s=e&&e[Ea];(!s||!s.isManual_)&&fn(9);const{scope_:a}=s;return G2(a,t),Y2(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const n=t[s];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}s>-1&&(t=t.slice(s+1));const a=il("Patches").applyPatches_;return nl(e)?a(e,t):this.produce(e,n=>a(n,t))}};function tg(e,t){const s=Qm(e)?il("MapSet").proxyMap_(e,t):Zm(e)?il("MapSet").proxySet_(e,t):nM(e,t);return(t?t.scope_:l3()).drafts_.push(s),s}function eo(e){return nl(e)||fn(10,e),d3(e)}function d3(e){if(!ui(e)||ef(e))return e;const t=e[Ea];let s;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=Xp(e,t.scope_.immer_.useStrictShallowCopy_)}else s=Xp(e,!0);return fm(s,(a,n)=>{o3(s,a,d3(n))}),t&&(t.finalized_=!1),s}var Oa=new oM,u3=Oa.produce;Oa.produceWithPatches.bind(Oa);Oa.setAutoFreeze.bind(Oa);Oa.setUseStrictShallowCopy.bind(Oa);Oa.applyPatches.bind(Oa);Oa.createDraft.bind(Oa);Oa.finishDraft.bind(Oa);function h3(e){return({dispatch:s,getState:a})=>n=>i=>typeof i=="function"?i(s,a,e):n(i)}var lM=h3(),cM=h3,dM=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mm:mm.apply(null,arguments)};function Ya(e,t){function s(...a){if(t){let n=t(...a);if(!n)throw new Error(ka(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:a[0]}}return s.toString=()=>`${e}`,s.type=e,s.match=a=>a3(a)&&a.type===e,s}var m3=class Id extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Id.prototype)}static get[Symbol.species](){return Id}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Id(...t[0].concat(this)):new Id(...t.concat(this))}};function X2(e){return ui(e)?u3(e,()=>{}):e}function kh(e,t,s){return e.has(t)?e.get(t):e.set(t,s(t)).get(t)}function uM(e){return typeof e=="boolean"}var hM=()=>function(t){const{thunk:s=!0,immutableCheck:a=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let o=new m3;return s&&(uM(s)?o.push(lM):o.push(cM(s.extraArgument))),o},mM="RTK_autoBatch",Q2=e=>t=>{setTimeout(t,e)},fM=(e={type:"raf"})=>t=>(...s)=>{const a=t(...s);let n=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Q2(10):e.type==="callback"?e.queueNotification:Q2(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const h=()=>n&&u(),f=a.subscribe(h);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){var h;try{return n=!((h=u==null?void 0:u.meta)!=null&&h[mM]),i=!n,i&&(o||(o=!0,c(d))),a.dispatch(u)}finally{n=!0}}})},xM=e=>function(s){const{autoBatch:a=!0}=s??{};let n=new m3(e);return a&&n.push(fM(typeof a=="object"?a:void 0)),n};function pM(e){const t=hM(),{reducer:s=void 0,middleware:a,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof s=="function")l=s;else if(Ob(s))l=s3(s);else throw new Error(ka(1));let c;typeof a=="function"?c=a(t):c=t();let d=mm;n&&(d=dM({trace:!1,...typeof n=="object"&&n}));const u=Q7(...c),h=xM(u);let f=typeof o=="function"?o(h):h();const m=d(...f);return r3(l,i,m)}function f3(e){const t={},s=[];let a;const n={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(ka(28));if(l in t)throw new Error(ka(29));return t[l]=o,n},addMatcher(i,o){return s.push({matcher:i,reducer:o}),n},addDefaultCase(i){return a=i,n}};return e(n),[t,s,a]}function gM(e){return typeof e=="function"}function bM(e,t){let[s,a,n]=f3(t),i;if(gM(e))i=()=>X2(e());else{const l=X2(e);i=()=>l}function o(l=i(),c){let d=[s[c.type],...a.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[n]),d.reduce((u,h)=>{if(h)if(nl(u)){const m=h(u,c);return m===void 0?u:m}else{if(ui(u))return u3(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=i,o}var vM="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",yM=(e=21)=>{let t="",s=e;for(;s--;)t+=vM[Math.random()*64|0];return t},jM=Symbol.for("rtk-slice-createasyncthunk");function wM(e,t){return`${e}/${t}`}function NM({creators:e}={}){var s;const t=(s=e==null?void 0:e.asyncThunk)==null?void 0:s[jM];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(ka(11));const l=(typeof n.reducers=="function"?n.reducers(SM()):n.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(C,M){const D=typeof C=="string"?C:C.type;if(!D)throw new Error(ka(12));if(D in d.sliceCaseReducersByType)throw new Error(ka(13));return d.sliceCaseReducersByType[D]=M,u},addMatcher(C,M){return d.sliceMatchers.push({matcher:C,reducer:M}),u},exposeAction(C,M){return d.actionCreators[C]=M,u},exposeCaseReducer(C,M){return d.sliceCaseReducersByName[C]=M,u}};c.forEach(C=>{const M=l[C],D={reducerName:C,type:wM(i,C),createNotation:typeof n.reducers=="function"};CM(M)?kM(D,M,u,t):PM(D,M,u)});function h(){const[C={},M=[],D=void 0]=typeof n.extraReducers=="function"?f3(n.extraReducers):[n.extraReducers],L={...C,...d.sliceCaseReducersByType};return bM(n.initialState,A=>{for(let I in L)A.addCase(I,L[I]);for(let I of d.sliceMatchers)A.addMatcher(I.matcher,I.reducer);for(let I of M)A.addMatcher(I.matcher,I.reducer);D&&A.addDefaultCase(D)})}const f=C=>C,m=new Map,p=new WeakMap;let v;function g(C,M){return v||(v=h()),v(C,M)}function y(){return v||(v=h()),v.getInitialState()}function N(C,M=!1){function D(A){let I=A[C];return typeof I>"u"&&M&&(I=kh(p,D,y)),I}function L(A=f){const I=kh(m,M,()=>new WeakMap);return kh(I,A,()=>{const H={};for(const[k,P]of Object.entries(n.selectors??{}))H[k]=_M(P,A,()=>kh(p,A,y),M);return H})}return{reducerPath:C,getSelectors:L,get selectors(){return L(D)},selectSlice:D}}const S={name:i,reducer:g,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:y,...N(o),injectInto(C,{reducerPath:M,...D}={}){const L=M??o;return C.inject({reducerPath:L,reducer:g},D),{...S,...N(L,!0)}}};return S}}function _M(e,t,s,a){function n(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=s()),e(l,...o)}return n.unwrapped=e,n}var Xa=NM();function SM(){function e(t,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...s}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...s){return t(...s)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:s}},asyncThunk:e}}function PM({type:e,reducerName:t,createNotation:s},a,n){let i,o;if("reducer"in a){if(s&&!AM(a))throw new Error(ka(17));i=a.reducer,o=a.prepare}else i=a;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ya(e,o):Ya(e))}function CM(e){return e._reducerDefinitionType==="asyncThunk"}function AM(e){return e._reducerDefinitionType==="reducerWithPrepare"}function kM({type:e,reducerName:t},s,a,n){if(!n)throw new Error(ka(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=s,h=n(e,i,u);a.exposeAction(t,h),o&&a.addCase(h.fulfilled,o),l&&a.addCase(h.pending,l),c&&a.addCase(h.rejected,c),d&&a.addMatcher(h.settled,d),a.exposeCaseReducer(t,{fulfilled:o||Eh,pending:l||Eh,rejected:c||Eh,settled:d||Eh})}function Eh(){}var EM="task",x3="listener",p3="completed",Mb="cancelled",OM=`task-${Mb}`,TM=`task-${p3}`,rg=`${x3}-${Mb}`,LM=`${x3}-${p3}`,tf=class{constructor(e){px(this,"name","TaskAbortError");px(this,"message");this.code=e,this.message=`${EM} ${Mb} (reason: ${e})`}},Db=(e,t)=>{if(typeof e!="function")throw new TypeError(ka(32))},gm=()=>{},g3=(e,t=gm)=>(e.catch(t),e),b3=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Yo=(e,t)=>{const s=e.signal;s.aborted||("reason"in s||Object.defineProperty(s,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Jo=e=>{if(e.aborted){const{reason:t}=e;throw new tf(t)}};function v3(e,t){let s=gm;return new Promise((a,n)=>{const i=()=>n(new tf(e.reason));if(e.aborted){i();return}s=b3(e,i),t.finally(()=>s()).then(a,n)}).finally(()=>{s=gm})}var MM=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(s){return{status:s instanceof tf?"cancelled":"rejected",error:s}}finally{t==null||t()}},bm=e=>t=>g3(v3(e,t).then(s=>(Jo(e),s))),y3=e=>{const t=bm(e);return s=>t(new Promise(a=>setTimeout(a,s)))},{assign:fc}=Object,Z2={},rf="listenerMiddleware",DM=(e,t)=>{const s=a=>b3(e,()=>Yo(a,e.reason));return(a,n)=>{Db(a);const i=new AbortController;s(i);const o=MM(async()=>{Jo(e),Jo(i.signal);const l=await a({pause:bm(i.signal),delay:y3(i.signal),signal:i.signal});return Jo(i.signal),l},()=>Yo(i,TM));return n!=null&&n.autoJoin&&t.push(o.catch(gm)),{result:bm(e)(o),cancel(){Yo(i,OM)}}}},IM=(e,t)=>{const s=async(a,n)=>{Jo(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:a,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{u(),d()}})];n!=null&&l.push(new Promise(c=>setTimeout(c,n,null)));try{const c=await v3(t,Promise.race(l));return Jo(t),c}finally{i()}};return(a,n)=>g3(s(a,n))},j3=e=>{let{type:t,actionCreator:s,matcher:a,predicate:n,effect:i}=e;if(t)n=Ya(t).match;else if(s)t=s.type,n=s.match;else if(a)n=a;else if(!n)throw new Error(ka(21));return Db(i),{predicate:n,type:t,effect:i}},w3=fc(e=>{const{type:t,predicate:s,effect:a}=j3(e);return{id:yM(),effect:a,type:t,predicate:s,pending:new Set,unsubscribe:()=>{throw new Error(ka(22))}}},{withTypes:()=>w3}),ej=(e,t)=>{const{type:s,effect:a,predicate:n}=j3(t);return Array.from(e.values()).find(i=>(typeof s=="string"?i.type===s:i.predicate===n)&&i.effect===a)},sg=e=>{e.pending.forEach(t=>{Yo(t,rg)})},RM=e=>()=>{e.forEach(sg),e.clear()},tj=(e,t,s)=>{try{e(t,s)}catch(a){setTimeout(()=>{throw a},0)}},N3=fc(Ya(`${rf}/add`),{withTypes:()=>N3}),FM=Ya(`${rf}/removeAll`),_3=fc(Ya(`${rf}/remove`),{withTypes:()=>_3}),$M=(...e)=>{console.error(`${rf}/error`,...e)},gu=(e={})=>{const t=new Map,{extra:s,onError:a=$M}=e;Db(a);const n=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h!=null&&h.cancelActive&&sg(u)}),i=u=>{const h=ej(t,u)??w3(u);return n(h)};fc(i,{withTypes:()=>i});const o=u=>{const h=ej(t,u);return h&&(h.unsubscribe(),u.cancelActive&&sg(h)),!!h};fc(o,{withTypes:()=>o});const l=async(u,h,f,m)=>{const p=new AbortController,v=IM(i,p.signal),g=[];try{u.pending.add(p),await Promise.resolve(u.effect(h,fc({},f,{getOriginalState:m,condition:(y,N)=>v(y,N).then(Boolean),take:v,delay:y3(p.signal),pause:bm(p.signal),extra:s,signal:p.signal,fork:DM(p.signal,g),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,N,S)=>{y!==p&&(Yo(y,rg),S.delete(y))})},cancel:()=>{Yo(p,rg),u.pending.delete(p)},throwIfCancelled:()=>{Jo(p.signal)}})))}catch(y){y instanceof tf||tj(a,y,{raisedBy:"effect"})}finally{await Promise.all(g),Yo(p,LM),u.pending.delete(p)}},c=RM(t);return{middleware:u=>h=>f=>{if(!a3(f))return h(f);if(N3.match(f))return i(f.payload);if(FM.match(f)){c();return}if(_3.match(f))return o(f.payload);let m=u.getState();const p=()=>{if(m===Z2)throw new Error(ka(23));return m};let v;try{if(v=h(f),t.size>0){const g=u.getState(),y=Array.from(t.values());for(const N of y){let S=!1;try{S=N.predicate(f,g,m)}catch(C){S=!1,tj(a,C,{raisedBy:"predicate"})}S&&l(N,f,u,p)}}}finally{m=Z2}return v},startListening:i,stopListening:o,clearListeners:c}};function ka(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qM={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},S3=Xa({name:"chartLayout",initialState:qM,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:BM,setLayout:zM,setChartSize:UM,setScale:WM}=S3.actions,VM=S3.reducer;function rj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function sj(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?rj(Object(s),!0).forEach(function(a){HM(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function HM(e,t,s){return(t=GM(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function GM(e){var t=KM(e,"string");return typeof t=="symbol"?t:t+""}function KM(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vm=Math.PI/180,YM=e=>e*180/Math.PI,Wr=(e,t,s,a)=>({x:e+Math.cos(-vm*a)*s,y:t+Math.sin(-vm*a)*s}),P3=function(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(s-(a.top||0)-(a.bottom||0)))/2},JM=(e,t)=>{var{x:s,y:a}=e,{x:n,y:i}=t;return Math.sqrt((s-n)**2+(a-i)**2)},XM=(e,t)=>{var{x:s,y:a}=e,{cx:n,cy:i}=t,o=JM({x:s,y:a},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var l=(s-n)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:YM(c),angleInRadian:c}},QM=e=>{var{startAngle:t,endAngle:s}=e,a=Math.floor(t/360),n=Math.floor(s/360),i=Math.min(a,n);return{startAngle:t-i*360,endAngle:s-i*360}},ZM=(e,t)=>{var{startAngle:s,endAngle:a}=t,n=Math.floor(s/360),i=Math.floor(a/360),o=Math.min(n,i);return e+o*360},eD=(e,t)=>{var{x:s,y:a}=e,{radius:n,angle:i}=XM({x:s,y:a},t),{innerRadius:o,outerRadius:l}=t;if(n<o||n>l||n===0)return null;var{startAngle:c,endAngle:d}=QM(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?sj(sj({},t),{},{radius:n,angle:ZM(u,t)}):null};function aj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ha(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?aj(Object(s),!0).forEach(function(a){tD(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):aj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function tD(e,t,s){return(t=rD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rD(e){var t=sD(e,"string");return typeof t=="symbol"?t:t+""}function sD(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xr(e,t,s){return hr(e)||hr(t)?s:In(t)?io(e,t,s):typeof t=="function"?t(e):s}var aD=(e,t,s,a,n)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?s[c-1].coordinate:s[l-1].coordinate,u=s[c].coordinate,h=c>=l-1?s[0].coordinate:s[c+1].coordinate,f=void 0;if(cs(u-d)!==cs(h-u)){var m=[];if(cs(h-u)===cs(n[1]-n[0])){f=h;var p=u+n[1]-n[0];m[0]=Math.min(p,(p+d)/2),m[1]=Math.max(p,(p+d)/2)}else{f=d;var v=h+n[1]-n[0];m[0]=Math.min(u,(v+u)/2),m[1]=Math.max(u,(v+u)/2)}var g=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>g[0]&&e<=g[1]||e>=m[0]&&e<=m[1]){({index:o}=s[c]);break}}else{var y=Math.min(d,h),N=Math.max(d,h);if(e>(y+u)/2&&e<=(N+u)/2){({index:o}=s[c]);break}}}else if(t){for(var S=0;S<l;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<l-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===l-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:o}=t[S]);break}}return o},nD=(e,t,s)=>{if(t&&s){var{width:a,height:n}=s,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Ke(e[i]))return Ha(Ha({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Ke(e[o]))return Ha(Ha({},e),{},{[o]:e[o]+(n||0)})}return e},gi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",C3=(e,t,s,a)=>{if(a)return e.map(l=>l.coordinate);var n,i,o=e.map(l=>(l.coordinate===t&&(n=!0),l.coordinate===s&&(i=!0),l.coordinate));return n||o.push(t),i||o.push(s),o},A3=(e,t,s)=>{if(!e)return null;var{duplicateDomain:a,type:n,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:f,axisType:m}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=n==="category"&&o.bandwidth?o.bandwidth()/p:0;if(v=m==="angleAxis"&&i&&i.length>=2?cs(i[0]-i[1])*2*v:v,h||f){var g=(h||f||[]).map((y,N)=>{var S=a?a.indexOf(y):y;return{coordinate:o(S)+v,value:y,offset:v,index:N}});return g.filter(y=>!da(y.coordinate))}return c&&d?d.map((y,N)=>({coordinate:o(y)+v,value:y,index:N,offset:v})):o.ticks&&u!=null?o.ticks(u).map((y,N)=>({coordinate:o(y)+v,value:y,offset:v,index:N})):o.domain().map((y,N)=>({coordinate:o(y)+v,value:a?a[y]:y,index:N,offset:v}))},nj=1e-4,iD=e=>{var t=e.domain();if(!(!t||t.length<=2)){var s=t.length,a=e.range(),n=Math.min(a[0],a[1])-nj,i=Math.max(a[0],a[1])+nj,o=e(t[0]),l=e(t[s-1]);(o<n||o>i||l<n||l>i)&&e.domain([t[0],t[s-1]])}},oD=(e,t)=>{if(!t||t.length!==2||!Ke(t[0])||!Ke(t[1]))return e;var s=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!Ke(e[0])||e[0]<s)&&(n[0]=s),(!Ke(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<s&&(n[1]=s),n},lD=e=>{var t=e.length;if(!(t<=0))for(var s=0,a=e[0].length;s<a;++s)for(var n=0,i=0,o=0;o<t;++o){var l=da(e[o][s][1])?e[o][s][0]:e[o][s][1];l>=0?(e[o][s][0]=n,e[o][s][1]=n+l,n=e[o][s][1]):(e[o][s][0]=i,e[o][s][1]=i+l,i=e[o][s][1])}},cD=e=>{var t=e.length;if(!(t<=0))for(var s=0,a=e[0].length;s<a;++s)for(var n=0,i=0;i<t;++i){var o=da(e[i][s][1])?e[i][s][0]:e[i][s][1];o>=0?(e[i][s][0]=n,e[i][s][1]=n+o,n=e[i][s][1]):(e[i][s][0]=0,e[i][s][1]=0)}},dD={sign:lD,expand:qL,none:_c,silhouette:BL,wiggle:zL,positive:cD},uD=(e,t,s)=>{var a=dD[s],n=$L().keys(t).value((i,o)=>+xr(i,o,0)).order(Gp).offset(a);return n(e)};function Ib(e){return e==null?void 0:String(e)}function ij(e){var{axis:t,ticks:s,bandSize:a,entry:n,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!hr(n[t.dataKey])){var l=xb(s,"value",n[t.dataKey]);if(l)return l.coordinate+a/2}return s[i]?s[i].coordinate+a/2:null}var c=xr(n,hr(o)?t.dataKey:o);return hr(c)?null:t.scale(c)}var oj=e=>{var{axis:t,ticks:s,offset:a,bandSize:n,entry:i,index:o}=e;if(t.type==="category")return s[o]?s[o].coordinate+a:null;var l=xr(i,t.dataKey,t.scale.domain()[o]);return hr(l)?null:t.scale(l)-n/2+a},hD=e=>{var{numericAxis:t}=e,s=t.scale.domain();if(t.type==="number"){var a=Math.min(s[0],s[1]),n=Math.max(s[0],s[1]);return a<=0&&n>=0?0:n<0?n:a}return s[0]},mD=e=>{var t=e.flat(2).filter(Ke);return[Math.min(...t),Math.max(...t)]},fD=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],xD=(e,t,s)=>{if(e!=null)return fD(Object.keys(e).reduce((a,n)=>{var i=e[n],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=mD(d.slice(t,s+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},lj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eu=(e,t,s)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!s||a>0)return a}if(e&&t&&t.length>=2){for(var n=Jm(t,u=>u.coordinate),i=1/0,o=1,l=n.length;o<l;o++){var c=n[o],d=n[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return s?void 0:0};function dj(e){var{tooltipEntrySettings:t,dataKey:s,payload:a,value:n,name:i}=e;return Ha(Ha({},t),{},{dataKey:s,payload:a,value:n,name:i})}function Mc(e,t){if(e)return String(e);if(typeof t=="string")return t}function pD(e,t,s,a,n){if(s==="horizontal"||s==="vertical"){var i=e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height;return i?{x:e,y:t}:null}return a?eD({x:e,y:t},a):null}var gD=(e,t,s,a)=>{var n=t.find(d=>d&&d.index===s);if(n){if(e==="horizontal")return{x:n.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:n.coordinate};if(e==="centric"){var i=n.coordinate,{radius:o}=a;return Ha(Ha(Ha({},a),Wr(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=n.coordinate,{angle:c}=a;return Ha(Ha(Ha({},a),Wr(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},bD=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,fo=e=>e.layout.width,xo=e=>e.layout.height,vD=e=>e.layout.scale,k3=e=>e.layout.margin,Rb=ke(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Fb=ke(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),E3="data-recharts-item-index",O3="data-recharts-item-data-key",sf=60;function uj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function $i(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?uj(Object(s),!0).forEach(function(a){yD(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function yD(e,t,s){return(t=jD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function jD(e){var t=wD(e,"string");return typeof t=="symbol"?t:t+""}function wD(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ND=e=>e.brush.height,ms=ke([fo,xo,k3,ND,Rb,Fb,e3,V7],(e,t,s,a,n,i,o,l)=>{var c=i.reduce((p,v)=>{var{orientation:g}=v;if(!v.mirror&&!v.hide){var y=typeof v.width=="number"?v.width:sf;return $i($i({},p),{},{[g]:p[g]+y})}return p},{left:s.left||0,right:s.right||0}),d=n.reduce((p,v)=>{var{orientation:g}=v;return!v.mirror&&!v.hide?$i($i({},p),{},{[g]:io(p,"".concat(g))+v.height}):p},{top:s.top||0,bottom:s.bottom||0}),u=$i($i({},d),c),h=u.bottom;u.bottom+=a,u=nD(u,o,l);var f=e-u.left-u.right,m=t-u.top-u.bottom;return $i($i({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(m,0)})}),_D=ke(ms,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),T3=ke(fo,xo,(e,t)=>({x:0,y:0,width:e,height:t})),SD=j.createContext(null),Ks=()=>j.useContext(SD)!=null,af=e=>e.brush,nf=ke([af,ms,k3],(e,t,s)=>({height:e.height,x:Ke(e.x)?e.x:t.left,y:Ke(e.y)?e.y:t.top+t.height+t.brushBottom-((s==null?void 0:s.bottom)||0),width:Ke(e.width)?e.width:t.width})),$b=()=>{var e,t=Ks(),s=rt(_D),a=rt(nf),n=(e=rt(af))===null||e===void 0?void 0:e.padding;return!t||!a||!n?s:{width:a.width-n.left-n.right,height:a.height-n.top-n.bottom,x:n.left,y:n.top}},PD={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},bu=()=>{var e;return(e=rt(ms))!==null&&e!==void 0?e:PD},qb=()=>rt(fo),Bb=()=>rt(xo),CD={top:0,right:0,bottom:0,left:0},AD=()=>{var e;return(e=rt(t=>t.layout.margin))!==null&&e!==void 0?e:CD},$t=e=>e.layout.layoutType,of=()=>rt($t),kD={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},L3=Xa({name:"legend",initialState:kD,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var s=eo(e).payload.indexOf(t.payload);s>-1&&e.payload.splice(s,1)}}}),{setLegendSize:hj,setLegendSettings:ED,addLegendPayload:M3,removeLegendPayload:D3}=L3.actions,OD=L3.reducer,TD=["contextPayload"];function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ag.apply(null,arguments)}function mj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Pc(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(s),!0).forEach(function(a){zb(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function zb(e,t,s){return(t=LD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function LD(e){var t=MD(e,"string");return typeof t=="symbol"?t:t+""}function MD(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DD(e,t){if(e==null)return{};var s,a,n=ID(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ID(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function RD(e){return e.value}function FD(e){var{contextPayload:t}=e,s=DD(e,TD),a=J4(t,e.payloadUniqBy,RD),n=Pc(Pc({},s),{},{payload:a});return j.isValidElement(e.content)?j.cloneElement(e.content,n):typeof e.content=="function"?j.createElement(e.content,n):j.createElement(_b,n)}function $D(e,t,s,a,n,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((a||0)-i.width)/2}:d=l==="right"?{right:s&&s.right||0}:{left:s&&s.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((n||0)-i.height)/2}:u=c==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Pc(Pc({},d),u)}function qD(e){var t=jr();return j.useEffect(()=>{t(ED(e))},[t,e]),null}function BD(e){var t=jr();return j.useEffect(()=>(t(hj(e)),()=>{t(hj({width:0,height:0}))}),[t,e]),null}function zD(e){var t=K7(),s=cL(),a=AD(),{width:n,height:i,wrapperStyle:o,portal:l}=e,[c,d]=t3([t]),u=qb(),h=Bb(),f=u-(a.left||0)-(a.right||0),m=Dc.getWidthOrHeight(e.layout,i,n,f),p=l?o:Pc(Pc({position:"absolute",width:(m==null?void 0:m.width)||n||"auto",height:(m==null?void 0:m.height)||i||"auto"},$D(o,e,a,u,h,c)),o),v=l??s;if(v==null)return null;var g=j.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},j.createElement(qD,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),j.createElement(BD,{width:c.width,height:c.height}),j.createElement(FD,ag({},e,m,{margin:a,chartWidth:u,chartHeight:h,contextPayload:t})));return w5.createPortal(g,v)}class Dc extends j.PureComponent{static getWidthOrHeight(t,s,a,n){return t==="vertical"&&Ke(s)?{height:s}:t==="horizontal"?{width:a||n}:null}render(){return j.createElement(zD,this.props)}}zb(Dc,"displayName","Legend");zb(Dc,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ng.apply(null,arguments)}function fj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function T0(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?fj(Object(s),!0).forEach(function(a){UD(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function UD(e,t,s){return(t=WD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function WD(e){var t=VD(e,"string");return typeof t=="symbol"?t:t+""}function VD(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HD(e){return Array.isArray(e)&&In(e[0])&&In(e[1])?e.join(" ~ "):e}var GD=e=>{var{separator:t=" : ",contentStyle:s={},itemStyle:a={},labelStyle:n={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,m=()=>{if(i&&i.length){var M={padding:0,margin:0},D=(l?Jm(i,l):i).map((L,A)=>{if(L.type==="none")return null;var I=L.formatter||o||HD,{value:H,name:k}=L,P=H,O=k;if(I){var $=I(H,k,L,A,i);if(Array.isArray($))[P,O]=$;else if($!=null)P=$;else return null}var V=T0({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},a);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:V},In(O)?j.createElement("span",{className:"recharts-tooltip-item-name"},O):null,In(O)?j.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,j.createElement("span",{className:"recharts-tooltip-item-value"},P),j.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:M},D)}return null},p=T0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),v=T0({margin:0},n),g=!hr(u),y=g?u:"",N=Lt("recharts-default-tooltip",c),S=Lt("recharts-tooltip-label",d);g&&h&&i!==void 0&&i!==null&&(y=h(u,i));var C=f?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",ng({className:N,style:p},C),j.createElement("p",{className:S,style:v},j.isValidElement(y)?y:"".concat(y)),m())},wd="recharts-tooltip-wrapper",KD={visibility:"hidden"};function YD(e){var{coordinate:t,translateX:s,translateY:a}=e;return Lt(wd,{["".concat(wd,"-right")]:Ke(s)&&t&&Ke(t.x)&&s>=t.x,["".concat(wd,"-left")]:Ke(s)&&t&&Ke(t.x)&&s<t.x,["".concat(wd,"-bottom")]:Ke(a)&&t&&Ke(t.y)&&a>=t.y,["".concat(wd,"-top")]:Ke(a)&&t&&Ke(t.y)&&a<t.y})}function xj(e){var{allowEscapeViewBox:t,coordinate:s,key:a,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Ke(i[a]))return i[a];var u=s[a]-l-(n>0?n:0),h=s[a]+n;if(t[a])return o[a]?u:h;var f=c[a];if(f==null)return 0;if(o[a]){var m=u,p=f;return m<p?Math.max(h,f):Math.max(u,f)}if(d==null)return 0;var v=h+l,g=f+d;return v>g?Math.max(u,f):Math.max(h,f)}function JD(e){var{translateX:t,translateY:s,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(s,"px, 0)"):"translate(".concat(t,"px, ").concat(s,"px)")}}function XD(e){var{allowEscapeViewBox:t,coordinate:s,offsetTopLeft:a,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&s?(u=xj({allowEscapeViewBox:t,coordinate:s,key:"x",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=xj({allowEscapeViewBox:t,coordinate:s,key:"y",offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=JD({translateX:u,translateY:h,useTranslate3d:l})):d=KD,{cssProperties:d,cssClasses:YD({translateX:u,translateY:h,coordinate:s})}}function pj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Oh(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?pj(Object(s),!0).forEach(function(a){ig(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function ig(e,t,s){return(t=QD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function QD(e){var t=ZD(e,"string");return typeof t=="symbol"?t:t+""}function ZD(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eI extends j.PureComponent{constructor(){super(...arguments),ig(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ig(this,"handleKeyDown",t=>{if(t.key==="Escape"){var s,a,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&s!==void 0?s:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,s;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:s,animationDuration:a,animationEasing:n,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:p,lastBoundingBox:v,innerRef:g,hasPortalFromProps:y}=this.props,{cssClasses:N,cssProperties:S}=XD({allowEscapeViewBox:s,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:v.height,width:v.width},useTranslate3d:f,viewBox:m}),C=y?{}:Oh(Oh({transition:c&&t?"transform ".concat(a,"ms ").concat(n):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),M=Oh(Oh({},C),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:M,ref:g},i)}}var tI=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hl={isSsr:tI()},I3=()=>rt(e=>e.rootProps.accessibilityLayer);function Ns(e){return Number.isFinite(e)}function Cc(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},og.apply(null,arguments)}function gj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function bj(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?gj(Object(s),!0).forEach(function(a){rI(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function rI(e,t,s){return(t=sI(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function sI(e){var t=aI(e,"string");return typeof t=="symbol"?t:t+""}function aI(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vj={curveBasisClosed:AL,curveBasisOpen:kL,curveBasis:CL,curveBumpX:mL,curveBumpY:fL,curveLinearClosed:EL,curveLinear:Km,curveMonotoneX:OL,curveMonotoneY:TL,curveNatural:LL,curveStep:ML,curveStepAfter:IL,curveStepBefore:DL},Th=e=>Ns(e.x)&&Ns(e.y),Nd=e=>e.x,_d=e=>e.y,nI=(e,t)=>{if(typeof e=="function")return e;var s="curve".concat(fu(e));return(s==="curveMonotone"||s==="curveBump")&&t?vj["".concat(s).concat(t==="vertical"?"Y":"X")]:vj[s]||Km},iI=e=>{var{type:t="linear",points:s=[],baseLine:a,layout:n,connectNulls:i=!1}=e,o=nI(t,n),l=i?s.filter(Th):s,c;if(Array.isArray(a)){var d=i?a.filter(h=>Th(h)):a,u=l.map((h,f)=>bj(bj({},h),{},{base:d[f]}));return n==="vertical"?c=Ph().y(_d).x1(Nd).x0(h=>h.base.x):c=Ph().x(Nd).y1(_d).y0(h=>h.base.y),c.defined(Th).curve(o),c(u)}return n==="vertical"&&Ke(a)?c=Ph().y(_d).x1(Nd).x0(a):Ke(a)?c=Ph().x(Nd).y1(_d).y0(a):c=T4().x(Nd).y(_d),c.defined(Th).curve(o),c(l)},Vd=e=>{var{className:t,points:s,path:a,pathRef:n}=e;if((!s||!s.length)&&!a)return null;var i=s&&s.length?iI(e):a;return j.createElement("path",og({},At(e,!1),gb(e),{className:Lt("recharts-curve",t),d:i===null?void 0:i,ref:n}))},oI=["x","y","top","left","width","height","className"];function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},lg.apply(null,arguments)}function yj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function lI(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?yj(Object(s),!0).forEach(function(a){cI(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function cI(e,t,s){return(t=dI(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function dI(e){var t=uI(e,"string");return typeof t=="symbol"?t:t+""}function uI(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hI(e,t){if(e==null)return{};var s,a,n=mI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function mI(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var fI=(e,t,s,a,n,i)=>"M".concat(e,",").concat(n,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(s),xI=e=>{var{x:t=0,y:s=0,top:a=0,left:n=0,width:i=0,height:o=0,className:l}=e,c=hI(e,oI),d=lI({x:t,y:s,top:a,left:n,width:i,height:o},c);return!Ke(t)||!Ke(s)||!Ke(i)||!Ke(o)||!Ke(a)||!Ke(n)?null:j.createElement("path",lg({},At(d,!0),{className:Lt("recharts-cross",l),d:fI(t,s,i,o,a,n)}))};function pI(e,t,s,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-n:s.left+.5,y:e==="horizontal"?s.top+.5:t.y-n,width:e==="horizontal"?a:s.width-1,height:e==="horizontal"?s.height-1:a}}function jj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function gI(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(s),!0).forEach(function(a){bI(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function bI(e,t,s){return(t=vI(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function vI(e){var t=yI(e,"string");return typeof t=="symbol"?t:t+""}function yI(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qa(e,t){var s=gI({},e),a=t,n=Object.keys(t),i=n.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),s);return i}var L0={},M0={},D0={},wj;function jI(){return wj||(wj=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){if(!s||typeof s!="object")return!1;const a=Object.getPrototypeOf(s);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(s)==="[object Object]":!1}e.isPlainObject=t}(D0)),D0}var Nj;function wI(){return Nj||(Nj=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jI(),s=G4(),a=Ab(),n=kb(),i=Pb();function o(d,u,h){return l(d,u,void 0,void 0,void 0,void 0,h)}function l(d,u,h,f,m,p,v){const g=v(d,u,h,f,m,p);if(g!==void 0)return g;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,p,v)}return c(d,u,p,v)}function c(d,u,h,f){if(Object.is(d,u))return!0;let m=a.getTag(d),p=a.getTag(u);if(m===n.argumentsTag&&(m=n.objectTag),p===n.argumentsTag&&(p=n.objectTag),m!==p)return!1;switch(m){case n.stringTag:return d.toString()===u.toString();case n.numberTag:{const y=d.valueOf(),N=u.valueOf();return i.eq(y,N)}case n.booleanTag:case n.dateTag:case n.symbolTag:return Object.is(d.valueOf(),u.valueOf());case n.regexpTag:return d.source===u.source&&d.flags===u.flags;case n.functionTag:return d===u}h=h??new Map;const v=h.get(d),g=h.get(u);if(v!=null&&g!=null)return v===u;h.set(d,u),h.set(u,d);try{switch(m){case n.mapTag:{if(d.size!==u.size)return!1;for(const[y,N]of d.entries())if(!u.has(y)||!l(N,u.get(y),y,d,u,h,f))return!1;return!0}case n.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),N=Array.from(u.values());for(let S=0;S<y.length;S++){const C=y[S],M=N.findIndex(D=>l(C,D,void 0,d,u,h,f));if(M===-1)return!1;N.splice(M,1)}return!0}case n.arrayTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:case n.bigUint64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.bigInt64ArrayTag:case n.float32ArrayTag:case n.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,h,f))return!1;return!0}case n.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case n.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case n.errorTag:return d.name===u.name&&d.message===u.message;case n.objectTag:{if(!(c(d.constructor,u.constructor,h,f)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const N=[...Object.keys(d),...s.getSymbols(d)],S=[...Object.keys(u),...s.getSymbols(u)];if(N.length!==S.length)return!1;for(let C=0;C<N.length;C++){const M=N[C],D=d[M];if(!Object.hasOwn(u,M))return!1;const L=u[M];if(!l(D,L,M,d,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=o}(M0)),M0}var I0={},_j;function NI(){return _j||(_j=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(I0)),I0}var Sj;function _I(){return Sj||(Sj=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wI(),s=NI();function a(n,i){return t.isEqualWith(n,i,s.noop)}e.isEqual=a}(L0)),L0}var R0,Pj;function SI(){return Pj||(Pj=1,R0=_I().isEqual),R0}var PI=SI();const CI=bn(PI);function AI(e){var t={},s=()=>null,a=!1,n=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){n=e.setTimeout(i.bind(null,d),c);return}i(c),n=e.setTimeout(i.bind(null,d));return}typeof o=="object"&&(t=o,s(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,n&&(n(),n=null),i(o)},subscribe:o=>(s=o,()=>{s=()=>null}),getTimeoutController:()=>e}}var ym=1e-4,R3=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],F3=(e,t)=>e.map((s,a)=>s*t**a).reduce((s,a)=>s+a),Cj=(e,t)=>s=>{var a=R3(e,t);return F3(a,s)},kI=(e,t)=>s=>{var a=R3(e,t),n=[...a.map((i,o)=>i*o).slice(1),0];return F3(n,s)},Aj=function(){for(var t,s,a,n,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,s,n]=[0,0,1,1];break;case"ease":[t,a,s,n]=[.25,.1,.25,1];break;case"ease-in":[t,a,s,n]=[.42,0,1,1];break;case"ease-out":[t,a,s,n]=[.42,0,.58,1];break;case"ease-in-out":[t,a,s,n]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,s,n]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,a,s,n]=o);var d=Cj(t,s),u=Cj(a,n),h=kI(t,s),f=p=>p>1?1:p<0?0:p,m=p=>{for(var v=p>1?1:p,g=v,y=0;y<8;++y){var N=d(g)-v,S=h(g);if(Math.abs(N-v)<ym||S<ym)return u(g);g=f(g-N/S)}return u(g)};return m.isStepper=!1,m},EI=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:s=100,damping:a=8,dt:n=17}=t,i=(o,l,c)=>{var d=-(o-l)*s,u=c*a,h=c+(d-u)*n/1e3,f=c*n/1e3+o;return Math.abs(f-l)<ym&&Math.abs(h)<ym?[l,0]:[f,h]};return i.isStepper=!0,i.dt=n,i},OI=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Aj(e);case"spring":return EI();default:if(e.split("(")[0]==="cubic-bezier")return Aj(e)}return typeof e=="function"?e:null};function kj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ej(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(s),!0).forEach(function(a){TI(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function TI(e,t,s){return(t=LI(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function LI(e){var t=MI(e,"string");return typeof t=="symbol"?t:t+""}function MI(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DI=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),II=(e,t,s)=>e.map(a=>"".concat(DI(a)," ").concat(t,"ms ").concat(s)).join(","),RI=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((s,a)=>s.filter(n=>a.includes(n))),tu=(e,t)=>Object.keys(t).reduce((s,a)=>Ej(Ej({},s),{},{[a]:e(a,t[a])}),{});function Oj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function ys(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(s),!0).forEach(function(a){FI(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Oj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function FI(e,t,s){return(t=$I(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function $I(e){var t=qI(e,"string");return typeof t=="symbol"?t:t+""}function qI(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jm=(e,t,s)=>e+(t-e)*s,cg=e=>{var{from:t,to:s}=e;return t!==s},$3=(e,t,s)=>{var a=tu((n,i)=>{if(cg(i)){var[o,l]=e(i.from,i.to,i.velocity);return ys(ys({},i),{},{from:o,velocity:l})}return i},t);return s<1?tu((n,i)=>cg(i)?ys(ys({},i),{},{velocity:jm(i.velocity,a[n].velocity,s),from:jm(i.from,a[n].from,s)}):i,t):$3(e,a,s-1)};function BI(e,t,s,a,n,i){var o,l=a.reduce((f,m)=>ys(ys({},f),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>tu((f,m)=>m.from,l),d=()=>!Object.values(l).filter(cg).length,u=null,h=f=>{o||(o=f);var m=f-o,p=m/s.dt;l=$3(s,l,p),n(ys(ys(ys({},e),t),c())),o=f,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function zI(e,t,s,a,n,i,o){var l=null,c=n.reduce((h,f)=>ys(ys({},h),{},{[f]:[e[f],t[f]]}),{}),d,u=h=>{d||(d=h);var f=(h-d)/a,m=tu((v,g)=>jm(...g,s(f)),c);if(i(ys(ys(ys({},e),t),m)),f<1)l=o.setTimeout(u);else{var p=tu((v,g)=>jm(...g,s(1)),c);i(ys(ys(ys({},e),t),p))}};return()=>(l=o.setTimeout(u),()=>{l()})}const UI=(e,t,s,a,n,i)=>{var o=RI(e,t);return s.isStepper===!0?BI(e,t,s,o,n,i):zI(e,t,s,a,o,n,i)};class WI{setTimeout(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),n=null,i=o=>{o-a>=s?t(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}var VI=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function dg(){return dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},dg.apply(null,arguments)}function HI(e,t){if(e==null)return{};var s,a,n=GI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function GI(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function Tj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function qi(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(s),!0).forEach(function(a){Wo(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Tj(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Wo(e,t,s){return(t=KI(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function KI(e){var t=YI(e,"string");return typeof t=="symbol"?t:t+""}function YI(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JI(){return AI(new WI)}class Ub extends j.PureComponent{constructor(t,s){super(t,s),Wo(this,"mounted",!1),Wo(this,"manager",null),Wo(this,"stopJSAnimation",null),Wo(this,"unSubscribe",null);var{isActive:a,attributeName:n,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:n?{[n]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:s}=this.props;this.mounted=!0,!(!t||!s)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:s,canBegin:a,attributeName:n,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!s){var d={style:n?{[n]:o}:o};this.state&&c&&(n&&c[n]!==o||!n&&c!==o)&&this.setState(d);return}if(!(CI(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?l:t.to;if(this.state&&c){var f={style:n?{[n]:h}:h};(n&&c[n]!==h||!n&&c!==h)&&this.setState(f)}this.runAnimation(qi(qi({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:s,to:a,duration:n,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=UI(s,a,OI(i),n,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,n,l])}runAnimation(t){var{begin:s,duration:a,attributeName:n,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=n?{[n]:i}:i,h=II(Object.keys(u),a,o);this.manager.start([l,s,qi(qi({},u),{},{transition:h}),a,c])}render(){var t=this.props,{children:s,begin:a,duration:n,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:m,animationManager:p}=t,v=HI(t,VI),g=j.Children.count(s),y=this.state.style;if(typeof s=="function")return s(y);if(!l||g===0||n<=0)return s;var N=S=>{var{style:C={},className:M}=S.props,D=j.cloneElement(S,qi(qi({},v),{},{style:qi(qi({},C),y),className:M}));return D};return g===1?N(j.Children.only(s)):j.createElement("div",null,j.Children.map(s,S=>N(S)))}}Wo(Ub,"displayName","Animate");Wo(Ub,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var XI=j.createContext(null);function oo(e){var t,s,a=j.useContext(XI);return j.createElement(Ub,dg({},e,{animationManager:(t=(s=e.animationManager)!==null&&s!==void 0?s:a)!==null&&t!==void 0?t:JI()}))}function wm(){return wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},wm.apply(null,arguments)}var Lj=(e,t,s,a,n)=>{var i=Math.min(Math.abs(s)/2,Math.abs(a)/2),o=a>=0?1:-1,l=s>=0?1:-1,c=a>=0&&s>=0||a<0&&s<0?1:0,d;if(i>0&&n instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=n[h]>i?i:n[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+s-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+s,",").concat(t+o*u[1])),d+="L ".concat(e+s,",").concat(t+a-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+s-l*u[2],",").concat(t+a)),d+="L ".concat(e+l*u[3],",").concat(t+a),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*u[3])),d+="Z"}else if(i>0&&n===+n&&n>0){var m=Math.min(i,n);d="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+s-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+s,",").concat(t+o*m,`
            L `).concat(e+s,",").concat(t+a-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+s-l*m,",").concat(t+a,`
            L `).concat(e+l*m,",").concat(t+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*m," Z")}else d="M ".concat(e,",").concat(t," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return d},QI={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},q3=e=>{var t=Qa(e,QI),s=j.useRef(null),[a,n]=j.useState(-1);j.useEffect(()=>{if(s.current&&s.current.getTotalLength)try{var y=s.current.getTotalLength();y&&n(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:p,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var g=Lt("recharts-rectangle",u);return v?j.createElement(oo,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:f,animationEasing:h,isActive:v},y=>{var{width:N,height:S,x:C,y:M}=y;return j.createElement(oo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:p,easing:h},j.createElement("path",wm({},At(t,!0),{className:g,d:Lj(C,M,N,S,d),ref:s})))}):j.createElement("path",wm({},At(t,!0),{className:g,d:Lj(i,o,l,c,d)}))};function B3(e){var{cx:t,cy:s,radius:a,startAngle:n,endAngle:i}=e,o=Wr(t,s,a,n),l=Wr(t,s,a,i);return{points:[o,l],cx:t,cy:s,radius:a,startAngle:n,endAngle:i}}function ug(){return ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ug.apply(null,arguments)}var ZI=(e,t)=>{var s=cs(t-e),a=Math.min(Math.abs(t-e),359.999);return s*a},Lh=e=>{var{cx:t,cy:s,radius:a,angle:n,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+a,u=Math.asin(l/d)/vm,h=c?n:n+i*u,f=Wr(t,s,d,h),m=Wr(t,s,a,h),p=c?n-i*u:n,v=Wr(t,s,d*Math.cos(u*vm),p);return{center:f,circleTangency:m,lineTangency:v,theta:u}},z3=e=>{var{cx:t,cy:s,innerRadius:a,outerRadius:n,startAngle:i,endAngle:o}=e,l=ZI(i,o),c=i+l,d=Wr(t,s,n,i),u=Wr(t,s,n,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var f=Wr(t,s,a,i),m=Wr(t,s,a,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(s," Z");return h},eR=e=>{var{cx:t,cy:s,innerRadius:a,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=cs(d-c),{circleTangency:h,lineTangency:f,theta:m}=Lh({cx:t,cy:s,radius:n,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:v,theta:g}=Lh({cx:t,cy:s,radius:n,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-m-g;if(y<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):z3({cx:t,cy:s,innerRadius:a,outerRadius:n,startAngle:c,endAngle:d});var N="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var{circleTangency:S,lineTangency:C,theta:M}=Lh({cx:t,cy:s,radius:a,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:D,lineTangency:L,theta:A}=Lh({cx:t,cy:s,radius:a,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),I=l?Math.abs(c-d):Math.abs(c-d)-M-A;if(I<0&&i===0)return"".concat(N,"L").concat(t,",").concat(s,"Z");N+="L".concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(u>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(C.x,",").concat(C.y,"Z")}else N+="L".concat(t,",").concat(s,"Z");return N},tR={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},U3=e=>{var t=Qa(e,tR),{cx:s,cy:a,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<n||d===u)return null;var f=Lt("recharts-sector",h),m=i-n,p=Gs(o,m,0,!0),v;return p>0&&Math.abs(d-u)<360?v=eR({cx:s,cy:a,innerRadius:n,outerRadius:i,cornerRadius:Math.min(p,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):v=z3({cx:s,cy:a,innerRadius:n,outerRadius:i,startAngle:d,endAngle:u}),j.createElement("path",ug({},At(t,!0),{className:f,d:v}))};function rR(e,t,s){var a,n,i,o;if(e==="horizontal")a=t.x,i=a,n=s.top,o=s.top+s.height;else if(e==="vertical")n=t.y,o=n,a=s.left,i=s.left+s.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,f=Wr(l,c,d,h),m=Wr(l,c,u,h);a=f.x,n=f.y,i=m.x,o=m.y}else return B3(t);return[{x:a,y:n},{x:i,y:o}]}var F0={},$0={},q0={},Mj;function sR(){return Mj||(Mj=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q4();function s(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=s}(q0)),q0}var Dj;function aR(){return Dj||(Dj=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sR();function s(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=s}($0)),$0}var Ij;function nR(){return Ij||(Ij=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z4(),s=aR();function a(n,i,o){o&&typeof o!="number"&&t.isIterateeCall(n,i,o)&&(i=o=void 0),n=s.toFinite(n),i===void 0?(i=n,n=0):i=s.toFinite(i),o=o===void 0?n<i?1:-1:s.toFinite(o);const l=Math.max(Math.ceil((i-n)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=n,n+=o;return c}e.range=a}(F0)),F0}var B0,Rj;function iR(){return Rj||(Rj=1,B0=nR().range),B0}var oR=iR();const W3=bn(oR);function to(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lR(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wb(e){let t,s,a;e.length!==2?(t=to,s=(l,c)=>to(e(l),c),a=(l,c)=>e(l)-c):(t=e===to||e===lR?e:cR,s=e,a=e);function n(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;s(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;s(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=n(l,c,d,u-1);return h>d&&a(l[h-1],c)>-a(l[h],c)?h-1:h}return{left:n,center:o,right:i}}function cR(){return 0}function V3(e){return e===null?NaN:+e}function*dR(e,t){for(let s of e)s!=null&&(s=+s)>=s&&(yield s)}const uR=Wb(to),vu=uR.right;Wb(V3).center;class Fj extends Map{constructor(t,s=fR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),t!=null)for(const[a,n]of t)this.set(a,n)}get(t){return super.get($j(this,t))}has(t){return super.has($j(this,t))}set(t,s){return super.set(hR(this,t),s)}delete(t){return super.delete(mR(this,t))}}function $j({_intern:e,_key:t},s){const a=t(s);return e.has(a)?e.get(a):s}function hR({_intern:e,_key:t},s){const a=t(s);return e.has(a)?e.get(a):(e.set(a,s),s)}function mR({_intern:e,_key:t},s){const a=t(s);return e.has(a)&&(s=e.get(a),e.delete(a)),s}function fR(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xR(e=to){if(e===to)return H3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,s)=>{const a=e(t,s);return a||a===0?a:(e(s,s)===0)-(e(t,t)===0)}}function H3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const pR=Math.sqrt(50),gR=Math.sqrt(10),bR=Math.sqrt(2);function Nm(e,t,s){const a=(t-e)/Math.max(0,s),n=Math.floor(Math.log10(a)),i=a/Math.pow(10,n),o=i>=pR?10:i>=gR?5:i>=bR?2:1;let l,c,d;return n<0?(d=Math.pow(10,-n)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,n)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=s&&s<2?Nm(e,t,s*2):[l,c,d]}function hg(e,t,s){if(t=+t,e=+e,s=+s,!(s>0))return[];if(e===t)return[e];const a=t<e,[n,i,o]=a?Nm(t,e,s):Nm(e,t,s);if(!(i>=n))return[];const l=i-n+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(n+d)/-o;else for(let d=0;d<l;++d)c[d]=(n+d)*o;return c}function mg(e,t,s){return t=+t,e=+e,s=+s,Nm(e,t,s)[2]}function fg(e,t,s){t=+t,e=+e,s=+s;const a=t<e,n=a?mg(t,e,s):mg(e,t,s);return(a?-1:1)*(n<0?1/-n:n)}function qj(e,t){let s;for(const a of e)a!=null&&(s<a||s===void 0&&a>=a)&&(s=a);return s}function Bj(e,t){let s;for(const a of e)a!=null&&(s>a||s===void 0&&a>=a)&&(s=a);return s}function G3(e,t,s=0,a=1/0,n){if(t=Math.floor(t),s=Math.floor(Math.max(0,s)),a=Math.floor(Math.min(e.length-1,a)),!(s<=t&&t<=a))return e;for(n=n===void 0?H3:xR(n);a>s;){if(a-s>600){const c=a-s+1,d=t-s+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(s,Math.floor(t-d*h/c+f)),p=Math.min(a,Math.floor(t+(c-d)*h/c+f));G3(e,t,m,p,n)}const i=e[t];let o=s,l=a;for(Sd(e,s,t),n(e[a],i)>0&&Sd(e,s,a);o<l;){for(Sd(e,o,l),++o,--l;n(e[o],i)<0;)++o;for(;n(e[l],i)>0;)--l}n(e[s],i)===0?Sd(e,s,l):(++l,Sd(e,l,a)),l<=t&&(s=l+1),t<=l&&(a=l-1)}return e}function Sd(e,t,s){const a=e[t];e[t]=e[s],e[s]=a}function vR(e,t,s){if(e=Float64Array.from(dR(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Bj(e);if(t>=1)return qj(e);var a,n=(a-1)*t,i=Math.floor(n),o=qj(G3(e,i).subarray(0,i+1)),l=Bj(e.subarray(i+1));return o+(l-o)*(n-i)}}function yR(e,t,s=V3){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+s(e[0],0,e);if(t>=1)return+s(e[a-1],a-1,e);var a,n=(a-1)*t,i=Math.floor(n),o=+s(e[i],i,e),l=+s(e[i+1],i+1,e);return o+(l-o)*(n-i)}}function jR(e,t,s){e=+e,t=+t,s=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+s;for(var a=-1,n=Math.max(0,Math.ceil((t-e)/s))|0,i=new Array(n);++a<n;)i[a]=e+a*s;return i}function Za(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xg=Symbol("implicit");function Vb(){var e=new Fj,t=[],s=[],a=xg;function n(i){let o=e.get(i);if(o===void 0){if(a!==xg)return a;e.set(i,o=t.push(i)-1)}return s[o%s.length]}return n.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Fj;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return n},n.range=function(i){return arguments.length?(s=Array.from(i),n):s.slice()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return Vb(t,s).unknown(a)},Za.apply(n,arguments),n}function Hb(){var e=Vb().unknown(void 0),t=e.domain,s=e.range,a=0,n=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,m=n<a,p=m?n:a,v=m?a:n;i=(v-p)/Math.max(1,f-c+d*2),l&&(i=Math.floor(i)),p+=(v-p-i*(f-c))*u,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var g=jR(f).map(function(y){return p+i*y});return s(m?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([a,n]=f,a=+a,n=+n,h()):[a,n]},e.rangeRound=function(f){return[a,n]=f,a=+a,n=+n,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return Hb(t(),[a,n]).round(l).paddingInner(c).paddingOuter(d).align(u)},Za.apply(h(),arguments)}function K3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return K3(t())},e}function wR(){return K3(Hb.apply(null,arguments).paddingInner(1))}function Gb(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function Y3(e,t){var s=Object.create(e.prototype);for(var a in t)s[a]=t[a];return s}function yu(){}var ru=.7,_m=1/ru,xc="\\s*([+-]?\\d+)\\s*",su="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NR=/^#([0-9a-f]{3,8})$/,_R=new RegExp(`^rgb\\(${xc},${xc},${xc}\\)$`),SR=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),PR=new RegExp(`^rgba\\(${xc},${xc},${xc},${su}\\)$`),CR=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${su}\\)$`),AR=new RegExp(`^hsl\\(${su},${Mn},${Mn}\\)$`),kR=new RegExp(`^hsla\\(${su},${Mn},${Mn},${su}\\)$`),zj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gb(yu,au,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uj,formatHex:Uj,formatHex8:ER,formatHsl:OR,formatRgb:Wj,toString:Wj});function Uj(){return this.rgb().formatHex()}function ER(){return this.rgb().formatHex8()}function OR(){return J3(this).formatHsl()}function Wj(){return this.rgb().formatRgb()}function au(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=NR.exec(e))?(s=t[1].length,t=parseInt(t[1],16),s===6?Vj(t):s===3?new la(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):s===8?Mh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):s===4?Mh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_R.exec(e))?new la(t[1],t[2],t[3],1):(t=SR.exec(e))?new la(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=PR.exec(e))?Mh(t[1],t[2],t[3],t[4]):(t=CR.exec(e))?Mh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=AR.exec(e))?Kj(t[1],t[2]/100,t[3]/100,1):(t=kR.exec(e))?Kj(t[1],t[2]/100,t[3]/100,t[4]):zj.hasOwnProperty(e)?Vj(zj[e]):e==="transparent"?new la(NaN,NaN,NaN,0):null}function Vj(e){return new la(e>>16&255,e>>8&255,e&255,1)}function Mh(e,t,s,a){return a<=0&&(e=t=s=NaN),new la(e,t,s,a)}function TR(e){return e instanceof yu||(e=au(e)),e?(e=e.rgb(),new la(e.r,e.g,e.b,e.opacity)):new la}function pg(e,t,s,a){return arguments.length===1?TR(e):new la(e,t,s,a??1)}function la(e,t,s,a){this.r=+e,this.g=+t,this.b=+s,this.opacity=+a}Gb(la,pg,Y3(yu,{brighter(e){return e=e==null?_m:Math.pow(_m,e),new la(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ru:Math.pow(ru,e),new la(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new la(Xo(this.r),Xo(this.g),Xo(this.b),Sm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hj,formatHex:Hj,formatHex8:LR,formatRgb:Gj,toString:Gj}));function Hj(){return`#${Vo(this.r)}${Vo(this.g)}${Vo(this.b)}`}function LR(){return`#${Vo(this.r)}${Vo(this.g)}${Vo(this.b)}${Vo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gj(){const e=Sm(this.opacity);return`${e===1?"rgb(":"rgba("}${Xo(this.r)}, ${Xo(this.g)}, ${Xo(this.b)}${e===1?")":`, ${e})`}`}function Sm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vo(e){return e=Xo(e),(e<16?"0":"")+e.toString(16)}function Kj(e,t,s,a){return a<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new xn(e,t,s,a)}function J3(e){if(e instanceof xn)return new xn(e.h,e.s,e.l,e.opacity);if(e instanceof yu||(e=au(e)),!e)return new xn;if(e instanceof xn)return e;e=e.rgb();var t=e.r/255,s=e.g/255,a=e.b/255,n=Math.min(t,s,a),i=Math.max(t,s,a),o=NaN,l=i-n,c=(i+n)/2;return l?(t===i?o=(s-a)/l+(s<a)*6:s===i?o=(a-t)/l+2:o=(t-s)/l+4,l/=c<.5?i+n:2-i-n,o*=60):l=c>0&&c<1?0:o,new xn(o,l,c,e.opacity)}function MR(e,t,s,a){return arguments.length===1?J3(e):new xn(e,t,s,a??1)}function xn(e,t,s,a){this.h=+e,this.s=+t,this.l=+s,this.opacity=+a}Gb(xn,MR,Y3(yu,{brighter(e){return e=e==null?_m:Math.pow(_m,e),new xn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ru:Math.pow(ru,e),new xn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,a=s+(s<.5?s:1-s)*t,n=2*s-a;return new la(z0(e>=240?e-240:e+120,n,a),z0(e,n,a),z0(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new xn(Yj(this.h),Dh(this.s),Dh(this.l),Sm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sm(this.opacity);return`${e===1?"hsl(":"hsla("}${Yj(this.h)}, ${Dh(this.s)*100}%, ${Dh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yj(e){return e=(e||0)%360,e<0?e+360:e}function Dh(e){return Math.max(0,Math.min(1,e||0))}function z0(e,t,s){return(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)*255}const Kb=e=>()=>e;function DR(e,t){return function(s){return e+s*t}}function IR(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(a){return Math.pow(e+a*t,s)}}function RR(e){return(e=+e)==1?X3:function(t,s){return s-t?IR(t,s,e):Kb(isNaN(t)?s:t)}}function X3(e,t){var s=t-e;return s?DR(e,s):Kb(isNaN(e)?t:e)}const Jj=function e(t){var s=RR(t);function a(n,i){var o=s((n=pg(n)).r,(i=pg(i)).r),l=s(n.g,i.g),c=s(n.b,i.b),d=X3(n.opacity,i.opacity);return function(u){return n.r=o(u),n.g=l(u),n.b=c(u),n.opacity=d(u),n+""}}return a.gamma=e,a}(1);function FR(e,t){t||(t=[]);var s=e?Math.min(t.length,e.length):0,a=t.slice(),n;return function(i){for(n=0;n<s;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function $R(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qR(e,t){var s=t?t.length:0,a=e?Math.min(s,e.length):0,n=new Array(a),i=new Array(s),o;for(o=0;o<a;++o)n[o]=Ic(e[o],t[o]);for(;o<s;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=n[o](l);return i}}function BR(e,t){var s=new Date;return e=+e,t=+t,function(a){return s.setTime(e*(1-a)+t*a),s}}function Pm(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}function zR(e,t){var s={},a={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?s[n]=Ic(e[n],t[n]):a[n]=t[n];return function(i){for(n in s)a[n]=s[n](i);return a}}var gg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,U0=new RegExp(gg.source,"g");function UR(e){return function(){return e}}function WR(e){return function(t){return e(t)+""}}function VR(e,t){var s=gg.lastIndex=U0.lastIndex=0,a,n,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=gg.exec(e))&&(n=U0.exec(t));)(i=n.index)>s&&(i=t.slice(s,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,c.push({i:o,x:Pm(a,n)})),s=U0.lastIndex;return s<t.length&&(i=t.slice(s),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?WR(c[0].x):UR(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Ic(e,t){var s=typeof t,a;return t==null||s==="boolean"?Kb(t):(s==="number"?Pm:s==="string"?(a=au(t))?(t=a,Jj):VR:t instanceof au?Jj:t instanceof Date?BR:$R(t)?FR:Array.isArray(t)?qR:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zR:Pm)(e,t)}function Yb(e,t){return e=+e,t=+t,function(s){return Math.round(e*(1-s)+t*s)}}function HR(e,t){t===void 0&&(t=e,e=Ic);for(var s=0,a=t.length-1,n=t[0],i=new Array(a<0?0:a);s<a;)i[s]=e(n,n=t[++s]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function GR(e){return function(){return e}}function Cm(e){return+e}var Xj=[0,1];function Hs(e){return e}function bg(e,t){return(t-=e=+e)?function(s){return(s-e)/t}:GR(isNaN(t)?NaN:.5)}function KR(e,t){var s;return e>t&&(s=e,e=t,t=s),function(a){return Math.max(e,Math.min(t,a))}}function YR(e,t,s){var a=e[0],n=e[1],i=t[0],o=t[1];return n<a?(a=bg(n,a),i=s(o,i)):(a=bg(a,n),i=s(i,o)),function(l){return i(a(l))}}function JR(e,t,s){var a=Math.min(e.length,t.length)-1,n=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)n[o]=bg(e[o],e[o+1]),i[o]=s(t[o],t[o+1]);return function(l){var c=vu(e,l,1,a)-1;return i[c](n[c](l))}}function ju(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lf(){var e=Xj,t=Xj,s=Ic,a,n,i,o=Hs,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==Hs&&(o=KR(e[0],e[f-1])),l=f>2?JR:YR,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(a),t,s)))(a(o(f)))}return h.invert=function(f){return o(n((d||(d=l(t,e.map(a),Pm)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Cm),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),s=Yb,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Hs,u()):o!==Hs},h.interpolate=function(f){return arguments.length?(s=f,u()):s},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return a=f,n=m,u()}}function Jb(){return lf()(Hs,Hs)}function XR(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Am(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,a=e.slice(0,s);return[a.length>1?a[0]+a.slice(2):a,+e.slice(s+1)]}function Ac(e){return e=Am(Math.abs(e)),e?e[1]:NaN}function QR(e,t){return function(s,a){for(var n=s.length,i=[],o=0,l=e[0],c=0;n>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(s.substring(n-=l,n+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ZR(e){return function(t){return t.replace(/[0-9]/g,function(s){return e[+s]})}}var e9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nu(e){if(!(t=e9.exec(e)))throw new Error("invalid format: "+e);var t;return new Xb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nu.prototype=Xb.prototype;function Xb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t9(e){e:for(var t=e.length,s=1,a=-1,n;s<t;++s)switch(e[s]){case".":a=n=s;break;case"0":a===0&&(a=s),n=s;break;default:if(!+e[s])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(n+1):e}var Q3;function r9(e,t){var s=Am(e,t);if(!s)return e+"";var a=s[0],n=s[1],i=n-(Q3=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Am(e,Math.max(0,t+i-1))[0]}function Qj(e,t){var s=Am(e,t);if(!s)return e+"";var a=s[0],n=s[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}const Zj={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:XR,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Qj(e*100,t),r:Qj,s:r9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ew(e){return e}var tw=Array.prototype.map,rw=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function s9(e){var t=e.grouping===void 0||e.thousands===void 0?ew:QR(tw.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ew:ZR(tw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=nu(h);var f=h.fill,m=h.align,p=h.sign,v=h.symbol,g=h.zero,y=h.width,N=h.comma,S=h.precision,C=h.trim,M=h.type;M==="n"?(N=!0,M="g"):Zj[M]||(S===void 0&&(S=12),C=!0,M="g"),(g||f==="0"&&m==="=")&&(g=!0,f="0",m="=");var D=v==="$"?s:v==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",L=v==="$"?a:/[%p]/.test(M)?o:"",A=Zj[M],I=/[defgprs%]/.test(M);S=S===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function H(k){var P=D,O=L,$,V,T;if(M==="c")O=A(k)+O,k="";else{k=+k;var F=k<0||1/k<0;if(k=isNaN(k)?c:A(Math.abs(k),S),C&&(k=t9(k)),F&&+k==0&&p!=="+"&&(F=!1),P=(F?p==="("?p:l:p==="-"||p==="("?"":p)+P,O=(M==="s"?rw[8+Q3/3]:"")+O+(F&&p==="("?")":""),I){for($=-1,V=k.length;++$<V;)if(T=k.charCodeAt($),48>T||T>57){O=(T===46?n+k.slice($+1):k.slice($))+O,k=k.slice(0,$);break}}}N&&!g&&(k=t(k,1/0));var z=P.length+k.length+O.length,se=z<y?new Array(y-z+1).join(f):"";switch(N&&g&&(k=t(se+k,se.length?y-O.length:1/0),se=""),m){case"<":k=P+k+O+se;break;case"=":k=P+se+k+O;break;case"^":k=se.slice(0,z=se.length>>1)+P+k+O+se.slice(z);break;default:k=se+P+k+O;break}return i(k)}return H.toString=function(){return h+""},H}function u(h,f){var m=d((h=nu(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Ac(f)/3)))*3,v=Math.pow(10,-p),g=rw[8+p/3];return function(y){return m(v*y)+g}}return{format:d,formatPrefix:u}}var Ih,Qb,Z3;a9({thousands:",",grouping:[3],currency:["$",""]});function a9(e){return Ih=s9(e),Qb=Ih.format,Z3=Ih.formatPrefix,Ih}function n9(e){return Math.max(0,-Ac(Math.abs(e)))}function i9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ac(t)/3)))*3-Ac(Math.abs(e)))}function o9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ac(t)-Ac(e))+1}function e6(e,t,s,a){var n=fg(e,t,s),i;switch(a=nu(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=i9(n,o))&&(a.precision=i),Z3(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=o9(n,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=n9(n))&&(a.precision=i-(a.type==="%")*2);break}}return Qb(a)}function po(e){var t=e.domain;return e.ticks=function(s){var a=t();return hg(a[0],a[a.length-1],s??10)},e.tickFormat=function(s,a){var n=t();return e6(n[0],n[n.length-1],s??10,a)},e.nice=function(s){s==null&&(s=10);var a=t(),n=0,i=a.length-1,o=a[n],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=n,n=i,i=d);u-- >0;){if(d=mg(o,l,s),d===c)return a[n]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function t6(){var e=Jb();return e.copy=function(){return ju(e,t6())},Za.apply(e,arguments),po(e)}function r6(e){var t;function s(a){return a==null||isNaN(a=+a)?t:a}return s.invert=s,s.domain=s.range=function(a){return arguments.length?(e=Array.from(a,Cm),s):e.slice()},s.unknown=function(a){return arguments.length?(t=a,s):t},s.copy=function(){return r6(e).unknown(t)},e=arguments.length?Array.from(e,Cm):[0,1],po(s)}function s6(e,t){e=e.slice();var s=0,a=e.length-1,n=e[s],i=e[a],o;return i<n&&(o=s,s=a,a=o,o=n,n=i,i=o),e[s]=t.floor(n),e[a]=t.ceil(i),e}function sw(e){return Math.log(e)}function aw(e){return Math.exp(e)}function l9(e){return-Math.log(-e)}function c9(e){return-Math.exp(-e)}function d9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function u9(e){return e===10?d9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function h9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nw(e){return(t,s)=>-e(-t,s)}function Zb(e){const t=e(sw,aw),s=t.domain;let a=10,n,i;function o(){return n=h9(a),i=u9(a),s()[0]<0?(n=nw(n),i=nw(i),e(l9,c9)):e(sw,aw),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(s(l),o()):s()},t.ticks=l=>{const c=s();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=n(d),m=n(u),p,v;const g=l==null?10:+l;let y=[];if(!(a%1)&&m-f<g){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(p=1;p<a;++p)if(v=f<0?p/i(-f):p*i(f),!(v<d)){if(v>u)break;y.push(v)}}else for(;f<=m;++f)for(p=a-1;p>=1;--p)if(v=f>0?p/i(-f):p*i(f),!(v<d)){if(v>u)break;y.push(v)}y.length*2<g&&(y=hg(d,u,g))}else y=hg(f,m,Math.min(m-f,g)).map(i);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=nu(c)).precision==null&&(c.trim=!0),c=Qb(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let h=u/i(Math.round(n(u)));return h*a<a-.5&&(h*=a),h<=d?c(u):""}},t.nice=()=>s(s6(s(),{floor:l=>i(Math.floor(n(l))),ceil:l=>i(Math.ceil(n(l)))})),t}function a6(){const e=Zb(lf()).domain([1,10]);return e.copy=()=>ju(e,a6()).base(e.base()),Za.apply(e,arguments),e}function iw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ow(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ev(e){var t=1,s=e(iw(t),ow(t));return s.constant=function(a){return arguments.length?e(iw(t=+a),ow(t)):t},po(s)}function n6(){var e=ev(lf());return e.copy=function(){return ju(e,n6()).constant(e.constant())},Za.apply(e,arguments)}function lw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function m9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function f9(e){return e<0?-e*e:e*e}function tv(e){var t=e(Hs,Hs),s=1;function a(){return s===1?e(Hs,Hs):s===.5?e(m9,f9):e(lw(s),lw(1/s))}return t.exponent=function(n){return arguments.length?(s=+n,a()):s},po(t)}function rv(){var e=tv(lf());return e.copy=function(){return ju(e,rv()).exponent(e.exponent())},Za.apply(e,arguments),e}function x9(){return rv.apply(null,arguments).exponent(.5)}function cw(e){return Math.sign(e)*e*e}function p9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function i6(){var e=Jb(),t=[0,1],s=!1,a;function n(i){var o=p9(e(i));return isNaN(o)?a:s?Math.round(o):o}return n.invert=function(i){return e.invert(cw(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((t=Array.from(i,Cm)).map(cw)),n):t.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(s=!!i,n):s},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return i6(e.domain(),t).round(s).clamp(e.clamp()).unknown(a)},Za.apply(n,arguments),po(n)}function o6(){var e=[],t=[],s=[],a;function n(){var o=0,l=Math.max(1,t.length);for(s=new Array(l-1);++o<l;)s[o-1]=yR(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[vu(s,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?s[l-1]:e[0],l<s.length?s[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(to),n()},i.range=function(o){return arguments.length?(t=Array.from(o),n()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return s.slice()},i.copy=function(){return o6().domain(e).range(t).unknown(a)},Za.apply(i,arguments)}function l6(){var e=0,t=1,s=1,a=[.5],n=[0,1],i;function o(c){return c!=null&&c<=c?n[vu(a,c,0,s)]:i}function l(){var c=-1;for(a=new Array(s);++c<s;)a[c]=((c+1)*t-(c-s)*e)/(s+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(s=(n=Array.from(c)).length-1,l()):n.slice()},o.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=s?[a[s-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return l6().domain([e,t]).range(n).unknown(i)},Za.apply(po(o),arguments)}function c6(){var e=[.5],t=[0,1],s,a=1;function n(i){return i!=null&&i<=i?t[vu(e,i,0,a)]:s}return n.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return c6().domain(e).range(t).unknown(s)},Za.apply(n,arguments)}const W0=new Date,V0=new Date;function Yr(e,t,s,a){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),n.round=i=>{const o=n(i),l=n.ceil(i);return i-o<l-i?o:l},n.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,l)=>{const c=[];if(i=n.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},n.filter=i=>Yr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),s&&(n.count=(i,o)=>(W0.setTime(+i),V0.setTime(+o),e(W0),e(V0),Math.floor(s(W0,V0))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(a?o=>a(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const km=Yr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);km.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Yr(t=>{t.setTime(Math.floor(t/e)*e)},(t,s)=>{t.setTime(+t+s*e)},(t,s)=>(s-t)/e):km);km.range;const oi=1e3,Ga=oi*60,li=Ga*60,hi=li*24,sv=hi*7,dw=hi*30,H0=hi*365,Ho=Yr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oi)},(e,t)=>(t-e)/oi,e=>e.getUTCSeconds());Ho.range;const av=Yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oi)},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getMinutes());av.range;const nv=Yr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getUTCMinutes());nv.range;const iv=Yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oi-e.getMinutes()*Ga)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getHours());iv.range;const ov=Yr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getUTCHours());ov.range;const wu=Yr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ga)/hi,e=>e.getDate()-1);wu.range;const cf=Yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hi,e=>e.getUTCDate()-1);cf.range;const d6=Yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hi,e=>Math.floor(e/hi));d6.range;function ml(e){return Yr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,s)=>{t.setDate(t.getDate()+s*7)},(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*Ga)/sv)}const df=ml(0),Em=ml(1),g9=ml(2),b9=ml(3),kc=ml(4),v9=ml(5),y9=ml(6);df.range;Em.range;g9.range;b9.range;kc.range;v9.range;y9.range;function fl(e){return Yr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s*7)},(t,s)=>(s-t)/sv)}const uf=fl(0),Om=fl(1),j9=fl(2),w9=fl(3),Ec=fl(4),N9=fl(5),_9=fl(6);uf.range;Om.range;j9.range;w9.range;Ec.range;N9.range;_9.range;const lv=Yr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());lv.range;const cv=Yr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());cv.range;const mi=Yr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s*e)});mi.range;const fi=Yr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s*e)});fi.range;function u6(e,t,s,a,n,i){const o=[[Ho,1,oi],[Ho,5,5*oi],[Ho,15,15*oi],[Ho,30,30*oi],[i,1,Ga],[i,5,5*Ga],[i,15,15*Ga],[i,30,30*Ga],[n,1,li],[n,3,3*li],[n,6,6*li],[n,12,12*li],[a,1,hi],[a,2,2*hi],[s,1,sv],[t,1,dw],[t,3,3*dw],[e,1,H0]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),p=m?m.range(d,+u+1):[];return f?p.reverse():p}function c(d,u,h){const f=Math.abs(u-d)/h,m=Wb(([,,g])=>g).right(o,f);if(m===o.length)return e.every(fg(d/H0,u/H0,h));if(m===0)return km.every(Math.max(fg(d,u,h),1));const[p,v]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return p.every(v)}return[l,c]}const[S9,P9]=u6(fi,cv,uf,d6,ov,nv),[C9,A9]=u6(mi,lv,df,wu,iv,av);function G0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function K0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Pd(e,t,s){return{y:e,m:t,d:s,H:0,M:0,S:0,L:0}}function k9(e){var t=e.dateTime,s=e.date,a=e.time,n=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Cd(n),u=Ad(n),h=Cd(i),f=Ad(i),m=Cd(o),p=Ad(o),v=Cd(l),g=Ad(l),y=Cd(c),N=Ad(c),S={a:F,A:z,b:se,B:Y,c:null,d:pw,e:pw,f:Q9,g:lF,G:dF,H:Y9,I:J9,j:X9,L:h6,m:Z9,M:eF,p:_e,q:R,Q:vw,s:yw,S:tF,u:rF,U:sF,V:aF,w:nF,W:iF,x:null,X:null,y:oF,Y:cF,Z:uF,"%":bw},C={a:Q,A:re,b:te,B:le,c:null,d:gw,e:gw,f:xF,g:SF,G:CF,H:hF,I:mF,j:fF,L:f6,m:pF,M:gF,p:be,q:we,Q:vw,s:yw,S:bF,u:vF,U:yF,V:jF,w:wF,W:NF,x:null,X:null,y:_F,Y:PF,Z:AF,"%":bw},M={a:H,A:k,b:P,B:O,c:$,d:fw,e:fw,f:V9,g:mw,G:hw,H:xw,I:xw,j:B9,L:W9,m:q9,M:z9,p:I,q:$9,Q:G9,s:K9,S:U9,u:M9,U:D9,V:I9,w:L9,W:R9,x:V,X:T,y:mw,Y:hw,Z:F9,"%":H9};S.x=D(s,S),S.X=D(a,S),S.c=D(t,S),C.x=D(s,C),C.X=D(a,C),C.c=D(t,C);function D(oe,Ce){return function(ye){var fe=[],Le=-1,Te=0,K=oe.length,J,ve,qe;for(ye instanceof Date||(ye=new Date(+ye));++Le<K;)oe.charCodeAt(Le)===37&&(fe.push(oe.slice(Te,Le)),(ve=uw[J=oe.charAt(++Le)])!=null?J=oe.charAt(++Le):ve=J==="e"?" ":"0",(qe=Ce[J])&&(J=qe(ye,ve)),fe.push(J),Te=Le+1);return fe.push(oe.slice(Te,Le)),fe.join("")}}function L(oe,Ce){return function(ye){var fe=Pd(1900,void 0,1),Le=A(fe,oe,ye+="",0),Te,K;if(Le!=ye.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Ce&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Te=K0(Pd(fe.y,0,1)),K=Te.getUTCDay(),Te=K>4||K===0?Om.ceil(Te):Om(Te),Te=cf.offset(Te,(fe.V-1)*7),fe.y=Te.getUTCFullYear(),fe.m=Te.getUTCMonth(),fe.d=Te.getUTCDate()+(fe.w+6)%7):(Te=G0(Pd(fe.y,0,1)),K=Te.getDay(),Te=K>4||K===0?Em.ceil(Te):Em(Te),Te=wu.offset(Te,(fe.V-1)*7),fe.y=Te.getFullYear(),fe.m=Te.getMonth(),fe.d=Te.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),K="Z"in fe?K0(Pd(fe.y,0,1)).getUTCDay():G0(Pd(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(K+5)%7:fe.w+fe.U*7-(K+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,K0(fe)):G0(fe)}}function A(oe,Ce,ye,fe){for(var Le=0,Te=Ce.length,K=ye.length,J,ve;Le<Te;){if(fe>=K)return-1;if(J=Ce.charCodeAt(Le++),J===37){if(J=Ce.charAt(Le++),ve=M[J in uw?Ce.charAt(Le++):J],!ve||(fe=ve(oe,ye,fe))<0)return-1}else if(J!=ye.charCodeAt(fe++))return-1}return fe}function I(oe,Ce,ye){var fe=d.exec(Ce.slice(ye));return fe?(oe.p=u.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function H(oe,Ce,ye){var fe=m.exec(Ce.slice(ye));return fe?(oe.w=p.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function k(oe,Ce,ye){var fe=h.exec(Ce.slice(ye));return fe?(oe.w=f.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function P(oe,Ce,ye){var fe=y.exec(Ce.slice(ye));return fe?(oe.m=N.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function O(oe,Ce,ye){var fe=v.exec(Ce.slice(ye));return fe?(oe.m=g.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function $(oe,Ce,ye){return A(oe,t,Ce,ye)}function V(oe,Ce,ye){return A(oe,s,Ce,ye)}function T(oe,Ce,ye){return A(oe,a,Ce,ye)}function F(oe){return o[oe.getDay()]}function z(oe){return i[oe.getDay()]}function se(oe){return c[oe.getMonth()]}function Y(oe){return l[oe.getMonth()]}function _e(oe){return n[+(oe.getHours()>=12)]}function R(oe){return 1+~~(oe.getMonth()/3)}function Q(oe){return o[oe.getUTCDay()]}function re(oe){return i[oe.getUTCDay()]}function te(oe){return c[oe.getUTCMonth()]}function le(oe){return l[oe.getUTCMonth()]}function be(oe){return n[+(oe.getUTCHours()>=12)]}function we(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var Ce=D(oe+="",S);return Ce.toString=function(){return oe},Ce},parse:function(oe){var Ce=L(oe+="",!1);return Ce.toString=function(){return oe},Ce},utcFormat:function(oe){var Ce=D(oe+="",C);return Ce.toString=function(){return oe},Ce},utcParse:function(oe){var Ce=L(oe+="",!0);return Ce.toString=function(){return oe},Ce}}}var uw={"-":"",_:" ",0:"0"},fs=/^\s*\d+/,E9=/^%/,O9=/[\\^$*+?|[\]().{}]/g;function Ft(e,t,s){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<s?new Array(s-i+1).join(t)+n:n)}function T9(e){return e.replace(O9,"\\$&")}function Cd(e){return new RegExp("^(?:"+e.map(T9).join("|")+")","i")}function Ad(e){return new Map(e.map((t,s)=>[t.toLowerCase(),s]))}function L9(e,t,s){var a=fs.exec(t.slice(s,s+1));return a?(e.w=+a[0],s+a[0].length):-1}function M9(e,t,s){var a=fs.exec(t.slice(s,s+1));return a?(e.u=+a[0],s+a[0].length):-1}function D9(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.U=+a[0],s+a[0].length):-1}function I9(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.V=+a[0],s+a[0].length):-1}function R9(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.W=+a[0],s+a[0].length):-1}function hw(e,t,s){var a=fs.exec(t.slice(s,s+4));return a?(e.y=+a[0],s+a[0].length):-1}function mw(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),s+a[0].length):-1}function F9(e,t,s){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(s,s+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),s+a[0].length):-1}function $9(e,t,s){var a=fs.exec(t.slice(s,s+1));return a?(e.q=a[0]*3-3,s+a[0].length):-1}function q9(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.m=a[0]-1,s+a[0].length):-1}function fw(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.d=+a[0],s+a[0].length):-1}function B9(e,t,s){var a=fs.exec(t.slice(s,s+3));return a?(e.m=0,e.d=+a[0],s+a[0].length):-1}function xw(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.H=+a[0],s+a[0].length):-1}function z9(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.M=+a[0],s+a[0].length):-1}function U9(e,t,s){var a=fs.exec(t.slice(s,s+2));return a?(e.S=+a[0],s+a[0].length):-1}function W9(e,t,s){var a=fs.exec(t.slice(s,s+3));return a?(e.L=+a[0],s+a[0].length):-1}function V9(e,t,s){var a=fs.exec(t.slice(s,s+6));return a?(e.L=Math.floor(a[0]/1e3),s+a[0].length):-1}function H9(e,t,s){var a=E9.exec(t.slice(s,s+1));return a?s+a[0].length:-1}function G9(e,t,s){var a=fs.exec(t.slice(s));return a?(e.Q=+a[0],s+a[0].length):-1}function K9(e,t,s){var a=fs.exec(t.slice(s));return a?(e.s=+a[0],s+a[0].length):-1}function pw(e,t){return Ft(e.getDate(),t,2)}function Y9(e,t){return Ft(e.getHours(),t,2)}function J9(e,t){return Ft(e.getHours()%12||12,t,2)}function X9(e,t){return Ft(1+wu.count(mi(e),e),t,3)}function h6(e,t){return Ft(e.getMilliseconds(),t,3)}function Q9(e,t){return h6(e,t)+"000"}function Z9(e,t){return Ft(e.getMonth()+1,t,2)}function eF(e,t){return Ft(e.getMinutes(),t,2)}function tF(e,t){return Ft(e.getSeconds(),t,2)}function rF(e){var t=e.getDay();return t===0?7:t}function sF(e,t){return Ft(df.count(mi(e)-1,e),t,2)}function m6(e){var t=e.getDay();return t>=4||t===0?kc(e):kc.ceil(e)}function aF(e,t){return e=m6(e),Ft(kc.count(mi(e),e)+(mi(e).getDay()===4),t,2)}function nF(e){return e.getDay()}function iF(e,t){return Ft(Em.count(mi(e)-1,e),t,2)}function oF(e,t){return Ft(e.getFullYear()%100,t,2)}function lF(e,t){return e=m6(e),Ft(e.getFullYear()%100,t,2)}function cF(e,t){return Ft(e.getFullYear()%1e4,t,4)}function dF(e,t){var s=e.getDay();return e=s>=4||s===0?kc(e):kc.ceil(e),Ft(e.getFullYear()%1e4,t,4)}function uF(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ft(t/60|0,"0",2)+Ft(t%60,"0",2)}function gw(e,t){return Ft(e.getUTCDate(),t,2)}function hF(e,t){return Ft(e.getUTCHours(),t,2)}function mF(e,t){return Ft(e.getUTCHours()%12||12,t,2)}function fF(e,t){return Ft(1+cf.count(fi(e),e),t,3)}function f6(e,t){return Ft(e.getUTCMilliseconds(),t,3)}function xF(e,t){return f6(e,t)+"000"}function pF(e,t){return Ft(e.getUTCMonth()+1,t,2)}function gF(e,t){return Ft(e.getUTCMinutes(),t,2)}function bF(e,t){return Ft(e.getUTCSeconds(),t,2)}function vF(e){var t=e.getUTCDay();return t===0?7:t}function yF(e,t){return Ft(uf.count(fi(e)-1,e),t,2)}function x6(e){var t=e.getUTCDay();return t>=4||t===0?Ec(e):Ec.ceil(e)}function jF(e,t){return e=x6(e),Ft(Ec.count(fi(e),e)+(fi(e).getUTCDay()===4),t,2)}function wF(e){return e.getUTCDay()}function NF(e,t){return Ft(Om.count(fi(e)-1,e),t,2)}function _F(e,t){return Ft(e.getUTCFullYear()%100,t,2)}function SF(e,t){return e=x6(e),Ft(e.getUTCFullYear()%100,t,2)}function PF(e,t){return Ft(e.getUTCFullYear()%1e4,t,4)}function CF(e,t){var s=e.getUTCDay();return e=s>=4||s===0?Ec(e):Ec.ceil(e),Ft(e.getUTCFullYear()%1e4,t,4)}function AF(){return"+0000"}function bw(){return"%"}function vw(e){return+e}function yw(e){return Math.floor(+e/1e3)}var ec,p6,g6;kF({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kF(e){return ec=k9(e),p6=ec.format,ec.parse,g6=ec.utcFormat,ec.utcParse,ec}function EF(e){return new Date(e)}function OF(e){return e instanceof Date?+e:+new Date(+e)}function dv(e,t,s,a,n,i,o,l,c,d){var u=Jb(),h=u.invert,f=u.domain,m=d(".%L"),p=d(":%S"),v=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),N=d("%b %d"),S=d("%B"),C=d("%Y");function M(D){return(c(D)<D?m:l(D)<D?p:o(D)<D?v:i(D)<D?g:a(D)<D?n(D)<D?y:N:s(D)<D?S:C)(D)}return u.invert=function(D){return new Date(h(D))},u.domain=function(D){return arguments.length?f(Array.from(D,OF)):f().map(EF)},u.ticks=function(D){var L=f();return e(L[0],L[L.length-1],D??10)},u.tickFormat=function(D,L){return L==null?M:d(L)},u.nice=function(D){var L=f();return(!D||typeof D.range!="function")&&(D=t(L[0],L[L.length-1],D??10)),D?f(s6(L,D)):u},u.copy=function(){return ju(u,dv(e,t,s,a,n,i,o,l,c,d))},u}function TF(){return Za.apply(dv(C9,A9,mi,lv,df,wu,iv,av,Ho,p6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function LF(){return Za.apply(dv(S9,P9,fi,cv,uf,cf,ov,nv,Ho,g6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hf(){var e=0,t=1,s,a,n,i,o=Hs,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(n===0?.5:(h=(i(h)-s)*n,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,s=i(e=+e),a=i(t=+t),n=s===a?0:1/(a-s),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var m,p;return arguments.length?([m,p]=f,o=h(m,p),d):[o(0),o(1)]}}return d.range=u(Ic),d.rangeRound=u(Yb),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,s=h(e),a=h(t),n=s===a?0:1/(a-s),d}}function go(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function b6(){var e=po(hf()(Hs));return e.copy=function(){return go(e,b6())},bi.apply(e,arguments)}function v6(){var e=Zb(hf()).domain([1,10]);return e.copy=function(){return go(e,v6()).base(e.base())},bi.apply(e,arguments)}function y6(){var e=ev(hf());return e.copy=function(){return go(e,y6()).constant(e.constant())},bi.apply(e,arguments)}function uv(){var e=tv(hf());return e.copy=function(){return go(e,uv()).exponent(e.exponent())},bi.apply(e,arguments)}function MF(){return uv.apply(null,arguments).exponent(.5)}function j6(){var e=[],t=Hs;function s(a){if(a!=null&&!isNaN(a=+a))return t((vu(e,a,1)-1)/(e.length-1))}return s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let n of a)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(to),s},s.interpolator=function(a){return arguments.length?(t=a,s):t},s.range=function(){return e.map((a,n)=>t(n/(e.length-1)))},s.quantiles=function(a){return Array.from({length:a+1},(n,i)=>vR(e,i/a))},s.copy=function(){return j6(t).domain(e)},bi.apply(s,arguments)}function mf(){var e=0,t=.5,s=1,a=1,n,i,o,l,c,d=Hs,u,h=!1,f;function m(v){return isNaN(v=+v)?f:(v=.5+((v=+u(v))-i)*(a*v<a*i?l:c),d(h?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,s]=v,n=u(e=+e),i=u(t=+t),o=u(s=+s),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,m):[e,t,s]},m.clamp=function(v){return arguments.length?(h=!!v,m):h},m.interpolator=function(v){return arguments.length?(d=v,m):d};function p(v){return function(g){var y,N,S;return arguments.length?([y,N,S]=g,d=HR(v,[y,N,S]),m):[d(0),d(.5),d(1)]}}return m.range=p(Ic),m.rangeRound=p(Yb),m.unknown=function(v){return arguments.length?(f=v,m):f},function(v){return u=v,n=v(e),i=v(t),o=v(s),l=n===i?0:.5/(i-n),c=i===o?0:.5/(o-i),a=i<n?-1:1,m}}function w6(){var e=po(mf()(Hs));return e.copy=function(){return go(e,w6())},bi.apply(e,arguments)}function N6(){var e=Zb(mf()).domain([.1,1,10]);return e.copy=function(){return go(e,N6()).base(e.base())},bi.apply(e,arguments)}function _6(){var e=ev(mf());return e.copy=function(){return go(e,_6()).constant(e.constant())},bi.apply(e,arguments)}function hv(){var e=tv(mf());return e.copy=function(){return go(e,hv()).exponent(e.exponent())},bi.apply(e,arguments)}function DF(){return hv.apply(null,arguments).exponent(.5)}const Rd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hb,scaleDiverging:w6,scaleDivergingLog:N6,scaleDivergingPow:hv,scaleDivergingSqrt:DF,scaleDivergingSymlog:_6,scaleIdentity:r6,scaleImplicit:xg,scaleLinear:t6,scaleLog:a6,scaleOrdinal:Vb,scalePoint:wR,scalePow:rv,scaleQuantile:o6,scaleQuantize:l6,scaleRadial:i6,scaleSequential:b6,scaleSequentialLog:v6,scaleSequentialPow:uv,scaleSequentialQuantile:j6,scaleSequentialSqrt:MF,scaleSequentialSymlog:y6,scaleSqrt:x9,scaleSymlog:n6,scaleThreshold:c6,scaleTime:TF,scaleUtc:LF,tickFormat:e6},Symbol.toStringTag,{value:"Module"}));var Rc=e=>e.chartData,mv=ke([Rc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),fv=(e,t,s,a)=>a?mv(e):Rc(e);function Oc(e){if(Array.isArray(e)&&e.length===2){var[t,s]=e;if(Ns(t)&&Ns(s))return!0}return!1}function jw(e,t,s){return s?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function IF(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[s,a]=e,n,i;if(Ns(s))n=s;else if(typeof s=="function")return;if(Ns(a))i=a;else if(typeof a=="function")return;var o=[n,i];if(Oc(o))return o}}function RF(e,t,s){if(!(!s&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,s);if(Oc(a))return jw(a,t,s)}catch{}if(Array.isArray(e)&&e.length===2){var[n,i]=e,o,l;if(n==="auto")t!=null&&(o=Math.min(...t));else if(Ke(n))o=n;else if(typeof n=="function")try{t!=null&&(o=n(t==null?void 0:t[0]))}catch{}else if(typeof n=="string"&&lj.test(n)){var c=lj.exec(n);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Ke(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&cj.test(i)){var u=cj.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t==null?void 0:t[1];var f=[o,l];if(Oc(f))return t==null?f:jw(f,t,s)}}}var Fc=1e9,FF={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pv,yr=!0,Ja="[DecimalError] ",Qo=Ja+"Invalid argument: ",xv=Ja+"Exponent out of range: ",$c=Math.floor,$o=Math.pow,$F=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pa,rs=1e7,fr=7,S6=9007199254740991,Tm=$c(S6/fr),Ze={};Ze.absoluteValue=Ze.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ze.comparedTo=Ze.cmp=function(e){var t,s,a,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,n=e.d.length,t=0,s=a<n?a:n;t<s;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===n?0:a>n^i.s<0?1:-1};Ze.decimalPlaces=Ze.dp=function(){var e=this,t=e.d.length-1,s=(t-e.e)*fr;if(t=e.d[t],t)for(;t%10==0;t/=10)s--;return s<0?0:s};Ze.dividedBy=Ze.div=function(e){return di(this,new this.constructor(e))};Ze.dividedToIntegerBy=Ze.idiv=function(e){var t=this,s=t.constructor;return sr(di(t,new s(e),0,1),s.precision)};Ze.equals=Ze.eq=function(e){return!this.cmp(e)};Ze.exponent=function(){return Vr(this)};Ze.greaterThan=Ze.gt=function(e){return this.cmp(e)>0};Ze.greaterThanOrEqualTo=Ze.gte=function(e){return this.cmp(e)>=0};Ze.isInteger=Ze.isint=function(){return this.e>this.d.length-2};Ze.isNegative=Ze.isneg=function(){return this.s<0};Ze.isPositive=Ze.ispos=function(){return this.s>0};Ze.isZero=function(){return this.s===0};Ze.lessThan=Ze.lt=function(e){return this.cmp(e)<0};Ze.lessThanOrEqualTo=Ze.lte=function(e){return this.cmp(e)<1};Ze.logarithm=Ze.log=function(e){var t,s=this,a=s.constructor,n=a.precision,i=n+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Pa))throw Error(Ja+"NaN");if(s.s<1)throw Error(Ja+(s.s?"NaN":"-Infinity"));return s.eq(Pa)?new a(0):(yr=!1,t=di(iu(s,i),iu(e,i),i),yr=!0,sr(t,n))};Ze.minus=Ze.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?A6(t,e):P6(t,(e.s=-e.s,e))};Ze.modulo=Ze.mod=function(e){var t,s=this,a=s.constructor,n=a.precision;if(e=new a(e),!e.s)throw Error(Ja+"NaN");return s.s?(yr=!1,t=di(s,e,0,1).times(e),yr=!0,s.minus(t)):sr(new a(s),n)};Ze.naturalExponential=Ze.exp=function(){return C6(this)};Ze.naturalLogarithm=Ze.ln=function(){return iu(this)};Ze.negated=Ze.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ze.plus=Ze.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?P6(t,e):A6(t,(e.s=-e.s,e))};Ze.precision=Ze.sd=function(e){var t,s,a,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Qo+e);if(t=Vr(n)+1,a=n.d.length-1,s=a*fr+1,a=n.d[a],a){for(;a%10==0;a/=10)s--;for(a=n.d[0];a>=10;a/=10)s++}return e&&t>s?t:s};Ze.squareRoot=Ze.sqrt=function(){var e,t,s,a,n,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ja+"NaN")}for(e=Vr(l),yr=!1,n=Math.sqrt(+l),n==0||n==1/0?(t=Tn(l.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=$c((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(n.toString()),s=c.precision,n=o=s+3;;)if(i=a,a=i.plus(di(l,i,o+2)).times(.5),Tn(i.d).slice(0,o)===(t=Tn(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),n==o&&t=="4999"){if(sr(i,s+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return yr=!0,sr(a,s)};Ze.times=Ze.mul=function(e){var t,s,a,n,i,o,l,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,s=u.e+e.e,c=f.length,d=m.length,c<d&&(i=f,f=m,m=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,n=c+a;n>a;)l=i[n]+m[a]*f[n-a-1]+t,i[n--]=l%rs|0,t=l/rs|0;i[n]=(i[n]+t)%rs|0}for(;!i[--o];)i.pop();return t?++s:i.shift(),e.d=i,e.e=s,yr?sr(e,h.precision):e};Ze.toDecimalPlaces=Ze.todp=function(e,t){var s=this,a=s.constructor;return s=new a(s),e===void 0?s:(Rn(e,0,Fc),t===void 0?t=a.rounding:Rn(t,0,8),sr(s,e+Vr(s)+1,t))};Ze.toExponential=function(e,t){var s,a=this,n=a.constructor;return e===void 0?s=ol(a,!0):(Rn(e,0,Fc),t===void 0?t=n.rounding:Rn(t,0,8),a=sr(new n(a),e+1,t),s=ol(a,!0,e+1)),s};Ze.toFixed=function(e,t){var s,a,n=this,i=n.constructor;return e===void 0?ol(n):(Rn(e,0,Fc),t===void 0?t=i.rounding:Rn(t,0,8),a=sr(new i(n),e+Vr(n)+1,t),s=ol(a.abs(),!1,e+Vr(a)+1),n.isneg()&&!n.isZero()?"-"+s:s)};Ze.toInteger=Ze.toint=function(){var e=this,t=e.constructor;return sr(new t(e),Vr(e)+1,t.rounding)};Ze.toNumber=function(){return+this};Ze.toPower=Ze.pow=function(e){var t,s,a,n,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Pa);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ja+"Infinity");return l}if(l.eq(Pa))return l;if(a=c.precision,e.eq(Pa))return sr(l,a);if(t=e.e,s=e.d.length-1,o=t>=s,i=l.s,o){if((s=u<0?-u:u)<=S6){for(n=new c(Pa),t=Math.ceil(a/fr+4),yr=!1;s%2&&(n=n.times(l),Nw(n.d,t)),s=$c(s/2),s!==0;)l=l.times(l),Nw(l.d,t);return yr=!0,e.s<0?new c(Pa).div(n):sr(n,a)}}else if(i<0)throw Error(Ja+"NaN");return i=i<0&&e.d[Math.max(t,s)]&1?-1:1,l.s=1,yr=!1,n=e.times(iu(l,a+d)),yr=!0,n=C6(n),n.s=i,n};Ze.toPrecision=function(e,t){var s,a,n=this,i=n.constructor;return e===void 0?(s=Vr(n),a=ol(n,s<=i.toExpNeg||s>=i.toExpPos)):(Rn(e,1,Fc),t===void 0?t=i.rounding:Rn(t,0,8),n=sr(new i(n),e,t),s=Vr(n),a=ol(n,e<=s||s<=i.toExpNeg,e)),a};Ze.toSignificantDigits=Ze.tosd=function(e,t){var s=this,a=s.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Rn(e,1,Fc),t===void 0?t=a.rounding:Rn(t,0,8)),sr(new a(s),e,t)};Ze.toString=Ze.valueOf=Ze.val=Ze.toJSON=Ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Vr(e),s=e.constructor;return ol(e,t<=s.toExpNeg||t>=s.toExpPos)};function P6(e,t){var s,a,n,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),yr?sr(t,h):t;if(c=e.d,d=t.d,o=e.e,n=t.e,c=c.slice(),i=o-n,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,n=o,l=c.length),o=Math.ceil(h/fr),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),s=0;i;)s=(c[--i]=c[i]+d[i]+s)/rs|0,c[i]%=rs;for(s&&(c.unshift(s),++n),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=n,yr?sr(t,h):t}function Rn(e,t,s){if(e!==~~e||e<t||e>s)throw Error(Qo+e)}function Tn(e){var t,s,a,n=e.length-1,i="",o=e[0];if(n>0){for(i+=o,t=1;t<n;t++)a=e[t]+"",s=fr-a.length,s&&(i+=Hi(s)),i+=a;o=e[t],a=o+"",s=fr-a.length,s&&(i+=Hi(s))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var di=function(){function e(a,n){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*n+o,a[l]=i%rs|0,o=i/rs|0;return o&&a.unshift(o),a}function t(a,n,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=n[l]){c=a[l]>n[l]?1:-1;break}return c}function s(a,n,i){for(var o=0;i--;)a[i]-=o,o=a[i]<n[i]?1:0,a[i]=o*rs+a[i]-n[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,n,i,o){var l,c,d,u,h,f,m,p,v,g,y,N,S,C,M,D,L,A,I=a.constructor,H=a.s==n.s?1:-1,k=a.d,P=n.d;if(!a.s)return new I(a);if(!n.s)throw Error(Ja+"Division by zero");for(c=a.e-n.e,L=P.length,M=k.length,m=new I(H),p=m.d=[],d=0;P[d]==(k[d]||0);)++d;if(P[d]>(k[d]||0)&&--c,i==null?N=i=I.precision:o?N=i+(Vr(a)-Vr(n))+1:N=i,N<0)return new I(0);if(N=N/fr+2|0,d=0,L==1)for(u=0,P=P[0],N++;(d<M||u)&&N--;d++)S=u*rs+(k[d]||0),p[d]=S/P|0,u=S%P|0;else{for(u=rs/(P[0]+1)|0,u>1&&(P=e(P,u),k=e(k,u),L=P.length,M=k.length),C=L,v=k.slice(0,L),g=v.length;g<L;)v[g++]=0;A=P.slice(),A.unshift(0),D=P[0],P[1]>=rs/2&&++D;do u=0,l=t(P,v,L,g),l<0?(y=v[0],L!=g&&(y=y*rs+(v[1]||0)),u=y/D|0,u>1?(u>=rs&&(u=rs-1),h=e(P,u),f=h.length,g=v.length,l=t(h,v,f,g),l==1&&(u--,s(h,L<f?A:P,f))):(u==0&&(l=u=1),h=P.slice()),f=h.length,f<g&&h.unshift(0),s(v,h,g),l==-1&&(g=v.length,l=t(P,v,L,g),l<1&&(u++,s(v,L<g?A:P,g))),g=v.length):l===0&&(u++,v=[0]),p[d++]=u,l&&v[0]?v[g++]=k[C]||0:(v=[k[C]],g=1);while((C++<M||v[0]!==void 0)&&N--)}return p[0]||p.shift(),m.e=c,sr(m,o?i+Vr(m)+1:i)}}();function C6(e,t){var s,a,n,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(Vr(e)>16)throw Error(xv+Vr(e));if(!e.s)return new u(Pa);for(yr=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log($o(2,d))/Math.LN10*2+5|0,l+=a,s=n=i=new u(Pa),u.precision=l;;){if(n=sr(n.times(e),l),s=s.times(++c),o=i.plus(di(n,s,l)),Tn(o.d).slice(0,l)===Tn(i.d).slice(0,l)){for(;d--;)i=sr(i.times(i),l);return u.precision=h,t==null?(yr=!0,sr(i,h)):i}i=o}}function Vr(e){for(var t=e.e*fr,s=e.d[0];s>=10;s/=10)t++;return t}function Y0(e,t,s){if(t>e.LN10.sd())throw yr=!0,s&&(e.precision=s),Error(Ja+"LN10 precision limit exceeded");return sr(new e(e.LN10),t)}function Hi(e){for(var t="";e--;)t+="0";return t}function iu(e,t){var s,a,n,i,o,l,c,d,u,h=1,f=10,m=e,p=m.d,v=m.constructor,g=v.precision;if(m.s<1)throw Error(Ja+(m.s?"NaN":"-Infinity"));if(m.eq(Pa))return new v(0);if(t==null?(yr=!1,d=g):d=t,m.eq(10))return t==null&&(yr=!0),Y0(v,d);if(d+=f,v.precision=d,s=Tn(p),a=s.charAt(0),i=Vr(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&s.charAt(1)>3;)m=m.times(e),s=Tn(m.d),a=s.charAt(0),h++;i=Vr(m),a>1?(m=new v("0."+s),i++):m=new v(a+"."+s.slice(1))}else return c=Y0(v,d+2,g).times(i+""),m=iu(new v(a+"."+s.slice(1)),d-f).plus(c),v.precision=g,t==null?(yr=!0,sr(m,g)):m;for(l=o=m=di(m.minus(Pa),m.plus(Pa),d),u=sr(m.times(m),d),n=3;;){if(o=sr(o.times(u),d),c=l.plus(di(o,new v(n),d)),Tn(c.d).slice(0,d)===Tn(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Y0(v,d+2,g).times(i+""))),l=di(l,new v(h),d),v.precision=g,t==null?(yr=!0,sr(l,g)):l;l=c,n+=2}}function ww(e,t){var s,a,n;for((s=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(s<0&&(s=a),s+=+t.slice(a+1),t=t.substring(0,a)):s<0&&(s=t.length),a=0;t.charCodeAt(a)===48;)++a;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(a,n),t){if(n-=a,s=s-a-1,e.e=$c(s/fr),e.d=[],a=(s+1)%fr,s<0&&(a+=fr),a<n){for(a&&e.d.push(+t.slice(0,a)),n-=fr;a<n;)e.d.push(+t.slice(a,a+=fr));t=t.slice(a),a=fr-t.length}else a-=n;for(;a--;)t+="0";if(e.d.push(+t),yr&&(e.e>Tm||e.e<-Tm))throw Error(xv+s)}else e.s=0,e.e=0,e.d=[0];return e}function sr(e,t,s){var a,n,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=fr,n=t,d=h[u=0];else{if(u=Math.ceil((a+1)/fr),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;a%=fr,n=a-fr+o}if(s!==void 0&&(i=$o(10,o-n-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=s<4?(l||c)&&(s==0||s==(e.s<0?3:2)):l>5||l==5&&(s==4||c||s==6&&(a>0?n>0?d/$o(10,o-n):0:h[u-1])%10&1||s==(e.s<0?8:7))),t<1||!h[0])return c?(i=Vr(e),h.length=1,t=t-i-1,h[0]=$o(10,(fr-t%fr)%fr),e.e=$c(-t/fr)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(a==0?(h.length=u,i=1,u--):(h.length=u+1,i=$o(10,fr-a),h[u]=n>0?(d/$o(10,o-n)%$o(10,n)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==rs&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=rs)break;h[u--]=0,i=1}for(a=h.length;h[--a]===0;)h.pop();if(yr&&(e.e>Tm||e.e<-Tm))throw Error(xv+Vr(e));return e}function A6(e,t){var s,a,n,i,o,l,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),yr?sr(t,m):t;if(c=e.d,h=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(s=c,o=-o,l=h.length):(s=h,a=d,l=c.length),n=Math.max(Math.ceil(m/fr),l)+2,o>n&&(o=n,s.length=1),s.reverse(),n=o;n--;)s.push(0);s.reverse()}else{for(n=c.length,l=h.length,u=n<l,u&&(l=n),n=0;n<l;n++)if(c[n]!=h[n]){u=c[n]<h[n];break}o=0}for(u&&(s=c,c=h,h=s,t.s=-t.s),l=c.length,n=h.length-l;n>0;--n)c[l++]=0;for(n=h.length;n>o;){if(c[--n]<h[n]){for(i=n;i&&c[--i]===0;)c[i]=rs-1;--c[i],c[n]+=rs}c[n]-=h[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,yr?sr(t,m):t):new f(0)}function ol(e,t,s){var a,n=Vr(e),i=Tn(e.d),o=i.length;return t?(s&&(a=s-o)>0?i=i.charAt(0)+"."+i.slice(1)+Hi(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+Hi(-n-1)+i,s&&(a=s-o)>0&&(i+=Hi(a))):n>=o?(i+=Hi(n+1-o),s&&(a=s-n-1)>0&&(i=i+"."+Hi(a))):((a=n+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),s&&(a=s-o)>0&&(n+1===o&&(i+="."),i+=Hi(a))),e.s<0?"-"+i:i}function Nw(e,t){if(e.length>t)return e.length=t,!0}function k6(e){var t,s,a;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Qo+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return ww(o,i.toString())}else if(typeof i!="string")throw Error(Qo+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,$F.test(i))ww(o,i);else throw Error(Qo+i)}if(n.prototype=Ze,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=k6,n.config=n.set=qF,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(s=a[t++])||(e[s]=this[s]);return n.config(e),n}function qF(e){if(!e||typeof e!="object")throw Error(Ja+"Object expected");var t,s,a,n=["precision",1,Fc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((a=e[s=n[t]])!==void 0)if($c(a)===a&&a>=n[t+1]&&a<=n[t+2])this[s]=a;else throw Error(Qo+s+": "+a);if((a=e[s="LN10"])!==void 0)if(a==Math.LN10)this[s]=new this(a);else throw Error(Qo+s+": "+a);return this}var pv=k6(FF);Pa=new pv(1);const Wt=pv;var BF=e=>e,E6={},O6=e=>e===E6,_w=e=>function t(){return arguments.length===0||arguments.length===1&&O6(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},T6=(e,t)=>e===1?t:_w(function(){for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];var i=a.filter(o=>o!==E6).length;return i>=e?t(...a):T6(e-i,_w(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=a.map(u=>O6(u)?l.shift():u);return t(...d,...l)}))}),ff=e=>T6(e.length,e),vg=(e,t)=>{for(var s=[],a=e;a<t;++a)s[a-e]=a;return s},zF=ff((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(s=>t[s]).map(e)),UF=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];if(!s.length)return BF;var n=s.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},yg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),L6=e=>{var t=null,s=null;return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t&&n.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=n,s=e(...n)),s}};function M6(e){var t;return e===0?t=1:t=Math.floor(new Wt(e).abs().log(10).toNumber())+1,t}function D6(e,t,s){for(var a=new Wt(e),n=0,i=[];a.lt(t)&&n<1e5;)i.push(a.toNumber()),a=a.add(s),n++;return i}ff((e,t,s)=>{var a=+e,n=+t;return a+s*(n-a)});ff((e,t,s)=>{var a=t-+e;return a=a||1/0,(s-e)/a});ff((e,t,s)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(s-e)/a))});var I6=e=>{var[t,s]=e,[a,n]=[t,s];return t>s&&([a,n]=[s,t]),[a,n]},R6=(e,t,s)=>{if(e.lte(0))return new Wt(0);var a=M6(e.toNumber()),n=new Wt(10).pow(a),i=e.div(n),o=a!==1?.05:.1,l=new Wt(Math.ceil(i.div(o).toNumber())).add(s).mul(o),c=l.mul(n);return t?new Wt(c.toNumber()):new Wt(Math.ceil(c.toNumber()))},WF=(e,t,s)=>{var a=new Wt(1),n=new Wt(e);if(!n.isint()&&s){var i=Math.abs(e);i<1?(a=new Wt(10).pow(M6(e)-1),n=new Wt(Math.floor(n.div(a).toNumber())).mul(a)):i>1&&(n=new Wt(Math.floor(e)))}else e===0?n=new Wt(Math.floor((t-1)/2)):s||(n=new Wt(Math.floor(e)));var o=Math.floor((t-1)/2),l=UF(zF(c=>n.add(new Wt(c-o).mul(a)).toNumber()),vg);return l(0,t)},F6=function(t,s,a,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(a-1)))return{step:new Wt(0),tickMin:new Wt(0),tickMax:new Wt(0)};var o=R6(new Wt(s).sub(t).div(a-1),n,i),l;t<=0&&s>=0?l=new Wt(0):(l=new Wt(t).add(s).div(2),l=l.sub(new Wt(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new Wt(s).sub(l).div(o).toNumber()),u=c+d+1;return u>a?F6(t,s,a,n,i+1):(u<a&&(d=s>0?d+(a-u):d,c=s>0?c:c+(a-u)),{step:o,tickMin:l.sub(new Wt(c).mul(o)),tickMax:l.add(new Wt(d).mul(o))})};function VF(e){var[t,s]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,l]=I6([t,s]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...vg(0,a-1).map(()=>1/0)]:[...vg(0,a-1).map(()=>-1/0),l];return t>s?yg(c):c}if(o===l)return WF(o,a,n);var{step:d,tickMin:u,tickMax:h}=F6(o,l,i,n,0),f=D6(u,h.add(new Wt(.1).mul(d)),d);return t>s?yg(f):f}function HF(e,t){var[s,a]=e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=I6([s,a]);if(i===-1/0||o===1/0)return[s,a];if(i===o)return[i];var l=Math.max(t,2),c=R6(new Wt(o).sub(i).div(l-1),n,0),d=[...D6(new Wt(i),new Wt(o).sub(new Wt(.99).mul(c)),c),o];return s>a?yg(d):d}var GF=L6(VF),KF=L6(HF),$6=e=>e.rootProps.maxBarSize,YF=e=>e.rootProps.barGap,q6=e=>e.rootProps.barCategoryGap,JF=e=>e.rootProps.barSize,Nu=e=>e.rootProps.stackOffset,gv=e=>e.options.chartName,bv=e=>e.rootProps.syncId,B6=e=>e.rootProps.syncMethod,vv=e=>e.options.eventEmitter,si={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},_a={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},xf=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},XF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:si.angleAxisId,includeHidden:!1,name:void 0,reversed:si.reversed,scale:si.scale,tick:si.tick,tickCount:void 0,ticks:void 0,type:si.type,unit:void 0},QF={allowDataOverflow:_a.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_a.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_a.scale,tick:_a.tick,tickCount:_a.tickCount,ticks:void 0,type:_a.type,unit:void 0},ZF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:si.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:si.scale,tick:si.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},e$={allowDataOverflow:_a.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_a.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_a.scale,tick:_a.tick,tickCount:_a.tickCount,ticks:void 0,type:"category",unit:void 0},yv=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?ZF:XF,jv=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?e$:QF,pf=e=>e.polarOptions,wv=ke([fo,xo,ms],P3),z6=ke([pf,wv],(e,t)=>{if(e!=null)return Gs(e.innerRadius,t,0)}),U6=ke([pf,wv],(e,t)=>{if(e!=null)return Gs(e.outerRadius,t,t*.8)}),t$=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:s}=e;return[t,s]},W6=ke([pf],t$);ke([yv,W6],xf);var V6=ke([wv,z6,U6],(e,t,s)=>{if(!(e==null||t==null||s==null))return[t,s]});ke([jv,V6],xf);var r$=ke([$t,pf,z6,U6,fo,xo],(e,t,s,a,n,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||s==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Gs(o,n,n/2),cy:Gs(l,i,i/2),innerRadius:s,outerRadius:a,startAngle:c,endAngle:d,clockWise:!1}}}),Rr=(e,t)=>t,_u=(e,t,s)=>s;function Sw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Lm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(s),!0).forEach(function(a){s$(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sw(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function s$(e,t,s){return(t=a$(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a$(e){var t=n$(e,"string");return typeof t=="symbol"?t:t+""}function n$(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jg=[0,"auto"],wa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},vi=(e,t)=>{var s=e.cartesianAxis.xAxis[t];return s??wa},Na={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:jg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:sf},bo=(e,t)=>{var s=e.cartesianAxis.yAxis[t];return s??Na},i$={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Nv=(e,t)=>{var s=e.cartesianAxis.zAxis[t];return s??i$},Fr=(e,t,s)=>{switch(t){case"xAxis":return vi(e,s);case"yAxis":return bo(e,s);case"zAxis":return Nv(e,s);case"angleAxis":return yv(e,s);case"radiusAxis":return jv(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},o$=(e,t,s)=>{switch(t){case"xAxis":return vi(e,s);case"yAxis":return bo(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},Su=(e,t,s)=>{switch(t){case"xAxis":return vi(e,s);case"yAxis":return bo(e,s);case"angleAxis":return yv(e,s);case"radiusAxis":return jv(e,s);default:throw new Error("Unexpected axis type: ".concat(t))}},H6=e=>e.graphicalItems.countOfBars>0;function _v(e,t){return s=>{switch(e){case"xAxis":return"xAxisId"in s&&s.xAxisId===t;case"yAxis":return"yAxisId"in s&&s.yAxisId===t;case"zAxis":return"zAxisId"in s&&s.zAxisId===t;case"angleAxis":return"angleAxisId"in s&&s.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in s&&s.radiusAxisId===t;default:return!1}}}var gf=e=>e.graphicalItems.cartesianItems,l$=ke([Rr,_u],_v),Sv=(e,t,s)=>e.filter(s).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),Pu=ke([gf,Fr,l$],Sv),G6=e=>e.filter(t=>t.stackId===void 0),c$=ke([Pu],G6),Pv=e=>e.map(t=>t.data).filter(Boolean).flat(1),d$=ke([Pu],Pv),Cv=(e,t)=>{var{chartData:s=[],dataStartIndex:a,dataEndIndex:n}=t;return e.length>0?e:s.slice(a,n+1)},bf=ke([d$,fv],Cv),Av=(e,t,s)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:xr(a,t.dataKey)})):s.length>0?s.map(a=>a.dataKey).flatMap(a=>e.map(n=>({value:xr(n,a)}))):e.map(a=>({value:a})),vf=ke([bf,Fr,Pu],Av);function K6(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function xl(e){return e.filter(t=>In(t)||t instanceof Date).map(Number).filter(t=>da(t)===!1)}function u$(e,t,s){return!s||typeof t!="number"||da(t)?[]:s.length?xl(s.flatMap(a=>{var n=xr(e,a.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!Ns(i)||!Ns(o)))return[t-i,t+o]})):[]}var Y6=(e,t,s)=>{var a={},n=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),a);return Object.fromEntries(Object.entries(n).map(i=>{var[o,l]=i,c=l.map(d=>d.dataKey);return[o,{stackedData:uD(e,c,s),graphicalItems:l}]}))},ou=ke([bf,Pu,Nu],Y6),J6=(e,t,s)=>{var{dataStartIndex:a,dataEndIndex:n}=t;if(s!=="zAxis"){var i=xD(e,a,n);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},h$=ke([ou,Rc,Rr],J6),X6=(e,t,s,a)=>s.length>0?e.flatMap(n=>s.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>K6(a,u)),d=xr(n,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:u$(n,d,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:xr(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})),m$=ke(bf,Fr,c$,Rr,X6);function f$(e){var{value:t}=e;if(In(t)||t instanceof Date)return t}var x$=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),s=xl(t);if(s.length!==0)return[Math.min(...s),Math.max(...s)]},p$=(e,t,s)=>{var a=e.map(f$).filter(n=>n!=null);return s&&(t.dataKey==null||t.allowDuplicatedCategory&&N4(a))?W3(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},kv=e=>{var t;if(e==null||!("domain"in e))return jg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var s=xl(e.ticks);return[Math.min(...s),Math.max(...s)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:jg},Ev=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];var n=s.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},Q6=e=>e.referenceElements.dots,qc=(e,t,s)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===s:a.yAxisId===s),g$=ke([Q6,Rr,_u],qc),Z6=e=>e.referenceElements.areas,b$=ke([Z6,Rr,_u],qc),e_=e=>e.referenceElements.lines,v$=ke([e_,Rr,_u],qc),t_=(e,t)=>{var s=xl(e.map(a=>t==="xAxis"?a.x:a.y));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},y$=ke(g$,Rr,t_),r_=(e,t)=>{var s=xl(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},j$=ke([b$,Rr],r_),s_=(e,t)=>{var s=xl(e.map(a=>t==="xAxis"?a.x:a.y));if(s.length!==0)return[Math.min(...s),Math.max(...s)]},w$=ke(v$,Rr,s_),N$=ke(y$,w$,j$,(e,t,s)=>Ev(e,s,t)),a_=ke([Fr],kv),Ov=(e,t,s,a,n)=>{var i=IF(t,e.allowDataOverflow);return i??RF(t,Ev(s,n,x$(a)),e.allowDataOverflow)},_$=ke([Fr,a_,h$,m$,N$],Ov),S$=[0,1],Tv=(e,t,s,a,n,i,o)=>{if(!(e==null||s==null||s.length===0)){var{dataKey:l,type:c}=e,d=gi(t,i);return d&&l==null?W3(0,s.length):c==="category"?p$(a,e,d):n==="expand"?S$:o}},Lv=ke([Fr,$t,bf,vf,Nu,Rr,_$],Tv),n_=(e,t,s,a,n)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&n==="radiusAxis"?"band":t==="radial"&&n==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!s)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(fu(i));return l in Rd?l:"point"}}},Bc=ke([Fr,$t,H6,gv,Rr],n_);function P$(e){if(e!=null){if(e in Rd)return Rd[e]();var t="scale".concat(fu(e));if(t in Rd)return Rd[t]()}}function Mv(e,t,s,a){if(!(s==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(s).range(a);var n=P$(t);if(n!=null){var i=n.domain(s).range(a);return iD(i),i}}}var Dv=(e,t,s)=>{var a=kv(t);if(!(s!=="auto"&&s!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Oc(e))return GF(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Oc(e))return KF(e,t.tickCount,t.allowDecimals)}},Iv=ke([Lv,Su,Bc],Dv),Rv=(e,t,s,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Oc(t)&&Array.isArray(s)&&s.length>0){var n=t[0],i=s[0],o=t[1],l=s[s.length-1];return[Math.min(n,i),Math.max(o,l)]}return t},C$=ke([Fr,Lv,Iv,Rr],Rv),A$=ke(vf,Fr,(e,t)=>{if(!(!t||t.type!=="number")){var s=1/0,a=Array.from(xl(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var n=a[a.length-1]-a[0];if(n===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];s=Math.min(s,o)}return s/n}}),i_=ke(A$,$t,q6,ms,(e,t,s,a)=>a,(e,t,s,a,n)=>{if(!Ns(e))return 0;var i=t==="vertical"?a.height:a.width;if(n==="gap")return e*i/2;if(n==="no-gap"){var o=Gs(s,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),k$=(e,t)=>{var s=vi(e,t);return s==null||typeof s.padding!="string"?0:i_(e,"xAxis",t,s.padding)},E$=(e,t)=>{var s=bo(e,t);return s==null||typeof s.padding!="string"?0:i_(e,"yAxis",t,s.padding)},O$=ke(vi,k$,(e,t)=>{var s,a;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:t,right:t}:{left:((s=n.left)!==null&&s!==void 0?s:0)+t,right:((a=n.right)!==null&&a!==void 0?a:0)+t}}),T$=ke(bo,E$,(e,t)=>{var s,a;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:t,bottom:t}:{top:((s=n.top)!==null&&s!==void 0?s:0)+t,bottom:((a=n.bottom)!==null&&a!==void 0?a:0)+t}}),L$=ke([ms,O$,nf,af,(e,t,s)=>s],(e,t,s,a,n)=>{var{padding:i}=a;return n?[i.left,s.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),M$=ke([ms,$t,T$,nf,af,(e,t,s)=>s],(e,t,s,a,n,i)=>{var{padding:o}=n;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-s.bottom,e.top+s.top]:[e.top+s.top,e.top+e.height-s.bottom]}),Cu=(e,t,s,a)=>{var n;switch(t){case"xAxis":return L$(e,s,a);case"yAxis":return M$(e,s,a);case"zAxis":return(n=Nv(e,s))===null||n===void 0?void 0:n.range;case"angleAxis":return W6(e);case"radiusAxis":return V6(e,s);default:return}},o_=ke([Fr,Cu],xf),zc=ke([Fr,Bc,C$,o_],Mv);ke(Pu,Rr,(e,t)=>e.flatMap(s=>{var a;return(a=s.errorBars)!==null&&a!==void 0?a:[]}).filter(s=>K6(t,s)));function l_(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var yf=(e,t)=>t,jf=(e,t,s)=>s,D$=ke(Rb,yf,jf,(e,t,s)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===s).sort(l_)),I$=ke(Fb,yf,jf,(e,t,s)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===s).sort(l_)),c_=(e,t)=>({width:e.width,height:t.height}),R$=(e,t)=>{var s=typeof t.width=="number"?t.width:sf;return{width:s,height:e.height}},d_=ke(ms,vi,c_),F$=(e,t,s)=>{switch(t){case"top":return e.top;case"bottom":return s-e.bottom;default:return 0}},$$=(e,t,s)=>{switch(t){case"left":return e.left;case"right":return s-e.right;default:return 0}},q$=ke(xo,ms,D$,yf,jf,(e,t,s,a,n)=>{var i={},o;return s.forEach(l=>{var c=c_(t,l);o==null&&(o=F$(t,a,e));var d=a==="top"&&!n||a==="bottom"&&n;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),B$=ke(fo,ms,I$,yf,jf,(e,t,s,a,n)=>{var i={},o;return s.forEach(l=>{var c=R$(t,l);o==null&&(o=$$(t,a,e));var d=a==="left"&&!n||a==="right"&&n;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),z$=(e,t)=>{var s=ms(e),a=vi(e,t);if(a!=null){var n=q$(e,a.orientation,a.mirror),i=n[t];return i==null?{x:s.left,y:0}:{x:s.left,y:i}}},U$=(e,t)=>{var s=ms(e),a=bo(e,t);if(a!=null){var n=B$(e,a.orientation,a.mirror),i=n[t];return i==null?{x:0,y:s.top}:{x:i,y:s.top}}},u_=ke(ms,bo,(e,t)=>{var s=typeof t.width=="number"?t.width:sf;return{width:s,height:e.height}}),Pw=(e,t,s)=>{switch(t){case"xAxis":return d_(e,s).width;case"yAxis":return u_(e,s).height;default:return}},h_=(e,t,s,a)=>{if(s!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=s,l=gi(e,a),c=t.map(d=>d.value);if(o&&l&&i==="category"&&n&&N4(c))return c}},Fv=ke([$t,vf,Fr,Rr],h_),m_=(e,t,s,a)=>{if(!(s==null||s.dataKey==null)){var{type:n,scale:i}=s,o=gi(e,a);if(o&&(n==="number"||i!=="auto"))return t.map(l=>l.value)}},$v=ke([$t,vf,Su,Rr],m_),Cw=ke([$t,o$,Bc,zc,Fv,$v,Cu,Iv,Rr],(e,t,s,a,n,i,o,l,c)=>{if(t==null)return null;var d=gi(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:n,isCategorical:d,niceTicks:l,range:o,realScaleType:s,scale:a}}),W$=(e,t,s,a,n,i,o,l,c)=>{if(!(t==null||a==null)){var d=gi(e,c),{type:u,ticks:h,tickCount:f}=t,m=s==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,p=u==="category"&&a.bandwidth?a.bandwidth()/m:0;p=c==="angleAxis"&&i!=null&&i.length>=2?cs(i[0]-i[1])*2*p:p;var v=h||n;if(v){var g=v.map((y,N)=>{var S=o?o.indexOf(y):y;return{index:N,coordinate:a(S)+p,value:y,offset:p}});return g.filter(y=>!da(y.coordinate))}return d&&l?l.map((y,N)=>({coordinate:a(y)+p,value:y,index:N,offset:p})):a.ticks?a.ticks(f).map(y=>({coordinate:a(y)+p,value:y,offset:p})):a.domain().map((y,N)=>({coordinate:a(y)+p,value:o?o[y]:y,index:N,offset:p}))}},f_=ke([$t,Su,Bc,zc,Iv,Cu,Fv,$v,Rr],W$),V$=(e,t,s,a,n,i,o)=>{if(!(t==null||s==null||a==null||a[0]===a[1])){var l=gi(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&(a==null?void 0:a.length)>=2?cs(a[0]-a[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:s(u)+d,value:u,index:h,offset:d})):s.ticks?s.ticks(c).map(u=>({coordinate:s(u)+d,value:u,offset:d})):s.domain().map((u,h)=>({coordinate:s(u)+d,value:n?n[u]:u,index:h,offset:d}))}},lo=ke([$t,Su,zc,Cu,Fv,$v,Rr],V$),Fn=ke(Fr,zc,(e,t)=>{if(!(e==null||t==null))return Lm(Lm({},e),{},{scale:t})}),H$=ke([Fr,Bc,Lv,o_],Mv);ke((e,t,s)=>Nv(e,s),H$,(e,t)=>{if(!(e==null||t==null))return Lm(Lm({},e),{},{scale:t})});var G$=ke([$t,Rb,Fb],(e,t,s)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return s.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),x_=e=>e.options.defaultTooltipEventType,p_=e=>e.options.validateTooltipEventTypes;function g_(e,t,s){if(e==null)return t;var a=e?"axis":"item";return s==null?t:s.includes(a)?a:t}function qv(e,t){var s=x_(e),a=p_(e);return g_(t,s,a)}function K$(e){return rt(t=>qv(t,e))}var b_=(e,t)=>{var s,a=Number(t);if(!(da(a)||t==null))return a>=0?e==null||(s=e[a])===null||s===void 0?void 0:s.value:void 0},Y$=e=>e.tooltip.settings,Yi={active:!1,index:null,dataKey:void 0,coordinate:void 0},J$={itemInteraction:{click:Yi,hover:Yi},axisInteraction:{click:Yi,hover:Yi},keyboardInteraction:Yi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},v_=Xa({name:"tooltip",initialState:J$,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var s=eo(e).tooltipItemPayloads.indexOf(t.payload);s>-1&&e.tooltipItemPayloads.splice(s,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:X$,removeTooltipEntrySettings:Q$,setTooltipSettingsState:Z$,setActiveMouseOverItemIndex:y_,mouseLeaveItem:eq,mouseLeaveChart:j_,setActiveClickItemIndex:tq,setMouseOverAxisIndex:w_,setMouseClickAxisIndex:rq,setSyncInteraction:wg,setKeyboardInteraction:Ng}=v_.actions,sq=v_.reducer;function Aw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Rh(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(s),!0).forEach(function(a){aq(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Aw(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function aq(e,t,s){return(t=nq(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function nq(e){var t=iq(e,"string");return typeof t=="symbol"?t:t+""}function iq(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oq(e,t,s){return t==="axis"?s==="click"?e.axisInteraction.click:e.axisInteraction.hover:s==="click"?e.itemInteraction.click:e.itemInteraction.hover}function lq(e){return e.index!=null}var N_=(e,t,s,a)=>{if(t==null)return Yi;var n=oq(e,t,s);if(n==null)return Yi;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(lq(n)){if(i)return Rh(Rh({},n),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return Rh(Rh({},Yi),{},{coordinate:n.coordinate})},Bv=(e,t)=>{var s=e==null?void 0:e.index;if(s==null)return null;var a=Number(s);if(!Ns(a))return s;var n=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(n,Math.min(a,i)))},__=(e,t,s,a,n,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=n==null?void 0:n[Number(i)];if(u)switch(s){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},S_=(e,t,s,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return s==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},wf=e=>e.options.tooltipPayloadSearcher,Uc=e=>e.tooltip,xs=e=>{var t=$t(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Wc=e=>e.tooltip.settings.axisId,Rs=e=>{var t=xs(e),s=Wc(e);return Su(e,t,s)},zv=ke([Rs,$t,H6,gv,xs],n_),cq=ke([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),dq=ke([xs,Wc],_v),Nf=ke([cq,Rs,dq],Sv),uq=ke([Nf],Pv),pl=ke([uq,Rc],Cv),Uv=ke([pl,Rs,Nf],Av),hq=ke([Rs],kv),mq=ke([pl,Nf,Nu],Y6),fq=ke([mq,Rc,xs],J6),xq=ke([Nf],G6),pq=ke([pl,Rs,xq,xs],X6),gq=ke([Q6,xs,Wc],qc),bq=ke([gq,xs],t_),vq=ke([Z6,xs,Wc],qc),yq=ke([vq,xs],r_),jq=ke([e_,xs,Wc],qc),wq=ke([jq,xs],s_),Nq=ke([bq,wq,yq],Ev),_q=ke([Rs,hq,fq,pq,Nq],Ov),P_=ke([Rs,$t,pl,Uv,Nu,xs,_q],Tv),Sq=ke([P_,Rs,zv],Dv),Pq=ke([Rs,P_,Sq,xs],Rv),C_=e=>{var t=xs(e),s=Wc(e),a=!1;return Cu(e,t,s,a)},A_=ke([Rs,C_],xf),k_=ke([Rs,zv,Pq,A_],Mv),Cq=ke([$t,Uv,Rs,xs],h_),Aq=ke([$t,Uv,Rs,xs],m_),kq=(e,t,s,a,n,i,o,l)=>{if(t){var{type:c}=t,d=gi(e,l);if(a){var u=s==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,h=c==="category"&&a.bandwidth?a.bandwidth()/u:0;return h=l==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?cs(n[0]-n[1])*2*h:h,d&&o?o.map((f,m)=>({coordinate:a(f)+h,value:f,index:m,offset:h})):a.domain().map((f,m)=>({coordinate:a(f)+h,value:i?i[f]:f,index:m,offset:h}))}}},yi=ke([$t,Rs,zv,k_,C_,Cq,Aq,xs],kq),E_=ke([x_,p_,Y$],(e,t,s)=>g_(s.shared,e,t)),O_=e=>e.tooltip.settings.trigger,Wv=e=>e.tooltip.settings.defaultIndex,_f=ke([Uc,E_,O_,Wv],N_),ll=ke([_f,pl],Bv),T_=ke([yi,ll],b_),L_=ke([_f],e=>{if(e)return e.dataKey}),Eq=ke([Uc,E_,O_,Wv],S_),Oq=ke([fo,xo,$t,ms,yi,Wv,Eq,wf],__),Tq=ke([_f,Oq],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Lq=ke([_f],e=>e.active);function kw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ew(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?kw(Object(s),!0).forEach(function(a){Mq(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kw(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Mq(e,t,s){return(t=Dq(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Dq(e){var t=Iq(e,"string");return typeof t=="symbol"?t:t+""}function Iq(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M_=()=>rt(Rs),Rq=()=>{var e=M_(),t=rt(yi),s=rt(k_);return eu(Ew(Ew({},e),{},{scale:s}),t)};function Ow(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Tw(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(s),!0).forEach(function(a){Fq(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ow(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Fq(e,t,s){return(t=$q(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function $q(e){var t=qq(e,"string");return typeof t=="symbol"?t:t+""}function qq(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D_=()=>rt(gv),Vv=(e,t)=>t,I_=(e,t,s)=>s,Hv=(e,t,s,a)=>a;function Bq(e,t,s){return Array.isArray(e)&&e&&t+s!==0?e.slice(t,s+1):e}var zq=ke(yi,e=>Jm(e,t=>t.coordinate)),Gv=ke([Uc,Vv,I_,Hv],N_),R_=ke([Gv,pl],Bv),Uq=(e,t,s)=>{if(t!=null){var a=Uc(e);return t==="axis"?s==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:s==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},F_=ke([Uc,Vv,I_,Hv],S_),Mm=ke([fo,xo,$t,ms,yi,Hv,F_,wf],__),Wq=ke([Gv,Mm],(e,t)=>{var s;return(s=e.coordinate)!==null&&s!==void 0?s:t}),$_=ke(yi,R_,b_);function Vq(e,t){return e??t}var Hq=(e,t,s,a,n,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=s,h=[];return e.reduce((f,m)=>{var p,{dataDefinedOnItem:v,settings:g}=m,y=Vq(v,l),N=Bq(y,d,u),S=(p=g==null?void 0:g.dataKey)!==null&&p!==void 0?p:a==null?void 0:a.dataKey,C=g==null?void 0:g.nameKey,M;if(a!=null&&a.dataKey&&!(a!=null&&a.allowDuplicatedCategory)&&Array.isArray(N)&&o==="axis"?M=xb(N,a.dataKey,n):M=i(N,t,c,C),Array.isArray(M))M.forEach(L=>{var A=Tw(Tw({},g),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});f.push(dj({tooltipEntrySettings:A,dataKey:L.dataKey,payload:L.payload,value:xr(L.payload,L.dataKey),name:L.name}))});else{var D;f.push(dj({tooltipEntrySettings:g,dataKey:S,payload:M,value:xr(M,S),name:(D=xr(M,C))!==null&&D!==void 0?D:g==null?void 0:g.name}))}return f},h)}},Gq=ke([F_,R_,Rc,Rs,$_,wf,Vv],Hq),Kq=ke([Gv],e=>({isActive:e.active,activeIndex:e.index})),Yq=(e,t,s,a,n,i,o,l)=>{if(!(!e||!t||!a||!n||!i)){var c=pD(e.chartX,e.chartY,t,s,l);if(c){var d=bD(c,t),u=aD(d,o,i,a,n),h=gD(t,i,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_g.apply(null,arguments)}function Lw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Fh(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Lw(Object(s),!0).forEach(function(a){Jq(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Lw(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Jq(e,t,s){return(t=Xq(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Xq(e){var t=Qq(e,"string");return typeof t=="symbol"?t:t+""}function Qq(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zq(e){var{coordinate:t,payload:s,index:a,offset:n,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=s,f=a;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var m,p;if(d==="ScatterChart")m=u,p=xI;else if(d==="BarChart")m=pI(o,u,n,i),p=q3;else if(o==="radial"){var{cx:v,cy:g,radius:y,startAngle:N,endAngle:S}=B3(u);m={cx:v,cy:g,startAngle:N,endAngle:S,innerRadius:y,outerRadius:y},p=U3}else m={points:rR(o,u,n)},p=Vd;var C=typeof l=="object"&&"className"in l?l.className:void 0,M=Fh(Fh(Fh(Fh({stroke:"#ccc",pointerEvents:"none"},n),m),At(l,!1)),{},{payload:h,payloadIndex:f,className:Lt("recharts-tooltip-cursor",C)});return j.isValidElement(l)?j.cloneElement(l,M):j.createElement(p,M)}function eB(e){var t=Rq(),s=bu(),a=of(),n=D_();return j.createElement(Zq,_g({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:s,layout:a,tooltipAxisBandSize:t,chartName:n}))}var q_=j.createContext(null),tB=()=>j.useContext(q_),J0={exports:{}},Mw;function rB(){return Mw||(Mw=1,function(e){var t=Object.prototype.hasOwnProperty,s="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(s=!1));function n(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new n(u,h||c,f),p=s?s+d:d;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],m]:c._events[p].push(m):(c._events[p]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=s?s+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,p=new Array(m);f<m;f++)p[f]=h[f].fn;return p},l.prototype.listenerCount=function(d){var u=s?s+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,m,p){var v=s?s+d:d;if(!this._events[v])return!1;var g=this._events[v],y=arguments.length,N,S;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,f),!0;case 5:return g.fn.call(g.context,u,h,f,m),!0;case 6:return g.fn.call(g.context,u,h,f,m,p),!0}for(S=1,N=new Array(y-1);S<y;S++)N[S-1]=arguments[S];g.fn.apply(g.context,N)}else{var C=g.length,M;for(S=0;S<C;S++)switch(g[S].once&&this.removeListener(d,g[S].fn,void 0,!0),y){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,u);break;case 3:g[S].fn.call(g[S].context,u,h);break;case 4:g[S].fn.call(g[S].context,u,h,f);break;default:if(!N)for(M=1,N=new Array(y-1);M<y;M++)N[M-1]=arguments[M];g[S].fn.apply(g[S].context,N)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var m=s?s+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===u&&(!f||p.once)&&(!h||p.context===h)&&o(this,m);else{for(var v=0,g=[],y=p.length;v<y;v++)(p[v].fn!==u||f&&!p[v].once||h&&p[v].context!==h)&&g.push(p[v]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=s?s+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,e.exports=l}(J0)),J0.exports}var sB=rB();const aB=bn(sB);var lu=new aB,Sg="recharts.syncEvent.tooltip",Dw="recharts.syncEvent.brush";function Kv(e,t){if(t){var s=Number.parseInt(t,10);if(!da(s))return e==null?void 0:e[s]}}var nB={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},B_=Xa({name:"options",initialState:nB,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),iB=B_.reducer,{createEventEmitter:oB}=B_.actions;function lB(e){return e.tooltip.syncInteraction}var cB={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},z_=Xa({name:"chartData",initialState:cB,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:s,endIndex:a}=t.payload;s!=null&&(e.dataStartIndex=s),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:Iw,setDataStartEndIndexes:dB,setComputedData:iJ}=z_.actions,uB=z_.reducer,U_=()=>{};function hB(){var e=rt(bv),t=rt(vv),s=jr(),a=rt(B6),n=rt(yi),i=of(),o=$b(),l=rt(c=>c.rootProps.className);j.useEffect(()=>{if(e==null)return U_;var c=(d,u,h)=>{if(t!==h&&e===d){if(a==="index"){s(u);return}if(n!=null){var f;if(typeof a=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},p=a(n,m);f=n[p]}else a==="value"&&(f=n.find(D=>String(D.value)===u.payload.label));var{coordinate:v}=u.payload;if(f==null||u.payload.active===!1||v==null||o==null){s(wg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:g,y}=v,N=Math.min(g,o.x+o.width),S=Math.min(y,o.y+o.height),C={x:i==="horizontal"?f.coordinate:N,y:i==="horizontal"?S:f.coordinate},M=wg({active:u.payload.active,coordinate:C,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});s(M)}}};return lu.on(Sg,c),()=>{lu.off(Sg,c)}},[l,s,t,e,a,n,i,o])}function mB(){var e=rt(bv),t=rt(vv),s=jr();j.useEffect(()=>{if(e==null)return U_;var a=(n,i,o)=>{t!==o&&e===n&&s(dB(i))};return lu.on(Dw,a),()=>{lu.off(Dw,a)}},[s,t,e])}function fB(){var e=jr();j.useEffect(()=>{e(oB())},[e]),hB(),mB()}function xB(e,t,s,a,n,i){var o=rt(f=>Uq(f,e,t)),l=rt(vv),c=rt(bv),d=rt(B6),u=rt(lB),h=u==null?void 0:u.active;j.useEffect(()=>{if(!h&&c!=null&&l!=null){var f=wg({active:i,coordinate:s,dataKey:o,index:n,label:typeof a=="number"?String(a):a});lu.emit(Sg,c,f,l)}},[h,s,o,n,a,l,c,d,i])}function Rw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Fw(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Rw(Object(s),!0).forEach(function(a){pB(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Rw(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function pB(e,t,s){return(t=gB(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function gB(e){var t=bB(e,"string");return typeof t=="symbol"?t:t+""}function bB(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vB(e){return e.dataKey}function yB(e,t){return j.isValidElement(e)?j.cloneElement(e,t):typeof e=="function"?j.createElement(e,t):j.createElement(GD,t)}var $w=[],jB={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!hl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Yv(e){var t=Qa(e,jB),{active:s,allowEscapeViewBox:a,animationDuration:n,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:m,wrapperStyle:p,cursor:v,shared:g,trigger:y,defaultIndex:N,portal:S,axisId:C}=t,M=jr(),D=typeof N=="number"?String(N):N;j.useEffect(()=>{M(Z$({shared:g,trigger:y,axisId:C,active:s,defaultIndex:D}))},[M,g,y,C,s,D]);var L=$b(),A=I3(),I=K$(g),{activeIndex:H,isActive:k}=rt(te=>Kq(te,I,y,D)),P=rt(te=>Gq(te,I,y,D)),O=rt(te=>$_(te,I,y,D)),$=rt(te=>Wq(te,I,y,D)),V=P,T=tB(),F=s??k,[z,se]=t3([V,F]),Y=I==="axis"?O:void 0;xB(I,y,$,Y,H,F);var _e=S??T;if(_e==null)return null;var R=V??$w;F||(R=$w),l&&R.length&&(R=J4(V.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),u,vB));var Q=R.length>0,re=j.createElement(eI,{allowEscapeViewBox:a,animationDuration:n,animationEasing:i,isAnimationActive:c,active:F,coordinate:$,hasPayload:Q,offset:d,position:h,reverseDirection:f,useTranslate3d:m,viewBox:L,wrapperStyle:p,lastBoundingBox:z,innerRef:se,hasPortalFromProps:!!S},yB(o,Fw(Fw({},t),{},{payload:R,label:Y,active:F,coordinate:$,accessibilityLayer:A})));return j.createElement(j.Fragment,null,w5.createPortal(re,_e),F&&j.createElement(eB,{cursor:v,tooltipEventType:I,coordinate:$,payload:V,index:H}))}var X0={},Q0={},Z0={},qw;function wB(){return qw||(qw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s,a,{signal:n,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(s.apply(o,l),o=void 0,l=null)},h=()=>{d&&u(),v()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},a)},p=()=>{f!==null&&(clearTimeout(f),f=null)},v=()=>{p(),o=void 0,l=null},g=()=>{p(),u()},y=function(...N){if(n!=null&&n.aborted)return;o=this,l=N;const S=f==null;m(),c&&S&&u()};return y.schedule=m,y.cancel=v,y.flush=g,n==null||n.addEventListener("abort",v,{once:!0}),y}e.debounce=t}(Z0)),Z0}var Bw;function NB(){return Bw||(Bw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wB();function s(a,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,h=null;const f=t.debounce(function(...v){u=a.apply(this,v),h=null},n,{edges:d}),m=function(...v){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(u=a.apply(this,v),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,v),u)},p=()=>(f.flush(),u);return m.cancel=f.cancel,m.flush=p,m}e.debounce=s}(Q0)),Q0}var zw;function _B(){return zw||(zw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NB();function s(a,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,n,{leading:o,trailing:l,maxWait:n})}e.throttle=s}(X0)),X0}var ep,Uw;function SB(){return Uw||(Uw=1,ep=_B().throttle),ep}var PB=SB();const CB=bn(PB);var Hd=function(t,s){for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i]};function Ww(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function tp(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(s),!0).forEach(function(a){AB(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ww(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function AB(e,t,s){return(t=kB(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kB(e){var t=EB(e,"string");return typeof t=="symbol"?t:t+""}function EB(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jv=j.forwardRef((e,t)=>{var{aspect:s,initialDimension:a={width:-1,height:-1},width:n="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:m,style:p={}}=e,v=j.useRef(null),g=j.useRef();g.current=m,j.useImperativeHandle(t,()=>v.current);var[y,N]=j.useState({containerWidth:a.width,containerHeight:a.height}),S=j.useCallback((M,D)=>{N(L=>{var A=Math.round(M),I=Math.round(D);return L.containerWidth===A&&L.containerHeight===I?L:{containerWidth:A,containerHeight:I}})},[]);j.useEffect(()=>{var M=I=>{var H,{width:k,height:P}=I[0].contentRect;S(k,P),(H=g.current)===null||H===void 0||H.call(g,k,P)};u>0&&(M=CB(M,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(M),{width:L,height:A}=v.current.getBoundingClientRect();return S(L,A),D.observe(v.current),()=>{D.disconnect()}},[S,u]);var C=j.useMemo(()=>{var{containerWidth:M,containerHeight:D}=y;if(M<0||D<0)return null;Hd(Uo(n)||Uo(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,i),Hd(!s||s>0,"The aspect(%s) must be greater than zero.",s);var L=Uo(n)?M:n,A=Uo(i)?D:i;return s&&s>0&&(L?A=L/s:A&&(L=A*s),c&&A>c&&(A=c)),Hd(L>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,A,n,i,o,l,s),j.Children.map(d,I=>j.cloneElement(I,{width:L,height:A,style:tp({height:"100%",width:"100%",maxHeight:A,maxWidth:L},I.props.style)}))},[s,d,i,c,l,o,y,n]);return j.createElement("div",{id:h?"".concat(h):void 0,className:Lt("recharts-responsive-container",f),style:tp(tp({},p),{},{width:n,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:v},C)}),Au=e=>null;Au.displayName="Cell";function Vw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Pg(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Vw(Object(s),!0).forEach(function(a){OB(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vw(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function OB(e,t,s){return(t=TB(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function TB(e){var t=LB(e,"string");return typeof t=="symbol"?t:t+""}function LB(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tc={widthCache:{},cacheCount:0},MB=2e3,DB={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Hw="recharts_measurement_span";function IB(e){var t=Pg({},e);return Object.keys(t).forEach(s=>{t[s]||delete t[s]}),t}var Gd=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hl.isSsr)return{width:0,height:0};var a=IB(s),n=JSON.stringify({text:t,copyStyle:a});if(tc.widthCache[n])return tc.widthCache[n];try{var i=document.getElementById(Hw);i||(i=document.createElement("span"),i.setAttribute("id",Hw),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Pg(Pg({},DB),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return tc.widthCache[n]=c,++tc.cacheCount>MB&&(tc.cacheCount=0,tc.widthCache={}),c}catch{return{width:0,height:0}}},Gw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RB=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FB=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,W_={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$B=Object.keys(W_),oc="NaN";function qB(e,t){return e*W_[t]}class ia{static parse(t){var s,[,a,n]=(s=FB.exec(t))!==null&&s!==void 0?s:[];return new ia(parseFloat(a),n??"")}constructor(t,s){this.num=t,this.unit=s,this.num=t,this.unit=s,da(t)&&(this.unit=""),s!==""&&!RB.test(s)&&(this.num=NaN,this.unit=""),$B.includes(s)&&(this.num=qB(t,s),this.unit="px")}add(t){return this.unit!==t.unit?new ia(NaN,""):new ia(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ia(NaN,""):new ia(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ia(NaN,""):new ia(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ia(NaN,""):new ia(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return da(this.num)}}function V_(e){if(e.includes(oc))return oc;for(var t=e;t.includes("*")||t.includes("/");){var s,[,a,n,i]=(s=Gw.exec(t))!==null&&s!==void 0?s:[],o=ia.parse(a??""),l=ia.parse(i??""),c=n==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return oc;t=t.replace(Gw,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,f]=(d=Kw.exec(t))!==null&&d!==void 0?d:[],m=ia.parse(u??""),p=ia.parse(f??""),v=h==="+"?m.add(p):m.subtract(p);if(v.isNaN())return oc;t=t.replace(Kw,v.toString())}return t}var Yw=/\(([^()]*)\)/;function BB(e){for(var t=e,s;(s=Yw.exec(t))!=null;){var[,a]=s;t=t.replace(Yw,V_(a))}return t}function zB(e){var t=e.replace(/\s+/g,"");return t=BB(t),t=V_(t),t}function UB(e){try{return zB(e)}catch{return oc}}function rp(e){var t=UB(e.slice(5,-1));return t===oc?"":t}var WB=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],VB=["dx","dy","angle","className","breakAll"];function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Cg.apply(null,arguments)}function Jw(e,t){if(e==null)return{};var s,a,n=HB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function HB(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var H_=/[ \f\n\r\t\v\u2028\u2029]+/,G_=e=>{var{children:t,breakAll:s,style:a}=e;try{var n=[];hr(t)||(s?n=t.toString().split(""):n=t.toString().split(H_));var i=n.map(l=>({word:l,width:Gd(l,a).width})),o=s?0:Gd(" ",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},GB=(e,t,s,a,n)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Ke(i),u=o,h=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k.reduce((P,O)=>{var{word:$,width:V}=O,T=P[P.length-1];if(T&&(a==null||n||T.width+V+s<Number(a)))T.words.push($),T.width+=V+s;else{var F={words:[$],width:V};P.push(F)}return P},[])},f=h(t),m=H=>H.reduce((k,P)=>k.width>P.width?k:P);if(!d||n)return f;var p=f.length>i||m(f).width>Number(a);if(!p)return f;for(var v="…",g=H=>{var k=u.slice(0,H),P=G_({breakAll:c,style:l,children:k+v}).wordsWithComputedWidth,O=h(P),$=O.length>i||m(O).width>Number(a);return[$,O]},y=0,N=u.length-1,S=0,C;y<=N&&S<=u.length-1;){var M=Math.floor((y+N)/2),D=M-1,[L,A]=g(D),[I]=g(M);if(!L&&!I&&(y=M+1),L&&I&&(N=M-1),!L&&I){C=A;break}S++}return C||f},Xw=e=>{var t=hr(e)?[]:e.toString().split(H_);return[{words:t}]},KB=e=>{var{width:t,scaleToFit:s,children:a,style:n,breakAll:i,maxLines:o}=e;if((t||s)&&!hl.isSsr){var l,c,d=G_({breakAll:i,children:a,style:n});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return Xw(a);return GB({breakAll:i,children:a,maxLines:o,style:n},l,c,t,s)}return Xw(a)},Qw="#808080",Sf=j.forwardRef((e,t)=>{var{x:s=0,y:a=0,lineHeight:n="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=Qw}=e,u=Jw(e,WB),h=j.useMemo(()=>KB({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:f,dy:m,angle:p,className:v,breakAll:g}=u,y=Jw(u,VB);if(!In(s)||!In(a))return null;var N=s+(Ke(f)?f:0),S=a+(Ke(m)?m:0),C;switch(c){case"start":C=rp("calc(".concat(i,")"));break;case"middle":C=rp("calc(".concat((h.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:C=rp("calc(".concat(h.length-1," * -").concat(n,")"));break}var M=[];if(o){var D=h[0].width,{width:L}=u;M.push("scale(".concat(Ke(L)?L/D:1,")"))}return p&&M.push("rotate(".concat(p,", ").concat(N,", ").concat(S,")")),M.length&&(y.transform=M.join(" ")),j.createElement("text",Cg({},At(y,!0),{ref:t,x:N,y:S,className:Lt("recharts-text",v),textAnchor:l,fill:d.includes("url")?Qw:d}),h.map((A,I)=>{var H=A.words.join(g?"":" ");return j.createElement("tspan",{x:N,dy:I===0?C:n,key:"".concat(H,"-").concat(I)},H)}))});Sf.displayName="Text";var YB=["offset"],JB=["labelRef"];function Zw(e,t){if(e==null)return{};var s,a,n=XB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function XB(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function eN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ur(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?eN(Object(s),!0).forEach(function(a){QB(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function QB(e,t,s){return(t=ZB(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ZB(e){var t=ez(e,"string");return typeof t=="symbol"?t:t+""}function ez(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ai.apply(null,arguments)}var tz=e=>{var{value:t,formatter:s}=e,a=hr(e.children)?t:e.children;return typeof s=="function"?s(a):a},Xv=e=>e!=null&&typeof e=="function",rz=(e,t)=>{var s=cs(t-e),a=Math.min(Math.abs(t-e),360);return s*a},sz=(e,t,s)=>{var{position:a,viewBox:n,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:f,clockWise:m}=n,p=(d+u)/2,v=rz(h,f),g=v>=0?1:-1,y,N;a==="insideStart"?(y=h+g*i,N=m):a==="insideEnd"?(y=f-g*i,N=!m):a==="end"&&(y=f+g*i,N=m),N=v<=0?N:!N;var S=Wr(l,c,p,y),C=Wr(l,c,p,y+(N?1:-1)*359),M="M".concat(S.x,",").concat(S.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),D=hr(e.id)?al("recharts-radial-line-"):e.id;return j.createElement("text",ai({},s,{dominantBaseline:"central",className:Lt("recharts-radial-bar-label",o)}),j.createElement("defs",null,j.createElement("path",{id:D,d:M})),j.createElement("textPath",{xlinkHref:"#".concat(D)},t))},az=e=>{var{viewBox:t,offset:s,position:a}=e,{cx:n,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(a==="outside"){var{x:h,y:f}=Wr(n,i,l+s,u);return{x:h,y:f,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(o+l)/2,{x:p,y:v}=Wr(n,i,m,u);return{x:p,y:v,textAnchor:"middle",verticalAnchor:"middle"}},nz=(e,t)=>{var{parentViewBox:s,offset:a,position:n}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*a,h=d>0?"end":"start",f=d>0?"start":"end",m=l>=0?1:-1,p=m*a,v=m>0?"end":"start",g=m>0?"start":"end";if(n==="top"){var y={x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:h};return Ur(Ur({},y),s?{height:Math.max(o-s.y,0),width:l}:{})}if(n==="bottom"){var N={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:f};return Ur(Ur({},N),s?{height:Math.max(s.y+s.height-(o+c),0),width:l}:{})}if(n==="left"){var S={x:i-p,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Ur(Ur({},S),s?{width:Math.max(S.x-s.x,0),height:c}:{})}if(n==="right"){var C={x:i+l+p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Ur(Ur({},C),s?{width:Math.max(s.x+s.width-C.x,0),height:c}:{})}var M=s?{width:l,height:c}:{};return n==="insideLeft"?Ur({x:i+p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},M):n==="insideRight"?Ur({x:i+l-p,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},M):n==="insideTop"?Ur({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:f},M):n==="insideBottom"?Ur({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},M):n==="insideTopLeft"?Ur({x:i+p,y:o+u,textAnchor:g,verticalAnchor:f},M):n==="insideTopRight"?Ur({x:i+l-p,y:o+u,textAnchor:v,verticalAnchor:f},M):n==="insideBottomLeft"?Ur({x:i+p,y:o+c-u,textAnchor:g,verticalAnchor:h},M):n==="insideBottomRight"?Ur({x:i+l-p,y:o+c-u,textAnchor:v,verticalAnchor:h},M):n&&typeof n=="object"&&(Ke(n.x)||Uo(n.x))&&(Ke(n.y)||Uo(n.y))?Ur({x:i+Gs(n.x,l),y:o+Gs(n.y,c),textAnchor:"end",verticalAnchor:"end"},M):Ur({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},M)},iz=e=>"cx"in e&&Ke(e.cx);function Sa(e){var{offset:t=5}=e,s=Zw(e,YB),a=Ur({offset:t},s),{viewBox:n,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:h}=a,f=$b(),m=n||f;if(!m||hr(o)&&hr(l)&&!j.isValidElement(c)&&typeof c!="function")return null;if(j.isValidElement(c)){var{labelRef:p}=a,v=Zw(a,JB);return j.cloneElement(c,v)}var g;if(typeof c=="function"){if(g=j.createElement(c,a),j.isValidElement(g))return g}else g=tz(a);var y=iz(m),N=At(a,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return sz(a,g,N);var S=y?az(a):nz(a,m);return j.createElement(Sf,ai({ref:h,className:Lt("recharts-label",d)},N,S,{breakAll:u}),g)}Sa.displayName="Label";var K_=e=>{var{cx:t,cy:s,angle:a,startAngle:n,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:h,top:f,left:m,width:p,height:v,clockWise:g,labelViewBox:y}=e;if(y)return y;if(Ke(p)&&Ke(v)){if(Ke(u)&&Ke(h))return{x:u,y:h,width:p,height:v};if(Ke(f)&&Ke(m))return{x:f,y:m,width:p,height:v}}if(Ke(u)&&Ke(h))return{x:u,y:h,width:0,height:0};if(Ke(t)&&Ke(s))return{cx:t,cy:s,startAngle:n||a||0,endAngle:i||a||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:g};if(e.viewBox)return e.viewBox},oz=(e,t,s)=>{if(!e)return null;var a={viewBox:t,labelRef:s};return e===!0?j.createElement(Sa,ai({key:"label-implicit"},a)):In(e)?j.createElement(Sa,ai({key:"label-implicit",value:e},a)):j.isValidElement(e)?e.type===Sa?j.cloneElement(e,Ur({key:"label-implicit"},a)):j.createElement(Sa,ai({key:"label-implicit",content:e},a)):Xv(e)?j.createElement(Sa,ai({key:"label-implicit",content:e},a)):e&&typeof e=="object"?j.createElement(Sa,ai({},e,{key:"label-implicit"},a)):null},lz=function(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:n,labelRef:i}=t,o=K_(t),l=pu(n,Sa).map((d,u)=>j.cloneElement(d,{viewBox:s||o,key:"label-".concat(u)}));if(!a)return l;var c=oz(t.label,s||o,i);return[c,...l]};Sa.parseViewBox=K_;Sa.renderCallByParent=lz;var sp={},ap={},tN;function cz(){return tN||(tN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return s[s.length-1]}e.last=t}(ap)),ap}var np={},rN;function dz(){return rN||(rN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return Array.isArray(s)?s:Array.from(s)}e.toArray=t}(np)),np}var sN;function uz(){return sN||(sN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cz(),s=dz(),a=Sb();function n(i){if(a.isArrayLike(i))return t.last(s.toArray(i))}e.last=n}(sp)),sp}var ip,aN;function hz(){return aN||(aN=1,ip=uz().last),ip}var mz=hz();const fz=bn(mz);var xz=["valueAccessor"],pz=["data","dataKey","clockWise","id","textBreakAll"];function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Dm.apply(null,arguments)}function nN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function iN(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?nN(Object(s),!0).forEach(function(a){gz(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function gz(e,t,s){return(t=bz(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oN(e,t){if(e==null)return{};var s,a,n=yz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yz(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var jz=e=>Array.isArray(e.value)?fz(e.value):e.value;function ro(e){var{valueAccessor:t=jz}=e,s=oN(e,xz),{data:a,dataKey:n,clockWise:i,id:o,textBreakAll:l}=s,c=oN(s,pz);return!a||!a.length?null:j.createElement(Ir,{className:"recharts-label-list"},a.map((d,u)=>{var h=hr(n)?t(d,u):xr(d&&d.payload,n),f=hr(o)?{}:{id:"".concat(o,"-").concat(u)};return j.createElement(Sa,Dm({},At(d,!0),c,f,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:Sa.parseViewBox(hr(i)?d:iN(iN({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}ro.displayName="LabelList";function wz(e,t){return e?e===!0?j.createElement(ro,{key:"labelList-implicit",data:t}):j.isValidElement(e)||Xv(e)?j.createElement(ro,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?j.createElement(ro,Dm({data:t},e,{key:"labelList-implicit"})):null:null}function Nz(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&s&&!e.label)return null;var{children:a}=e,n=pu(a,ro).map((o,l)=>j.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!s)return n;var i=wz(e.label,t);return[i,...n]}ro.renderCallByParent=Nz;function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ag.apply(null,arguments)}var Y_=e=>{var{cx:t,cy:s,r:a,className:n}=e,i=Lt("recharts-dot",n);return t===+t&&s===+s&&a===+a?j.createElement("circle",Ag({},At(e,!1),gb(e),{className:i,cx:t,cy:s,r:a})):null},J_=e=>e.graphicalItems.polarItems,_z=ke([Rr,_u],_v),Qv=ke([J_,Fr,_z],Sv),Sz=ke([Qv],Pv),Zv=ke([Sz,mv],Cv),Pz=ke([Zv,Fr,Qv],Av),Cz=ke([Zv,Fr,Qv],(e,t,s)=>s.length>0?e.flatMap(a=>s.flatMap(n=>{var i,o=xr(a,(i=t.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:xr(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),lN=()=>{},Az=ke([Fr,a_,lN,Cz,lN],Ov),X_=ke([Fr,$t,Zv,Pz,Nu,Rr,Az],Tv),kz=ke([X_,Fr,Bc],Dv);ke([Fr,X_,kz,Rr],Rv);var Ez={radiusAxis:{},angleAxis:{}},Q_=Xa({name:"polarAxis",initialState:Ez,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:oJ,removeRadiusAxis:lJ,addAngleAxis:cJ,removeAngleAxis:dJ}=Q_.actions,Oz=Q_.reducer;function cN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function dN(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?cN(Object(s),!0).forEach(function(a){Tz(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Tz(e,t,s){return(t=Lz(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Lz(e){var t=Mz(e,"string");return typeof t=="symbol"?t:t+""}function Mz(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ey=(e,t)=>t,Dz=[],ty=(e,t,s)=>(s==null?void 0:s.length)===0?Dz:s,Z_=ke([mv,ey,ty],(e,t,s)=>{var{chartData:a}=e,n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=a,(!n||!n.length)&&s!=null&&(n=s.map(i=>dN(dN({},t.presentationProps),i.props))),n!=null)return n}),Iz=ke([Z_,ey,ty],(e,t,s)=>{if(e!=null)return e.map((a,n)=>{var i,o=xr(a,t.nameKey,t.name),l;return s!=null&&(i=s[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=s[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:Mc(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),Rz=ke([J_,ey],(e,t)=>{if(e.some(s=>s.type==="pie"&&t.dataKey===s.dataKey&&t.data===s.data))return t}),Fz=ke([Z_,Rz,ty,ms],(e,t,s,a)=>{if(!(t==null||e==null))return AU({offset:a,pieSettings:t,displayedData:e,cells:s})}),$z={countOfBars:0,cartesianItems:[],polarItems:[]},eS=Xa({name:"graphicalItems",initialState:$z,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},removeCartesianGraphicalItem(e,t){var s=eo(e).cartesianItems.indexOf(t.payload);s>-1&&e.cartesianItems.splice(s,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var s=eo(e).polarItems.indexOf(t.payload);s>-1&&e.polarItems.splice(s,1)}}}),{addBar:qz,removeBar:Bz,addCartesianGraphicalItem:zz,removeCartesianGraphicalItem:Uz,addPolarGraphicalItem:Wz,removePolarGraphicalItem:Vz}=eS.actions,Hz=eS.reducer;function uN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function hN(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?uN(Object(s),!0).forEach(function(a){Gz(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Gz(e,t,s){return(t=Kz(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Kz(e){var t=Yz(e,"string");return typeof t=="symbol"?t:t+""}function Yz(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jz(e){var t=jr();return j.useEffect(()=>{var s=hN(hN({},e),{},{stackId:Ib(e.stackId)});return t(zz(s)),()=>{t(Uz(s))}},[t,e]),null}function Xz(e){var t=jr();return j.useEffect(()=>(t(Wz(e)),()=>{t(Vz(e))}),[t,e]),null}var op={},mN;function Qz(){return mN||(mN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){var n;if(typeof s!="object"||s==null)return!1;if(Object.getPrototypeOf(s)===null)return!0;if(Object.prototype.toString.call(s)!=="[object Object]"){const i=s[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(s,Symbol.toStringTag))!=null&&n.writable)?!1:s.toString()===`[object ${i}]`}let a=s;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(s)===a}e.isPlainObject=t}(op)),op}var lp,fN;function Zz(){return fN||(fN=1,lp=Qz().isPlainObject),lp}var eU=Zz();const tU=bn(eU);function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Im.apply(null,arguments)}var xN=(e,t,s,a,n)=>{var i=s-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+s,",").concat(t),o+="L ".concat(e+s-i/2,",").concat(t+n),o+="L ".concat(e+s-i/2-a,",").concat(t+n),o+="L ".concat(e,",").concat(t," Z"),o},rU={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sU=e=>{var t=Qa(e,rU),s=j.useRef(),[a,n]=j.useState(-1);j.useEffect(()=>{if(s.current&&s.current.getTotalLength)try{var g=s.current.getTotalLength();g&&n(g)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isUpdateAnimationActive:p}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||l===0&&c===0||d===0)return null;var v=Lt("recharts-trapezoid",u);return p?j.createElement(oo,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:f,animationEasing:h,isActive:p},g=>{var{upperWidth:y,lowerWidth:N,height:S,x:C,y:M}=g;return j.createElement(oo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:h},j.createElement("path",Im({},At(t,!0),{className:v,d:xN(C,M,y,N,S),ref:s})))}):j.createElement("g",null,j.createElement("path",Im({},At(t,!0),{className:v,d:xN(i,o,l,c,d)})))},aU=["option","shapeType","propTransformer","activeClassName","isActive"];function nU(e,t){if(e==null)return{};var s,a,n=iU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function iU(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function pN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Rm(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?pN(Object(s),!0).forEach(function(a){oU(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function oU(e,t,s){return(t=lU(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lU(e){var t=cU(e,"string");return typeof t=="symbol"?t:t+""}function cU(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dU(e,t){return Rm(Rm({},t),e)}function uU(e,t){return e==="symbols"}function gN(e){var{shapeType:t,elementProps:s}=e;switch(t){case"rectangle":return j.createElement(q3,s);case"trapezoid":return j.createElement(sU,s);case"sector":return j.createElement(U3,s);case"symbols":if(uU(t))return j.createElement(wb,s);break;default:return null}}function hU(e){return j.isValidElement(e)?e.props:e}function tS(e){var{option:t,shapeType:s,propTransformer:a=dU,activeClassName:n="recharts-active-shape",isActive:i}=e,o=nU(e,aU),l;if(j.isValidElement(t))l=j.cloneElement(t,Rm(Rm({},o),hU(t)));else if(typeof t=="function")l=t(o);else if(tU(t)&&typeof t!="boolean"){var c=a(t,o);l=j.createElement(gN,{shapeType:s,elementProps:c})}else{var d=o;l=j.createElement(gN,{shapeType:s,elementProps:d})}return i?j.createElement(Ir,{className:n},l):l}var ry=(e,t)=>{var s=jr();return(a,n)=>i=>{e==null||e(a,n,i),s(y_({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},sy=e=>{var t=jr();return(s,a)=>n=>{e==null||e(s,a,n),t(eq())}},ay=(e,t)=>{var s=jr();return(a,n)=>i=>{e==null||e(a,n,i),s(tq({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function ny(e){var{fn:t,args:s}=e,a=jr(),n=Ks();return j.useEffect(()=>{if(!n){var i=t(s);return a(X$(i)),()=>{a(Q$(i))}}},[t,s,a,n]),null}var rS=()=>{};function sS(e){var{legendPayload:t}=e,s=jr(),a=Ks();return j.useEffect(()=>a?rS:(s(M3(t)),()=>{s(D3(t))}),[s,a,t]),null}function mU(e){var{legendPayload:t}=e,s=jr(),a=rt($t);return j.useEffect(()=>a!=="centric"&&a!=="radial"?rS:(s(M3(t)),()=>{s(D3(t))}),[s,a,t]),null}function iy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",s=j.useRef(al(t)),a=j.useRef(e);return a.current!==e&&(s.current=al(t),a.current=e),s.current}var fU=["onMouseEnter","onClick","onMouseLeave"];function xU(e,t){if(e==null)return{};var s,a,n=pU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function pU(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function bN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Cr(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?bN(Object(s),!0).forEach(function(a){Pf(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Pf(e,t,s){return(t=gU(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function gU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},cl.apply(null,arguments)}function vU(e){var t=j.useMemo(()=>At(e,!1),[e]),s=j.useMemo(()=>pu(e.children,Au),[e.children]),a=j.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),n=rt(i=>Iz(i,a,s));return j.createElement(mU,{legendPayload:n})}function yU(e){var{dataKey:t,nameKey:s,sectors:a,stroke:n,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:a==null?void 0:a.map(u=>u.tooltipPayload),positions:a==null?void 0:a.map(u=>u.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:t,nameKey:s,name:Mc(l,t),hide:c,type:d,color:o,unit:""}}}var jU=(e,t)=>e>t?"start":e<t?"end":"middle",wU=(e,t,s)=>typeof t=="function"?t(e):Gs(t,s,s*.8),NU=(e,t,s)=>{var{top:a,left:n,width:i,height:o}=t,l=P3(i,o),c=n+Gs(e.cx,i,i/2),d=a+Gs(e.cy,o,o/2),u=Gs(e.innerRadius,l,0),h=wU(s,e.outerRadius,l),f=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:h,maxRadius:f}},_U=(e,t)=>{var s=cs(t-e),a=Math.min(Math.abs(t-e),360);return s*a},SU=(e,t)=>{if(j.isValidElement(e))return j.cloneElement(e,t);if(typeof e=="function")return e(t);var s=Lt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return j.createElement(Vd,cl({},t,{type:"linear",className:s}))},PU=(e,t,s)=>{if(j.isValidElement(e))return j.cloneElement(e,t);var a=s;if(typeof e=="function"&&(a=e(t),j.isValidElement(a)))return a;var n=Lt("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return j.createElement(Sf,cl({},t,{alignmentBaseline:"middle",className:n}),a)};function CU(e){var{sectors:t,props:s,showLabels:a}=e,{label:n,labelLine:i,dataKey:o}=s;if(!a||!n||!t)return null;var l=At(s,!1),c=At(n,!1),d=At(i,!1),u=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,h=t.map((f,m)=>{var p=(f.startAngle+f.endAngle)/2,v=Wr(f.cx,f.cy,f.outerRadius+u,p),g=Cr(Cr(Cr(Cr({},l),f),{},{stroke:"none"},c),{},{index:m,textAnchor:jU(v.x,f.cx)},v),y=Cr(Cr(Cr(Cr({},l),f),{},{fill:"none",stroke:f.fill},d),{},{index:m,points:[Wr(f.cx,f.cy,f.outerRadius,p),v],key:"line"});return j.createElement(Ir,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(m)},i&&SU(i,y),PU(n,g,xr(f,o)))});return j.createElement(Ir,{className:"recharts-pie-labels"},h)}function aS(e){var{sectors:t,activeShape:s,inactiveShape:a,allOtherPieProps:n,showLabels:i}=e,o=rt(ll),{onMouseEnter:l,onClick:c,onMouseLeave:d}=n,u=xU(n,fU),h=ry(l,n.dataKey),f=sy(d),m=ay(c,n.dataKey);return t==null?null:j.createElement(j.Fragment,null,t.map((p,v)=>{if((p==null?void 0:p.startAngle)===0&&(p==null?void 0:p.endAngle)===0&&t.length!==1)return null;var g=s&&String(v)===o,y=o?a:null,N=g?s:y,S=Cr(Cr({},p),{},{stroke:p.stroke,tabIndex:-1,[E3]:v,[O3]:n.dataKey});return j.createElement(Ir,cl({tabIndex:-1,className:"recharts-pie-sector"},xu(u,p,v),{onMouseEnter:h(p,v),onMouseLeave:f(p,v),onClick:m(p,v),key:"sector-".concat(p==null?void 0:p.startAngle,"-").concat(p==null?void 0:p.endAngle,"-").concat(p.midAngle,"-").concat(v)}),j.createElement(tS,cl({option:N,isActive:g,shapeType:"sector"},S)))}),j.createElement(CU,{sectors:t,props:n,showLabels:i}))}function AU(e){var t,{pieSettings:s,displayedData:a,cells:n,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:h}=s,f=Math.abs(s.minAngle),m=_U(l,c),p=Math.abs(m),v=a.length<=1?0:(t=s.paddingAngle)!==null&&t!==void 0?t:0,g=a.filter(D=>xr(D,d,0)!==0).length,y=(p>=360?g:g-1)*v,N=p-g*f-y,S=a.reduce((D,L)=>{var A=xr(L,d,0);return D+(Ke(A)?A:0)},0),C;if(S>0){var M;C=a.map((D,L)=>{var A=xr(D,d,0),I=xr(D,u,L),H=NU(s,i,D),k=(Ke(A)?A:0)/S,P,O=Cr(Cr({},D),n&&n[L]&&n[L].props);L?P=M.endAngle+cs(m)*v*(A!==0?1:0):P=l;var $=P+cs(m)*((A!==0?f:0)+k*N),V=(P+$)/2,T=(H.innerRadius+H.outerRadius)/2,F=[{name:I,value:A,payload:O,dataKey:d,type:h}],z=Wr(H.cx,H.cy,T,V);return M=Cr(Cr(Cr(Cr({},s.presentationProps),{},{percent:k,cornerRadius:o,name:I,tooltipPayload:F,midAngle:V,middleRadius:T,tooltipPosition:z},O),H),{},{value:xr(D,d),startAngle:P,endAngle:$,payload:O,paddingAngle:cs(m)*v}),M})}return C}function kU(e){var{props:t,previousSectorsRef:s}=e,{sectors:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=t,f=iy(t,"recharts-pie-"),m=s.current,[p,v]=j.useState(!0),g=j.useCallback(()=>{typeof h=="function"&&h(),v(!1)},[h]),y=j.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return j.createElement(oo,{begin:i,duration:o,isActive:n,easing:l,from:{t:0},to:{t:1},onAnimationStart:y,onAnimationEnd:g,key:f},N=>{var{t:S}=N,C=[],M=a&&a[0],D=M.startAngle;return a.forEach((L,A)=>{var I=m&&m[A],H=A>0?io(L,"paddingAngle",0):0;if(I){var k=Vi(I.endAngle-I.startAngle,L.endAngle-L.startAngle),P=Cr(Cr({},L),{},{startAngle:D+H,endAngle:D+k(S)+H});C.push(P),D=P.endAngle}else{var{endAngle:O,startAngle:$}=L,V=Vi(0,O-$),T=V(S),F=Cr(Cr({},L),{},{startAngle:D+H,endAngle:D+T+H});C.push(F),D=F.endAngle}}),s.current=C,j.createElement(Ir,null,j.createElement(aS,{sectors:C,activeShape:c,inactiveShape:d,allOtherPieProps:t,showLabels:!p}))})}function EU(e){var{sectors:t,isAnimationActive:s,activeShape:a,inactiveShape:n}=e,i=j.useRef(null),o=i.current;return s&&t&&t.length&&(!o||o!==t)?j.createElement(kU,{props:e,previousSectorsRef:i}):j.createElement(aS,{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function OU(e){var{hide:t,className:s,rootTabIndex:a}=e,n=Lt("recharts-pie",s);return t?null:j.createElement(Ir,{tabIndex:a,className:n},j.createElement(EU,e))}var nS={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!hl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function TU(e){var t=Qa(e,nS),s=j.useMemo(()=>pu(e.children,Au),[e.children]),a=At(t,!1),n=j.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:a}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,a]),i=rt(o=>Fz(o,n,s));return j.createElement(j.Fragment,null,j.createElement(ny,{fn:yU,args:Cr(Cr({},t),{},{sectors:i})}),j.createElement(OU,cl({},t,{sectors:i})))}class oy extends j.PureComponent{constructor(){super(...arguments),Pf(this,"id",al("recharts-pie-"))}render(){return j.createElement(j.Fragment,null,j.createElement(Xz,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),j.createElement(vU,this.props),j.createElement(TU,this.props),this.props.children)}}Pf(oy,"displayName","Pie");Pf(oy,"defaultProps",nS);function vN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function yN(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?vN(Object(s),!0).forEach(function(a){LU(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function LU(e,t,s){return(t=MU(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function MU(e){var t=DU(e,"string");return typeof t=="symbol"?t:t+""}function DU(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IU=e=>{var{point:t,childIndex:s,mainColor:a,activeDot:n,dataKey:i}=e;if(n===!1||t.x==null||t.y==null)return null;var o=yN(yN({index:s,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},At(n,!1)),gb(n)),l;return j.isValidElement(n)?l=j.cloneElement(n,o):typeof n=="function"?l=n(o):l=j.createElement(Y_,o),j.createElement(Ir,{className:"recharts-active-dot"},l)};function jN(e){var{points:t,mainColor:s,activeDot:a,itemDataKey:n}=e,i=M_(),o=rt(ll),l=rt(T_);if(!o)return null;var c,d=i.dataKey;if(d&&!i.allowDuplicatedCategory){var u=typeof d=="function"?h=>d(h.payload):"payload.".concat(d);c=xb(t,u,l)}else c=t==null?void 0:t[Number(o)];return hr(c)?null:IU({point:c,childIndex:Number(o),mainColor:s,dataKey:n,activeDot:a})}var RU=()=>{var e=jr();return j.useEffect(()=>(e(qz()),()=>{e(Bz())})),null},FU=["children"];function $U(e,t){if(e==null)return{};var s,a,n=qU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qU(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var wN=()=>{},iS=j.createContext({addErrorBar:wN,removeErrorBar:wN}),BU={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},oS=j.createContext(BU);function zU(e){var{children:t}=e,s=$U(e,FU);return j.createElement(oS.Provider,{value:s},t)}var UU=()=>j.useContext(oS),lS=e=>{var{children:t,xAxisId:s,yAxisId:a,zAxisId:n,dataKey:i,data:o,stackId:l,hide:c,type:d,barSize:u}=e,[h,f]=j.useState([]),m=j.useCallback(g=>{f(y=>[...y,g])},[f]),p=j.useCallback(g=>{f(y=>y.filter(N=>N!==g))},[f]),v=Ks();return j.createElement(iS.Provider,{value:{addErrorBar:m,removeErrorBar:p}},j.createElement(Jz,{type:d,data:o,xAxisId:s,yAxisId:a,zAxisId:n,dataKey:i,errorBars:h,stackId:l,hide:c,barSize:u,isPanorama:v}),t)};function WU(e){var{addErrorBar:t,removeErrorBar:s}=j.useContext(iS);return j.useEffect(()=>(t(e),()=>{s(e)}),[t,s,e]),null}var VU=e=>{var t=Ks();return rt(s=>Fn(s,"xAxis",e,t))},HU=e=>{var t=Ks();return rt(s=>Fn(s,"yAxis",e,t))},GU=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function cS(e,t,s){return(t=KU(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function KU(e){var t=YU(e,"string");return typeof t=="symbol"?t:t+""}function YU(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},cu.apply(null,arguments)}function JU(e,t){if(e==null)return{};var s,a,n=XU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function XU(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function QU(e){var{direction:t,width:s,dataKey:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=JU(e,GU),d=At(c,!1),{data:u,dataPointFormatter:h,xAxisId:f,yAxisId:m,errorBarOffset:p}=UU(),v=VU(f),g=HU(m);if((v==null?void 0:v.scale)==null||(g==null?void 0:g.scale)==null||u==null||t==="x"&&v.type!=="number")return null;var y=u.map(N=>{var{x:S,y:C,value:M,errorVal:D}=h(N,a,t);if(!D)return null;var L=[],A,I;if(Array.isArray(D)?[A,I]=D:A=I=D,t==="x"){var{scale:H}=v,k=C+p,P=k+s,O=k-s,$=H(M-A),V=H(M+I);L.push({x1:V,y1:P,x2:V,y2:O}),L.push({x1:$,y1:k,x2:V,y2:k}),L.push({x1:$,y1:P,x2:$,y2:O})}else if(t==="y"){var{scale:T}=g,F=S+p,z=F-s,se=F+s,Y=T(M-A),_e=T(M+I);L.push({x1:z,y1:_e,x2:se,y2:_e}),L.push({x1:F,y1:Y,x2:F,y2:_e}),L.push({x1:z,y1:Y,x2:se,y2:Y})}var R="".concat(S+p,"px ").concat(C+p,"px");return j.createElement(Ir,cu({className:"recharts-errorBar",key:"bar-".concat(L.map(Q=>"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)))},d),L.map(Q=>{var re=n?{transformOrigin:"".concat(Q.x1-5,"px")}:void 0;return j.createElement(oo,{from:{transform:"scaleY(0)",transformOrigin:R},to:{transform:"scaleY(1)",transformOrigin:R},begin:i,easing:l,isActive:n,duration:o,key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2),style:{transformOrigin:R}},j.createElement("line",cu({},Q,{style:re})))}))});return j.createElement(Ir,{className:"recharts-errorBars"},y)}var dS=j.createContext(void 0);function ZU(e){var t=j.useContext(dS);return e??t??"x"}function eW(e){var{direction:t,children:s}=e;return j.createElement(dS.Provider,{value:t},s)}var uS={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function tW(e){var t=ZU(e.direction),{width:s,isAnimationActive:a,animationBegin:n,animationDuration:i,animationEasing:o}=Qa(e,uS);return j.createElement(j.Fragment,null,j.createElement(WU,{dataKey:e.dataKey,direction:t}),j.createElement(QU,cu({},e,{direction:t,width:s,isAnimationActive:a,animationBegin:n,animationDuration:i,animationEasing:o})))}class hS extends j.Component{render(){return j.createElement(tW,this.props)}}cS(hS,"defaultProps",uS);cS(hS,"displayName","ErrorBar");var rW="Invariant failed";function sW(e,t){throw new Error(rW)}var aW=["x","y"];function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},kg.apply(null,arguments)}function NN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function kd(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?NN(Object(s),!0).forEach(function(a){nW(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):NN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function nW(e,t,s){return(t=iW(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function iW(e){var t=oW(e,"string");return typeof t=="symbol"?t:t+""}function oW(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lW(e,t){if(e==null)return{};var s,a,n=cW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function cW(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function dW(e,t){var{x:s,y:a}=e,n=lW(e,aW),i="".concat(s),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||n.height),u=parseInt(d,10),h="".concat(t.width||n.width),f=parseInt(h,10);return kd(kd(kd(kd(kd({},t),n),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function mS(e){return j.createElement(tS,kg({shapeType:"rectangle",propTransformer:dW,activeClassName:"recharts-active-bar"},e))}var uW=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,n)=>{if(Ke(t))return t;var i=Ke(a)||hr(a);return i?t(a,n):(i||sW(),s)}};function ly(e,t){var s,a,n=rt(d=>vi(d,e)),i=rt(d=>bo(d,t)),o=(s=n==null?void 0:n.allowDataOverflow)!==null&&s!==void 0?s:wa.allowDataOverflow,l=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:Na.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function fS(e){var{xAxisId:t,yAxisId:s,clipPathId:a}=e,n=bu(),{needClipX:i,needClipY:o,needClip:l}=ly(t,s);if(!l)return null;var{left:c,top:d,width:u,height:h}=n;return j.createElement("clipPath",{id:"clipPath-".concat(a)},j.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var hW=["onMouseEnter","onMouseLeave","onClick"],mW=["value","background","tooltipPosition"],fW=["onMouseEnter","onClick","onMouseLeave"];function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},du.apply(null,arguments)}function _N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ts(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?_N(Object(s),!0).forEach(function(a){Cf(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_N(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Cf(e,t,s){return(t=xW(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function xW(e){var t=pW(e,"string");return typeof t=="symbol"?t:t+""}function pW(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eg(e,t){if(e==null)return{};var s,a,n=gW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function gW(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var bW=e=>{var{dataKey:t,name:s,fill:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:Mc(s,t),payload:e}]};function vW(e){var{dataKey:t,stroke:s,strokeWidth:a,fill:n,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:s,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:Mc(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function yW(e){var t=rt(ll),{data:s,dataKey:a,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=Eg(i,hW),u=ry(o,a),h=sy(l),f=ay(c,a);if(!n||s==null)return null;var m=At(n,!1);return j.createElement(j.Fragment,null,s.map((p,v)=>{var{value:g,background:y,tooltipPosition:N}=p,S=Eg(p,mW);if(!y)return null;var C=u(p,v),M=h(p,v),D=f(p,v),L=Ts(Ts(Ts(Ts(Ts({option:n,isActive:String(v)===t},S),{},{fill:"#eee"},y),m),xu(d,p,v)),{},{onMouseEnter:C,onMouseLeave:M,onClick:D,dataKey:a,index:v,className:"recharts-bar-background-rectangle"});return j.createElement(mS,du({key:"background-bar-".concat(v)},L))}))}function xS(e){var{data:t,props:s,showLabels:a}=e,n=At(s,!1),{shape:i,dataKey:o,activeBar:l}=s,c=rt(ll),d=rt(L_),{onMouseEnter:u,onClick:h,onMouseLeave:f}=s,m=Eg(s,fW),p=ry(u,o),v=sy(f),g=ay(h,o);return t?j.createElement(j.Fragment,null,t.map((y,N)=>{var S=l&&String(N)===c&&(d==null||o===d),C=S?l:i,M=Ts(Ts(Ts({},n),y),{},{isActive:S,option:C,index:N,dataKey:o});return j.createElement(Ir,du({className:"recharts-bar-rectangle"},xu(m,y,N),{onMouseEnter:p(y,N),onMouseLeave:v(y,N),onClick:g(y,N),key:"rectangle-".concat(y==null?void 0:y.x,"-").concat(y==null?void 0:y.y,"-").concat(y==null?void 0:y.value,"-").concat(N)}),j.createElement(mS,M))}),a&&ro.renderCallByParent(s,t)):null}function jW(e){var{props:t,previousRectanglesRef:s}=e,{data:a,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=s.current,f=iy(t,"recharts-bar-"),[m,p]=j.useState(!1),v=j.useCallback(()=>{typeof d=="function"&&d(),p(!1)},[d]),g=j.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return j.createElement(oo,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:v,onAnimationStart:g,key:f},y=>{var{t:N}=y,S=N===1?a:a.map((C,M)=>{var D=h&&h[M];if(D){var L=Vi(D.x,C.x),A=Vi(D.y,C.y),I=Vi(D.width,C.width),H=Vi(D.height,C.height);return Ts(Ts({},C),{},{x:L(N),y:A(N),width:I(N),height:H(N)})}if(n==="horizontal"){var k=Vi(0,C.height),P=k(N);return Ts(Ts({},C),{},{y:C.y+C.height-P,height:P})}var O=Vi(0,C.width),$=O(N);return Ts(Ts({},C),{},{width:$})});return N>0&&(s.current=S),j.createElement(Ir,null,j.createElement(xS,{props:t,data:S,showLabels:!m}))})}function wW(e){var{data:t,isAnimationActive:s}=e,a=j.useRef(null);return s&&t&&t.length&&(a.current==null||a.current!==t)?j.createElement(jW,{previousRectanglesRef:a,props:e}):j.createElement(xS,{props:e,data:t,showLabels:!0})}var pS=0,NW=(e,t)=>{var s=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:s,errorVal:xr(e,t)}};class _W extends j.PureComponent{constructor(){super(...arguments),Cf(this,"id",al("recharts-bar-"))}render(){var{hide:t,data:s,dataKey:a,className:n,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d,layout:u}=this.props;if(t)return null;var h=Lt("recharts-bar",n),f=hr(d)?this.id:d;return j.createElement(Ir,{className:h},l&&j.createElement("defs",null,j.createElement(fS,{clipPathId:f,xAxisId:i,yAxisId:o})),j.createElement(Ir,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):null},j.createElement(yW,{data:s,dataKey:a,background:c,allOtherBarProps:this.props}),j.createElement(wW,this.props)),j.createElement(eW,{direction:u==="horizontal"?"y":"x"},this.props.children))}}var gS={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!hl.isSsr,legendType:"rect",minPointSize:pS,xAxisId:0,yAxisId:0};function SW(e){var{xAxisId:t,yAxisId:s,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=Qa(e,gS),{needClip:h}=ly(t,s),f=of(),m=Ks(),p=j.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:Ib(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),v=pu(e.children,Au),g=rt(S=>ZW(S,t,s,m,p,v));if(f!=="vertical"&&f!=="horizontal")return null;var y,N=g==null?void 0:g[0];return N==null||N.height==null||N.width==null?y=0:y=f==="vertical"?N.height/2:N.width/2,j.createElement(zU,{xAxisId:t,yAxisId:s,data:g,dataPointFormatter:NW,errorBarOffset:y},j.createElement(_W,du({},e,{layout:f,needClip:h,data:g,xAxisId:t,yAxisId:s,hide:a,legendType:n,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function PW(e){var{layout:t,barSettings:{dataKey:s,minPointSize:a},pos:n,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:h,offset:f,cells:m}=e,p=t==="horizontal"?l:o,v=u?p.scale.domain():null,g=hD({numericAxis:p});return h.map((y,N)=>{var S,C,M,D,L,A;u?S=oD(u[N],v):(S=xr(y,s),Array.isArray(S)||(S=[g,S]));var I=uW(a,pS)(S[1],N);if(t==="horizontal"){var H,[k,P]=[l.scale(S[0]),l.scale(S[1])];C=oj({axis:o,ticks:c,bandSize:i,offset:n.offset,entry:y,index:N}),M=(H=P??k)!==null&&H!==void 0?H:void 0,D=n.size;var O=k-P;if(L=da(O)?0:O,A={x:C,y:f.top,width:D,height:f.height},Math.abs(I)>0&&Math.abs(L)<Math.abs(I)){var $=cs(L||I)*(Math.abs(I)-Math.abs(L));M-=$,L+=$}}else{var[V,T]=[o.scale(S[0]),o.scale(S[1])];if(C=V,M=oj({axis:l,ticks:d,bandSize:i,offset:n.offset,entry:y,index:N}),D=T-V,L=n.size,A={x:f.left,y:M,width:f.width,height:L},Math.abs(I)>0&&Math.abs(D)<Math.abs(I)){var F=cs(D||I)*(Math.abs(I)-Math.abs(D));D+=F}}return Ts(Ts({},y),{},{x:C,y:M,width:D,height:L,value:u?S:S[1],payload:y,background:A,tooltipPosition:{x:C+D/2,y:M+L/2}},m&&m[N]&&m[N].props)})}class cy extends j.PureComponent{render(){return j.createElement(lS,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},j.createElement(RU,null),j.createElement(sS,{legendPayload:bW(this.props)}),j.createElement(ny,{fn:vW,args:this.props}),j.createElement(SW,this.props))}}Cf(cy,"displayName","Bar");Cf(cy,"defaultProps",gS);function SN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function $h(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(s),!0).forEach(function(a){CW(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):SN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function CW(e,t,s){return(t=AW(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function AW(e){var t=kW(e,"string");return typeof t=="symbol"?t:t+""}function kW(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EW=(e,t)=>t,OW=(e,t,s)=>s,TW=(e,t,s,a)=>a,dy=(e,t,s,a,n)=>n,LW=(e,t,s,a,n)=>n.maxBarSize,MW=(e,t,s,a,n,i)=>i,PN=(e,t,s)=>{var a=s??e;if(!hr(a))return Gs(a,t,0)},DW=ke([$t,gf,EW,OW,TW],(e,t,s,a,n)=>t.filter(i=>e==="horizontal"?i.xAxisId===s:i.yAxisId===a).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),IW=(e,t,s,a)=>{var n=$t(e);return n==="horizontal"?ou(e,"yAxis",s,a):ou(e,"xAxis",t,a)},RW=(e,t,s)=>{var a=$t(e);return a==="horizontal"?Pw(e,"xAxis",t):Pw(e,"yAxis",s)};function FW(e){return e.stackId!=null&&e.dataKey!=null}var $W=(e,t,s)=>{var a={},n=e.filter(FW),i=e.filter(d=>d.stackId==null),o=n.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),a),l=Object.entries(o).map(d=>{var[u,h]=d,f=h.map(p=>p.dataKey),m=PN(t,s,h[0].barSize);return{stackId:u,dataKeys:f,barSize:m}}),c=i.map(d=>{var u=[d.dataKey].filter(f=>f!=null),h=PN(t,s,d.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...l,...c]},qW=ke([DW,JF,RW],$W),BW=(e,t,s,a,n)=>{var i,o,l=$t(e),c=$6(e),{maxBarSize:d}=n,u=hr(d)?c:d,h,f;return l==="horizontal"?(h=Fn(e,"xAxis",t,a),f=lo(e,"xAxis",t,a)):(h=Fn(e,"yAxis",s,a),f=lo(e,"yAxis",s,a)),(i=(o=eu(h,f,!0))!==null&&o!==void 0?o:u)!==null&&i!==void 0?i:0},bS=(e,t,s,a)=>{var n=$t(e),i,o;return n==="horizontal"?(i=Fn(e,"xAxis",t,a),o=lo(e,"xAxis",t,a)):(i=Fn(e,"yAxis",s,a),o=lo(e,"yAxis",s,a)),eu(i,o)};function zW(e,t,s,a,n){var i=a.length;if(!(i<1)){var o=Gs(e,s,0,!0),l,c=[];if(Ns(a[0].barSize)){var d=!1,u=s/i,h=a.reduce((y,N)=>y+(N.barSize||0),0);h+=(i-1)*o,h>=s&&(h-=(i-1)*o,o=0),h>=s&&u>0&&(d=!0,u*=.9,h=i*u);var f=(s-h)/2>>0,m={offset:f-o,size:0};l=a.reduce((y,N)=>{var S,C={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:m.offset+m.size+o,size:d?u:(S=N.barSize)!==null&&S!==void 0?S:0}},M=[...y,C];return m=M[M.length-1].position,M},c)}else{var p=Gs(t,s,0,!0);s-2*p-(i-1)*o<=0&&(o=0);var v=(s-2*p-(i-1)*o)/i;v>1&&(v>>=0);var g=Ns(n)?Math.min(v,n):v;l=a.reduce((y,N,S)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:p+(v+o)*S+(v-g)/2,size:g}}],c)}return l}}var UW=(e,t,s,a,n,i,o)=>{var l=hr(o)?t:o,c=zW(s,a,n!==i?n:i,e,l);return n!==i&&c!=null&&(c=c.map(d=>$h($h({},d),{},{position:$h($h({},d.position),{},{offset:d.position.offset-n/2})}))),c},WW=ke([qW,$6,YF,q6,BW,bS,LW],UW),VW=(e,t,s,a)=>Fn(e,"xAxis",t,a),HW=(e,t,s,a)=>Fn(e,"yAxis",s,a),GW=(e,t,s,a)=>lo(e,"xAxis",t,a),KW=(e,t,s,a)=>lo(e,"yAxis",s,a),YW=ke([WW,dy],(e,t)=>{if(e!=null){var s=e.find(a=>a.stackId===t.stackId&&a.dataKeys.includes(t.dataKey));if(s!=null)return s.position}}),JW=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:s}=t;if(s!=null){var a=e[s];if(a){var{stackedData:n}=a;if(n){var i=n.find(o=>o.key===t.dataKey);return i}}}}},XW=ke([gf,dy],(e,t)=>{if(e.some(s=>s.type==="bar"&&t.dataKey===s.dataKey&&t.stackId===s.stackId&&t.stackId===s.stackId))return t}),QW=ke([IW,dy],JW),ZW=ke([ms,VW,HW,GW,KW,YW,$t,fv,bS,QW,XW,MW],(e,t,s,a,n,i,o,l,c,d,u,h)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:p}=l;if(!(u==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||s==null||a==null||n==null||c==null)){var{data:v}=u,g;if(v!=null&&v.length>0?g=v:g=f==null?void 0:f.slice(m,p+1),g!=null)return PW({layout:o,barSettings:u,pos:i,bandSize:c,xAxis:t,yAxis:s,xAxisTicks:a,yAxisTicks:n,stackedData:d,displayedData:g,offset:e,cells:h})}}),vS=e=>{var{chartData:t}=e,s=jr(),a=Ks();return j.useEffect(()=>a?()=>{}:(s(Iw(t)),()=>{s(Iw(void 0))}),[t,s,a]),null},CN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},yS=Xa({name:"brush",initialState:CN,reducers:{setBrushSettings(e,t){return t.payload==null?CN:t.payload}}}),{setBrushSettings:uJ}=yS.actions,eV=yS.reducer;function tV(e,t,s){return(t=rV(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rV(e){var t=sV(e,"string");return typeof t=="symbol"?t:t+""}function sV(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uy{static create(t){return new uy(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:s,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(s){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var s=this.range(),a=s[0],n=s[s.length-1];return a<=n?t>=a&&t<=n:t>=n&&t<=a}}tV(uy,"EPS",1e-4);function aV(e){return(e%180+180)%180}var nV=function(t){var{width:s,height:a}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=aV(n),o=i*Math.PI/180,l=Math.atan(a/s),c=o>l&&o<Math.PI-l?a/Math.sin(o):s/Math.cos(o);return Math.abs(c)},iV={dots:[],areas:[],lines:[]},jS=Xa({name:"referenceElements",initialState:iV,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var s=eo(e).dots.findIndex(a=>a===t.payload);s!==-1&&e.dots.splice(s,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var s=eo(e).areas.findIndex(a=>a===t.payload);s!==-1&&e.areas.splice(s,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var s=eo(e).lines.findIndex(a=>a===t.payload);s!==-1&&e.lines.splice(s,1)}}}),{addDot:hJ,removeDot:mJ,addArea:fJ,removeArea:xJ,addLine:pJ,removeLine:gJ}=jS.actions,oV=jS.reducer,lV=j.createContext(void 0),cV=e=>{var{children:t}=e,[s]=j.useState("".concat(al("recharts"),"-clip")),a=bu();if(a==null)return null;var{left:n,top:i,height:o,width:l}=a;return j.createElement(lV.Provider,{value:s},j.createElement("defs",null,j.createElement("clipPath",{id:s},j.createElement("rect",{x:n,y:i,height:o,width:l}))),t)};function cp(e,t){for(var s in e)if({}.hasOwnProperty.call(e,s)&&(!{}.hasOwnProperty.call(t,s)||e[s]!==t[s]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function wS(e,t,s){if(t<1)return[];if(t===1&&s===void 0)return e;for(var a=[],n=0;n<e.length;n+=t)a.push(e[n]);return a}function dV(e,t,s){var a={width:e.width+t.width,height:e.height+t.height};return nV(a,s)}function uV(e,t,s){var a=s==="width",{x:n,y:i,width:o,height:l}=e;return t===1?{start:a?n:i,end:a?n+o:i+l}:{start:a?n+o:i+l,end:a?n:i}}function Fm(e,t,s,a,n){if(e*t<e*a||e*t>e*n)return!1;var i=s();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-n)<=0}function hV(e,t){return wS(e,t+1)}function mV(e,t,s,a,n){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var p=a==null?void 0:a[c];if(p===void 0)return{v:wS(a,d)};var v=c,g,y=()=>(g===void 0&&(g=s(p,v)),g),N=p.coordinate,S=c===0||Fm(e,N,y,u,l);S||(c=0,u=o,d+=1),S&&(u=N+e*(y()/2+n),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function AN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Os(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?AN(Object(s),!0).forEach(function(a){fV(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):AN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function fV(e,t,s){return(t=xV(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function xV(e){var t=pV(e,"string");return typeof t=="symbol"?t:t+""}function pV(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gV(e,t,s,a,n){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(f){var m=i[f],p,v=()=>(p===void 0&&(p=s(m,f)),p);if(f===o-1){var g=e*(m.coordinate+e*v()/2-c);i[f]=m=Os(Os({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate})}else i[f]=m=Os(Os({},m),{},{tickCoord:m.coordinate});var y=Fm(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+n),i[f]=Os(Os({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function bV(e,t,s,a,n,i){var o=(a||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=a[l-1],h=s(u,l-1),f=e*(u.coordinate+e*h/2-d);o[l-1]=u=Os(Os({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var m=Fm(e,u.tickCoord,()=>h,c,d);m&&(d=u.tickCoord-e*(h/2+n),o[l-1]=Os(Os({},u),{},{isShow:!0}))}for(var p=i?l-1:l,v=function(N){var S=o[N],C,M=()=>(C===void 0&&(C=s(S,N)),C);if(N===0){var D=e*(S.coordinate-e*M()/2-c);o[N]=S=Os(Os({},S),{},{tickCoord:D<0?S.coordinate-D*e:S.coordinate})}else o[N]=S=Os(Os({},S),{},{tickCoord:S.coordinate});var L=Fm(e,S.tickCoord,M,c,d);L&&(c=S.tickCoord+e*(M()/2+n),o[N]=Os(Os({},S),{},{isShow:!0}))},g=0;g<p;g++)v(g);return o}function hy(e,t,s){var{tick:a,ticks:n,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!n||!n.length||!a)return[];if(Ke(c)||hl.isSsr){var f;return(f=hV(n,Ke(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],p=l==="top"||l==="bottom"?"width":"height",v=u&&p==="width"?Gd(u,{fontSize:t,letterSpacing:s}):{width:0,height:0},g=(S,C)=>{var M=typeof d=="function"?d(S.value,C):S.value;return p==="width"?dV(Gd(M,{fontSize:t,letterSpacing:s}),v,h):Gd(M,{fontSize:t,letterSpacing:s})[p]},y=n.length>=2?cs(n[1].coordinate-n[0].coordinate):1,N=uV(i,y,p);return c==="equidistantPreserveStart"?mV(y,N,g,n,o):(c==="preserveStart"||c==="preserveStartEnd"?m=bV(y,N,g,n,o,c==="preserveStartEnd"):m=gV(y,N,g,n,o),m.filter(S=>S.isShow))}var vV=["viewBox"],yV=["viewBox"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},lc.apply(null,arguments)}function kN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Kr(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(s),!0).forEach(function(a){my(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function EN(e,t){if(e==null)return{};var s,a,n=jV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jV(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function my(e,t,s){return(t=wV(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function wV(e){var t=NV(e,"string");return typeof t=="symbol"?t:t+""}function NV(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vo extends j.Component{constructor(t){super(t),this.tickRefs=j.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,s){var{viewBox:a}=t,n=EN(t,vV),i=this.props,{viewBox:o}=i,l=EN(i,yV);return!cp(a,o)||!cp(n,l)||!cp(s,this.state)}getTickLineCoord(t){var{x:s,y:a,width:n,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,h,f,m,p,v,g=c?-1:1,y=t.tickSize||l,N=Ke(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,m=a+ +!c*i,f=m-g*y,v=f-g*d,p=N;break;case"left":f=m=t.coordinate,h=s+ +!c*n,u=h-g*y,p=u-g*d,v=N;break;case"right":f=m=t.coordinate,h=s+ +c*n,u=h+g*y,p=u+g*d,v=N;break;default:u=h=t.coordinate,m=a+ +c*i,f=m+g*y,v=f+g*d,p=N;break}return{line:{x1:u,y1:f,x2:h,y2:m},tick:{x:p,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:s}=this.props,a;switch(t){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:s}=this.props;switch(t){case"left":case"right":return"middle";case"top":return s?"start":"end";default:return s?"end":"start"}}renderAxisLine(){var{x:t,y:s,width:a,height:n,orientation:i,mirror:o,axisLine:l}=this.props,c=Kr(Kr(Kr({},At(this.props,!1)),At(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=Kr(Kr({},c),{},{x1:t,y1:s+d*n,x2:t+a,y2:s+d*n})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=Kr(Kr({},c),{},{x1:t+u*a,y1:s,x2:t+u*a,y2:s+n})}return j.createElement("line",lc({},c,{className:Lt("recharts-cartesian-axis-line",io(l,"className"))}))}static renderTickItem(t,s,a){var n,i=Lt(s.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(t))n=j.cloneElement(t,Kr(Kr({},s),{},{className:i}));else if(typeof t=="function")n=t(Kr(Kr({},s),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Lt(o,t.className)),n=j.createElement(Sf,lc({},s,{className:o}),a)}return n}renderTicks(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,d=hy(Kr(Kr({},this.props),{},{ticks:a}),t,s),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=At(this.props,!1),m=At(o,!1),p=Kr(Kr({},f),{},{fill:"none"},At(n,!1)),v=d.map((g,y)=>{var{line:N,tick:S}=this.getTickLineCoord(g),C=Kr(Kr(Kr(Kr({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:i},m),S),{},{index:y,payload:g,visibleTicksCount:d.length,tickFormatter:l});return j.createElement(Ir,lc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(g.value,"-").concat(g.coordinate,"-").concat(g.tickCoord)},xu(this.props,g,y)),n&&j.createElement("line",lc({},p,N,{className:Lt("recharts-cartesian-axis-tick-line",io(n,"className"))})),o&&vo.renderTickItem(o,C,"".concat(typeof l=="function"?l(g.value,y):g.value).concat(c||"")))});return v.length>0?j.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:s,height:a,className:n,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return s!=null&&s<=0||a!=null&&a<=0?null:j.createElement(Ir,{className:Lt("recharts-cartesian-axis",n),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Sa.renderCallByParent(this.props))}}my(vo,"displayName","CartesianAxis");my(vo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _V=["x1","y1","x2","y2","key"],SV=["offset"],PV=["xAxisId","yAxisId"],CV=["xAxisId","yAxisId"];function ON(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ls(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ON(Object(s),!0).forEach(function(a){AV(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ON(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function AV(e,t,s){return(t=kV(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kV(e){var t=EV(e,"string");return typeof t=="symbol"?t:t+""}function EV(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Go.apply(null,arguments)}function $m(e,t){if(e==null)return{};var s,a,n=OV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function OV(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var TV=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:s,x:a,y:n,width:i,height:o,ry:l}=e;return j.createElement("rect",{x:a,y:n,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function NS(e,t){var s;if(j.isValidElement(e))s=j.cloneElement(e,t);else if(typeof e=="function")s=e(t);else{var{x1:a,y1:n,x2:i,y2:o,key:l}=t,c=$m(t,_V),d=At(c,!1),{offset:u}=d,h=$m(d,SV);s=j.createElement("line",Go({},h,{x1:a,y1:n,x2:i,y2:o,fill:"none",key:l}))}return s}function LV(e){var{x:t,width:s,horizontal:a=!0,horizontalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=$m(e,PV),c=n.map((d,u)=>{var h=Ls(Ls({},l),{},{x1:t,y1:d,x2:t+s,y2:d,key:"line-".concat(u),index:u});return NS(a,h)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function MV(e){var{y:t,height:s,vertical:a=!0,verticalPoints:n}=e;if(!a||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=e,l=$m(e,CV),c=n.map((d,u)=>{var h=Ls(Ls({},l),{},{x1:d,y1:t,x2:d,y2:t+s,key:"line-".concat(u),index:u});return NS(a,h)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function DV(e){var{horizontalFill:t,fillOpacity:s,x:a,y:n,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+n-n)).sort((h,f)=>h-f);n!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var m=!d[f+1],p=m?n+o-h:d[f+1]-h;if(p<=0)return null;var v=f%t.length;return j.createElement("rect",{key:"react-".concat(f),y:h,x:a,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function IV(e){var{vertical:t=!0,verticalFill:s,fillOpacity:a,x:n,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!s||!s.length)return null;var d=c.map(h=>Math.round(h+n-n)).sort((h,f)=>h-f);n!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var m=!d[f+1],p=m?n+o-h:d[f+1]-h;if(p<=0)return null;var v=f%s.length;return j.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:p,height:l,stroke:"none",fill:s[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var RV=(e,t)=>{var{xAxis:s,width:a,height:n,offset:i}=e;return C3(hy(Ls(Ls(Ls({},vo.defaultProps),s),{},{ticks:A3(s),viewBox:{x:0,y:0,width:a,height:n}})),i.left,i.left+i.width,t)},FV=(e,t)=>{var{yAxis:s,width:a,height:n,offset:i}=e;return C3(hy(Ls(Ls(Ls({},vo.defaultProps),s),{},{ticks:A3(s),viewBox:{x:0,y:0,width:a,height:n}})),i.top,i.top+i.height,t)},$V={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function fy(e){var t=qb(),s=Bb(),a=bu(),n=Ls(Ls({},Qa(e,$V)),{},{x:Ke(e.x)?e.x:a.left,y:Ke(e.y)?e.y:a.top,width:Ke(e.width)?e.width:a.width,height:Ke(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:m}=n,p=Ks(),v=rt(I=>Cw(I,"xAxis",i,p)),g=rt(I=>Cw(I,"yAxis",o,p));if(!Ke(d)||d<=0||!Ke(u)||u<=0||!Ke(l)||l!==+l||!Ke(c)||c!==+c)return null;var y=n.verticalCoordinatesGenerator||RV,N=n.horizontalCoordinatesGenerator||FV,{horizontalPoints:S,verticalPoints:C}=n;if((!S||!S.length)&&typeof N=="function"){var M=f&&f.length,D=N({yAxis:g?Ls(Ls({},g),{},{ticks:M?f:g.ticks}):void 0,width:t,height:s,offset:a},M?!0:h);Hd(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(S=D)}if((!C||!C.length)&&typeof y=="function"){var L=m&&m.length,A=y({xAxis:v?Ls(Ls({},v),{},{ticks:L?m:v.ticks}):void 0,width:t,height:s,offset:a},L?!0:h);Hd(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(C=A)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(TV,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),j.createElement(DV,Go({},n,{horizontalPoints:S})),j.createElement(IV,Go({},n,{verticalPoints:C})),j.createElement(LV,Go({},n,{offset:a,horizontalPoints:S,xAxis:v,yAxis:g})),j.createElement(MV,Go({},n,{offset:a,verticalPoints:C,xAxis:v,yAxis:g})))}fy.displayName="CartesianGrid";var _S=(e,t,s,a)=>Fn(e,"xAxis",t,a),SS=(e,t,s,a)=>lo(e,"xAxis",t,a),PS=(e,t,s,a)=>Fn(e,"yAxis",s,a),CS=(e,t,s,a)=>lo(e,"yAxis",s,a),qV=ke([$t,_S,PS,SS,CS],(e,t,s,a,n)=>gi(e,"xAxis")?eu(t,a,!1):eu(s,n,!1)),BV=(e,t,s,a,n)=>{var i,o=$t(e),l=gi(o,"xAxis"),c;if(l?c=ou(e,"yAxis",s,a):c=ou(e,"xAxis",t,a),c!=null){var{dataKey:d,stackId:u}=n;if(u!=null){var h=(i=c[u])===null||i===void 0?void 0:i.stackedData;return h==null?void 0:h.find(f=>f.key===d)}}},zV=(e,t,s,a,n)=>n,UV=ke([gf,zV],(e,t)=>{if(e.some(s=>s.type==="area"&&t.dataKey===s.dataKey&&Ib(t.stackId)===s.stackId&&t.data===s.data))return t}),WV=ke([$t,_S,PS,SS,CS,BV,fv,qV,UV],(e,t,s,a,n,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||s==null||a==null||n==null||a.length===0||n.length===0||l==null)){var{data:f}=c,m;if(f&&f.length>0?m=f:m=d==null?void 0:d.slice(u,h+1),m!=null){var p=void 0;return cH({layout:e,xAxis:t,yAxis:s,xAxisTicks:a,yAxisTicks:n,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:m,chartBaseValue:p,bandSize:l})}}}),VV=["layout","type","stroke","connectNulls","isRange"],HV=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function AS(e,t){if(e==null)return{};var s,a,n=GV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function GV(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function TN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Ko(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?TN(Object(s),!0).forEach(function(a){Af(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):TN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Af(e,t,s){return(t=KV(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function KV(e){var t=YV(e,"string");return typeof t=="symbol"?t:t+""}function YV(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},so.apply(null,arguments)}function qm(e,t){return e&&e!=="none"?e:t}var JV=e=>{var{dataKey:t,name:s,stroke:a,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:qm(a,n),value:Mc(s,t),payload:e}]};function XV(e){var{dataKey:t,data:s,stroke:a,strokeWidth:n,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:s,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Mc(o,t),hide:l,type:e.tooltipType,color:qm(a,i),unit:c}}}var QV=(e,t)=>{var s;if(j.isValidElement(e))s=j.cloneElement(e,t);else if(typeof e=="function")s=e(t);else{var a=Lt("recharts-area-dot",typeof e!="boolean"?e.className:"");s=j.createElement(Y_,so({},t,{className:a}))}return s};function ZV(e,t){return e==null?!1:t?!0:e.length===1}function eH(e){var{clipPathId:t,points:s,props:a}=e,{needClip:n,dot:i,dataKey:o}=a;if(!ZV(s,i))return null;var l=S4(i),c=At(a,!1),d=At(i,!0),u=s.map((f,m)=>{var p=Ko(Ko(Ko({key:"dot-".concat(m),r:3},c),d),{},{index:m,cx:f.x,cy:f.y,dataKey:o,value:f.value,payload:f.payload,points:s});return QV(i,p)}),h={clipPath:n?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return j.createElement(Ir,so({className:"recharts-area-dots"},h),u)}function Og(e){var{points:t,baseLine:s,needClip:a,clipPathId:n,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:h}=i,f=AS(i,VV);return j.createElement(j.Fragment,null,(t==null?void 0:t.length)>1&&j.createElement(Ir,{clipPath:a?"url(#clipPath-".concat(n,")"):void 0},j.createElement(Vd,so({},At(f,!0),{points:t,connectNulls:u,type:c,baseLine:s,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&j.createElement(Vd,so({},At(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&j.createElement(Vd,so({},At(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:s}))),j.createElement(eH,{points:t,props:i,clipPathId:n}),o&&ro.renderCallByParent(i,t))}function tH(e){var{alpha:t,baseLine:s,points:a,strokeWidth:n}=e,i=a[0].y,o=a[a.length-1].y;if(!Ns(i)||!Ns(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.x||0));return Ke(s)?c=Math.max(s,c):s&&Array.isArray(s)&&s.length&&(c=Math.max(...s.map(d=>d.x||0),c)),Ke(c)?j.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(n?parseInt("".concat(n),10):1),height:Math.floor(l)}):null}function rH(e){var{alpha:t,baseLine:s,points:a,strokeWidth:n}=e,i=a[0].x,o=a[a.length-1].x;if(!Ns(i)||!Ns(o))return null;var l=t*Math.abs(i-o),c=Math.max(...a.map(d=>d.y||0));return Ke(s)?c=Math.max(s,c):s&&Array.isArray(s)&&s.length&&(c=Math.max(...s.map(d=>d.y||0),c)),Ke(c)?j.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(n?parseInt("".concat(n),10):1))}):null}function sH(e){var{alpha:t,layout:s,points:a,baseLine:n,strokeWidth:i}=e;return s==="vertical"?j.createElement(tH,{alpha:t,points:a,baseLine:n,strokeWidth:i}):j.createElement(rH,{alpha:t,points:a,baseLine:n,strokeWidth:i})}function aH(e){var{needClip:t,clipPathId:s,props:a,previousPointsRef:n,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:f,onAnimationEnd:m}=a,p=iy(a,"recharts-area-"),[v,g]=j.useState(!0),y=j.useCallback(()=>{typeof m=="function"&&m(),g(!1)},[m]),N=j.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]),S=n.current,C=i.current;return j.createElement(oo,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:N,key:p},M=>{var{t:D}=M;if(S){var L=S.length/o.length,A=D===1?o:o.map((H,k)=>{var P=Math.floor(k*L);if(S[P]){var O=S[P];return Ko(Ko({},H),{},{x:Zl(O.x,H.x,D),y:Zl(O.y,H.y,D)})}return H}),I;return Ke(l)?I=Zl(C,l,D):hr(l)||da(l)?I=Zl(C,0,D):I=l.map((H,k)=>{var P=Math.floor(k*L);if(Array.isArray(C)&&C[P]){var O=C[P];return Ko(Ko({},H),{},{x:Zl(O.x,H.x,D),y:Zl(O.y,H.y,D)})}return H}),D>0&&(n.current=A,i.current=I),j.createElement(Og,{points:A,baseLine:I,needClip:t,clipPathId:s,props:a,showLabels:!v})}return D>0&&(n.current=o,i.current=l),j.createElement(Ir,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(s)},j.createElement(sH,{alpha:D,points:o,baseLine:l,layout:a.layout,strokeWidth:a.strokeWidth}))),j.createElement(Ir,{clipPath:"url(#animationClipPath-".concat(s,")")},j.createElement(Og,{points:o,baseLine:l,needClip:t,clipPathId:s,props:a,showLabels:!0})))})}function nH(e){var{needClip:t,clipPathId:s,props:a}=e,{points:n,baseLine:i,isAnimationActive:o}=a,l=j.useRef(null),c=j.useRef(),d=l.current,u=c.current;return o&&n&&n.length&&(d!==n||u!==i)?j.createElement(aH,{needClip:t,clipPathId:s,props:a,previousPointsRef:l,previousBaselineRef:c}):j.createElement(Og,{points:n,baseLine:i,needClip:t,clipPathId:s,props:a,showLabels:!0})}class iH extends j.PureComponent{constructor(){super(...arguments),Af(this,"id",al("recharts-area-"))}render(){var t,{hide:s,dot:a,points:n,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:h,height:f,id:m,baseLine:p}=this.props;if(s)return null;var v=Lt("recharts-area",i),g=hr(m)?this.id:m,{r:y=3,strokeWidth:N=2}=(t=At(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},S=S4(a),C=y*2+N;return j.createElement(j.Fragment,null,j.createElement(Ir,{className:v},c&&j.createElement("defs",null,j.createElement(fS,{clipPathId:g,xAxisId:d,yAxisId:u}),!S&&j.createElement("clipPath",{id:"clipPath-dots-".concat(g)},j.createElement("rect",{x:l-C/2,y:o-C/2,width:h+C,height:f+C}))),j.createElement(nH,{needClip:c,clipPathId:g,props:this.props})),j.createElement(jN,{points:n,mainColor:qm(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(p)&&j.createElement(jN,{points:p,mainColor:qm(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var kS={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!hl.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function oH(e){var t,s=Qa(e,kS),{activeDot:a,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:f,legendType:m,stroke:p,xAxisId:v,yAxisId:g}=s,y=AS(s,HV),N=of(),S=D_(),{needClip:C}=ly(v,g),M=Ks(),D=j.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:L,isRange:A,baseLine:I}=(t=rt($=>WV($,v,g,M,D)))!==null&&t!==void 0?t:{},{height:H,width:k,left:P,top:O}=bu();return N!=="horizontal"&&N!=="vertical"||S!=="AreaChart"&&S!=="ComposedChart"?null:j.createElement(iH,so({},y,{activeDot:a,animationBegin:n,animationDuration:i,animationEasing:o,baseLine:I,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:H,hide:h,layout:N,isAnimationActive:f,isRange:A,legendType:m,needClip:C,points:L,stroke:p,width:k,left:P,top:O,xAxisId:v,yAxisId:g}))}var lH=(e,t,s,a,n)=>{var i=s??t;if(Ke(i))return i;var o=e==="horizontal"?n:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function cH(e){var{areaSettings:{connectNulls:t,baseValue:s,dataKey:a},stackedData:n,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:f,bandSize:m}=e,p=n&&n.length,v=lH(i,o,s,l,c),g=i==="horizontal",y=!1,N=d.map((C,M)=>{var D;p?D=n[u+M]:(D=xr(C,a),Array.isArray(D)?y=!0:D=[v,D]);var L=D[1]==null||p&&!t&&xr(C,a)==null;return g?{x:ij({axis:l,ticks:h,bandSize:m,entry:C,index:M}),y:L?null:c.scale(D[1]),value:D,payload:C}:{x:L?null:l.scale(D[1]),y:ij({axis:c,ticks:f,bandSize:m,entry:C,index:M}),value:D,payload:C}}),S;return p||y?S=N.map(C=>{var M=Array.isArray(C.value)?C.value[0]:null;return g?{x:C.x,y:M!=null&&C.y!=null?c.scale(M):null}:{x:M!=null?l.scale(M):null,y:C.y}}):S=g?c.scale(v):l.scale(v),{points:N,baseLine:S,isRange:y}}class xy extends j.PureComponent{render(){return j.createElement(lS,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},j.createElement(sS,{legendPayload:JV(this.props)}),j.createElement(ny,{fn:XV,args:this.props}),j.createElement(oH,this.props))}}Af(xy,"displayName","Area");Af(xy,"defaultProps",kS);function LN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function MN(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?LN(Object(s),!0).forEach(function(a){dH(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):LN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function dH(e,t,s){return(t=uH(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function uH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mH={xAxis:{},yAxis:{},zAxis:{}},ES=Xa({name:"cartesianAxis",initialState:mH,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:s,width:a}=t.payload;e.yAxis[s]&&(e.yAxis[s]=MN(MN({},e.yAxis[s]),{},{width:a}))}}}),{addXAxis:fH,removeXAxis:xH,addYAxis:pH,removeYAxis:gH,addZAxis:bJ,removeZAxis:vJ,updateYAxisWidth:bH}=ES.actions,vH=ES.reducer,yH=["children"],jH=["dangerouslySetInnerHTML","ticks"];function OS(e,t,s){return(t=wH(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function wH(e){var t=NH(e,"string");return typeof t=="symbol"?t:t+""}function NH(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Tg.apply(null,arguments)}function TS(e,t){if(e==null)return{};var s,a,n=_H(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _H(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function SH(e){var t=jr(),s=j.useMemo(()=>{var{children:i}=e,o=TS(e,yH);return o},[e]),a=rt(i=>vi(i,s.id)),n=s===a;return j.useEffect(()=>(t(fH(s)),()=>{t(xH(s))}),[s,t]),n?e.children:null}var PH=e=>{var{xAxisId:t,className:s}=e,a=rt(T3),n=Ks(),i="xAxis",o=rt(m=>zc(m,i,t,n)),l=rt(m=>f_(m,i,t,n)),c=rt(m=>d_(m,t)),d=rt(m=>z$(m,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,f=TS(e,jH);return j.createElement(vo,Tg({},f,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:Lt("recharts-".concat(i," ").concat(i),s),viewBox:a,ticks:l}))},CH=e=>{var t,s,a,n,i;return j.createElement(SH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(s=e.includeHidden)!==null&&s!==void 0?s:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},j.createElement(PH,e))};class kf extends j.Component{render(){return j.createElement(CH,this.props)}}OS(kf,"displayName","XAxis");OS(kf,"defaultProps",{allowDataOverflow:wa.allowDataOverflow,allowDecimals:wa.allowDecimals,allowDuplicatedCategory:wa.allowDuplicatedCategory,height:wa.height,hide:!1,mirror:wa.mirror,orientation:wa.orientation,padding:wa.padding,reversed:wa.reversed,scale:wa.scale,tickCount:wa.tickCount,type:wa.type,xAxisId:0});var AH=e=>{var{ticks:t,label:s,labelGapWithTick:a=5,tickSize:n=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=s?s.getBoundingClientRect().width:0,c=n+i,d=o+c+l+(s?a:0);return Math.round(d)}return 0},kH=["dangerouslySetInnerHTML","ticks"];function LS(e,t,s){return(t=EH(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function EH(e){var t=OH(e,"string");return typeof t=="symbol"?t:t+""}function OH(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Lg.apply(null,arguments)}function TH(e,t){if(e==null)return{};var s,a,n=LH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function LH(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function MH(e){var t=jr();return j.useEffect(()=>(t(pH(e)),()=>{t(gH(e))}),[e,t]),null}var DH=e=>{var t,{yAxisId:s,className:a,width:n,label:i}=e,o=j.useRef(null),l=j.useRef(null),c=rt(T3),d=Ks(),u=jr(),h="yAxis",f=rt(S=>zc(S,h,s,d)),m=rt(S=>u_(S,s)),p=rt(S=>U$(S,s)),v=rt(S=>f_(S,h,s,d));if(j.useLayoutEffect(()=>{var S;if(!(n!=="auto"||!m||Xv(i)||j.isValidElement(i))){var C=o.current,M=C==null||(S=C.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:D,tickMargin:L}=C.props,A=AH({ticks:M,label:l.current,labelGapWithTick:5,tickSize:D,tickMargin:L});Math.round(m.width)!==Math.round(A)&&u(bH({id:s,width:A}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,u,i,s,n]),m==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:y}=e,N=TH(e,kH);return j.createElement(vo,Lg({},N,{ref:o,labelRef:l,scale:f,x:p.x,y:p.y,width:m.width,height:m.height,className:Lt("recharts-".concat(h," ").concat(h),a),viewBox:c,ticks:v}))},IH=e=>{var t,s,a,n,i;return j.createElement(j.Fragment,null,j.createElement(MH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(s=e.includeHidden)!==null&&s!==void 0?s:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),j.createElement(DH,e))},RH={allowDataOverflow:Na.allowDataOverflow,allowDecimals:Na.allowDecimals,allowDuplicatedCategory:Na.allowDuplicatedCategory,hide:!1,mirror:Na.mirror,orientation:Na.orientation,padding:Na.padding,reversed:Na.reversed,scale:Na.scale,tickCount:Na.tickCount,type:Na.type,width:Na.width,yAxisId:0};class Ef extends j.Component{render(){return j.createElement(IH,this.props)}}LS(Ef,"displayName","YAxis");LS(Ef,"defaultProps",RH);var dp={exports:{}},up={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DN;function FH(){if(DN)return up;DN=1;var e=eb();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var s=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return up.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var m=n(null);if(m.current===null){var p={hasValue:!1,value:null};m.current=p}else p=m.current;m=o(function(){function g(M){if(!y){if(y=!0,N=M,M=h(M),f!==void 0&&p.hasValue){var D=p.value;if(f(D,M))return S=D}return S=M}if(D=S,s(N,M))return D;var L=h(M);return f!==void 0&&f(D,L)?(N=M,D):(N=M,S=L)}var y=!1,N,S,C=u===void 0?null:u;return[function(){return g(d())},C===null?void 0:function(){return g(C())}]},[d,u,h,f]);var v=a(c,m[0],m[1]);return i(function(){p.hasValue=!0,p.value=v},[v]),l(v),v},up}var IN;function $H(){return IN||(IN=1,dp.exports=FH()),dp.exports}$H();function qH(e){e()}function BH(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qH(()=>{let s=e;for(;s;)s.callback(),s=s.next})},get(){const s=[];let a=e;for(;a;)s.push(a),a=a.next;return s},subscribe(s){let a=!0;const n=t={callback:s,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!a||e===null||(a=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var RN={notify(){},get:()=>[]};function zH(e,t){let s,a=RN,n=0,i=!1;function o(v){u();const g=a.subscribe(v);let y=!1;return()=>{y||(y=!0,g(),h())}}function l(){a.notify()}function c(){p.onStateChange&&p.onStateChange()}function d(){return i}function u(){n++,s||(s=e.subscribe(c),a=BH())}function h(){n--,s&&n===0&&(s(),s=void 0,a.clear(),a=RN)}function f(){i||(i=!0,u())}function m(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>a};return p}var UH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WH=UH(),VH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",HH=VH(),GH=()=>WH||HH?j.useLayoutEffect:j.useEffect,KH=GH(),hp=Symbol.for("react-redux-context"),mp=typeof globalThis<"u"?globalThis:{};function YH(){if(!j.createContext)return{};const e=mp[hp]??(mp[hp]=new Map);let t=e.get(j.createContext);return t||(t=j.createContext(null),e.set(j.createContext,t)),t}var JH=YH();function XH(e){const{children:t,context:s,serverState:a,store:n}=e,i=j.useMemo(()=>{const c=zH(n);return{store:n,subscription:c,getServerState:a?()=>a:void 0}},[n,a]),o=j.useMemo(()=>n.getState(),[n]);KH(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=s||JH;return j.createElement(l.Provider,{value:i},t)}var QH=XH,ZH=(e,t)=>t,py=ke([ZH,$t,r$,xs,A_,yi,zq,ms],Yq),gy=e=>{var t=e.currentTarget.getBoundingClientRect(),s=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/s),chartY:Math.round((e.clientY-t.top)/a)}},MS=Ya("mouseClick"),DS=gu();DS.startListening({actionCreator:MS,effect:(e,t)=>{var s=e.payload,a=py(t.getState(),gy(s));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(rq({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Mg=Ya("mouseMove"),IS=gu();IS.startListening({actionCreator:Mg,effect:(e,t)=>{var s=e.payload,a=t.getState(),n=qv(a,a.tooltip.settings.shared),i=py(a,gy(s));n==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(w_({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(j_()))}});function eG(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var FN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},RS=Xa({name:"rootProps",initialState:FN,reducers:{updateOptions:(e,t)=>{var s;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(s=t.payload.barGap)!==null&&s!==void 0?s:FN.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),tG=RS.reducer,{updateOptions:rG}=RS.actions,FS=Xa({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:sG}=FS.actions,aG=FS.reducer,$S=Ya("keyDown"),qS=Ya("focus"),by=gu();by.startListening({actionCreator:$S,effect:(e,t)=>{var s=t.getState(),a=s.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=s.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(Bv(n,pl(s))),l=yi(s);if(i==="Enter"){var c=Mm(s,"axis","hover",String(n.index));t.dispatch(Ng({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}));return}var d=G$(s),u=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*u;if(!(l==null||f>=l.length||f<0)){var m=Mm(s,"axis","hover",String(f));t.dispatch(Ng({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});by.startListening({actionCreator:qS,effect:(e,t)=>{var s=t.getState(),a=s.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:n}=s.tooltip;if(!n.active&&n.index==null){var i="0",o=Mm(s,"axis","hover",String(i));t.dispatch(Ng({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Va=Ya("externalEvent"),BS=gu();BS.startListening({actionCreator:Va,effect:(e,t)=>{if(e.payload.handler!=null){var s=t.getState(),a={activeCoordinate:Tq(s),activeDataKey:L_(s),activeIndex:ll(s),activeLabel:T_(s),activeTooltipIndex:ll(s),isTooltipActive:Lq(s)};e.payload.handler(a,e.payload.reactEvent)}}});var nG=ke([Uc],e=>e.tooltipItemPayloads),iG=ke([nG,wf,(e,t,s)=>t,(e,t,s)=>s],(e,t,s,a)=>{var n=e.find(l=>l.settings.dataKey===a);if(n!=null){var{positions:i}=n;if(i!=null){var o=t(i,s);return o}}}),zS=Ya("touchMove"),US=gu();US.startListening({actionCreator:zS,effect:(e,t)=>{var s=e.payload,a=t.getState(),n=qv(a,a.tooltip.settings.shared);if(n==="axis"){var i=py(a,gy({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,currentTarget:s.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(w_({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,l=s.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(E3),u=(o=c.getAttribute(O3))!==null&&o!==void 0?o:void 0,h=iG(t.getState(),d,u);t.dispatch(y_({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var oG=s3({brush:eV,cartesianAxis:vH,chartData:uB,graphicalItems:Hz,layout:VM,legend:OD,options:iB,polarAxis:Oz,polarOptions:aG,referenceElements:oV,rootProps:tG,tooltip:sq}),lG=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return pM({reducer:oG,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([DS.middleware,IS.middleware,by.middleware,BS.middleware,US.middleware]),devTools:{serialize:{replacer:eG},name:"recharts-".concat(s)}})};function WS(e){var{preloadedState:t,children:s,reduxStoreName:a}=e,n=Ks(),i=j.useRef(null);if(n)return s;i.current==null&&(i.current=lG(t,a));var o=Eb;return j.createElement(QH,{context:o,store:i.current},s)}function VS(e){var{layout:t,width:s,height:a,margin:n}=e,i=jr(),o=Ks();return j.useEffect(()=>{o||(i(zM(t)),i(UM({width:s,height:a})),i(BM(n)))},[i,o,t,s,a,n]),null}function HS(e){var t=jr();return j.useEffect(()=>{t(rG(e))},[t,e]),null}var cG=["children"];function dG(e,t){if(e==null)return{};var s,a,n=uG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function uG(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Bm.apply(null,arguments)}var hG={width:"100%",height:"100%"},mG=j.forwardRef((e,t)=>{var s=qb(),a=Bb(),n=I3();if(!Cc(s)||!Cc(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=n?0:void 0,typeof o.role=="string"?u=o.role:u=n?"application":void 0,j.createElement(bb,Bm({},o,{title:l,desc:c,role:u,tabIndex:d,width:s,height:a,style:hG,ref:t}),i)}),fG=e=>{var{children:t}=e,s=rt(nf);if(!s)return null;var{width:a,height:n,y:i,x:o}=s;return j.createElement(bb,{width:a,height:n,x:o,y:i},t)},$N=j.forwardRef((e,t)=>{var{children:s}=e,a=dG(e,cG),n=Ks();return n?j.createElement(fG,null,s):j.createElement(mG,Bm({ref:t},a),s)});function xG(){var e=jr(),[t,s]=j.useState(null),a=rt(vD);return j.useEffect(()=>{if(t!=null){var n=t.getBoundingClientRect(),i=n.width/t.offsetWidth;Ns(i)&&i!==a&&e(WM(i))}},[t,e,a]),s}function qN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function pG(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?qN(Object(s),!0).forEach(function(a){gG(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qN(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function gG(e,t,s){return(t=bG(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bG(e){var t=vG(e,"string");return typeof t=="symbol"?t:t+""}function vG(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yG=j.forwardRef((e,t)=>{var{children:s,className:a,height:n,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:p,onTouchStart:v,style:g,width:y}=e,N=jr(),[S,C]=j.useState(null),[M,D]=j.useState(null);fB();var L=xG(),A=j.useCallback(R=>{L(R),typeof t=="function"&&t(R),C(R),D(R)},[L,t,C,D]),I=j.useCallback(R=>{N(MS(R)),N(Va({handler:i,reactEvent:R}))},[N,i]),H=j.useCallback(R=>{N(Mg(R)),N(Va({handler:d,reactEvent:R}))},[N,d]),k=j.useCallback(R=>{N(j_()),N(Va({handler:u,reactEvent:R}))},[N,u]),P=j.useCallback(R=>{N(Mg(R)),N(Va({handler:h,reactEvent:R}))},[N,h]),O=j.useCallback(()=>{N(qS())},[N]),$=j.useCallback(R=>{N($S(R.key))},[N]),V=j.useCallback(R=>{N(Va({handler:o,reactEvent:R}))},[N,o]),T=j.useCallback(R=>{N(Va({handler:l,reactEvent:R}))},[N,l]),F=j.useCallback(R=>{N(Va({handler:c,reactEvent:R}))},[N,c]),z=j.useCallback(R=>{N(Va({handler:f,reactEvent:R}))},[N,f]),se=j.useCallback(R=>{N(Va({handler:v,reactEvent:R}))},[N,v]),Y=j.useCallback(R=>{N(zS(R)),N(Va({handler:p,reactEvent:R}))},[N,p]),_e=j.useCallback(R=>{N(Va({handler:m,reactEvent:R}))},[N,m]);return j.createElement(q_.Provider,{value:S},j.createElement(P4.Provider,{value:M},j.createElement("div",{className:Lt("recharts-wrapper",a),style:pG({position:"relative",cursor:"default",width:y,height:n},g),role:"application",onClick:I,onContextMenu:V,onDoubleClick:T,onFocus:O,onKeyDown:$,onMouseDown:F,onMouseEnter:H,onMouseLeave:k,onMouseMove:P,onMouseUp:z,onTouchEnd:_e,onTouchMove:Y,onTouchStart:se,ref:A},s)))}),jG=["children","className","width","height","style","compact","title","desc"];function wG(e,t){if(e==null)return{};var s,a,n=NG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function NG(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var GS=j.forwardRef((e,t)=>{var{children:s,className:a,width:n,height:i,style:o,compact:l,title:c,desc:d}=e,u=wG(e,jG),h=At(u,!1);return l?j.createElement($N,{otherAttributes:h,title:c,desc:d},s):j.createElement(yG,{className:a,style:o,width:n,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},j.createElement($N,{otherAttributes:h,title:c,desc:d,ref:t},j.createElement(cV,null,s)))}),_G=["width","height"];function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Dg.apply(null,arguments)}function SG(e,t){if(e==null)return{};var s,a,n=PG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function PG(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var CG={top:5,right:5,bottom:5,left:5},AG={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:CG,reverseStackOrder:!1,syncMethod:"index"},KS=j.forwardRef(function(t,s){var a,n=Qa(t.categoricalChartProps,AG),{width:i,height:o}=n,l=SG(n,_G);if(!Cc(i)||!Cc(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:f}=t,m={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return j.createElement(WS,{preloadedState:{options:m},reduxStoreName:(a=f.id)!==null&&a!==void 0?a:c},j.createElement(vS,{chartData:f.data}),j.createElement(VS,{width:i,height:o,layout:n.layout,margin:n.margin}),j.createElement(HS,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),j.createElement(GS,Dg({},l,{width:i,height:o,ref:s})))}),kG=["axis","item"],EG=j.forwardRef((e,t)=>j.createElement(KS,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kG,tooltipPayloadSearcher:Kv,categoricalChartProps:e,ref:t}));function OG(e){var t=jr();return j.useEffect(()=>{t(sG(e))},[t,e]),null}var TG=["width","height","layout"];function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ig.apply(null,arguments)}function LG(e,t){if(e==null)return{};var s,a,n=MG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function MG(e,t){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;s[a]=e[a]}return s}var DG={top:5,right:5,bottom:5,left:5},IG={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:DG,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},RG=j.forwardRef(function(t,s){var a,n=Qa(t.categoricalChartProps,IG),{width:i,height:o,layout:l}=n,c=LG(n,TG);if(!Cc(i)||!Cc(o))return null;var{chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f}=t,m={chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return j.createElement(WS,{preloadedState:{options:m},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:d},j.createElement(vS,{chartData:n.data}),j.createElement(VS,{width:i,height:o,layout:l,margin:n.margin}),j.createElement(HS,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),j.createElement(OG,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),j.createElement(GS,Ig({width:i,height:o},c,{ref:s})))}),FG=["item"],$G={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},qG=j.forwardRef((e,t)=>{var s=Qa(e,$G);return j.createElement(RG,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:FG,tooltipPayloadSearcher:Kv,categoricalChartProps:s,ref:t})}),BG=["axis"],zG=j.forwardRef((e,t)=>j.createElement(KS,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BG,tooltipPayloadSearcher:Kv,categoricalChartProps:e,ref:t}));const Mo={primary:"#b58150",secondary:"#8b5a3c",accent:"#d4a574",success:"#10b981",warning:"#f59e0b",danger:"#ef4444",info:"#3b82f6"},Zo=[Mo.primary,Mo.secondary,Mo.accent,Mo.success,Mo.warning,Mo.danger,Mo.info],vy=({active:e,payload:t,label:s,formatter:a})=>e&&t&&t.length?r.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3 shadow-xl",children:[r.jsx("p",{className:"text-gray-200 font-medium mb-2",children:s}),t.map((n,i)=>r.jsx("p",{className:"text-sm",style:{color:n.color},children:`${n.name}: ${a?a(n.value):n.value}`},i))]}):null,UG=({data:e,areas:t=[],height:s=300,title:a,formatter:n=null})=>r.jsxs("div",{className:"w-full",children:[a&&r.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:a}),r.jsx(Jv,{width:"100%",height:s,children:r.jsxs(zG,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[r.jsx("defs",{children:t.map((i,o)=>r.jsxs("linearGradient",{id:`color${i.dataKey}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:i.color||Zo[o],stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:i.color||Zo[o],stopOpacity:.1})]},i.dataKey))}),r.jsx(kf,{dataKey:"name",stroke:"#9ca3af",fontSize:12}),r.jsx(Ef,{stroke:"#9ca3af",fontSize:12}),r.jsx(fy,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(Yv,{content:r.jsx(vy,{formatter:n})}),r.jsx(Dc,{}),t.map((i,o)=>r.jsx(xy,{type:"monotone",dataKey:i.dataKey,name:i.name,stroke:i.color||Zo[o],fillOpacity:1,fill:`url(#color${i.dataKey})`},i.dataKey))]})})]}),Vc=({data:e,bars:t=[],height:s=300,title:a,formatter:n=null})=>r.jsxs("div",{className:"w-full",children:[a&&r.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:a}),r.jsx(Jv,{width:"100%",height:s,children:r.jsxs(EG,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(fy,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),r.jsx(kf,{dataKey:"name",stroke:"#9ca3af",fontSize:12}),r.jsx(Ef,{stroke:"#9ca3af",fontSize:12}),r.jsx(Yv,{content:r.jsx(vy,{formatter:n})}),r.jsx(Dc,{}),t.map((i,o)=>r.jsx(cy,{dataKey:i.dataKey,name:i.name,fill:i.color||Zo[o%Zo.length],radius:[4,4,0,0]},i.dataKey))]})})]}),Hc=({data:e,height:t=300,title:s,formatter:a=null,showLabels:n=!0})=>{const i=({cx:o,cy:l,midAngle:c,innerRadius:d,outerRadius:u,percent:h})=>{if(!n)return null;const f=Math.PI/180,m=d+(u-d)*.5,p=o+m*Math.cos(-c*f),v=l+m*Math.sin(-c*f);return r.jsx("text",{x:p,y:v,fill:"white",textAnchor:p>o?"start":"end",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:`${(h*100).toFixed(0)}%`})};return r.jsxs("div",{className:"w-full",children:[s&&r.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:s}),r.jsx(Jv,{width:"100%",height:t,children:r.jsxs(qG,{children:[r.jsx(oy,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:i,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((o,l)=>r.jsx(Au,{fill:Zo[l%Zo.length]},`cell-${l}`))}),r.jsx(Yv,{content:r.jsx(vy,{formatter:a})}),r.jsx(Dc,{})]})})]})},BN=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);var Ms=Uint8Array,Aa=Uint16Array,yy=Int32Array,Of=new Ms([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tf=new Ms([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rg=new Ms([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YS=function(e,t){for(var s=new Aa(31),a=0;a<31;++a)s[a]=t+=1<<e[a-1];for(var n=new yy(s[30]),a=1;a<30;++a)for(var i=s[a];i<s[a+1];++i)n[i]=i-s[a]<<5|a;return{b:s,r:n}},JS=YS(Of,2),XS=JS.b,Fg=JS.r;XS[28]=258,Fg[258]=28;var QS=YS(Tf,0),WG=QS.b,zN=QS.r,$g=new Aa(32768);for(var pr=0;pr<32768;++pr){var Bi=(pr&43690)>>1|(pr&21845)<<1;Bi=(Bi&52428)>>2|(Bi&13107)<<2,Bi=(Bi&61680)>>4|(Bi&3855)<<4,$g[pr]=((Bi&65280)>>8|(Bi&255)<<8)>>1}var Dn=function(e,t,s){for(var a=e.length,n=0,i=new Aa(t);n<a;++n)e[n]&&++i[e[n]-1];var o=new Aa(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(s){l=new Aa(1<<t);var c=15-t;for(n=0;n<a;++n)if(e[n])for(var d=n<<4|e[n],u=t-e[n],h=o[e[n]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[$g[h]>>c]=d}else for(l=new Aa(a),n=0;n<a;++n)e[n]&&(l[n]=$g[o[e[n]-1]++]>>15-e[n]);return l},co=new Ms(288);for(var pr=0;pr<144;++pr)co[pr]=8;for(var pr=144;pr<256;++pr)co[pr]=9;for(var pr=256;pr<280;++pr)co[pr]=7;for(var pr=280;pr<288;++pr)co[pr]=8;var uu=new Ms(32);for(var pr=0;pr<32;++pr)uu[pr]=5;var VG=Dn(co,9,0),HG=Dn(co,9,1),GG=Dn(uu,5,0),KG=Dn(uu,5,1),fp=function(e){for(var t=e[0],s=1;s<e.length;++s)e[s]>t&&(t=e[s]);return t},ln=function(e,t,s){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&s},xp=function(e,t){var s=t/8|0;return(e[s]|e[s+1]<<8|e[s+2]<<16)>>(t&7)},jy=function(e){return(e+7)/8|0},ZS=function(e,t,s){return(s==null||s>e.length)&&(s=e.length),new Ms(e.subarray(t,s))},YG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],hn=function(e,t,s){var a=new Error(t||YG[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,hn),!s)throw a;return a},JG=function(e,t,s,a){var n=e.length,i=0;if(!n||t.f&&!t.l)return s||new Ms(0);var o=!s,l=o||t.i!=2,c=t.i;o&&(s=new Ms(n*3));var d=function(ye){var fe=s.length;if(ye>fe){var Le=new Ms(Math.max(fe*2,ye));Le.set(s),s=Le}},u=t.f||0,h=t.p||0,f=t.b||0,m=t.l,p=t.d,v=t.m,g=t.n,y=n*8;do{if(!m){u=ln(e,h,1);var N=ln(e,h+1,3);if(h+=3,N)if(N==1)m=HG,p=KG,v=9,g=5;else if(N==2){var D=ln(e,h,31)+257,L=ln(e,h+10,15)+4,A=D+ln(e,h+5,31)+1;h+=14;for(var I=new Ms(A),H=new Ms(19),k=0;k<L;++k)H[Rg[k]]=ln(e,h+k*3,7);h+=L*3;for(var P=fp(H),O=(1<<P)-1,$=Dn(H,P,1),k=0;k<A;){var V=$[ln(e,h,O)];h+=V&15;var S=V>>4;if(S<16)I[k++]=S;else{var T=0,F=0;for(S==16?(F=3+ln(e,h,3),h+=2,T=I[k-1]):S==17?(F=3+ln(e,h,7),h+=3):S==18&&(F=11+ln(e,h,127),h+=7);F--;)I[k++]=T}}var z=I.subarray(0,D),se=I.subarray(D);v=fp(z),g=fp(se),m=Dn(z,v,1),p=Dn(se,g,1)}else hn(1);else{var S=jy(h)+4,C=e[S-4]|e[S-3]<<8,M=S+C;if(M>n){c&&hn(0);break}l&&d(f+C),s.set(e.subarray(S,M),f),t.b=f+=C,t.p=h=M*8,t.f=u;continue}if(h>y){c&&hn(0);break}}l&&d(f+131072);for(var Y=(1<<v)-1,_e=(1<<g)-1,R=h;;R=h){var T=m[xp(e,h)&Y],Q=T>>4;if(h+=T&15,h>y){c&&hn(0);break}if(T||hn(2),Q<256)s[f++]=Q;else if(Q==256){R=h,m=null;break}else{var re=Q-254;if(Q>264){var k=Q-257,te=Of[k];re=ln(e,h,(1<<te)-1)+XS[k],h+=te}var le=p[xp(e,h)&_e],be=le>>4;le||hn(3),h+=le&15;var se=WG[be];if(be>3){var te=Tf[be];se+=xp(e,h)&(1<<te)-1,h+=te}if(h>y){c&&hn(0);break}l&&d(f+131072);var we=f+re;if(f<se){var oe=i-se,Ce=Math.min(se,we);for(oe+f<0&&hn(3);f<Ce;++f)s[f]=a[oe+f]}for(;f<we;++f)s[f]=s[f-se]}}t.l=m,t.p=R,t.b=f,t.f=u,m&&(u=1,t.m=v,t.d=p,t.n=g)}while(!u);return f!=s.length&&o?ZS(s,0,f):s.subarray(0,f)},Zn=function(e,t,s){s<<=t&7;var a=t/8|0;e[a]|=s,e[a+1]|=s>>8},Ed=function(e,t,s){s<<=t&7;var a=t/8|0;e[a]|=s,e[a+1]|=s>>8,e[a+2]|=s>>16},pp=function(e,t){for(var s=[],a=0;a<e.length;++a)e[a]&&s.push({s:a,f:e[a]});var n=s.length,i=s.slice();if(!n)return{t:tP,l:0};if(n==1){var o=new Ms(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(M,D){return M.f-D.f}),s.push({s:-1,f:25001});var l=s[0],c=s[1],d=0,u=1,h=2;for(s[0]={s:-1,f:l.f+c.f,l,r:c};u!=n-1;)l=s[s[d].f<s[h].f?d++:h++],c=s[d!=u&&s[d].f<s[h].f?d++:h++],s[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=i[0].s,a=1;a<n;++a)i[a].s>f&&(f=i[a].s);var m=new Aa(f+1),p=qg(s[u-1],m,0);if(p>t){var a=0,v=0,g=p-t,y=1<<g;for(i.sort(function(D,L){return m[L.s]-m[D.s]||D.f-L.f});a<n;++a){var N=i[a].s;if(m[N]>t)v+=y-(1<<p-m[N]),m[N]=t;else break}for(v>>=g;v>0;){var S=i[a].s;m[S]<t?v-=1<<t-m[S]++-1:++a}for(;a>=0&&v;--a){var C=i[a].s;m[C]==t&&(--m[C],++v)}p=t}return{t:new Ms(m),l:p}},qg=function(e,t,s){return e.s==-1?Math.max(qg(e.l,t,s+1),qg(e.r,t,s+1)):t[e.s]=s},UN=function(e){for(var t=e.length;t&&!e[--t];);for(var s=new Aa(++t),a=0,n=e[0],i=1,o=function(c){s[a++]=c},l=1;l<=t;++l)if(e[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=e[l]}return{c:s.subarray(0,a),n:t}},Od=function(e,t){for(var s=0,a=0;a<t.length;++a)s+=e[a]*t[a];return s},eP=function(e,t,s){var a=s.length,n=jy(t+2);e[n]=a&255,e[n+1]=a>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var i=0;i<a;++i)e[n+i+4]=s[i];return(n+4+a)*8},WN=function(e,t,s,a,n,i,o,l,c,d,u){Zn(t,u++,s),++n[256];for(var h=pp(n,15),f=h.t,m=h.l,p=pp(i,15),v=p.t,g=p.l,y=UN(f),N=y.c,S=y.n,C=UN(v),M=C.c,D=C.n,L=new Aa(19),A=0;A<N.length;++A)++L[N[A]&31];for(var A=0;A<M.length;++A)++L[M[A]&31];for(var I=pp(L,7),H=I.t,k=I.l,P=19;P>4&&!H[Rg[P-1]];--P);var O=d+5<<3,$=Od(n,co)+Od(i,uu)+o,V=Od(n,f)+Od(i,v)+o+14+3*P+Od(L,H)+2*L[16]+3*L[17]+7*L[18];if(c>=0&&O<=$&&O<=V)return eP(t,u,e.subarray(c,c+d));var T,F,z,se;if(Zn(t,u,1+(V<$)),u+=2,V<$){T=Dn(f,m,0),F=f,z=Dn(v,g,0),se=v;var Y=Dn(H,k,0);Zn(t,u,S-257),Zn(t,u+5,D-1),Zn(t,u+10,P-4),u+=14;for(var A=0;A<P;++A)Zn(t,u+3*A,H[Rg[A]]);u+=3*P;for(var _e=[N,M],R=0;R<2;++R)for(var Q=_e[R],A=0;A<Q.length;++A){var re=Q[A]&31;Zn(t,u,Y[re]),u+=H[re],re>15&&(Zn(t,u,Q[A]>>5&127),u+=Q[A]>>12)}}else T=VG,F=co,z=GG,se=uu;for(var A=0;A<l;++A){var te=a[A];if(te>255){var re=te>>18&31;Ed(t,u,T[re+257]),u+=F[re+257],re>7&&(Zn(t,u,te>>23&31),u+=Of[re]);var le=te&31;Ed(t,u,z[le]),u+=se[le],le>3&&(Ed(t,u,te>>5&8191),u+=Tf[le])}else Ed(t,u,T[te]),u+=F[te]}return Ed(t,u,T[256]),u+F[256]},XG=new yy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tP=new Ms(0),QG=function(e,t,s,a,n,i){var o=i.z||e.length,l=new Ms(a+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(a,l.length-n),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=XG[t-1],f=h>>13,m=h&8191,p=(1<<s)-1,v=i.p||new Aa(32768),g=i.h||new Aa(p+1),y=Math.ceil(s/3),N=2*y,S=function(Te){return(e[Te]^e[Te+1]<<y^e[Te+2]<<N)&p},C=new yy(25e3),M=new Aa(288),D=new Aa(32),L=0,A=0,I=i.i||0,H=0,k=i.w||0,P=0;I+2<o;++I){var O=S(I),$=I&32767,V=g[O];if(v[$]=V,g[O]=$,k<=I){var T=o-I;if((L>7e3||H>24576)&&(T>423||!d)){u=WN(e,c,0,C,M,D,A,H,P,I-P,u),H=L=A=0,P=I;for(var F=0;F<286;++F)M[F]=0;for(var F=0;F<30;++F)D[F]=0}var z=2,se=0,Y=m,_e=$-V&32767;if(T>2&&O==S(I-_e))for(var R=Math.min(f,T)-1,Q=Math.min(32767,I),re=Math.min(258,T);_e<=Q&&--Y&&$!=V;){if(e[I+z]==e[I+z-_e]){for(var te=0;te<re&&e[I+te]==e[I+te-_e];++te);if(te>z){if(z=te,se=_e,te>R)break;for(var le=Math.min(_e,te-2),be=0,F=0;F<le;++F){var we=I-_e+F&32767,oe=v[we],Ce=we-oe&32767;Ce>be&&(be=Ce,V=we)}}}$=V,V=v[$],_e+=$-V&32767}if(se){C[H++]=268435456|Fg[z]<<18|zN[se];var ye=Fg[z]&31,fe=zN[se]&31;A+=Of[ye]+Tf[fe],++M[257+ye],++D[fe],k=I+z,++L}else C[H++]=e[I],++M[e[I]]}}for(I=Math.max(I,k);I<o;++I)C[H++]=e[I],++M[e[I]];u=WN(e,c,d,C,M,D,A,H,P,I-P,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=v,i.i=I,i.w=k)}else{for(var I=i.w||0;I<o+d;I+=65535){var Le=I+65535;Le>=o&&(c[u/8|0]=d,Le=o),u=eP(c,u+1,e.subarray(I,Le))}i.i=o}return ZS(l,0,a+jy(u)+n)},rP=function(){var e=1,t=0;return{p:function(s){for(var a=e,n=t,i=s.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=a+=s[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}e=a,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},ZG=function(e,t,s,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Ms(i.length+e.length);o.set(i),o.set(e,i.length),e=o,n.w=i.length}return QG(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,s,a,n)},sP=function(e,t,s){for(;s;++t)e[t]=s,s>>>=8},eK=function(e,t){var s=t.level,a=s==0?0:s<6?1:s==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=rP();n.p(t.dictionary),sP(e,2,n.d())}},tK=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&hn(6,"invalid zlib data"),(e[1]>>5&1)==1&&hn(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Bg(e,t){t||(t={});var s=rP();s.p(e);var a=ZG(e,t,t.dictionary?6:2,4);return eK(a,t),sP(a,a.length-4,s.d()),a}function rK(e,t){return JG(e.subarray(tK(e),-4),{i:2},t,t)}var sK=typeof TextDecoder<"u"&&new TextDecoder,aK=0;try{sK.decode(tP,{stream:!0}),aK=1}catch{}var ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function gp(){ut.console&&typeof ut.console.log=="function"&&ut.console.log.apply(ut.console,arguments)}var tr={log:gp,warn:function(e){ut.console&&(typeof ut.console.warn=="function"?ut.console.warn.apply(ut.console,arguments):gp.call(null,arguments))},error:function(e){ut.console&&(typeof ut.console.error=="function"?ut.console.error.apply(ut.console,arguments):gp(e))}};function bp(e,t,s){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){qo(a.response,t,s)},a.onerror=function(){tr.error("could not download file")},a.send()}function VN(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function qh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Kd,zg,qo=ut.saveAs||((typeof window>"u"?"undefined":zt(window))!=="object"||window!==ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,s){var a=ut.URL||ut.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?VN(n.href)?bp(e,t,s):qh(n,n.target="_blank"):qh(n)):(n.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){qh(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,s){if(t=t||e.name||"download",typeof e=="string")if(VN(e))bp(e,t,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){qh(a)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:zt(i)!=="object"&&(tr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,s),t)}:function(e,t,s,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return bp(e,t,s);var n=e.type==="application/octet-stream",i=/constructor/i.test(ut.HTMLElement)||ut.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":zt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=ut.URL||ut.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function aP(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<s.length;a++){var n=s[a].re,i=s[a].process,o=n.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function vp(e,t){var s=e[0],a=e[1],n=e[2],i=e[3];s=Cs(s,a,n,i,t[0],7,-680876936),i=Cs(i,s,a,n,t[1],12,-389564586),n=Cs(n,i,s,a,t[2],17,606105819),a=Cs(a,n,i,s,t[3],22,-1044525330),s=Cs(s,a,n,i,t[4],7,-176418897),i=Cs(i,s,a,n,t[5],12,1200080426),n=Cs(n,i,s,a,t[6],17,-1473231341),a=Cs(a,n,i,s,t[7],22,-45705983),s=Cs(s,a,n,i,t[8],7,1770035416),i=Cs(i,s,a,n,t[9],12,-1958414417),n=Cs(n,i,s,a,t[10],17,-42063),a=Cs(a,n,i,s,t[11],22,-1990404162),s=Cs(s,a,n,i,t[12],7,1804603682),i=Cs(i,s,a,n,t[13],12,-40341101),n=Cs(n,i,s,a,t[14],17,-1502002290),s=As(s,a=Cs(a,n,i,s,t[15],22,1236535329),n,i,t[1],5,-165796510),i=As(i,s,a,n,t[6],9,-1069501632),n=As(n,i,s,a,t[11],14,643717713),a=As(a,n,i,s,t[0],20,-373897302),s=As(s,a,n,i,t[5],5,-701558691),i=As(i,s,a,n,t[10],9,38016083),n=As(n,i,s,a,t[15],14,-660478335),a=As(a,n,i,s,t[4],20,-405537848),s=As(s,a,n,i,t[9],5,568446438),i=As(i,s,a,n,t[14],9,-1019803690),n=As(n,i,s,a,t[3],14,-187363961),a=As(a,n,i,s,t[8],20,1163531501),s=As(s,a,n,i,t[13],5,-1444681467),i=As(i,s,a,n,t[2],9,-51403784),n=As(n,i,s,a,t[7],14,1735328473),s=ks(s,a=As(a,n,i,s,t[12],20,-1926607734),n,i,t[5],4,-378558),i=ks(i,s,a,n,t[8],11,-2022574463),n=ks(n,i,s,a,t[11],16,1839030562),a=ks(a,n,i,s,t[14],23,-35309556),s=ks(s,a,n,i,t[1],4,-1530992060),i=ks(i,s,a,n,t[4],11,1272893353),n=ks(n,i,s,a,t[7],16,-155497632),a=ks(a,n,i,s,t[10],23,-1094730640),s=ks(s,a,n,i,t[13],4,681279174),i=ks(i,s,a,n,t[0],11,-358537222),n=ks(n,i,s,a,t[3],16,-722521979),a=ks(a,n,i,s,t[6],23,76029189),s=ks(s,a,n,i,t[9],4,-640364487),i=ks(i,s,a,n,t[12],11,-421815835),n=ks(n,i,s,a,t[15],16,530742520),s=Es(s,a=ks(a,n,i,s,t[2],23,-995338651),n,i,t[0],6,-198630844),i=Es(i,s,a,n,t[7],10,1126891415),n=Es(n,i,s,a,t[14],15,-1416354905),a=Es(a,n,i,s,t[5],21,-57434055),s=Es(s,a,n,i,t[12],6,1700485571),i=Es(i,s,a,n,t[3],10,-1894986606),n=Es(n,i,s,a,t[10],15,-1051523),a=Es(a,n,i,s,t[1],21,-2054922799),s=Es(s,a,n,i,t[8],6,1873313359),i=Es(i,s,a,n,t[15],10,-30611744),n=Es(n,i,s,a,t[6],15,-1560198380),a=Es(a,n,i,s,t[13],21,1309151649),s=Es(s,a,n,i,t[4],6,-145523070),i=Es(i,s,a,n,t[11],10,-1120210379),n=Es(n,i,s,a,t[2],15,718787259),a=Es(a,n,i,s,t[9],21,-343485551),e[0]=Qi(s,e[0]),e[1]=Qi(a,e[1]),e[2]=Qi(n,e[2]),e[3]=Qi(i,e[3])}function Lf(e,t,s,a,n,i){return t=Qi(Qi(t,e),Qi(a,i)),Qi(t<<n|t>>>32-n,s)}function Cs(e,t,s,a,n,i,o){return Lf(t&s|~t&a,e,t,n,i,o)}function As(e,t,s,a,n,i,o){return Lf(t&a|s&~a,e,t,n,i,o)}function ks(e,t,s,a,n,i,o){return Lf(t^s^a,e,t,n,i,o)}function Es(e,t,s,a,n,i,o){return Lf(s^(t|~a),e,t,n,i,o)}function nP(e){var t,s=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)vp(a,nK(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(vp(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*s,vp(a,n),a}function nK(e){var t,s=[];for(t=0;t<64;t+=4)s[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return s}Kd=ut.atob.bind(ut),zg=ut.btoa.bind(ut);var HN="0123456789abcdef".split("");function iK(e){for(var t="",s=0;s<4;s++)t+=HN[e>>8*s+4&15]+HN[e>>8*s&15];return t}function oK(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Ug(e){return nP(e).map(oK).join("")}var lK=function(e){for(var t=0;t<e.length;t++)e[t]=iK(e[t]);return e.join("")}(nP("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qi(e,t){if(lK){var s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Wg(e,t){var s,a,n,i;if(e!==s){for(var o=(n=e,i=1+(256/e.length>>0),new Array(i+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}s=e,a=l}else l=a;var h=t.length,f=0,m=0,p="";for(c=0;c<h;c++)m=(m+(u=l[f=(f+1)%256]))%256,l[f]=l[m],l[m]=u,o=l[(l[f]+l[m])%256],p+=String.fromCharCode(t.charCodeAt(c)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var GN={print:4,modify:8,copy:16,"annot-forms":32};function nc(e,t,s,a){this.v=1,this.r=2;var n=192;e.forEach(function(l){if(GN.perm!==void 0)throw new Error("Invalid permission: "+l);n+=GN[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=Ug(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Wg(this.encryptionKey,this.padding)}function ic(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",s=e.length,a=0;a<s;a++){var n=e.charCodeAt(a);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=e[a]}return t}function KN(e){if(zt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(s,a,n){if(n=n||!1,typeof s!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(s)||(t[s]={});var i=Math.random().toString(35);return t[s][i]=[a,!!n],i},this.unsubscribe=function(s){for(var a in t)if(t[a][s])return delete t[a][s],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(s){if(t.hasOwnProperty(s)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[s]){var o=t[s][i];try{o[0].apply(e,a)}catch(l){ut.console&&tr.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zm(e){if(!(this instanceof zm))return new zm(e);var t="opacity,stroke-opacity".split(",");for(var s in e)e.hasOwnProperty(s)&&t.indexOf(s)>=0&&(this[s]=e[s]);this.id="",this.objectNumber=-1}function iP(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function zo(e,t,s,a,n){if(!(this instanceof zo))return new zo(e,t,s,a,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=s,iP.call(this,a,n)}function cc(e,t,s,a,n){if(!(this instanceof cc))return new cc(e,t,s,a,n);this.boundingBox=e,this.xStep=t,this.yStep=s,this.stream="",this.cloneIndex=0,iP.call(this,a,n)}function lt(e){var t,s=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;zt(e=e||{})==="object"&&(s=e.orientation,a=e.unit||a,n=e.format||n,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",s=(""+(s||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},m={internal:{},__private__:{}};m.__private__.PubSub=KN;var p="1.3",v=m.__private__.getPdfVersion=function(){return p};m.__private__.setPdfVersion=function(w){p=w};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return g};var y=m.__private__.getPageFormat=function(w){return g[w]};n=n||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},S=N.COMPAT;function C(){this.saveGraphicsState(),J(new nt(ze,0,0,-ze,0,Pi()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),d="n",S=N.ADVANCED}function M(){this.restoreGraphicsState(),d="S",S=N.COMPAT}var D=m.__private__.combineFontStyleAndFontWeight=function(w,B){if(w=="bold"&&B=="normal"||w=="bold"&&B==400||w=="normal"&&B=="italic"||w=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(w=B==400||B==="normal"?w==="italic"?"italic":"normal":B!=700&&B!=="bold"||w!=="normal"?(B==700?"bold":B)+""+w:"bold"),w};m.advancedAPI=function(w){var B=S===N.COMPAT;return B&&C.call(this),typeof w!="function"||(w(this),B&&M.call(this)),this},m.compatAPI=function(w){var B=S===N.ADVANCED;return B&&M.call(this),typeof w!="function"||(w(this),B&&C.call(this)),this},m.isAdvancedAPI=function(){return S===N.ADVANCED};var L,A=function(w){if(S!==N.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=m.roundToPrecision=m.__private__.roundToPrecision=function(w,B){var ae=t||B;if(isNaN(w)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ae).replace(/0+$/,"")};L=m.hpf=m.__private__.hpf=typeof c=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return I(w,c)}:c==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return I(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return I(w,16)};var H=m.f2=m.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return I(w,2)},k=m.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return I(w,3)},P=m.scale=m.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return S===N.COMPAT?w*ze:S===N.ADVANCED?w:void 0},O=function(w){return S===N.COMPAT?Pi()-w:S===N.ADVANCED?w:void 0},$=function(w){return P(O(w))};m.__private__.setPrecision=m.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(t=parseInt(w,10))};var V,T="00000000000000000000000000000000",F=m.__private__.getFileId=function(){return T},z=m.__private__.setFileId=function(w){return T=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():T.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Ss=new nc(u.userPermissions,u.userPassword,u.ownerPassword,T)),T};m.setFileId=function(w){return z(w),this},m.getFileId=function(){return F()};var se=m.__private__.convertDateToPDFDate=function(w){var B=w.getTimezoneOffset(),ae=B<0?"+":"-",de=Math.floor(Math.abs(B/60)),je=Math.abs(B%60),Oe=[ae,re(de),"'",re(je),"'"].join("");return["D:",w.getFullYear(),re(w.getMonth()+1),re(w.getDate()),re(w.getHours()),re(w.getMinutes()),re(w.getSeconds()),Oe].join("")},Y=m.__private__.convertPDFDateToDate=function(w){var B=parseInt(w.substr(2,4),10),ae=parseInt(w.substr(6,2),10)-1,de=parseInt(w.substr(8,2),10),je=parseInt(w.substr(10,2),10),Oe=parseInt(w.substr(12,2),10),Be=parseInt(w.substr(14,2),10);return new Date(B,ae,de,je,Oe,Be,0)},_e=m.__private__.setCreationDate=function(w){var B;if(w===void 0&&(w=new Date),w instanceof Date)B=se(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=w}return V=B},R=m.__private__.getCreationDate=function(w){var B=V;return w==="jsDate"&&(B=Y(V)),B};m.setCreationDate=function(w){return _e(w),this},m.getCreationDate=function(w){return R(w)};var Q,re=m.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},te=m.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},le=0,be=[],we=[],oe=0,Ce=[],ye=[],fe=!1,Le=we,Te=function(){le=0,oe=0,we=[],be=[],Ce=[],La=mr(),Xs=mr()};m.__private__.setCustomOutputDestination=function(w){fe=!0,Le=w};var K=function(w){fe||(Le=w)};m.__private__.resetCustomOutputDestination=function(){fe=!1,Le=we};var J=m.__private__.out=function(w){return w=w.toString(),oe+=w.length+1,Le.push(w),Le},ve=m.__private__.write=function(w){return J(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},qe=m.__private__.getArrayBuffer=function(w){for(var B=w.length,ae=new ArrayBuffer(B),de=new Uint8Array(ae);B--;)de[B]=w.charCodeAt(B);return ae},ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ie};var ne=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(w){return ne=S===N.ADVANCED?w/ze:w,this};var Ae,Fe=m.__private__.getFontSize=m.getFontSize=function(){return S===N.COMPAT?ne:ne*ze},Ve=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(w){return Ve=w,this},m.__private__.getR2L=m.getR2L=function(){return Ve};var Ne,Z=m.__private__.setZoomMode=function(w){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Ae=w;else if(isNaN(w)){if(B.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Ae=w}else Ae=parseInt(w,10)};m.__private__.getZoomMode=function(){return Ae};var xe,We=m.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Ne=w};m.__private__.getPageMode=function(){return Ne};var ht=m.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');xe=w};m.__private__.getLayoutMode=function(){return xe},m.__private__.setDisplayMode=m.setDisplayMode=function(w,B,ae){return Z(w),ht(B),We(ae),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(w){if(Object.keys(Qe).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[w]},m.__private__.getDocumentProperties=function(){return Qe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(w){for(var B in Qe)Qe.hasOwnProperty(B)&&w[B]&&(Qe[B]=w[B]);return this},m.__private__.setDocumentProperty=function(w,B){if(Object.keys(Qe).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[w]=B};var Ue,ze,ot,gt,Ot,jt={},wt={},ps=[],St={},tt={},_t={},Xe={},Ys=null,Mt=0,dt=[],Dt=new KN(m),wn=e.hotfixes||[],$r={},ha={},ma=[],nt=function w(B,ae,de,je,Oe,Be){if(!(this instanceof w))return new w(B,ae,de,je,Oe,Be);isNaN(B)&&(B=1),isNaN(ae)&&(ae=0),isNaN(de)&&(de=0),isNaN(je)&&(je=1),isNaN(Oe)&&(Oe=0),isNaN(Be)&&(Be=0),this._matrix=[B,ae,de,je,Oe,Be]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(w)},nt.prototype.multiply=function(w){var B=w.sx*this.sx+w.shy*this.shx,ae=w.sx*this.shy+w.shy*this.sy,de=w.shx*this.sx+w.sy*this.shx,je=w.shx*this.shy+w.sy*this.sy,Oe=w.tx*this.sx+w.ty*this.shx+this.tx,Be=w.tx*this.shy+w.ty*this.sy+this.ty;return new nt(B,ae,de,je,Oe,Be)},nt.prototype.decompose=function(){var w=this.sx,B=this.shy,ae=this.shx,de=this.sy,je=this.tx,Oe=this.ty,Be=Math.sqrt(w*w+B*B),Ye=(w/=Be)*ae+(B/=Be)*de;ae-=w*Ye,de-=B*Ye;var at=Math.sqrt(ae*ae+de*de);return Ye/=at,w*(de/=at)<B*(ae/=at)&&(w=-w,B=-B,Ye=-Ye,Be=-Be),{scale:new nt(Be,0,0,at,0,0),translate:new nt(1,0,0,1,je,Oe),rotate:new nt(w,B,-B,w,0,0),skew:new nt(1,0,Ye,1,0,0)}},nt.prototype.toString=function(w){return this.join(" ")},nt.prototype.inversed=function(){var w=this.sx,B=this.shy,ae=this.shx,de=this.sy,je=this.tx,Oe=this.ty,Be=1/(w*de-B*ae),Ye=de*Be,at=-B*Be,pt=-ae*Be,ft=w*Be;return new nt(Ye,at,pt,ft,-Ye*je-pt*Oe,-at*je-ft*Oe)},nt.prototype.applyToPoint=function(w){var B=w.x*this.sx+w.y*this.shx+this.tx,ae=w.x*this.shy+w.y*this.sy+this.ty;return new Cl(B,ae)},nt.prototype.applyToRectangle=function(w){var B=this.applyToPoint(w),ae=this.applyToPoint(new Cl(w.x+w.w,w.y+w.h));return new ed(B.x,B.y,ae.x-B.x,ae.y-B.y)},nt.prototype.clone=function(){var w=this.sx,B=this.shy,ae=this.shx,de=this.sy,je=this.tx,Oe=this.ty;return new nt(w,B,ae,de,je,Oe)},m.Matrix=nt;var Fs=m.matrixMult=function(w,B){return B.multiply(w)},Js=new nt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Js;var Hr=function(w,B){if(!tt[w]){var ae=(B instanceof zo?"Sh":"P")+(Object.keys(St).length+1).toString(10);B.id=ae,tt[w]=ae,St[ae]=B,Dt.publish("addPattern",B)}};m.ShadingPattern=zo,m.TilingPattern=cc,m.addShadingPattern=function(w,B){return A("addShadingPattern()"),Hr(w,B),this},m.beginTilingPattern=function(w){A("beginTilingPattern()"),zu(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},m.endTilingPattern=function(w,B){A("endTilingPattern()"),B.stream=ye[Q].join(`
`),Hr(w,B),Dt.publish("endTilingPattern",B),ma.pop().restore()};var vr=m.__private__.newObject=function(){var w=mr();return _s(w,!0),w},mr=m.__private__.newObjectDeferred=function(){return le++,be[le]=function(){return oe},le},_s=function(w,B){return B=typeof B=="boolean"&&B,be[w]=oe,B&&J(w+" 0 obj"),w},qn=m.__private__.newAdditionalObject=function(){var w={objId:mr(),content:""};return Ce.push(w),w},La=mr(),Xs=mr(),Qs=m.__private__.decodeColorString=function(w){var B=w.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var ae=parseFloat(B[0]);B=[ae,ae,ae,"r"]}for(var de="#",je=0;je<3;je++)de+=("0"+Math.floor(255*parseFloat(B[je])).toString(16)).slice(-2);return de},Zs=m.__private__.encodeColorString=function(w){var B;typeof w=="string"&&(w={ch1:w});var ae=w.ch1,de=w.ch2,je=w.ch3,Oe=w.ch4,Be=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Ye=new aP(ae);if(Ye.ok)ae=Ye.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var at=parseInt(ae.substr(1),16);ae=at>>16&255,de=at>>8&255,je=255&at}if(de===void 0||Oe===void 0&&ae===de&&de===je)if(typeof ae=="string")B=ae+" "+Be[0];else switch(w.precision){case 2:B=H(ae/255)+" "+Be[0];break;case 3:default:B=k(ae/255)+" "+Be[0]}else if(Oe===void 0||zt(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return B=["1.","1.","1.",Be[1]].join(" ");if(typeof ae=="string")B=[ae,de,je,Be[1]].join(" ");else switch(w.precision){case 2:B=[H(ae/255),H(de/255),H(je/255),Be[1]].join(" ");break;default:case 3:B=[k(ae/255),k(de/255),k(je/255),Be[1]].join(" ")}}else if(typeof ae=="string")B=[ae,de,je,Oe,Be[2]].join(" ");else switch(w.precision){case 2:B=[H(ae),H(de),H(je),H(Oe),Be[2]].join(" ");break;case 3:default:B=[k(ae),k(de),k(je),k(Oe),Be[2]].join(" ")}return B},fa=m.__private__.getFilters=function(){return o},$s=m.__private__.putStream=function(w){var B=(w=w||{}).data||"",ae=w.filters||fa(),de=w.alreadyAppliedFilters||[],je=w.addLength1||!1,Oe=B.length,Be=w.objectId,Ye=function(Ps){return Ps};if(u!==null&&Be===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Ye=Ss.encryptor(Be,0));var at={};ae===!0&&(ae=["FlateEncode"]);var pt=w.additionalKeyValues||[],ft=(at=lt.API.processDataByFilters!==void 0?lt.API.processDataByFilters(B,ae):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(at.data.length!==0&&(pt.push({key:"Length",value:at.data.length}),je===!0&&pt.push({key:"Length1",value:Oe})),ft.length!=0)if(ft.split("/").length-1==1)pt.push({key:"Filter",value:ft});else{pt.push({key:"Filter",value:"["+ft+"]"});for(var Tt=0;Tt<pt.length;Tt+=1)if(pt[Tt].key==="DecodeParms"){for(var wr=[],_r=0;_r<at.reverseChain.split("/").length-1;_r+=1)wr.push("null");wr.push(pt[Tt].value),pt[Tt].value="["+wr.join(" ")+"]"}}J("<<");for(var qr=0;qr<pt.length;qr++)J("/"+pt[qr].key+" "+pt[qr].value);J(">>"),at.data.length!==0&&(J("stream"),J(Ye(at.data)),J("endstream"))},xa=m.__private__.putPage=function(w){var B=w.number,ae=w.data,de=w.objId,je=w.contentsObjId;_s(de,!0),J("<</Type /Page"),J("/Parent "+w.rootDictionaryObjId+" 0 R"),J("/Resources "+w.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(L(w.mediaBox.bottomLeftX))+" "+parseFloat(L(w.mediaBox.bottomLeftY))+" "+L(w.mediaBox.topRightX)+" "+L(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&J("/CropBox ["+L(w.cropBox.bottomLeftX)+" "+L(w.cropBox.bottomLeftY)+" "+L(w.cropBox.topRightX)+" "+L(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&J("/BleedBox ["+L(w.bleedBox.bottomLeftX)+" "+L(w.bleedBox.bottomLeftY)+" "+L(w.bleedBox.topRightX)+" "+L(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&J("/TrimBox ["+L(w.trimBox.bottomLeftX)+" "+L(w.trimBox.bottomLeftY)+" "+L(w.trimBox.topRightX)+" "+L(w.trimBox.topRightY)+"]"),w.artBox!==null&&J("/ArtBox ["+L(w.artBox.bottomLeftX)+" "+L(w.artBox.bottomLeftY)+" "+L(w.artBox.topRightX)+" "+L(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&J("/UserUnit "+w.userUnit),Dt.publish("putPage",{objId:de,pageContext:dt[B],pageNumber:B,page:ae}),J("/Contents "+je+" 0 R"),J(">>"),J("endobj");var Oe=ae.join(`
`);return S===N.ADVANCED&&(Oe+=`
Q`),_s(je,!0),$s({data:Oe,filters:fa(),objectId:je}),J("endobj"),de},Nn=m.__private__.putPages=function(){var w,B,ae=[];for(w=1;w<=Mt;w++)dt[w].objId=mr(),dt[w].contentsObjId=mr();for(w=1;w<=Mt;w++)ae.push(xa({number:w,data:ye[w],objId:dt[w].objId,contentsObjId:dt[w].contentsObjId,mediaBox:dt[w].mediaBox,cropBox:dt[w].cropBox,bleedBox:dt[w].bleedBox,trimBox:dt[w].trimBox,artBox:dt[w].artBox,userUnit:dt[w].userUnit,rootDictionaryObjId:La,resourceDictionaryObjId:Xs}));_s(La,!0),J("<</Type /Pages");var de="/Kids [";for(B=0;B<Mt;B++)de+=ae[B]+" 0 R ";J(de+"]"),J("/Count "+Mt),J(">>"),J("endobj"),Dt.publish("postPutPages")},ce=function(w){Dt.publish("putFont",{font:w,out:J,newObject:vr,putStream:$s}),w.isAlreadyPutted!==!0&&(w.objectNumber=vr(),J("<<"),J("/Type /Font"),J("/BaseFont /"+ic(w.postScriptName)),J("/Subtype /Type1"),typeof w.encoding=="string"&&J("/Encoding /"+w.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Re=function(){for(var w in jt)jt.hasOwnProperty(w)&&(h===!1||h===!0&&f.hasOwnProperty(w))&&ce(jt[w])},st=function(w){w.objectNumber=vr();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[L(w.x),L(w.y),L(w.x+w.width),L(w.y+w.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ae=w.pages[1].join(`
`);$s({data:ae,additionalKeyValues:B,objectId:w.objectNumber}),J("endobj")},Ut=function(){for(var w in $r)$r.hasOwnProperty(w)&&st($r[w])},qs=function(w,B){var ae,de=[],je=1/(B-1);for(ae=0;ae<1;ae+=je)de.push(ae);if(de.push(1),w[0].offset!=0){var Oe={offset:0,color:w[0].color};w.unshift(Oe)}if(w[w.length-1].offset!=1){var Be={offset:1,color:w[w.length-1].color};w.push(Be)}for(var Ye="",at=0,pt=0;pt<de.length;pt++){for(ae=de[pt];ae>w[at+1].offset;)at++;var ft=w[at].offset,Tt=(ae-ft)/(w[at+1].offset-ft),wr=w[at].color,_r=w[at+1].color;Ye+=te(Math.round((1-Tt)*wr[0]+Tt*_r[0]).toString(16))+te(Math.round((1-Tt)*wr[1]+Tt*_r[1]).toString(16))+te(Math.round((1-Tt)*wr[2]+Tt*_r[2]).toString(16))}return Ye.trim()},bl=function(w,B){B||(B=21);var ae=vr(),de=qs(w.colors,B),je=[];je.push({key:"FunctionType",value:"0"}),je.push({key:"Domain",value:"[0.0 1.0]"}),je.push({key:"Size",value:"["+B+"]"}),je.push({key:"BitsPerSample",value:"8"}),je.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),je.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$s({data:de,additionalKeyValues:je,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),J("endobj"),w.objectNumber=vr(),J("<< /ShadingType "+w.type),J("/ColorSpace /DeviceRGB");var Oe="/Coords ["+L(parseFloat(w.coords[0]))+" "+L(parseFloat(w.coords[1]))+" ";w.type===2?Oe+=L(parseFloat(w.coords[2]))+" "+L(parseFloat(w.coords[3])):Oe+=L(parseFloat(w.coords[2]))+" "+L(parseFloat(w.coords[3]))+" "+L(parseFloat(w.coords[4]))+" "+L(parseFloat(w.coords[5])),J(Oe+="]"),w.matrix&&J("/Matrix ["+w.matrix.toString()+"]"),J("/Function "+ae+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},vl=function(w,B){var ae=mr(),de=vr();B.push({resourcesOid:ae,objectOid:de}),w.objectNumber=de;var je=[];je.push({key:"Type",value:"/Pattern"}),je.push({key:"PatternType",value:"1"}),je.push({key:"PaintType",value:"1"}),je.push({key:"TilingType",value:"1"}),je.push({key:"BBox",value:"["+w.boundingBox.map(L).join(" ")+"]"}),je.push({key:"XStep",value:L(w.xStep)}),je.push({key:"YStep",value:L(w.yStep)}),je.push({key:"Resources",value:ae+" 0 R"}),w.matrix&&je.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),$s({data:w.stream,additionalKeyValues:je,objectId:w.objectNumber}),J("endobj")},Bn=function(w){var B;for(B in St)St.hasOwnProperty(B)&&(St[B]instanceof zo?bl(St[B]):St[B]instanceof cc&&vl(St[B],w))},yo=function(w){for(var B in w.objectNumber=vr(),J("<<"),w)switch(B){case"opacity":J("/ca "+H(w[B]));break;case"stroke-opacity":J("/CA "+H(w[B]))}J(">>"),J("endobj")},yl=function(){var w;for(w in _t)_t.hasOwnProperty(w)&&yo(_t[w])},ji=function(){for(var w in J("/XObject <<"),$r)$r.hasOwnProperty(w)&&$r[w].objectNumber>=0&&J("/"+w+" "+$r[w].objectNumber+" 0 R");Dt.publish("putXobjectDict"),J(">>")},ea=function(){Ss.oid=vr(),J("<<"),J("/Filter /Standard"),J("/V "+Ss.v),J("/R "+Ss.r),J("/U <"+Ss.toHexString(Ss.U)+">"),J("/O <"+Ss.toHexString(Ss.O)+">"),J("/P "+Ss.P),J(">>"),J("endobj")},Ma=function(){for(var w in J("/Font <<"),jt)jt.hasOwnProperty(w)&&(h===!1||h===!0&&f.hasOwnProperty(w))&&J("/"+w+" "+jt[w].objectNumber+" 0 R");J(">>")},en=function(){if(Object.keys(St).length>0){for(var w in J("/Shading <<"),St)St.hasOwnProperty(w)&&St[w]instanceof zo&&St[w].objectNumber>=0&&J("/"+w+" "+St[w].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),J(">>")}},tn=function(w){if(Object.keys(St).length>0){for(var B in J("/Pattern <<"),St)St.hasOwnProperty(B)&&St[B]instanceof m.TilingPattern&&St[B].objectNumber>=0&&St[B].objectNumber<w&&J("/"+B+" "+St[B].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),J(">>")}},wi=function(){if(Object.keys(_t).length>0){var w;for(w in J("/ExtGState <<"),_t)_t.hasOwnProperty(w)&&_t[w].objectNumber>=0&&J("/"+w+" "+_t[w].objectNumber+" 0 R");Dt.publish("putGStateDict"),J(">>")}},nr=function(w){_s(w.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ma(),en(),tn(w.objectOid),wi(),ji(),J(">>"),J("endobj")},zn=function(){var w=[];Re(),yl(),Ut(),Bn(w),Dt.publish("putResources"),w.forEach(nr),nr({resourcesOid:Xs,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources")},jl=function(){Dt.publish("putAdditionalObjects");for(var w=0;w<Ce.length;w++){var B=Ce[w];_s(B.objId,!0),J(B.content),J("endobj")}Dt.publish("postPutAdditionalObjects")},jo=function(w){wt[w.fontName]=wt[w.fontName]||{},wt[w.fontName][w.fontStyle]=w.id},Ni=function(w,B,ae,de,je){var Oe={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:w,fontName:B,fontStyle:ae,encoding:de,isStandardFont:je||!1,metadata:{}};return Dt.publish("addFont",{font:Oe,instance:this}),jt[Oe.id]=Oe,jo(Oe),Oe.id},_n=function(w){for(var B=0,ae=ie.length;B<ae;B++){var de=Ni.call(this,w[B][0],w[B][1],w[B][2],ie[B][3],!0);h===!1&&(f[de]=!0);var je=w[B][0].split("-");jo({id:de,fontName:je[0],fontStyle:je[1]||""})}Dt.publish("addFonts",{fonts:jt,dictionary:wt})},pa=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(de){var B=de.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var ae="Error in function "+B.split(`
`)[0].split("<")[0]+": "+de.message;if(!ut.console)throw new Error(ae);ut.console.error(ae,de),ut.alert&&alert(ae)}},w.foo.bar=w,w.foo},Un=function(w,B){var ae,de,je,Oe,Be,Ye,at,pt,ft;if(je=(B=B||{}).sourceEncoding||"Unicode",Be=B.outputEncoding,(B.autoencode||Be)&&jt[Ue].metadata&&jt[Ue].metadata[je]&&jt[Ue].metadata[je].encoding&&(Oe=jt[Ue].metadata[je].encoding,!Be&&jt[Ue].encoding&&(Be=jt[Ue].encoding),!Be&&Oe.codePages&&(Be=Oe.codePages[0]),typeof Be=="string"&&(Be=Oe[Be]),Be)){for(at=!1,Ye=[],ae=0,de=w.length;ae<de;ae++)(pt=Be[w.charCodeAt(ae)])?Ye.push(String.fromCharCode(pt)):Ye.push(w[ae]),Ye[ae].charCodeAt(0)>>8&&(at=!0);w=Ye.join("")}for(ae=w.length;at===void 0&&ae!==0;)w.charCodeAt(ae-1)>>8&&(at=!0),ae--;if(!at)return w;for(Ye=B.noBOM?[]:[254,255],ae=0,de=w.length;ae<de;ae++){if((ft=(pt=w.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ye.push(ft),Ye.push(pt-(ft<<8))}return String.fromCharCode.apply(void 0,Ye)},Rt=m.__private__.pdfEscape=m.pdfEscape=function(w,B){return Un(w,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rn=m.__private__.beginPage=function(w){ye[++Mt]=[],dt[Mt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},Ou(Mt),K(ye[Q])},Eu=function(w,B){var ae,de,je;switch(s=B||s,typeof w=="string"&&(ae=y(w.toLowerCase()),Array.isArray(ae)&&(de=ae[0],je=ae[1])),Array.isArray(w)&&(de=w[0]*ze,je=w[1]*ze),isNaN(de)&&(de=n[0],je=n[1]),(de>14400||je>14400)&&(tr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),je=Math.min(14400,je)),n=[de,je],s.substr(0,1)){case"l":je>de&&(n=[je,de]);break;case"p":de>je&&(n=[je,de])}rn(n),Ru(Jc),J(sn),Qc!==0&&J(Qc+" J"),Zc!==0&&J(Zc+" j"),Dt.publish("addPage",{pageNumber:Mt})},Df=function(w){w>0&&w<=Mt&&(ye.splice(w,1),dt.splice(w,1),Mt--,Q>Mt&&(Q=Mt),this.setPage(Q))},Ou=function(w){w>0&&w<=Mt&&(Q=w)},If=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ye.length-1},Tu=function(w,B,ae){var de,je=void 0;return ae=ae||{},w=w!==void 0?w:jt[Ue].fontName,B=B!==void 0?B:jt[Ue].fontStyle,de=w.toLowerCase(),wt[de]!==void 0&&wt[de][B]!==void 0?je=wt[de][B]:wt[w]!==void 0&&wt[w][B]!==void 0?je=wt[w][B]:ae.disableWarning===!1&&tr.warn("Unable to look up font label for font '"+w+"', '"+B+"'. Refer to getFontList() for available fonts."),je||ae.noFallback||(je=wt.times[B])==null&&(je=wt.times.normal),je},Rf=m.__private__.putInfo=function(){var w=vr(),B=function(de){return de};for(var ae in u!==null&&(B=Ss.encryptor(w,0)),J("<<"),J("/Producer ("+Rt(B("jsPDF "+lt.version))+")"),Qe)Qe.hasOwnProperty(ae)&&Qe[ae]&&J("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Rt(B(Qe[ae]))+")");J("/CreationDate ("+Rt(B(V))+")"),J(">>"),J("endobj")},Gc=m.__private__.putCatalog=function(w){var B=(w=w||{}).rootDictionaryObjId||La;switch(vr(),J("<<"),J("/Type /Catalog"),J("/Pages "+B+" 0 R"),Ae||(Ae="fullwidth"),Ae){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+Ae;ae.substr(ae.length-1)==="%"&&(Ae=parseInt(Ae)/100),typeof Ae=="number"&&J("/OpenAction [3 0 R /XYZ null null "+H(Ae)+"]")}switch(xe||(xe="continuous"),xe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Ne&&J("/PageMode /"+Ne),Dt.publish("putCatalog"),J(">>"),J("endobj")},Ff=m.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(le+1)),J("/Root "+le+" 0 R"),J("/Info "+(le-1)+" 0 R"),u!==null&&J("/Encrypt "+Ss.oid+" 0 R"),J("/ID [ <"+T+"> <"+T+"> ]"),J(">>")},$f=m.__private__.putHeader=function(){J("%PDF-"+p),J("%ºß¬à")},qf=m.__private__.putXRef=function(){var w="0000000000";J("xref"),J("0 "+(le+1)),J("0000000000 65535 f ");for(var B=1;B<=le;B++)typeof be[B]=="function"?J((w+be[B]()).slice(-10)+" 00000 n "):be[B]!==void 0?J((w+be[B]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Wn=m.__private__.buildDocument=function(){Te(),K(we),Dt.publish("buildDocument"),$f(),Nn(),jl(),zn(),u!==null&&ea(),Rf(),Gc();var w=oe;return qf(),Ff(),J("startxref"),J(""+w),J("%%EOF"),K(ye[Q]),we.join(`
`)},wl=m.__private__.getBlob=function(w){return new Blob([qe(w)],{type:"application/pdf"})},Nl=m.output=m.__private__.output=pa(function(w,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",w){case void 0:return Wn();case"save":m.save(B.filename);break;case"arraybuffer":return qe(Wn());case"blob":return wl(Wn());case"bloburi":case"bloburl":if(ut.URL!==void 0&&typeof ut.URL.createObjectURL=="function")return ut.URL&&ut.URL.createObjectURL(wl(Wn()))||void 0;tr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",de=Wn();try{ae=zg(de)}catch{ae=zg(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+B.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var je="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(je=B.pdfObjectUrl,Oe="");var Be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+je+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",Ye=ut.open();return Ye!==null&&Ye.document.write(Be),Ye}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',pt=ut.open();if(pt!==null){pt.document.write(at);var ft=this;pt.document.documentElement.querySelector("#pdfViewer").onload=function(){pt.document.title=B.filename,pt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ft.output("bloburl"))}}return pt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',wr=ut.open();if(wr!==null&&(wr.document.write(Tt),wr.document.title=B.filename),wr||typeof safari>"u")return wr;break;case"datauri":case"dataurl":return ut.document.location.href=this.output("datauristring",B);default:return null}}),Lu=function(w){return Array.isArray(wn)===!0&&wn.indexOf(w)>-1};switch(a){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=Lu("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);ze=a}var Ss=null;_e(),z();var Bf=function(w){return u!==null?Ss.encryptor(w,0):function(B){return B}},Mu=m.__private__.getPageInfo=m.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[w].objId,pageNumber:w,pageContext:dt[w]}},mt=m.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in dt)if(dt[B].objId===w)break;return Mu(B)},zf=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:dt[Q].objId,pageNumber:Q,pageContext:dt[Q]}};m.addPage=function(){return Eu.apply(this,arguments),this},m.setPage=function(){return Ou.apply(this,arguments),K.call(this,ye[Q]),this},m.insertPage=function(w){return this.addPage(),this.movePage(Q,w),this},m.movePage=function(w,B){var ae,de;if(w>B){ae=ye[w],de=dt[w];for(var je=w;je>B;je--)ye[je]=ye[je-1],dt[je]=dt[je-1];ye[B]=ae,dt[B]=de,this.setPage(B)}else if(w<B){ae=ye[w],de=dt[w];for(var Oe=w;Oe<B;Oe++)ye[Oe]=ye[Oe+1],dt[Oe]=dt[Oe+1];ye[B]=ae,dt[B]=de,this.setPage(B)}return this},m.deletePage=function(){return Df.apply(this,arguments),this},m.__private__.text=m.text=function(w,B,ae,de,je){var Oe,Be,Ye,at,pt,ft,Tt,wr,_r,qr=(de=de||{}).scope||this;if(typeof w=="number"&&typeof B=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Ps=ae;ae=B,B=w,w=Ps}if(arguments[3]instanceof nt?(A("The transform parameter of text() with a Matrix value"),_r=je):(Ye=arguments[4],at=arguments[5],zt(Tt=arguments[3])==="object"&&Tt!==null||(typeof Ye=="string"&&(at=Ye,Ye=null),typeof Tt=="string"&&(at=Tt,Tt=null),typeof Tt=="number"&&(Ye=Tt,Tt=null),de={flags:Tt,angle:Ye,align:at})),isNaN(B)||isNaN(ae)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return qr;var Jr="",an=!1,ga=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:No,Cn=qr.internal.scaleFactor;function Uu(ir){return ir=ir.split("	").join(Array(de.TabLen||9).join(" ")),Rt(ir,Tt)}function ad(ir){for(var or,Or=ir.concat(),Gr=[],Yn=Or.length;Yn--;)typeof(or=Or.shift())=="string"?Gr.push(or):Array.isArray(ir)&&(or.length===1||or[1]===void 0&&or[2]===void 0)?Gr.push(or[0]):Gr.push([or[0],or[1],or[2]]);return Gr}function nd(ir,or){var Or;if(typeof ir=="string")Or=or(ir)[0];else if(Array.isArray(ir)){for(var Gr,Yn,md=ir.concat(),Fl=[],Ku=md.length;Ku--;)typeof(Gr=md.shift())=="string"?Fl.push(or(Gr)[0]):Array.isArray(Gr)&&typeof Gr[0]=="string"&&(Yn=or(Gr[0],Gr[1],Gr[2]),Fl.push([Yn[0],Yn[1],Yn[2]]));Or=Fl}return Or}var kl=!1,id=!0;if(typeof w=="string")kl=!0;else if(Array.isArray(w)){var od=w.concat();Be=[];for(var El,gs=od.length;gs--;)(typeof(El=od.shift())!="string"||Array.isArray(El)&&typeof El[0]!="string")&&(id=!1);kl=id}if(kl===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Ol=ne/qr.internal.scaleFactor,Tl=Ol*(ga-1);switch(de.baseline){case"bottom":ae-=Tl;break;case"top":ae+=Ol-Tl;break;case"hanging":ae+=Ol-2*Tl;break;case"middle":ae+=Ol/2-Tl}if((ft=de.maxWidth||0)>0&&(typeof w=="string"?w=qr.splitTextToSize(w,ft):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(ir,or){return ir.concat(qr.splitTextToSize(or,ft))},[]))),Oe={text:w,x:B,y:ae,options:de,mutex:{pdfEscape:Rt,activeFontKey:Ue,fonts:jt,activeFontSize:ne}},Dt.publish("preProcessText",Oe),w=Oe.text,Ye=(de=Oe.options).angle,!(_r instanceof nt)&&Ye&&typeof Ye=="number"){Ye*=Math.PI/180,de.rotationDirection===0&&(Ye=-Ye),S===N.ADVANCED&&(Ye=-Ye);var Ll=Math.cos(Ye),ld=Math.sin(Ye);_r=new nt(Ll,ld,-ld,Ll,0,0)}else Ye&&Ye instanceof nt&&(_r=Ye);S!==N.ADVANCED||_r||(_r=Js),(pt=de.charSpace||Pl)!==void 0&&(Jr+=L(P(pt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wr=de.horizontalScale)!==void 0&&(Jr+=L(100*wr)+` Tz
`),de.lang;var ta=-1,Qf=de.renderingMode!==void 0?de.renderingMode:de.stroke,cd=qr.internal.getCurrentPageInfo().pageContext;switch(Qf){case 0:case!1:case"fill":ta=0;break;case 1:case!0:case"stroke":ta=1;break;case 2:case"fillThenStroke":ta=2;break;case 3:case"invisible":ta=3;break;case 4:case"fillAndAddForClipping":ta=4;break;case 5:case"strokeAndAddPathForClipping":ta=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ta=6;break;case 7:case"addToPathForClipping":ta=7}var Wu=cd.usedRenderingMode!==void 0?cd.usedRenderingMode:-1;ta!==-1?Jr+=ta+` Tr
`:Wu!==-1&&(Jr+=`0 Tr
`),ta!==-1&&(cd.usedRenderingMode=ta),at=de.align||"left";var Da,Ml=ne*ga,Vu=qr.internal.pageSize.getWidth(),Hu=jt[Ue];pt=de.charSpace||Pl,ft=de.maxWidth||0,Tt=Object.assign({autoencode:!0,noBOM:!0},de.flags);var Ci=[],Po=function(ir){return qr.getStringUnitWidth(ir,{font:Hu,charSpace:pt,fontSize:ne,doKerning:!1})*ne/Cn};if(Object.prototype.toString.call(w)==="[object Array]"){var ra;Be=ad(w),at!=="left"&&(Da=Be.map(Po));var Bs,Ai=0;if(at==="right"){B-=Da[0],w=[],gs=Be.length;for(var Hn=0;Hn<gs;Hn++)Hn===0?(Bs=Pn(B),ra=Vn(ae)):(Bs=P(Ai-Da[Hn]),ra=-Ml),w.push([Be[Hn],Bs,ra]),Ai=Da[Hn]}else if(at==="center"){B-=Da[0]/2,w=[],gs=Be.length;for(var Gn=0;Gn<gs;Gn++)Gn===0?(Bs=Pn(B),ra=Vn(ae)):(Bs=P((Ai-Da[Gn])/2),ra=-Ml),w.push([Be[Gn],Bs,ra]),Ai=Da[Gn]}else if(at==="left"){w=[],gs=Be.length;for(var Dl=0;Dl<gs;Dl++)w.push(Be[Dl])}else if(at==="justify"&&Hu.encoding==="Identity-H"){w=[],gs=Be.length,ft=ft!==0?ft:Vu;for(var Kn=0,Er=0;Er<gs;Er++)if(ra=Er===0?Vn(ae):-Ml,Bs=Er===0?Pn(B):Kn,Er<gs-1){var dd=P((ft-Da[Er])/(Be[Er].split(" ").length-1)),zs=Be[Er].split(" ");w.push([zs[0]+" ",Bs,ra]),Kn=0;for(var Ia=1;Ia<zs.length;Ia++){var Il=(Po(zs[Ia-1]+" "+zs[Ia])-Po(zs[Ia]))*Cn+dd;Ia==zs.length-1?w.push([zs[Ia],Il,0]):w.push([zs[Ia]+" ",Il,0]),Kn-=Il}}else w.push([Be[Er],Bs,ra]);w.push(["",Kn,0])}else{if(at!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],gs=Be.length,ft=ft!==0?ft:Vu,Er=0;Er<gs;Er++)ra=Er===0?Vn(ae):-Ml,Bs=Er===0?Pn(B):0,Er<gs-1?Ci.push(L(P((ft-Da[Er])/(Be[Er].split(" ").length-1)))):Ci.push(0),w.push([Be[Er],Bs,ra])}}var Gu=typeof de.R2L=="boolean"?de.R2L:Ve;Gu===!0&&(w=nd(w,function(ir,or,Or){return[ir.split("").reverse().join(""),or,Or]})),Oe={text:w,x:B,y:ae,options:de,mutex:{pdfEscape:Rt,activeFontKey:Ue,fonts:jt,activeFontSize:ne}},Dt.publish("postProcessText",Oe),w=Oe.text,an=Oe.mutex.isHex||!1;var ud=jt[Ue].encoding;ud!=="WinAnsiEncoding"&&ud!=="StandardEncoding"||(w=nd(w,function(ir,or,Or){return[Uu(ir),or,Or]})),Be=ad(w),w=[];for(var Co,Ao,ki,ko=0,Rl=1,Eo=Array.isArray(Be[0])?Rl:ko,Ei="",hd=function(ir,or,Or){var Gr="";return Or instanceof nt?(Or=typeof de.angle=="number"?Fs(Or,new nt(1,0,0,1,ir,or)):Fs(new nt(1,0,0,1,ir,or),Or),S===N.ADVANCED&&(Or=Fs(new nt(1,0,0,-1,0,0),Or)),Gr=Or.join(" ")+` Tm
`):Gr=L(ir)+" "+L(or)+` Td
`,Gr},Ra=0;Ra<Be.length;Ra++){switch(Ei="",Eo){case Rl:ki=(an?"<":"(")+Be[Ra][0]+(an?">":")"),Co=parseFloat(Be[Ra][1]),Ao=parseFloat(Be[Ra][2]);break;case ko:ki=(an?"<":"(")+Be[Ra]+(an?">":")"),Co=Pn(B),Ao=Vn(ae)}Ci!==void 0&&Ci[Ra]!==void 0&&(Ei=Ci[Ra]+` Tw
`),Ra===0?w.push(Ei+hd(Co,Ao,_r)+ki):Eo===ko?w.push(Ei+ki):Eo===Rl&&w.push(Ei+hd(Co,Ao,_r)+ki)}w=Eo===ko?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Fa=`BT
/`;return Fa+=Ue+" "+ne+` Tf
`,Fa+=L(ne*ga)+` TL
`,Fa+=_o+`
`,Fa+=Jr,Fa+=w,J(Fa+="ET"),f[Ue]=!0,qr};var Uf=m.__private__.clip=m.clip=function(w){return J(w==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Uf("evenodd")},m.__private__.discardPath=m.discardPath=function(){return J("n"),this};var Sn=m.__private__.isValidStyle=function(w){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(B=!0),B};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(w){return Sn(w)&&(d=w),this};var Du=m.__private__.getStyle=m.getStyle=function(w){var B=d;switch(w){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=w}return B},Iu=m.close=function(){return J("h"),this};m.stroke=function(){return J("S"),this},m.fill=function(w){return _l("f",w),this},m.fillEvenOdd=function(w){return _l("f*",w),this},m.fillStroke=function(w){return _l("B",w),this},m.fillStrokeEvenOdd=function(w){return _l("B*",w),this};var _l=function(w,B){zt(B)==="object"?Vf(B,w):J(w)},Kc=function(w){w===null||S===N.ADVANCED&&w===void 0||(w=Du(w),J(w))};function Wf(w,B,ae,de,je){var Oe=new cc(B||this.boundingBox,ae||this.xStep,de||this.yStep,this.gState,je||this.matrix);Oe.stream=this.stream;var Be=w+"$$"+this.cloneIndex+++"$$";return Hr(Be,Oe),Oe}var Vf=function(w,B){var ae=tt[w.key],de=St[ae];if(de instanceof zo)J("q"),J(Hf(B)),de.gState&&m.setGState(de.gState),J(w.matrix.toString()+" cm"),J("/"+ae+" sh"),J("Q");else if(de instanceof cc){var je=new nt(1,0,0,-1,0,Pi());w.matrix&&(je=je.multiply(w.matrix||Js),ae=Wf.call(de,w.key,w.boundingBox,w.xStep,w.yStep,je).id),J("q"),J("/Pattern cs"),J("/"+ae+" scn"),de.gState&&m.setGState(de.gState),J(B),J("Q")}},Hf=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Yc=m.moveTo=function(w,B){return J(L(P(w))+" "+L($(B))+" m"),this},wo=m.lineTo=function(w,B){return J(L(P(w))+" "+L($(B))+" l"),this},_i=m.curveTo=function(w,B,ae,de,je,Oe){return J([L(P(w)),L($(B)),L(P(ae)),L($(de)),L(P(je)),L($(Oe)),"c"].join(" ")),this};m.__private__.line=m.line=function(w,B,ae,de,je){if(isNaN(w)||isNaN(B)||isNaN(ae)||isNaN(de)||!Sn(je))throw new Error("Invalid arguments passed to jsPDF.line");return S===N.COMPAT?this.lines([[ae-w,de-B]],w,B,[1,1],je||"S"):this.lines([[ae-w,de-B]],w,B,[1,1]).stroke()},m.__private__.lines=m.lines=function(w,B,ae,de,je,Oe){var Be,Ye,at,pt,ft,Tt,wr,_r,qr,Ps,Jr,an;if(typeof w=="number"&&(an=ae,ae=B,B=w,w=an),de=de||[1,1],Oe=Oe||!1,isNaN(B)||isNaN(ae)||!Array.isArray(w)||!Array.isArray(de)||!Sn(je)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Yc(B,ae),Be=de[0],Ye=de[1],pt=w.length,Ps=B,Jr=ae,at=0;at<pt;at++)(ft=w[at]).length===2?(Ps=ft[0]*Be+Ps,Jr=ft[1]*Ye+Jr,wo(Ps,Jr)):(Tt=ft[0]*Be+Ps,wr=ft[1]*Ye+Jr,_r=ft[2]*Be+Ps,qr=ft[3]*Ye+Jr,Ps=ft[4]*Be+Ps,Jr=ft[5]*Ye+Jr,_i(Tt,wr,_r,qr,Ps,Jr));return Oe&&Iu(),Kc(je),this},m.path=function(w){for(var B=0;B<w.length;B++){var ae=w[B],de=ae.c;switch(ae.op){case"m":Yc(de[0],de[1]);break;case"l":wo(de[0],de[1]);break;case"c":_i.apply(this,de);break;case"h":Iu()}}return this},m.__private__.rect=m.rect=function(w,B,ae,de,je){if(isNaN(w)||isNaN(B)||isNaN(ae)||isNaN(de)||!Sn(je))throw new Error("Invalid arguments passed to jsPDF.rect");return S===N.COMPAT&&(de=-de),J([L(P(w)),L($(B)),L(P(ae)),L(P(de)),"re"].join(" ")),Kc(je),this},m.__private__.triangle=m.triangle=function(w,B,ae,de,je,Oe,Be){if(isNaN(w)||isNaN(B)||isNaN(ae)||isNaN(de)||isNaN(je)||isNaN(Oe)||!Sn(Be))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-w,de-B],[je-ae,Oe-de],[w-je,B-Oe]],w,B,[1,1],Be,!0),this},m.__private__.roundedRect=m.roundedRect=function(w,B,ae,de,je,Oe,Be){if(isNaN(w)||isNaN(B)||isNaN(ae)||isNaN(de)||isNaN(je)||isNaN(Oe)||!Sn(Be))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ye=4/3*(Math.SQRT2-1);return je=Math.min(je,.5*ae),Oe=Math.min(Oe,.5*de),this.lines([[ae-2*je,0],[je*Ye,0,je,Oe-Oe*Ye,je,Oe],[0,de-2*Oe],[0,Oe*Ye,-je*Ye,Oe,-je,Oe],[2*je-ae,0],[-je*Ye,0,-je,-Oe*Ye,-je,-Oe],[0,2*Oe-de],[0,-Oe*Ye,je*Ye,-Oe,je,-Oe]],w+je,B,[1,1],Be,!0),this},m.__private__.ellipse=m.ellipse=function(w,B,ae,de,je){if(isNaN(w)||isNaN(B)||isNaN(ae)||isNaN(de)||!Sn(je))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*ae,Be=4/3*(Math.SQRT2-1)*de;return Yc(w+ae,B),_i(w+ae,B-Be,w+Oe,B-de,w,B-de),_i(w-Oe,B-de,w-ae,B-Be,w-ae,B),_i(w-ae,B+Be,w-Oe,B+de,w,B+de),_i(w+Oe,B+de,w+ae,B+Be,w+ae,B),Kc(je),this},m.__private__.circle=m.circle=function(w,B,ae,de){if(isNaN(w)||isNaN(B)||isNaN(ae)||!Sn(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,B,ae,ae,de)},m.setFont=function(w,B,ae){return ae&&(B=D(B,ae)),Ue=Tu(w,B,{disableWarning:!1}),this};var Gf=m.__private__.getFont=m.getFont=function(){return jt[Tu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var w,B,ae={};for(w in wt)if(wt.hasOwnProperty(w))for(B in ae[w]=[],wt[w])wt[w].hasOwnProperty(B)&&ae[w].push(B);return ae},m.addFont=function(w,B,ae,de,je){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?je=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(ae=D(ae,de)),je=je||"Identity-H",Ni.call(this,w,B,ae,je)};var No,Jc=e.lineWidth||.200025,Sl=m.__private__.getLineWidth=m.getLineWidth=function(){return Jc},Ru=m.__private__.setLineWidth=m.setLineWidth=function(w){return Jc=w,J(L(P(w))+" w"),this};m.__private__.setLineDash=lt.API.setLineDash=lt.API.setLineDashPattern=function(w,B){if(w=w||[],B=B||0,isNaN(B)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ae){return L(P(ae))}).join(" "),B=L(P(B)),J("["+w+"] "+B+" d"),this};var Fu=m.__private__.getLineHeight=m.getLineHeight=function(){return ne*No};m.__private__.getLineHeight=m.getLineHeight=function(){return ne*No};var $u=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(No=w),this},qu=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return No};$u(e.lineHeight);var Pn=m.__private__.getHorizontalCoordinate=function(w){return P(w)},Vn=m.__private__.getVerticalCoordinate=function(w){return S===N.ADVANCED?w:dt[Q].mediaBox.topRightY-dt[Q].mediaBox.bottomLeftY-P(w)},Kf=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(w){return L(Pn(w))},Si=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(w){return L(Vn(w))},sn=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Qs(sn)},m.__private__.setStrokeColor=m.setDrawColor=function(w,B,ae,de){return sn=Zs({ch1:w,ch2:B,ch3:ae,ch4:de,pdfColorType:"draw",precision:2}),J(sn),this};var Xc=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Qs(Xc)},m.__private__.setFillColor=m.setFillColor=function(w,B,ae,de){return Xc=Zs({ch1:w,ch2:B,ch3:ae,ch4:de,pdfColorType:"fill",precision:2}),J(Xc),this};var _o=e.textColor||"0 g",Yf=m.__private__.getTextColor=m.getTextColor=function(){return Qs(_o)};m.__private__.setTextColor=m.setTextColor=function(w,B,ae,de){return _o=Zs({ch1:w,ch2:B,ch3:ae,ch4:de,pdfColorType:"text",precision:3}),this};var Pl=e.charSpace,Jf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Pl||0)};m.__private__.setCharSpace=m.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pl=w,this};var Qc=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(w){var B=m.CapJoinStyles[w];if(B===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qc=B,J(B+" J"),this};var Zc=0;m.__private__.setLineJoin=m.setLineJoin=function(w){var B=m.CapJoinStyles[w];if(B===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zc=B,J(B+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(L(P(w))+" M"),this},m.GState=zm,m.setGState=function(w){(w=typeof w=="string"?_t[Xe[w]]:Bu(null,w)).equals(Ys)||(J("/"+w.id+" gs"),Ys=w)};var Bu=function(w,B){if(!w||!Xe[w]){var ae=!1;for(var de in _t)if(_t.hasOwnProperty(de)&&_t[de].equals(B)){ae=!0;break}if(ae)B=_t[de];else{var je="GS"+(Object.keys(_t).length+1).toString(10);_t[je]=B,B.id=je}return w&&(Xe[w]=B.id),Dt.publish("addGState",B),B}};m.addGState=function(w,B){return Bu(w,B),this},m.saveGraphicsState=function(){return J("q"),ps.push({key:Ue,size:ne,color:_o}),this},m.restoreGraphicsState=function(){J("Q");var w=ps.pop();return Ue=w.key,ne=w.size,_o=w.color,Ys=null,this},m.setCurrentTransformationMatrix=function(w){return J(w.toString()+" cm"),this},m.comment=function(w){return J("#"+w),this};var Cl=function(w,B){var ae=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Oe){isNaN(Oe)||(ae=parseFloat(Oe))}});var de=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Oe){isNaN(Oe)||(de=parseFloat(Oe))}});var je="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return je},set:function(Oe){je=Oe.toString()}}),this},ed=function(w,B,ae,de){Cl.call(this,w,B),this.type="rect";var je=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return je},set:function(Be){isNaN(Be)||(je=parseFloat(Be))}});var Oe=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Be){isNaN(Be)||(Oe=parseFloat(Be))}}),this},td=function(){this.page=Mt,this.currentPage=Q,this.pages=ye.slice(0),this.pagesContext=dt.slice(0),this.x=ot,this.y=gt,this.matrix=Ot,this.width=So(Q),this.height=Pi(Q),this.outputDestination=Le,this.id="",this.objectNumber=-1};td.prototype.restore=function(){Mt=this.page,Q=this.currentPage,dt=this.pagesContext,ye=this.pages,ot=this.x,gt=this.y,Ot=this.matrix,rd(Q,this.width),sd(Q,this.height),Le=this.outputDestination};var zu=function(w,B,ae,de,je){ma.push(new td),Mt=Q=0,ye=[],ot=w,gt=B,Ot=je,rn([ae,de])},Xf=function(w){if(ha[w])ma.pop().restore();else{var B=new td,ae="Xo"+(Object.keys($r).length+1).toString(10);B.id=ae,ha[w]=ae,$r[ae]=B,Dt.publish("addFormObject",B),ma.pop().restore()}};for(var Al in m.beginFormObject=function(w,B,ae,de,je){return zu(w,B,ae,de,je),this},m.endFormObject=function(w){return Xf(w),this},m.doFormObject=function(w,B){var ae=$r[ha[w]];return J("q"),J(B.toString()+" cm"),J("/"+ae.id+" Do"),J("Q"),this},m.getFormObject=function(w){var B=$r[ha[w]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},m.save=function(w,B){return w=w||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(qo(wl(Wn()),w),typeof qo.unload=="function"&&ut.setTimeout&&setTimeout(qo.unload,911),this):new Promise(function(ae,de){try{var je=qo(wl(Wn()),w);typeof qo.unload=="function"&&ut.setTimeout&&setTimeout(qo.unload,911),ae(je)}catch(Oe){de(Oe.message)}})},lt.API)lt.API.hasOwnProperty(Al)&&(Al==="events"&&lt.API.events.length?function(w,B){var ae,de,je;for(je=B.length-1;je!==-1;je--)ae=B[je][0],de=B[je][1],w.subscribe.apply(w,[ae].concat(typeof de=="function"?[de]:de))}(Dt,lt.API.events):m[Al]=lt.API[Al]);var So=m.getPageWidth=function(w){return(dt[w=w||Q].mediaBox.topRightX-dt[w].mediaBox.bottomLeftX)/ze},rd=m.setPageWidth=function(w,B){dt[w].mediaBox.topRightX=B*ze+dt[w].mediaBox.bottomLeftX},Pi=m.getPageHeight=function(w){return(dt[w=w||Q].mediaBox.topRightY-dt[w].mediaBox.bottomLeftY)/ze},sd=m.setPageHeight=function(w,B){dt[w].mediaBox.topRightY=B*ze+dt[w].mediaBox.bottomLeftY};return m.internal={pdfEscape:Rt,getStyle:Du,getFont:Gf,getFontSize:Fe,getCharSpace:Jf,getTextColor:Yf,getLineHeight:Fu,getLineHeightFactor:qu,getLineWidth:Sl,write:ve,getHorizontalCoordinate:Pn,getVerticalCoordinate:Vn,getCoordinateString:Kf,getVerticalCoordinateString:Si,collections:{},newObject:vr,newAdditionalObject:qn,newObjectDeferred:mr,newObjectDeferredBegin:_s,getFilters:fa,putStream:$s,events:Dt,scaleFactor:ze,pageSize:{getWidth:function(){return So(Q)},setWidth:function(w){rd(Q,w)},getHeight:function(){return Pi(Q)},setHeight:function(w){sd(Q,w)}},encryptionOptions:u,encryption:Ss,getEncryptor:Bf,output:Nl,getNumberOfPages:If,pages:ye,out:J,f2:H,f3:k,getPageInfo:Mu,getPageInfoByObjId:mt,getCurrentPageInfo:zf,getPDFVersion:v,Point:Cl,Rectangle:ed,Matrix:nt,hasHotfix:Lu},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return So(Q)},set:function(w){rd(Q,w)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Pi(Q)},set:function(w){sd(Q,w)},enumerable:!0,configurable:!0}),_n.call(m,ie),Ue="F1",Eu(n,s),Dt.publish("initialized"),m}nc.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},nc.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nc.prototype.hexToBytes=function(e){for(var t=[],s=0;s<e.length;s+=2)t.push(String.fromCharCode(parseInt(e.substr(s,2),16)));return t.join("")},nc.prototype.processOwnerPassword=function(e,t){return Wg(Ug(t).substr(0,5),e)},nc.prototype.encryptor=function(e,t){var s=Ug(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Wg(s,a)}},zm.prototype.equals=function(e){var t,s="id,objectNumber,equals";if(!e||zt(e)!==zt(this))return!1;var a=0;for(t in this)if(!(s.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&s.indexOf(t)<0&&a--;return a===0},lt.API={events:[]},lt.version="3.0.1";var Pr=lt.API,wy=1,gl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rc=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xt=function(e){return e.toFixed(2)},zi=function(e){return e.toFixed(5)};Pr.__acroform__={};var ua=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},YN=function(e){return e*wy},kn=function(e){var t=new lP,s=et.internal.getHeight(e)||0,a=et.internal.getWidth(e)||0;return t.BBox=[0,0,Number(xt(a)),Number(xt(s))],t},cK=Pr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},dK=Pr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},uK=Pr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Tr=Pr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uK(e,t-1)},Lr=Pr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return cK(e,t-1)},Mr=Pr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return dK(e,t-1)},hK=Pr.__acroform__.calculateCoordinates=function(e,t){var s=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=s(n)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=s(n+o)||0,c.upperRight_Y=a(i)||0,[Number(xt(c.lowerLeft_X)),Number(xt(c.lowerLeft_Y)),Number(xt(c.upperRight_X)),Number(xt(c.upperRight_Y))]},mK=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],s=e._V||e.DV,a=Vg(e,s),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+xt(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=kn(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Vg=function(e,t){var s=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(k){return k.split(`
`)}):n.map(function(k){return[k]});var i=s,o=et.internal.getHeight(e)||0;o=o<0?-o:o;var l=et.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(k,P,O){if(k+1<n.length){var $=P+" "+n[k+1][0];return Bh($,e,O).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=Bh("3",e,i).height,f=e.multiline?o-i:(o-h)/2,m=f+=2,p=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Bh(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",N=0,S=0;S<n.length;S++)if(n.hasOwnProperty(S)){var C=!1;if(n[S].length!==1&&g!==n[S].length-1){if((h+2)*(N+2)+2>o)continue e;y+=n[S][g],C=!0,v=S,S--}else{y=(y+=n[S][g]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var M=parseInt(S),D=c(M,y,i),L=S>=n.length-1;if(D&&!L){y+=" ",g=0;continue}if(D||L){if(L)v=M;else if(e.multiline&&(h+2)*(N+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(N+2)+2>o)continue e;v=M}}for(var A="",I=p;I<=v;I++){var H=n[I];if(e.multiline){if(I===v){A+=H[g]+" ",g=(g+1)%H.length;continue}if(I===p){A+=H[H.length-1]+" ";continue}}A+=H[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,u=Bh(A,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=xt(d)+" "+xt(m)+` Td
`,t+="("+gl(A)+`) Tj
`,t+=-xt(d)+` 0 Td
`,m=-(i+2),u=0,p=C?v:v+1,N++,y=""}break}return a.text=t,a.fontSize=i,a},Bh=function(e,t,s){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:n}},fK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},xK=function(e,t){var s={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===s.type&&a.object===s.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(s)},pK=function(e,t){for(var s in e)if(e.hasOwnProperty(s)){var a=s,n=e[s];t.internal.newObjectDeferredBegin(n.objId,!0),zt(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete e[a]}},gK=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(yn.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(fK)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");wy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new cP,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&xK(i,s)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(s){(function(a,n){var i=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=hK(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=et.createDefaultAppearanceStream(l),zt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=mK(l);c.push({key:"AP",value:"<</N "+u+">>"}),n.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var m=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var p=m[o];typeof p=="function"&&(p=p.call(n,l)),h+="/"+o+" "+p+" ",n.internal.acroformPlugin.xForms.indexOf(p)>=0||n.internal.acroformPlugin.xForms.push(p)}}else typeof(p=m)=="function"&&(p=p.call(n,l)),h+="/"+o+" "+p,n.internal.acroformPlugin.xForms.indexOf(p)>=0||n.internal.acroformPlugin.xForms.push(p);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}i&&pK(n.internal.acroformPlugin.xForms,n)})(s,e)}),e.internal.acroformPlugin.isInitialized=!0}},oP=Pr.__acroform__.arrayToPdfArray=function(e,t,s){var a=function(o){return o};if(Array.isArray(e)){for(var n="[",i=0;i<e.length;i++)switch(i!==0&&(n+=" "),zt(e[i])){case"boolean":case"number":case"object":n+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&s&&(a=s.internal.getEncryptor(t)),n+="("+gl(a(e[i].toString()))+")"):n+=e[i].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yp=function(e,t,s){var a=function(n){return n};return t!==void 0&&s&&(a=s.internal.getEncryptor(t)),(e=e||"").toString(),e="("+gl(a(e))+")"},Ln=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ln.prototype.toString=function(){return this.objId+" 0 R"},Ln.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ln.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var s in t)if(Object.getOwnPropertyDescriptor(this,t[s]).configurable===!1){var a=t[s],n=this[a];n&&(Array.isArray(n)?e.push({key:a,value:oP(n,this.objId,this.scope)}):n instanceof Ln?(n.scope=this.scope,e.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:a,value:n}))}return e};var lP=function(){Ln.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){e=s.trim()},get:function(){return e||null}})};ua(lP,Ln);var cP=function(){Ln.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var s=function(a){return a};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+gl(s(e))+")"}},set:function(s){e=s}})};ua(cP,Ln);var yn=function e(){Ln.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Tr(t,3)},set:function(y){y?this.F=Lr(t,3):this.F=Mr(t,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');s=y}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(y){a=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(y){a[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(y){a[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(y){a[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(y){a[3]=y}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Um)return;i="FieldObject"+e.FieldNum++}var y=function(N){return N};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+gl(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/wy:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Um||this instanceof el))return yp(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ss?f:yp(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof ss?y:y.substr(0,1)==="("?rc(y.substr(1,y.length-2)):rc(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ss?rc(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof ss?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ss?m:yp(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof ss?y:y.substr(0,1)==="("?rc(y.substr(1,y.length-2)):rc(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ss?rc(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof ss?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(y){p=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,1)},set:function(y){y?this.Ff=Lr(this.Ff,1):this.Ff=Mr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,2)},set:function(y){y?this.Ff=Lr(this.Ff,2):this.Ff=Mr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,3)},set:function(y){y?this.Ff=Lr(this.Ff,3):this.Ff=Mr(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');g=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(g){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};ua(yn,Ln);var pc=function(){yn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(s){e=s}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return oP(t,this.objId,this.scope)},set:function(s){var a,n;n=[],typeof(a=s)=="string"&&(n=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(s){t=s,this.sort&&t.sort()},this.addOption=function(s){s=(s=s||"").toString(),t.push(s),this.sort&&t.sort()},this.removeOption=function(s,a){for(a=a||!1,s=(s=s||"").toString();t.indexOf(s)!==-1&&(t.splice(t.indexOf(s),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,18)},set:function(s){s?this.Ff=Lr(this.Ff,18):this.Ff=Mr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=Lr(this.Ff,19):this.Ff=Mr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,20)},set:function(s){s?(this.Ff=Lr(this.Ff,20),t.sort()):this.Ff=Mr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,22)},set:function(s){s?this.Ff=Lr(this.Ff,22):this.Ff=Mr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,23)},set:function(s){s?this.Ff=Lr(this.Ff,23):this.Ff=Mr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,27)},set:function(s){s?this.Ff=Lr(this.Ff,27):this.Ff=Mr(this.Ff,27)}}),this.hasAppearanceStream=!1};ua(pc,yn);var gc=function(){pc.call(this),this.fontName="helvetica",this.combo=!1};ua(gc,pc);var bc=function(){gc.call(this),this.combo=!0};ua(bc,gc);var Gh=function(){bc.call(this),this.edit=!0};ua(Gh,bc);var ss=function(){yn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,15)},set:function(s){s?this.Ff=Lr(this.Ff,15):this.Ff=Mr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,16)},set:function(s){s?this.Ff=Lr(this.Ff,16):this.Ff=Mr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,17)},set:function(s){s?this.Ff=Lr(this.Ff,17):this.Ff=Mr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,26)},set:function(s){s?this.Ff=Lr(this.Ff,26):this.Ff=Mr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+gl(s(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(s){zt(s)==="object"&&(t=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(s){typeof s=="string"&&(t.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}})};ua(ss,yn);var Kh=function(){ss.call(this),this.pushButton=!0};ua(Kh,ss);var vc=function(){ss.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ua(vc,ss);var Um=function(){var e,t;yn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var s,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+gl(n(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){zt(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(n){s="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ua(Um,yn),vc.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var s=this.Kids[t];s.appearanceStreamContent=e.createAppearanceStream(s.optionName),s.caption=e.getCA()}},vc.prototype.createOption=function(e){var t=new Um;return t.Parent=this,t.optionName=e,this.Kids.push(t),bK.call(this.scope,t),t};var Yh=function(){ss.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=et.CheckBox.createAppearanceStream()};ua(Yh,ss);var el=function(){yn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,13)},set:function(t){t?this.Ff=Lr(this.Ff,13):this.Ff=Mr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,21)},set:function(t){t?this.Ff=Lr(this.Ff,21):this.Ff=Mr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,23)},set:function(t){t?this.Ff=Lr(this.Ff,23):this.Ff=Mr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,24)},set:function(t){t?this.Ff=Lr(this.Ff,24):this.Ff=Mr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,25)},set:function(t){t?this.Ff=Lr(this.Ff,25):this.Ff=Mr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,26)},set:function(t){t?this.Ff=Lr(this.Ff,26):this.Ff=Mr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ua(el,yn);var Jh=function(){el.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,14)},set:function(e){e?this.Ff=Lr(this.Ff,14):this.Ff=Mr(this.Ff,14)}}),this.password=!0};ua(Jh,el);var et={CheckBox:{createAppearanceStream:function(){return{N:{On:et.CheckBox.YesNormal},D:{On:et.CheckBox.YesPushDown,Off:et.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=kn(e);t.scope=e.scope;var s=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=Vg(e,e.caption);return s.push("0.749023 g"),s.push("0 0 "+xt(et.internal.getWidth(e))+" "+xt(et.internal.getHeight(e))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+a+" "+xt(i.fontSize)+" Tf "+n),s.push("BT"),s.push(i.text),s.push("ET"),s.push("Q"),s.push("EMC"),t.stream=s.join(`
`),t},YesNormal:function(e){var t=kn(e);t.scope=e.scope;var s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),n=[],i=et.internal.getHeight(e),o=et.internal.getWidth(e),l=Vg(e,e.caption);return n.push("1 g"),n.push("0 0 "+xt(o)+" "+xt(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+xt(o-1)+" "+xt(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+s+" "+xt(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=kn(e);t.scope=e.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+xt(et.internal.getWidth(e))+" "+xt(et.internal.getHeight(e))+" re"),s.push("f"),t.stream=s.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:et.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=et.RadioButton.Circle.YesNormal,t.D[e]=et.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=kn(e);t.scope=e.scope;var s=[],a=et.internal.getWidth(e)<=et.internal.getHeight(e)?et.internal.getWidth(e)/4:et.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=et.internal.Bezier_C,i=Number((a*n).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+zi(et.internal.getWidth(e)/2)+" "+zi(et.internal.getHeight(e)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(e){var t=kn(e);t.scope=e.scope;var s=[],a=et.internal.getWidth(e)<=et.internal.getHeight(e)?et.internal.getWidth(e)/4:et.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*et.internal.Bezier_C).toFixed(5)),o=Number((a*et.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+zi(et.internal.getWidth(e)/2)+" "+zi(et.internal.getHeight(e)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+zi(et.internal.getWidth(e)/2)+" "+zi(et.internal.getHeight(e)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),s.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),s.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),s.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=kn(e);t.scope=e.scope;var s=[],a=et.internal.getWidth(e)<=et.internal.getHeight(e)?et.internal.getWidth(e)/4:et.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*et.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+zi(et.internal.getWidth(e)/2)+" "+zi(et.internal.getHeight(e)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:et.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=et.RadioButton.Cross.YesNormal,t.D[e]=et.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=kn(e);t.scope=e.scope;var s=[],a=et.internal.calculateCross(e);return s.push("q"),s.push("1 1 "+xt(et.internal.getWidth(e)-2)+" "+xt(et.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(xt(a.x1.x)+" "+xt(a.x1.y)+" m"),s.push(xt(a.x2.x)+" "+xt(a.x2.y)+" l"),s.push(xt(a.x4.x)+" "+xt(a.x4.y)+" m"),s.push(xt(a.x3.x)+" "+xt(a.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(e){var t=kn(e);t.scope=e.scope;var s=et.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+xt(et.internal.getWidth(e))+" "+xt(et.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+xt(et.internal.getWidth(e)-2)+" "+xt(et.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(xt(s.x1.x)+" "+xt(s.x1.y)+" m"),a.push(xt(s.x2.x)+" "+xt(s.x2.y)+" l"),a.push(xt(s.x4.x)+" "+xt(s.x4.y)+" m"),a.push(xt(s.x3.x)+" "+xt(s.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=kn(e);t.scope=e.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+xt(et.internal.getWidth(e))+" "+xt(et.internal.getHeight(e))+" re"),s.push("f"),t.stream=s.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+s}};et.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=et.internal.getWidth(e),s=et.internal.getHeight(e),a=Math.min(t,s);return{x1:{x:(t-a)/2,y:(s-a)/2+a},x2:{x:(t-a)/2+a,y:(s-a)/2},x3:{x:(t-a)/2,y:(s-a)/2},x4:{x:(t-a)/2+a,y:(s-a)/2+a}}}},et.internal.getWidth=function(e){var t=0;return zt(e)==="object"&&(t=YN(e.Rect[2])),t},et.internal.getHeight=function(e){var t=0;return zt(e)==="object"&&(t=YN(e.Rect[3])),t};var bK=Pr.addField=function(e){if(gK(this,e),!(e instanceof yn))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Pr.AcroFormChoiceField=pc,Pr.AcroFormListBox=gc,Pr.AcroFormComboBox=bc,Pr.AcroFormEditBox=Gh,Pr.AcroFormButton=ss,Pr.AcroFormPushButton=Kh,Pr.AcroFormRadioButton=vc,Pr.AcroFormCheckBox=Yh,Pr.AcroFormTextField=el,Pr.AcroFormPasswordField=Jh,Pr.AcroFormAppearance=et,Pr.AcroForm={ChoiceField:pc,ListBox:gc,ComboBox:bc,EditBox:Gh,Button:ss,PushButton:Kh,RadioButton:vc,CheckBox:Yh,TextField:el,PasswordField:Jh,Appearance:et},lt.AcroForm={ChoiceField:pc,ListBox:gc,ComboBox:bc,EditBox:Gh,Button:ss,PushButton:Kh,RadioButton:vc,CheckBox:Yh,TextField:el,PasswordField:Jh,Appearance:et};lt.AcroForm;function dP(e){return e.reduce(function(t,s,a){return t[s]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(k,P){var O,$,V,T,F,z=t;if((P=P||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(D(k))for(F in s)for(V=s[F],O=0;O<V.length;O+=1){for(T=!0,$=0;$<V[O].length;$+=1)if(V[O][$]!==void 0&&V[O][$]!==k[$]){T=!1;break}if(T===!0){z=F;break}}else for(F in s)for(V=s[F],O=0;O<V.length;O+=1){for(T=!0,$=0;$<V[O].length;$+=1)if(V[O][$]!==void 0&&V[O][$]!==k.charCodeAt($)){T=!1;break}if(T===!0){z=F;break}}return z===t&&P!==t&&(z=P),z},n=function k(P){for(var O=this.internal.write,$=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var T=[];if(T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Image"}),T.push({key:"Width",value:P.width}),T.push({key:"Height",value:P.height}),P.colorSpace===g.INDEXED?T.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(T.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===g.DEVICE_CMYK&&T.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),T.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&T.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var F="",z=0,se=P.transparency.length;z<se;z++)F+=P.transparency[z]+" "+P.transparency[z]+" ";T.push({key:"Mask",value:"["+F+"]"})}P.sMask!==void 0&&T.push({key:"SMask",value:P.objectId+1+" 0 R"});var Y=P.filter!==void 0?["/"+P.filter]:void 0;if($({data:P.data,additionalKeyValues:T,alreadyAppliedFilters:Y,objectId:P.objectId}),O("endobj"),"sMask"in P&&P.sMask!==void 0){var _e="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,R={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:_e,data:P.sMask};"filter"in P&&(R.filter=P.filter),k.call(this,R)}if(P.colorSpace===g.INDEXED){var Q=this.internal.newObject();$({data:A(new Uint8Array(P.palette)),objectId:Q}),O("endobj")}},i=function(){var k=this.internal.collections.addImage_images;for(var P in k)n.call(this,k[P])},o=function(){var k,P=this.internal.collections.addImage_images,O=this.internal.write;for(var $ in P)O("/I"+(k=P[$]).index,k.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var k=this.internal.collections.addImage_images;return l.call(this),k},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(k){return typeof e["process"+k.toUpperCase()]=="function"},h=function(k){return zt(k)==="object"&&k.nodeType===1},f=function(k,P){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var O=""+k.getAttribute("src");if(O.indexOf("data:image/")===0)return Kd(unescape(O).split("base64,").pop());var $=e.loadFile(O,!0);if($!==void 0)return $}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var V;switch(P){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;case"JPEG":case"JPG":default:V="image/jpeg"}return Kd(k.toDataURL(V,1).split("base64,").pop())}},m=function(k){var P=this.internal.collections.addImage_images;if(P){for(var O in P)if(k===P[O].alias)return P[O]}},p=function(k,P,O){return k||P||(k=-96,P=-96),k<0&&(k=-1*O.width*72/k/this.internal.scaleFactor),P<0&&(P=-1*O.height*72/P/this.internal.scaleFactor),k===0&&(k=P*O.width/O.height),P===0&&(P=k*O.height/O.width),[k,P]},v=function(k,P,O,$,V,T){var F=p.call(this,O,$,V),z=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,Y=c.call(this);if(O=F[0],$=F[1],Y[V.index]=V,T){T*=Math.PI/180;var _e=Math.cos(T),R=Math.sin(T),Q=function(te){return te.toFixed(4)},re=[Q(_e),Q(R),Q(-1*R),Q(_e),0,0,"cm"]}this.internal.write("q"),T?(this.internal.write([1,"0","0",1,z(k),se(P+$),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([z(O),"0","0",z($),"0","0","cm"].join(" "))):this.internal.write([z(O),"0","0",z($),z(k),se(P+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(k){var P,O,$=0;if(typeof k=="string")for(O=k.length,P=0;P<O;P++)$=($<<5)-$+k.charCodeAt(P),$|=0;else if(D(k))for(O=k.byteLength/2,P=0;P<O;P++)$=($<<5)-$+k[P],$|=0;return $},S=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var P=!0;return k.length===0&&(P=!1),k.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(P=!1),P},C=e.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var P=k.indexOf(",");return P<0?null:k.substring(0,P).trim().endsWith("base64")?k.substring(P+1):null},M=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(k){return M()&&k instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(k){return M()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},L=e.__addimage__.binaryStringToUint8Array=function(k){for(var P=k.length,O=new Uint8Array(P),$=0;$<P;$++)O[$]=k.charCodeAt($);return O},A=e.__addimage__.arrayBufferToBinaryString=function(k){for(var P="",O=D(k)?k:new Uint8Array(k),$=0;$<O.length;$+=8192)P+=String.fromCharCode.apply(null,O.subarray($,$+8192));return P};e.addImage=function(){var k,P,O,$,V,T,F,z,se;if(typeof arguments[1]=="number"?(P=t,O=arguments[1],$=arguments[2],V=arguments[3],T=arguments[4],F=arguments[5],z=arguments[6],se=arguments[7]):(P=arguments[1],O=arguments[2],$=arguments[3],V=arguments[4],T=arguments[5],F=arguments[6],z=arguments[7],se=arguments[8]),zt(k=arguments[0])==="object"&&!h(k)&&"imageData"in k){var Y=k;k=Y.imageData,P=Y.format||P||t,O=Y.x||O||0,$=Y.y||$||0,V=Y.w||Y.width||V,T=Y.h||Y.height||T,F=Y.alias||F,z=Y.compression||z,se=Y.rotation||Y.angle||se}var _e=this.internal.getFilters();if(z===void 0&&_e.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(O)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var R=I.call(this,k,P,F,z);return v.call(this,O,$,V,T,R,se),this};var I=function(k,P,O,$){var V,T,F;if(typeof k=="string"&&a(k)===t){k=unescape(k);var z=H(k,!1);(z!==""||(z=e.loadFile(k,!0))!==void 0)&&(k=z)}if(h(k)&&(k=f(k,P)),P=a(k,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((F=O)==null||F.length===0)&&(O=function(se){return typeof se=="string"||D(se)?N(se):D(se.data)?N(se.data):null}(k)),(V=m.call(this,O))||(M()&&(k instanceof Uint8Array||P==="RGBA"||(T=k,k=L(k))),V=this["process"+P.toUpperCase()](k,d.call(this),O,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in e.image_compression?se:y.NONE}($),T)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},H=e.__addimage__.convertBase64ToBinaryString=function(k,P){P=typeof P!="boolean"||P;var O,$="";if(typeof k=="string"){var V;O=(V=C(k))!==null&&V!==void 0?V:k;try{$=Kd(O)}catch(T){if(P)throw S(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+T.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};e.getImageProperties=function(k){var P,O,$="";if(h(k)&&(k=f(k)),typeof k=="string"&&a(k)===t&&(($=H(k,!1))===""&&($=e.loadFile(k)||""),k=$),O=a(k),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!M()||k instanceof Uint8Array||(k=L(k)),!(P=this["process"+O.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=O,P}})(lt.API),function(e){var t=function(s){if(s!==void 0&&s!="")return!0};lt.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(s){for(var a,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(s.objId),d=s.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((a=d[h]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){a=d[f];var m=this.internal.pdfEscape,p=this.internal.getEncryptor(s.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),N=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(y(a.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(y(N))+") >>",v.content=i;var S=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+S,a.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var C=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+m(p(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var M=this.annotations._nameMap[a.options.name];a.options.pageNumber=M.page,a.options.top=M.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+m(p(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var D=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+D+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(s){var a=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":a.pageContext.annotations.push(s)}},e.link=function(s,a,n,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(s),y:d(a),w:c(s+n),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(s,a,n,i){var o,l,c=this.getTextWidth(s),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(s,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(s,a,n,i),n+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,n-d,l,o,i),c},e.getTextWidth=function(s){var a=this.internal.getFontSize();return this.getStringUnitWidth(s)*a/this.internal.scaleFactor}}(lt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&n.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(v){var g=0,y=s,N="",S=0;for(g=0;g<v.length;g+=1)y[v.charCodeAt(g)]!==void 0?(S++,typeof(y=y[v.charCodeAt(g)])=="number"&&(N+=String.fromCharCode(y),y=s,S=0),g===v.length-1&&(y=s,N+=v.charAt(g-(S-1)),g-=S-1,S=0)):(y=s,N+=v.charAt(g-S),g-=S,S=0);return N};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(v,g,y){return o(v)?i(v)===!1?-1:!d(v)||!o(g)&&!o(y)||!o(y)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:u(v)&&o(g)&&!l(g)&&o(y)&&d(y)?3:l(v)||!o(y)?1:2:-1},m=function(v){var g=0,y=0,N=0,S="",C="",M="",D=(v=v||"").split("\\s+"),L=[];for(g=0;g<D.length;g+=1){for(L.push(""),y=0;y<D[g].length;y+=1)S=D[g][y],C=D[g][y-1],M=D[g][y+1],o(S)?(N=f(S,C,M),L[g]+=N!==-1?String.fromCharCode(t[S.charCodeAt(0)][N]):S):L[g]+=S;L[g]=h(L[g])}return L.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(g)){var N=0;for(y=[],N=0;N<g.length;N+=1)Array.isArray(g[N])?y.push([m(g[N][0]),g[N][1],g[N][2]]):y.push([m(g[N])]);v=y}else v=m(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",p])}(lt.API),lt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(l){s=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(s,a){var n;if((s=s||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(lt.API),function(e){var t={left:0,top:0,bottom:0,right:0},s=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(v){p=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,m=0,p=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,C){return S.concat(g.splitTextToSize(C,y))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(v=this.getStringUnitWidth(c[N],{font:h})*u)&&(m=v);return m!==0&&(p=c.length),{w:m/=f,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,m&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,s===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,f){if(a.call(this),!u)throw new Error("No data for PDF table.");var m,p,v,g,y=[],N=[],S=[],C={},M={},D=[],L=[],A=(f=f||{}).autoSize||!1,I=f.printHeaders!==!1,H=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,k=f.margins||Object.assign({width:this.getPageWidth()},t),P=typeof f.padding=="number"?f.padding:3,O=f.headerBackgroundColor||"#c8c8c8",$=f.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=$,this.setFontSize(H),h==null)N=y=Object.keys(u[0]),S=y.map(function(){return"left"});else if(Array.isArray(h)&&zt(h[0])==="object")for(y=h.map(function(Y){return Y.name}),N=h.map(function(Y){return Y.prompt||Y.name||""}),S=h.map(function(Y){return Y.align||"left"}),m=0;m<h.length;m+=1)M[h[m].name]=h[m].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(N=y=h,S=y.map(function(){return"left"}));if(A||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<y.length;m+=1){for(C[g=y[m]]=u.map(function(Y){return Y[g]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=C[g],this.setFont(void 0,"normal"),v=0;v<p.length;v+=1)D.push(this.getTextDimensions(p[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[g]=Math.max.apply(null,D)+P+P,D=[]}if(I){var V={};for(m=0;m<y.length;m+=1)V[y[m]]={},V[y[m]].text=N[m],V[y[m]].align=S[m];var T=l.call(this,V,M);L=y.map(function(Y){return new i(c,d,M[Y],T,V[Y].text,void 0,V[Y].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var F=h.reduce(function(Y,_e){return Y[_e.name]=_e.align,Y},{});for(m=0;m<u.length;m+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:m,data:u[m]},this);var z=l.call(this,u[m],M);for(v=0;v<y.length;v+=1){var se=u[m][y[v]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:m,col:v,data:se},this),o.call(this,new i(c,d,M[y[v]],z,se,m+2,F[y[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(m){var p=c[m];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,d[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/f+u+u},this).reduce(function(m,p){return Math.max(m,p)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),s=!1}}(lt.API);var uP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Hg=dP(hP),mP=[100,200,300,400,500,600,700,800,900],vK=dP(mP);function Gg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),s=function(i){return uP[i=i||"normal"]?i:"normal"}(e.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),n=function(i){return typeof Hg[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:s,weight:a,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,s,a].join(" ")}}}function JN(e,t,s,a){var n;for(n=s;n>=0&&n<t.length;n+=a)if(e[t[n]])return e[t[n]];for(n=s;n>=0&&n<t.length;n-=a)if(e[t[n]])return e[t[n]]}var yK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},XN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function QN(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function jK(e,t,s){for(var a=(s=s||{}).defaultFontFamily||"times",n=Object.assign({},yK,s.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(n[(i=Gg(t[l])).family]&&(i.family=n[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+QN(i)+"' and default family '"+a+"'.");if(o=function(c,d){if(d[c])return d[c];var u=Hg[c],h=u<=Hg.normal?-1:1,f=JN(d,hP,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=uP[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=vK[c],h=JN(d,mP,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+QN(i)+"'.");return o}function ZN(e){return e.trimLeft()}function wK(e,t){for(var s=0;s<e.length;){if(e.charAt(s)===t)return[e.substring(0,s),e.substring(s+1)];s+=1}return null}function NK(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var zh,e5,t5,jp=["times"];(function(e){var t,s,a,n,i,o,l,c,d,u=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new o,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new o,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=R;Object.defineProperty(this,"pdf",{get:function(){return Q}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(K){re=!!K}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(K){te=!!K}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(K){isNaN(K)||(le=K)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(K){isNaN(K)||(be=K)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(K){var J;typeof K=="number"?J=[K,K,K,K]:((J=new Array(4))[0]=K[0],J[1]=K.length>=2?K[1]:J[0],J[2]=K.length>=3?K[2]:J[0],J[3]=K.length>=4?K[3]:J[1]),d.margin=J}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(K){we=K}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(K){oe=K}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(K){Ce=K}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(K){K instanceof u&&(d=K)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(K){d.path=K}});var ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return ye},set:function(K){ye=K}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(K){var J;J=f(K),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(K){var J=f(K);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(K){["butt","round","square"].indexOf(K)!==-1&&(this.ctx.lineCap=K,this.pdf.setLineCap(K))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(K){isNaN(K)||(this.ctx.lineWidth=K,this.pdf.setLineWidth(K))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(K){["bevel","round","miter"].indexOf(K)!==-1&&(this.ctx.lineJoin=K,this.pdf.setLineJoin(K))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(K){isNaN(K)||(this.ctx.miterLimit=K,this.pdf.setMiterLimit(K))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(K){this.ctx.textBaseline=K}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(K){["right","end","center","left","start"].indexOf(K)!==-1&&(this.ctx.textAlign=K)}});var fe=null;function Le(K,J){if(fe===null){var ve=function(qe){var ie=[];return Object.keys(qe).forEach(function(ne){qe[ne].forEach(function(Ae){var Fe=null;switch(Ae){case"bold":Fe={family:ne,weight:"bold"};break;case"italic":Fe={family:ne,style:"italic"};break;case"bolditalic":Fe={family:ne,weight:"bold",style:"italic"};break;case"":case"normal":Fe={family:ne}}Fe!==null&&(Fe.ref={name:ne,style:Ae},ie.push(Fe))})}),ie}(K.getFontList());fe=function(qe){for(var ie={},ne=0;ne<qe.length;++ne){var Ae=Gg(qe[ne]),Fe=Ae.family,Ve=Ae.stretch,Ne=Ae.style,Z=Ae.weight;ie[Fe]=ie[Fe]||{},ie[Fe][Ve]=ie[Fe][Ve]||{},ie[Fe][Ve][Ne]=ie[Fe][Ve][Ne]||{},ie[Fe][Ve][Ne][Z]=Ae}return ie}(ve.concat(J))}return fe}var Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(K){fe=null,Te=K}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(K){var J;if(this.ctx.font=K,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(K))!==null){var ve=J[1];J[2];var qe=J[3],ie=J[4];J[5];var ne=J[6],Ae=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ie)[2];ie=Math.floor(Ae==="px"?parseFloat(ie)*this.pdf.internal.scaleFactor:Ae==="em"?parseFloat(ie)*this.pdf.getFontSize():parseFloat(ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ie);var Fe=function(Qe){var Ue,ze,ot=[],gt=Qe.trim();if(gt==="")return jp;if(gt in XN)return[XN[gt]];for(;gt!=="";){switch(ze=null,Ue=(gt=ZN(gt)).charAt(0)){case'"':case"'":ze=wK(gt.substring(1),Ue);break;default:ze=NK(gt)}if(ze===null||(ot.push(ze[0]),(gt=ZN(ze[1]))!==""&&gt.charAt(0)!==","))return jp;gt=gt.replace(/^,/,"")}return ot}(ne);if(this.fontFaces){var Ve=jK(Le(this.pdf,this.fontFaces),Fe.map(function(Qe){return{family:Qe,stretch:"normal",weight:qe,style:ve}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Ne="";(qe==="bold"||parseInt(qe,10)>=700||ve==="bold")&&(Ne="bold"),ve==="italic"&&(Ne+="italic"),Ne.length===0&&(Ne="normal");for(var Z="",xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<Fe.length;We++){if(this.pdf.internal.getFont(Fe[We],Ne,{noFallback:!0,disableWarning:!0})!==void 0){Z=Fe[We];break}if(Ne==="bolditalic"&&this.pdf.internal.getFont(Fe[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Z=Fe[We],Ne="bold";else if(this.pdf.internal.getFont(Fe[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Z=Fe[We],Ne="normal";break}}if(Z===""){for(var ht=0;ht<Fe.length;ht++)if(xe[Fe[ht]]){Z=xe[Fe[ht]];break}}Z=Z===""?"Times":Z,this.pdf.setFont(Z,Ne)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(K){this.ctx.globalCompositeOperation=K}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(K){this.ctx.globalAlpha=K}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(K){this.ctx.lineDashOffset=K,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(K){this.ctx.lineDash=K,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(K){this.ctx.ignoreClearRect=!!K}})};h.prototype.setLineDash=function(R){this.lineDash=R},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(R,Q){if(isNaN(R)||isNaN(Q))throw tr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new o(R,Q));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(R,Q)},h.prototype.closePath=function(){var R=new o(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&zt(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){R=new o(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(R.x,R.y)},h.prototype.lineTo=function(R,Q){if(isNaN(R)||isNaN(Q))throw tr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new o(R,Q));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function(R,Q,re,te){if(isNaN(re)||isNaN(te)||isNaN(R)||isNaN(Q))throw tr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new o(re,te)),be=this.ctx.transform.applyToPoint(new o(R,Q));this.path.push({type:"qct",x1:be.x,y1:be.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},h.prototype.bezierCurveTo=function(R,Q,re,te,le,be){if(isNaN(le)||isNaN(be)||isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te))throw tr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new o(le,be)),oe=this.ctx.transform.applyToPoint(new o(R,Q)),Ce=this.ctx.transform.applyToPoint(new o(re,te));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:Ce.x,y2:Ce.y,x:we.x,y:we.y}),this.ctx.lastPoint=new o(we.x,we.y)},h.prototype.arc=function(R,Q,re,te,le,be){if(isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te)||isNaN(le))throw tr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new o(R,Q));R=we.x,Q=we.y;var oe=this.ctx.transform.applyToPoint(new o(0,re)),Ce=this.ctx.transform.applyToPoint(new o(0,0));re=Math.sqrt(Math.pow(oe.x-Ce.x,2)+Math.pow(oe.y-Ce.y,2))}Math.abs(le-te)>=2*Math.PI&&(te=0,le=2*Math.PI),this.path.push({type:"arc",x:R,y:Q,radius:re,startAngle:te,endAngle:le,counterclockwise:be})},h.prototype.arcTo=function(R,Q,re,te,le){throw new Error("arcTo not implemented.")},h.prototype.rect=function(R,Q,re,te){if(isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te))throw tr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,Q),this.lineTo(R+re,Q),this.lineTo(R+re,Q+te),this.lineTo(R,Q+te),this.lineTo(R,Q),this.lineTo(R+re,Q),this.lineTo(R,Q)},h.prototype.fillRect=function(R,Q,re,te){if(isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te))throw tr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,Q,re,te),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},h.prototype.strokeRect=function(R,Q,re,te){if(isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te))throw tr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(R,Q,re,te),this.stroke())},h.prototype.clearRect=function(R,Q,re,te){if(isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te))throw tr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,Q,re,te))},h.prototype.save=function(R){R=typeof R!="boolean"||R;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(R){var Q,re,te,le;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))Q=0,re=0,te=0,le=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(be!==null)Q=parseInt(be[1]),re=parseInt(be[2]),te=parseInt(be[3]),le=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)Q=parseInt(be[1]),re=parseInt(be[2]),te=parseInt(be[3]),le=parseFloat(be[4]);else{if(le=1,typeof R=="string"&&R.charAt(0)!=="#"){var we=new aP(R);R=we.ok?we.toHex():"#000000"}R.length===4?(Q=R.substring(1,2),Q+=Q,re=R.substring(2,3),re+=re,te=R.substring(3,4),te+=te):(Q=R.substring(1,3),re=R.substring(3,5),te=R.substring(5,7)),Q=parseInt(Q,16),re=parseInt(re,16),te=parseInt(te,16)}}return{r:Q,g:re,b:te,a:le,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(R,Q,re,te){if(isNaN(Q)||isNaN(re)||typeof R!="string")throw tr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!m.call(this)){var le=z(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;P.call(this,{text:R,x:Q,y:re,scale:be,angle:le,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(R,Q,re,te){if(isNaN(Q)||isNaN(re)||typeof R!="string")throw tr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){te=isNaN(te)?void 0:te;var le=z(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;P.call(this,{text:R,x:Q,y:re,scale:be,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(R){if(typeof R!="string")throw tr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,re=this.pdf.internal.scaleFactor,te=Q.internal.getFontSize(),le=Q.getStringUnitWidth(R)*te/Q.internal.scaleFactor,be=function(we){var oe=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new be({width:le*=Math.round(96*re/72*1e4)/1e4})},h.prototype.scale=function(R,Q){if(isNaN(R)||isNaN(Q))throw tr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new c(R,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.rotate=function(R){if(isNaN(R))throw tr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},h.prototype.translate=function(R,Q){if(isNaN(R)||isNaN(Q))throw tr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new c(1,0,0,1,R,Q);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.transform=function(R,Q,re,te,le,be){if(isNaN(R)||isNaN(Q)||isNaN(re)||isNaN(te)||isNaN(le)||isNaN(be))throw tr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new c(R,Q,re,te,le,be);this.ctx.transform=this.ctx.transform.multiply(we)},h.prototype.setTransform=function(R,Q,re,te,le,be){R=isNaN(R)?1:R,Q=isNaN(Q)?0:Q,re=isNaN(re)?0:re,te=isNaN(te)?1:te,le=isNaN(le)?0:le,be=isNaN(be)?0:be,this.ctx.transform=new c(R,Q,re,te,le,be)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(R,Q,re,te,le,be,we,oe,Ce){var ye=this.pdf.getImageProperties(R),fe=1,Le=1,Te=1,K=1;te!==void 0&&oe!==void 0&&(Te=oe/te,K=Ce/le,fe=ye.width/te*oe/te,Le=ye.height/le*Ce/le),be===void 0&&(be=Q,we=re,Q=0,re=0),te!==void 0&&oe===void 0&&(oe=te,Ce=le),te===void 0&&oe===void 0&&(oe=ye.width,Ce=ye.height);for(var J,ve=this.ctx.transform.decompose(),qe=z(ve.rotate.shx),ie=new c,ne=(ie=(ie=(ie=ie.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale)).applyToRectangle(new l(be-Q*Te,we-re*K,te*fe,le*Le)),Ae=g.call(this,ne),Fe=[],Ve=0;Ve<Ae.length;Ve+=1)Fe.indexOf(Ae[Ve])===-1&&Fe.push(Ae[Ve]);if(S(Fe),this.autoPaging)for(var Ne=Fe[0],Z=Fe[Fe.length-1],xe=Ne;xe<Z+1;xe++){this.pdf.setPage(xe);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=xe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=xe===1?0:Qe+(xe-2)*Ue;if(this.ctx.clip_path.length!==0){var ot=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(J,this.posX+this.margin[3],-ze+ht+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=ot}var gt=JSON.parse(JSON.stringify(ne));gt=N([gt],this.posX+this.margin[3],-ze+ht+this.ctx.prevPageLastElemOffset)[0];var Ot=(xe>Ne||xe<Z)&&v.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Ue,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",gt.x,gt.y,gt.w,gt.h,null,null,qe),Ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",ne.x,ne.y,ne.w,ne.h,null,null,qe)};var g=function(R,Q,re){var te=[];Q=Q||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":te.push(Math.floor((R.y+le)/re)+1);break;case"arc":te.push(Math.floor((R.y+le-R.radius)/re)+1),te.push(Math.floor((R.y+le+R.radius)/re)+1);break;case"qct":var be=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);te.push(Math.floor((be.y+le)/re)+1),te.push(Math.floor((be.y+be.h+le)/re)+1);break;case"bct":var we=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);te.push(Math.floor((we.y+le)/re)+1),te.push(Math.floor((we.y+we.h+le)/re)+1);break;case"rect":te.push(Math.floor((R.y+le)/re)+1),te.push(Math.floor((R.y+R.h+le)/re)+1)}for(var oe=0;oe<te.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<te[oe];)y.call(this);return te},y=function(){var R=this.fillStyle,Q=this.strokeStyle,re=this.font,te=this.lineCap,le=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=Q,this.font=re,this.lineCap=te,this.lineWidth=le,this.lineJoin=be},N=function(R,Q,re){for(var te=0;te<R.length;te++)switch(R[te].type){case"bct":R[te].x2+=Q,R[te].y2+=re;case"qct":R[te].x1+=Q,R[te].y1+=re;case"mt":case"lt":case"arc":default:R[te].x+=Q,R[te].y+=re}return R},S=function(R){return R.sort(function(Q,re){return Q-re})},C=function(R,Q){for(var re,te,le=this.fillStyle,be=this.strokeStyle,we=this.lineCap,oe=this.lineWidth,Ce=Math.abs(oe*this.ctx.transform.scaleX),ye=this.lineJoin,fe=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),Te=[],K=0;K<Le.length;K++)if(Le[K].x!==void 0)for(var J=g.call(this,Le[K]),ve=0;ve<J.length;ve+=1)Te.indexOf(J[ve])===-1&&Te.push(J[ve]);for(var qe=0;qe<Te.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Te[qe];)y.call(this);if(S(Te),this.autoPaging)for(var ie=Te[0],ne=Te[Te.length-1],Ae=ie;Ae<ne+1;Ae++){this.pdf.setPage(Ae),this.fillStyle=le,this.strokeStyle=be,this.lineCap=we,this.lineWidth=Ce,this.lineJoin=ye;var Fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Ae===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Z=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xe=Ae===1?0:Ne+(Ae-2)*Z;if(this.ctx.clip_path.length!==0){var We=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(re,this.posX+this.margin[3],-xe+Ve+this.ctx.prevPageLastElemOffset),M.call(this,R,!0),this.path=We}if(te=JSON.parse(JSON.stringify(fe)),this.path=N(te,this.posX+this.margin[3],-xe+Ve+this.ctx.prevPageLastElemOffset),Q===!1||Ae===0){var ht=(Ae>ie||Ae<ne)&&v.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,Z,null).clip().discardPath()),M.call(this,R,Q),ht&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=Ce,M.call(this,R,Q),this.lineWidth=oe;this.path=fe},M=function(R,Q){if((R!=="stroke"||Q||!p.call(this))&&(R==="stroke"||Q||!m.call(this))){for(var re,te,le=[],be=this.path,we=0;we<be.length;we++){var oe=be[we];switch(oe.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:oe,deltas:[],abs:[]});break;case"lt":var Ce=le.length;if(be[we-1]&&!isNaN(be[we-1].x)&&(re=[oe.x-be[we-1].x,oe.y-be[we-1].y],Ce>0)){for(;Ce>=0;Ce--)if(le[Ce-1].close!==!0&&le[Ce-1].begin!==!0){le[Ce-1].deltas.push(re),le[Ce-1].abs.push(oe);break}}break;case"bct":re=[oe.x1-be[we-1].x,oe.y1-be[we-1].y,oe.x2-be[we-1].x,oe.y2-be[we-1].y,oe.x-be[we-1].x,oe.y-be[we-1].y],le[le.length-1].deltas.push(re);break;case"qct":var ye=be[we-1].x+2/3*(oe.x1-be[we-1].x),fe=be[we-1].y+2/3*(oe.y1-be[we-1].y),Le=oe.x+2/3*(oe.x1-oe.x),Te=oe.y+2/3*(oe.y1-oe.y),K=oe.x,J=oe.y;re=[ye-be[we-1].x,fe-be[we-1].y,Le-be[we-1].x,Te-be[we-1].y,K-be[we-1].x,J-be[we-1].y],le[le.length-1].deltas.push(re);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(oe)}}te=Q?null:R==="stroke"?"stroke":"fill";for(var ve=!1,qe=0;qe<le.length;qe++)if(le[qe].arc)for(var ie=le[qe].abs,ne=0;ne<ie.length;ne++){var Ae=ie[ne];Ae.type==="arc"?A.call(this,Ae.x,Ae.y,Ae.radius,Ae.startAngle,Ae.endAngle,Ae.counterclockwise,void 0,Q,!ve):O.call(this,Ae.x,Ae.y),ve=!0}else if(le[qe].close===!0)this.pdf.internal.out("h"),ve=!1;else if(le[qe].begin!==!0){var Fe=le[qe].start.x,Ve=le[qe].start.y;$.call(this,le[qe].deltas,Fe,Ve),ve=!0}te&&I.call(this,te),Q&&H.call(this)}},D=function(R){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-re;case"top":return R+Q-re;case"hanging":return R+Q-2*re;case"middle":return R+Q/2-re;case"ideographic":return R;case"alphabetic":default:return R}},L=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(Q,re){this.colorStops.push([Q,re])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(R,Q,re,te,le,be,we,oe,Ce){for(var ye=T.call(this,re,te,le,be),fe=0;fe<ye.length;fe++){var Le=ye[fe];fe===0&&(Ce?k.call(this,Le.x1+R,Le.y1+Q):O.call(this,Le.x1+R,Le.y1+Q)),V.call(this,R,Q,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}oe?H.call(this):I.call(this,we)},I=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(R,Q){this.pdf.internal.out(s(R)+" "+a(Q)+" m")},P=function(R){var Q;switch(R.align){case"right":case"end":Q="right";break;case"center":Q="center";break;case"left":case"start":default:Q="left"}var re=this.pdf.getTextDimensions(R.text),te=D.call(this,R.y),le=L.call(this,te)-re.h,be=this.ctx.transform.applyToPoint(new o(R.x,te)),we=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var Ce,ye,fe,Le=this.ctx.transform.applyToRectangle(new l(R.x,te,re.w,re.h)),Te=oe.applyToRectangle(new l(R.x,le,re.w,re.h)),K=g.call(this,Te),J=[],ve=0;ve<K.length;ve+=1)J.indexOf(K[ve])===-1&&J.push(K[ve]);if(S(J),this.autoPaging)for(var qe=J[0],ie=J[J.length-1],ne=qe;ne<ie+1;ne++){this.pdf.setPage(ne);var Ae=ne===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Ne=Ve-this.margin[0],Z=this.pdf.internal.pageSize.width-this.margin[1],xe=Z-this.margin[3],We=ne===1?0:Fe+(ne-2)*Ne;if(this.ctx.clip_path.length!==0){var ht=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Ce,this.posX+this.margin[3],-1*We+Ae),M.call(this,"fill",!0),this.path=ht}var Qe=N([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-We+Ae+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*R.scale),fe=this.lineWidth,this.lineWidth=fe*R.scale);var Ue=this.autoPaging!=="text";if(Ue||Qe.y+Qe.h<=Ve){if(Ue||Qe.y>=Ae&&Qe.x<=Z){var ze=Ue?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Z-Qe.x)[0],ot=N([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-We+Ae+this.ctx.prevPageLastElemOffset)[0],gt=Ue&&(ne>qe||ne<ie)&&v.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Ne,null).clip().discardPath()),this.pdf.text(ze,ot.x,ot.y,{angle:R.angle,align:Q,renderingMode:R.renderingMode}),gt&&this.pdf.restoreGraphicsState()}}else Qe.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Qe.y);R.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=fe)}else R.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*R.scale),fe=this.lineWidth,this.lineWidth=fe*R.scale),this.pdf.text(R.text,be.x+this.posX,be.y+this.posY,{angle:R.angle,align:Q,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=fe)},O=function(R,Q,re,te){re=re||0,te=te||0,this.pdf.internal.out(s(R+re)+" "+a(Q+te)+" l")},$=function(R,Q,re){return this.pdf.lines(R,Q,re,null,null)},V=function(R,Q,re,te,le,be,we,oe){this.pdf.internal.out([t(n(re+R)),t(i(te+Q)),t(n(le+R)),t(i(be+Q)),t(n(we+R)),t(i(oe+Q)),"c"].join(" "))},T=function(R,Q,re,te){for(var le=2*Math.PI,be=Math.PI/2;Q>re;)Q-=le;var we=Math.abs(re-Q);we<le&&te&&(we=le-we);for(var oe=[],Ce=te?-1:1,ye=Q;we>1e-5;){var fe=ye+Ce*Math.min(we,be);oe.push(F.call(this,R,ye,fe)),we-=Math.abs(fe-ye),ye=fe}return oe},F=function(R,Q,re){var te=(re-Q)/2,le=R*Math.cos(te),be=R*Math.sin(te),we=le,oe=-be,Ce=we*we+oe*oe,ye=Ce+we*le+oe*be,fe=4/3*(Math.sqrt(2*Ce*ye)-ye)/(we*be-oe*le),Le=we-fe*oe,Te=oe+fe*we,K=Le,J=-Te,ve=te+Q,qe=Math.cos(ve),ie=Math.sin(ve);return{x1:R*Math.cos(Q),y1:R*Math.sin(Q),x2:Le*qe-Te*ie,y2:Le*ie+Te*qe,x3:K*qe-J*ie,y3:K*ie+J*qe,x4:R*Math.cos(re),y4:R*Math.sin(re)}},z=function(R){return 180*R/Math.PI},se=function(R,Q,re,te,le,be){var we=R+.5*(re-R),oe=Q+.5*(te-Q),Ce=le+.5*(re-le),ye=be+.5*(te-be),fe=Math.min(R,le,we,Ce),Le=Math.max(R,le,we,Ce),Te=Math.min(Q,be,oe,ye),K=Math.max(Q,be,oe,ye);return new l(fe,Te,Le-fe,K-Te)},Y=function(R,Q,re,te,le,be,we,oe){var Ce,ye,fe,Le,Te,K,J,ve,qe,ie,ne,Ae,Fe,Ve,Ne=re-R,Z=te-Q,xe=le-re,We=be-te,ht=we-le,Qe=oe-be;for(ye=0;ye<41;ye++)qe=(J=(fe=R+(Ce=ye/40)*Ne)+Ce*((Te=re+Ce*xe)-fe))+Ce*(Te+Ce*(le+Ce*ht-Te)-J),ie=(ve=(Le=Q+Ce*Z)+Ce*((K=te+Ce*We)-Le))+Ce*(K+Ce*(be+Ce*Qe-K)-ve),ye==0?(ne=qe,Ae=ie,Fe=qe,Ve=ie):(ne=Math.min(ne,qe),Ae=Math.min(Ae,ie),Fe=Math.max(Fe,qe),Ve=Math.max(Ve,ie));return new l(Math.round(ne),Math.round(Ae),Math.round(Fe-ne),Math.round(Ve-Ae))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,Q,re=(R=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:Q}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(lt.API),function(e){var t=function(i){var o,l,c,d,u,h,f,m,p,v;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(v=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)-(f=u%85))/85)%85,l.push(h+33,f+33,m+33,p+33,v+33)):l.push(122);return function(g,y){for(var N=y;N>0;N--)g.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},s=function(i){var o,l,c,d,u,h=String,f="length",m=255,p="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[v](i[f]%5||5))[f];u>d;d+=5)l=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,N){for(var S=N;S>0;S--)y.pop()}(c,o[f]),h.fromCharCode.apply(h,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},n=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Bg(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=s(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=n(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(lt.API),function(e){e.loadFile=function(t,s,a){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,m=function(p){var v=p.length,g=[],y=String.fromCharCode;for(f=0;f<v;f+=1)g.push(y(255&p.charCodeAt(f)));return g.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(m(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return m(h.responseText)}(n,i,o)}catch{}return l}(t,s,a)},e.loadImageFile=e.loadFile}(lt.API),function(e){function t(){return(ut.html2canvas?Promise.resolve(ut.html2canvas):no(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function s(){return(ut.DOMPurify?Promise.resolve(ut.DOMPurify):no(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=zt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(s).then(function(c){return this.set({src:n("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var m=d[f],p=m.src.find(function(v){return v.format==="truetype"});p&&c.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,lt.getPageSize=function(o,l,c){if(zt(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,p=0,v=0;if(f.hasOwnProperty(h))p=f[h][1]/u,v=f[h][0]/u;else try{p=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>p&&(m=v,v=p,p=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>v&&(m=v,v=p,p=m)}return{width:v,height:p,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Gg):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(lt.API),lt.API.addJS=function(e){return t5=e,this.internal.events.subscribe("postPutResources",function(){zh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+t5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zh!==void 0&&e5!==void 0&&this.internal.out("/Names <</JavaScript "+zh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var s=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=s.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=a.exec(o);if(l!=null){var c=l[1];s.internal.newObjectDeferredBegin(c,!1)}s.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=s.internal.newObject();u.push(h);var f=s.internal.getPageInfo(i+1);s.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var m=s.internal.newObject();for(s.internal.write("<< /Names [ "),i=0;i<u.length;i++)s.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");s.internal.write(" ] >>","endobj"),t=s.internal.newObject(),s.internal.write("<< /Dests "+m+" 0 R"),s.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(a,n,i){var o={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(a){a.id=s.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},s.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},s.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=s.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},s.outline.line=function(a){this.ctx.val+=a+`\r
`},s.outline.makeRef=function(a){return a.id+" 0 R"},s.outline.makeString=function(a){return"("+s.internal.pdfEscape(a)+")"},s.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])}(lt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(s,a,n,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=o||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,(c=function(h){for(var f,m=256*h.charCodeAt(4)+h.charCodeAt(5),p=h.length,v={width:0,height:0,numcomponents:1},g=4;g<p;g+=2){if(g+=m,t.indexOf(h.charCodeAt(g+1))!==-1){f=256*h.charCodeAt(g+5)+h.charCodeAt(g+6),v={width:256*h.charCodeAt(g+7)+h.charCodeAt(g+8),height:f,numcomponents:h.charCodeAt(g+9)};break}m=256*h.charCodeAt(g+2)+h.charCodeAt(g+3)}return v}(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:s,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:n}}return u}}(lt.API);var sc,Uh,r5,s5,a5,_K=function(){var e,t,s;function a(i){var o,l,c,d,u,h,f,m,p,v,g,y,N,S;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),p=(function(){var C,M;for(M=[],C=0;C<4;++C)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(N=0;0<=v?N<v:N>v;0<=v?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(g=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,g.slice(0,f)),this.text[m]=String.fromCharCode.apply(String,g.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,f,m,p){var v,g,y,N,S,C,M,D,L,A,I,H,k,P,O,$,V,T,F,z,se,Y=Math.ceil((d.width-h)/m),_e=Math.ceil((d.height-f)/p),R=d.width==Y&&d.height==_e;for(P=o*Y,H=R?l:new Uint8Array(P*_e),C=i.length,k=0,g=0;k<_e&&c<C;){switch(i[c++]){case 0:for(N=V=0;V<P;N=V+=1)H[g++]=i[c++];break;case 1:for(N=T=0;T<P;N=T+=1)v=i[c++],S=N<o?0:H[g-o],H[g++]=(v+S)%256;break;case 2:for(N=F=0;F<P;N=F+=1)v=i[c++],y=(N-N%o)/o,O=k&&H[(k-1)*P+y*o+N%o],H[g++]=(O+v)%256;break;case 3:for(N=z=0;z<P;N=z+=1)v=i[c++],y=(N-N%o)/o,S=N<o?0:H[g-o],O=k&&H[(k-1)*P+y*o+N%o],H[g++]=(v+Math.floor((S+O)/2))%256;break;case 4:for(N=se=0;se<P;N=se+=1)v=i[c++],y=(N-N%o)/o,S=N<o?0:H[g-o],k===0?O=$=0:(O=H[(k-1)*P+y*o+N%o],$=y&&H[(k-1)*P+(y-1)*o+N%o]),M=S+O-$,D=Math.abs(M-S),A=Math.abs(M-O),I=Math.abs(M-$),L=D<=A&&D<=I?S:A<=I?O:$,H[g++]=(v+L)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!R){var Q=((f+k*p)*d.width+h)*o,re=k*P;for(N=0;N<Y;N+=1){for(var te=0;te<o;te+=1)l[Q++]=H[re++];Q+=(m-1)*o}}k++}}return i=rK(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,h,f,m;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,f=l.length;h<f;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=u[i++])!=null?m:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,h,f,m,p,v,g,y;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),p=(d=i.data||i).length,h=v||o,u=f=0,c===1)for(;u<p;)m=v?4*o[u/4]:f,g=h[m++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?h[m++]:255,f=m;else for(;u<p;)m=v?4*o[u/4]:f,d[u++]=h[m++],d[u++]=h[m++],d[u++]=h[m++],d[u++]=l?h[m++]:255,f=m},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var n=function(){if(Object.prototype.toString.call(ut)==="[object Window]"){try{t=ut.document.createElement("canvas"),s=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),e=function(i){var o;if(n()===!0)return s.width=i.width,s.height=i.height,s.clearRect(0,0,i.width,i.height),s.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,h,f,m;if(this.animation){for(m=[],l=u=0,h=(f=this.animation.frames).length;u<h;l=++u)o=f[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,h,f=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var m,p;if(m=l++%d,p=c[m],f.renderFrame(i,m),d>1&&l/d<u)return f.animation._timeout=setTimeout(o,p.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function SK(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,n=e[t++],i=n>>7,o=1<<(7&n)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,f=null,m=0,p=null;for(this.width=s,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],(1&v)==0&&(f=null),m=v>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,C=e[t++],M=C>>6&1,D=1<<(7&C)+1,L=l,A=c,I=!1;C>>7&&(I=!0,L=t,A=D,t+=3*D);var H=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}u.push({x:g,y,width:N,height:S,has_local_palette:I,palette_offset:L,palette_size:A,data_offset:H,data_length:t-H,transparent_index:f,interlaced:!!M,delay:h,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,O){var $=this.frameInfo(P),V=$.width*$.height,T=new Uint8Array(V);n5(e,$.data_offset,T,V);var F=$.palette_offset,z=$.transparent_index;z===null&&(z=256);var se=$.width,Y=s-se,_e=se,R=4*($.y*s+$.x),Q=4*(($.y+$.height)*s+$.x),re=R,te=4*Y;$.interlaced===!0&&(te+=4*s*7);for(var le=8,be=0,we=T.length;be<we;++be){var oe=T[be];if(_e===0&&(_e=se,(re+=te)>=Q&&(te=4*Y+4*s*(le-1),re=R+(se+Y)*(le<<1),le>>=1)),oe===z)re+=4;else{var Ce=e[F+3*oe],ye=e[F+3*oe+1],fe=e[F+3*oe+2];O[re++]=fe,O[re++]=ye,O[re++]=Ce,O[re++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(P,O){var $=this.frameInfo(P),V=$.width*$.height,T=new Uint8Array(V);n5(e,$.data_offset,T,V);var F=$.palette_offset,z=$.transparent_index;z===null&&(z=256);var se=$.width,Y=s-se,_e=se,R=4*($.y*s+$.x),Q=4*(($.y+$.height)*s+$.x),re=R,te=4*Y;$.interlaced===!0&&(te+=4*s*7);for(var le=8,be=0,we=T.length;be<we;++be){var oe=T[be];if(_e===0&&(_e=se,(re+=te)>=Q&&(te=4*Y+4*s*(le-1),re=R+(se+Y)*(le<<1),le>>=1)),oe===z)re+=4;else{var Ce=e[F+3*oe],ye=e[F+3*oe+1],fe=e[F+3*oe+2];O[re++]=Ce,O[re++]=ye,O[re++]=fe,O[re++]=255}--_e}}}function n5(e,t,s,a){for(var n=e[t++],i=1<<n,o=i+1,l=o+1,c=n+1,d=(1<<c)-1,u=0,h=0,f=0,m=e[t++],p=new Int32Array(4096),v=null;;){for(;u<16&&m!==0;)h|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<c)break;var g=h&d;if(h>>=c,u-=c,g!==i){if(g===o)break;for(var y=g<l?g:v,N=0,S=y;S>i;)S=p[S]>>8,++N;var C=S;if(f+N+(y!==g?1:0)>a)return void tr.log("Warning, gif stream longer than expected.");s[f++]=C;var M=f+=N;for(y!==g&&(s[f++]=C),S=y;N--;)S=p[S],s[--M]=255&S,S>>=8;v!==null&&l<4096&&(p[l++]=v<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),v=g}else l=o+1,d=(1<<(c=n+1))-1,v=null}return f!==a&&tr.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function wp(e){var t,s,a,n,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),m=new Array(64),p=new Array(64),v=[],g=0,y=7,N=new Array(64),S=new Array(64),C=new Array(64),M=new Array(256),D=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(R,Q){for(var re=0,te=0,le=new Array,be=1;be<=16;be++){for(var we=1;we<=R[be];we++)le[Q[te]]=[],le[Q[te]][0]=re,le[Q[te]][1]=be,te++,re++;re*=2}return le}function F(R){for(var Q=R[0],re=R[1]-1;re>=0;)Q&1<<re&&(g|=1<<y),re--,--y<0&&(g==255?(z(255),z(0)):z(g),y=7,g=0)}function z(R){v.push(R)}function se(R){z(R>>8&255),z(255&R)}function Y(R,Q,re,te,le){for(var be,we=le[0],oe=le[240],Ce=function(ie,ne){var Ae,Fe,Ve,Ne,Z,xe,We,ht,Qe,Ue,ze=0;for(Qe=0;Qe<8;++Qe){Ae=ie[ze],Fe=ie[ze+1],Ve=ie[ze+2],Ne=ie[ze+3],Z=ie[ze+4],xe=ie[ze+5],We=ie[ze+6];var ot=Ae+(ht=ie[ze+7]),gt=Ae-ht,Ot=Fe+We,jt=Fe-We,wt=Ve+xe,ps=Ve-xe,St=Ne+Z,tt=Ne-Z,_t=ot+St,Xe=ot-St,Ys=Ot+wt,Mt=Ot-wt;ie[ze]=_t+Ys,ie[ze+4]=_t-Ys;var dt=.707106781*(Mt+Xe);ie[ze+2]=Xe+dt,ie[ze+6]=Xe-dt;var Dt=.382683433*((_t=tt+ps)-(Mt=jt+gt)),wn=.5411961*_t+Dt,$r=1.306562965*Mt+Dt,ha=.707106781*(Ys=ps+jt),ma=gt+ha,nt=gt-ha;ie[ze+5]=nt+wn,ie[ze+3]=nt-wn,ie[ze+1]=ma+$r,ie[ze+7]=ma-$r,ze+=8}for(ze=0,Qe=0;Qe<8;++Qe){Ae=ie[ze],Fe=ie[ze+8],Ve=ie[ze+16],Ne=ie[ze+24],Z=ie[ze+32],xe=ie[ze+40],We=ie[ze+48];var Fs=Ae+(ht=ie[ze+56]),Js=Ae-ht,Hr=Fe+We,vr=Fe-We,mr=Ve+xe,_s=Ve-xe,qn=Ne+Z,La=Ne-Z,Xs=Fs+qn,Qs=Fs-qn,Zs=Hr+mr,fa=Hr-mr;ie[ze]=Xs+Zs,ie[ze+32]=Xs-Zs;var $s=.707106781*(fa+Qs);ie[ze+16]=Qs+$s,ie[ze+48]=Qs-$s;var xa=.382683433*((Xs=La+_s)-(fa=vr+Js)),Nn=.5411961*Xs+xa,ce=1.306562965*fa+xa,Re=.707106781*(Zs=_s+vr),st=Js+Re,Ut=Js-Re;ie[ze+40]=Ut+Nn,ie[ze+24]=Ut-Nn,ie[ze+8]=st+ce,ie[ze+56]=st-ce,ze++}for(Qe=0;Qe<64;++Qe)Ue=ie[Qe]*ne[Qe],m[Qe]=Ue>0?Ue+.5|0:Ue-.5|0;return m}(R,Q),ye=0;ye<64;++ye)p[L[ye]]=Ce[ye];var fe=p[0]-re;re=p[0],fe==0?F(te[0]):(F(te[f[be=32767+fe]]),F(h[be]));for(var Le=63;Le>0&&p[Le]==0;)Le--;if(Le==0)return F(we),re;for(var Te,K=1;K<=Le;){for(var J=K;p[K]==0&&K<=Le;)++K;var ve=K-J;if(ve>=16){Te=ve>>4;for(var qe=1;qe<=Te;++qe)F(oe);ve&=15}be=32767+p[K],F(le[(ve<<4)+f[be]]),F(h[be]),K++}return Le!=63&&F(we),re}function _e(R){R=Math.min(Math.max(R,1),100),i!=R&&(function(Q){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var le=o((re[te]*Q+50)/100);le=Math.min(Math.max(le,1),255),l[L[te]]=le}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var oe=o((be[we]*Q+50)/100);oe=Math.min(Math.max(oe,1),255),c[L[we]]=oe}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,fe=0;fe<8;fe++)for(var Le=0;Le<8;Le++)d[ye]=1/(l[L[ye]]*Ce[fe]*Ce[Le]*8),u[ye]=1/(c[L[ye]]*Ce[fe]*Ce[Le]*8),ye++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),i=R)}this.encode=function(R,Q){Q&&_e(Q),v=new Array,g=0,y=7,se(65496),se(65504),se(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),se(1),se(1),z(0),z(0),function(){se(65499),se(132),z(0);for(var Fe=0;Fe<64;Fe++)z(l[Fe]);z(1);for(var Ve=0;Ve<64;Ve++)z(c[Ve])}(),function(Fe,Ve){se(65472),se(17),z(8),se(Ve),se(Fe),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(R.width,R.height),function(){se(65476),se(418),z(0);for(var Fe=0;Fe<16;Fe++)z(A[Fe+1]);for(var Ve=0;Ve<=11;Ve++)z(I[Ve]);z(16);for(var Ne=0;Ne<16;Ne++)z(H[Ne+1]);for(var Z=0;Z<=161;Z++)z(k[Z]);z(1);for(var xe=0;xe<16;xe++)z(P[xe+1]);for(var We=0;We<=11;We++)z(O[We]);z(17);for(var ht=0;ht<16;ht++)z($[ht+1]);for(var Qe=0;Qe<=161;Qe++)z(V[Qe])}(),se(65498),se(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var re=0,te=0,le=0;g=0,y=7,this.encode.displayName="_encode_";for(var be,we,oe,Ce,ye,fe,Le,Te,K,J=R.data,ve=R.width,qe=R.height,ie=4*ve,ne=0;ne<qe;){for(be=0;be<ie;){for(ye=ie*ne+be,Le=-1,Te=0,K=0;K<64;K++)fe=ye+(Te=K>>3)*ie+(Le=4*(7&K)),ne+Te>=qe&&(fe-=ie*(ne+1+Te-qe)),be+Le>=ie&&(fe-=be+Le-ie+4),we=J[fe++],oe=J[fe++],Ce=J[fe++],N[K]=(D[we]+D[oe+256>>0]+D[Ce+512>>0]>>16)-128,S[K]=(D[we+768>>0]+D[oe+1024>>0]+D[Ce+1280>>0]>>16)-128,C[K]=(D[we+1280>>0]+D[oe+1536>>0]+D[Ce+1792>>0]>>16)-128;re=Y(N,d,re,t,a),te=Y(S,u,te,s,n),le=Y(C,u,le,s,n),be+=32}ne+=8}if(y>=0){var Ae=[];Ae[1]=y+1,Ae[0]=(1<<y+1)-1,F(Ae)}return se(65497),new Uint8Array(v)},e=e||50,function(){for(var R=String.fromCharCode,Q=0;Q<256;Q++)M[Q]=R(Q)}(),t=T(A,I),s=T(P,O),a=T(H,k),n=T($,V),function(){for(var R=1,Q=2,re=1;re<=15;re++){for(var te=R;te<Q;te++)f[32767+te]=re,h[32767+te]=[],h[32767+te][1]=re,h[32767+te][0]=te;for(var le=-(Q-1);le<=-R;le++)f[32767+le]=re,h[32767+le]=[],h[32767+le][1]=re,h[32767+le][0]=Q-1+le;R<<=1,Q<<=1}}(),function(){for(var R=0;R<256;R++)D[R]=19595*R,D[R+256>>0]=38470*R,D[R+512>>0]=7471*R+32768,D[R+768>>0]=-11059*R,D[R+1024>>0]=-21709*R,D[R+1280>>0]=32768*R+8421375,D[R+1536>>0]=-27439*R,D[R+1792>>0]=-5329*R}(),_e(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cn(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function i5(e){function t(A){if(!A)throw Error("assert :P")}function s(A,I,H){for(var k=0;4>k;k++)if(A[I+k]!=H.charCodeAt(k))return!0;return!1}function a(A,I,H,k,P){for(var O=0;O<P;O++)A[I+O]=H[k+O]}function n(A,I,H,k){for(var P=0;P<k;P++)A[I+P]=H}function i(A){return new Int32Array(A)}function o(A,I){for(var H=[],k=0;k<A;k++)H.push(new I);return H}function l(A,I){var H=[];return function k(P,O,$){for(var V=$[O],T=0;T<V&&(P.push($.length>O+1?[]:new I),!($.length<O+1));T++)k(P[T],O+1,$)}(H,0,A),H}var c=function(){var A=this;function I(x,b){for(var _=1<<b-1>>>0;x&_;)_>>>=1;return _?(x&_-1)+_:x}function H(x,b,_,E,q){t(!(E%_));do x[b+(E-=_)]=q;while(0<E)}function k(x,b,_,E,q){if(t(2328>=q),512>=q)var U=i(512);else if((U=i(q))==null)return 0;return function(W,G,X,ee,ue,Se){var Pe,pe,Ie=G,Ee=1<<X,he=i(16),me=i(16);for(t(ue!=0),t(ee!=null),t(W!=null),t(0<X),pe=0;pe<ue;++pe){if(15<ee[pe])return 0;++he[ee[pe]]}if(he[0]==ue)return 0;for(me[1]=0,Pe=1;15>Pe;++Pe){if(he[Pe]>1<<Pe)return 0;me[Pe+1]=me[Pe]+he[Pe]}for(pe=0;pe<ue;++pe)Pe=ee[pe],0<ee[pe]&&(Se[me[Pe]++]=pe);if(me[15]==1)return(ee=new P).g=0,ee.value=Se[0],H(W,Ie,1,Ee,ee),Ee;var Me,$e=-1,De=Ee-1,Je=0,He=1,it=1,Ge=1<<X;for(pe=0,Pe=1,ue=2;Pe<=X;++Pe,ue<<=1){if(He+=it<<=1,0>(it-=he[Pe]))return 0;for(;0<he[Pe];--he[Pe])(ee=new P).g=Pe,ee.value=Se[pe++],H(W,Ie+Je,ue,Ge,ee),Je=I(Je,Pe)}for(Pe=X+1,ue=2;15>=Pe;++Pe,ue<<=1){if(He+=it<<=1,0>(it-=he[Pe]))return 0;for(;0<he[Pe];--he[Pe]){if(ee=new P,(Je&De)!=$e){for(Ie+=Ge,Me=1<<($e=Pe)-X;15>$e&&!(0>=(Me-=he[$e]));)++$e,Me<<=1;Ee+=Ge=1<<(Me=$e-X),W[G+($e=Je&De)].g=Me+X,W[G+$e].value=Ie-G-$e}ee.g=Pe-X,ee.value=Se[pe++],H(W,Ie+(Je>>X),ue,Ge,ee),Je=I(Je,Pe)}}return He!=2*me[15]-1?0:Ee}(x,b,_,E,q,U)}function P(){this.value=this.g=0}function O(){this.value=this.g=0}function $(){this.G=o(5,P),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(gs,O)}function V(x,b,_,E){t(x!=null),t(b!=null),t(2147483648>E),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=b,x.pa=_,x.Jd=b,x.Yc=_+E,x.Zc=4<=E?_+E-4+1:_,be(x)}function T(x,b){for(var _=0;0<b--;)_|=oe(x,128)<<b;return _}function F(x,b){var _=T(x,b);return we(x)?-_:_}function z(x,b,_,E){var q,U=0;for(t(x!=null),t(b!=null),t(4294967288>E),x.Sb=E,x.Ra=0,x.u=0,x.h=0,4<E&&(E=4),q=0;q<E;++q)U+=b[_+q]<<8*q;x.Ra=U,x.bb=E,x.oa=b,x.pa=_}function se(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<Ll-8>>>0,++x.bb,x.u-=8;re(x)&&(x.h=1,x.u=0)}function Y(x,b){if(t(0<=b),!x.h&&b<=Tl){var _=Q(x)&Ol[b];return x.u+=b,se(x),_}return x.h=1,x.u=0}function _e(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(x){return x.Ra>>>(x.u&Ll-1)>>>0}function re(x){return t(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>Ll}function te(x,b){x.u=b,x.h=re(x)}function le(x){x.u>=ld&&(t(x.u>=ld),se(x))}function be(x){t(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(t(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function we(x){return T(x,1)}function oe(x,b){var _=x.Ca;0>x.b&&be(x);var E=x.b,q=_*b>>>8,U=(x.I>>>E>q)+0;for(U?(_-=q,x.I-=q+1<<E>>>0):_=q+1,E=_,q=0;256<=E;)q+=8,E>>=8;return E=7^q+ta[E],x.b-=E,x.Ca=(_<<E)-1,U}function Ce(x,b,_){x[b+0]=_>>24&255,x[b+1]=_>>16&255,x[b+2]=_>>8&255,x[b+3]=_>>0&255}function ye(x,b){return x[b+0]<<0|x[b+1]<<8}function fe(x,b){return ye(x,b)|x[b+2]<<16}function Le(x,b){return ye(x,b)|ye(x,b+2)<<16}function Te(x,b){var _=1<<b;return t(x!=null),t(0<b),x.X=i(_),x.X==null?0:(x.Mb=32-b,x.Xa=b,1)}function K(x,b){t(x!=null),t(b!=null),t(x.Xa==b.Xa),a(b.X,0,x.X,0,1<<b.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function ve(x,b,_,E){t(_!=null),t(E!=null);var q=_[0],U=E[0];return q==0&&(q=(x*U+b/2)/b),U==0&&(U=(b*q+x/2)/x),0>=q||0>=U?0:(_[0]=q,E[0]=U,1)}function qe(x,b){return x+(1<<b)-1>>>b}function ie(x,b){return((4278255360&x)+(4278255360&b)>>>0&4278255360)+((16711935&x)+(16711935&b)>>>0&16711935)>>>0}function ne(x,b){A[b]=function(_,E,q,U,W,G,X){var ee;for(ee=0;ee<W;++ee){var ue=A[x](G[X+ee-1],q,U+ee);G[X+ee]=ie(_[E+ee],ue)}}}function Ae(){this.ud=this.hd=this.jd=0}function Fe(x,b){return((4278124286&(x^b))>>>1)+(x&b)>>>0}function Ve(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function Ne(x,b){return Ve(x+(x-b+.5>>1))}function Z(x,b,_){return Math.abs(b-_)-Math.abs(x-_)}function xe(x,b,_,E,q,U,W){for(E=U[W-1],_=0;_<q;++_)U[W+_]=E=ie(x[b+_],E)}function We(x,b,_,E,q){var U;for(U=0;U<_;++U){var W=x[b+U],G=W>>8&255,X=16711935&(X=(X=16711935&W)+((G<<16)+G));E[q+U]=(4278255360&W)+X>>>0}}function ht(x,b){b.jd=x>>0&255,b.hd=x>>8&255,b.ud=x>>16&255}function Qe(x,b,_,E,q,U){var W;for(W=0;W<E;++W){var G=b[_+W],X=G>>>8,ee=G,ue=255&(ue=(ue=G>>>16)+((x.jd<<24>>24)*(X<<24>>24)>>>5));ee=255&(ee=(ee=ee+((x.hd<<24>>24)*(X<<24>>24)>>>5))+((x.ud<<24>>24)*(ue<<24>>24)>>>5)),q[U+W]=(4278255360&G)+(ue<<16)+ee}}function Ue(x,b,_,E,q){A[b]=function(U,W,G,X,ee,ue,Se,Pe,pe){for(X=Se;X<Pe;++X)for(Se=0;Se<pe;++Se)ee[ue++]=q(G[E(U[W++])])},A[x]=function(U,W,G,X,ee,ue,Se){var Pe=8>>U.b,pe=U.Ea,Ie=U.K[0],Ee=U.w;if(8>Pe)for(U=(1<<U.b)-1,Ee=(1<<Pe)-1;W<G;++W){var he,me=0;for(he=0;he<pe;++he)he&U||(me=E(X[ee++])),ue[Se++]=q(Ie[me&Ee]),me>>=Pe}else A["VP8LMapColor"+_](X,ee,Ie,Ee,ue,Se,W,G,pe)}}function ze(x,b,_,E,q){for(_=b+_;b<_;){var U=x[b++];E[q++]=U>>16&255,E[q++]=U>>8&255,E[q++]=U>>0&255}}function ot(x,b,_,E,q){for(_=b+_;b<_;){var U=x[b++];E[q++]=U>>16&255,E[q++]=U>>8&255,E[q++]=U>>0&255,E[q++]=U>>24&255}}function gt(x,b,_,E,q){for(_=b+_;b<_;){var U=(W=x[b++])>>16&240|W>>12&15,W=W>>0&240|W>>28&15;E[q++]=U,E[q++]=W}}function Ot(x,b,_,E,q){for(_=b+_;b<_;){var U=(W=x[b++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;E[q++]=U,E[q++]=W}}function jt(x,b,_,E,q){for(_=b+_;b<_;){var U=x[b++];E[q++]=U>>0&255,E[q++]=U>>8&255,E[q++]=U>>16&255}}function wt(x,b,_,E,q,U){if(U==0)for(_=b+_;b<_;)Ce(E,((U=x[b++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),q+=32;else a(E,q,x,b,_)}function ps(x,b){A[b][0]=A[x+"0"],A[b][1]=A[x+"1"],A[b][2]=A[x+"2"],A[b][3]=A[x+"3"],A[b][4]=A[x+"4"],A[b][5]=A[x+"5"],A[b][6]=A[x+"6"],A[b][7]=A[x+"7"],A[b][8]=A[x+"8"],A[b][9]=A[x+"9"],A[b][10]=A[x+"10"],A[b][11]=A[x+"11"],A[b][12]=A[x+"12"],A[b][13]=A[x+"13"],A[b][14]=A[x+"0"],A[b][15]=A[x+"0"]}function St(x){return x==tx||x==rx||x==eh||x==sx}function tt(){this.eb=[],this.size=this.A=this.fb=0}function _t(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tt,this.f.kb=new _t,this.sd=null}function Ys(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Mt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dt(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function Dt(x,b){var _=x.T,E=b.ba.f.RGBA,q=E.eb,U=E.fb+x.ka*E.A,W=qa[b.ba.S],G=x.y,X=x.O,ee=x.f,ue=x.N,Se=x.ea,Pe=x.W,pe=b.cc,Ie=b.dc,Ee=b.Mc,he=b.Nc,me=x.ka,Me=x.ka+x.T,$e=x.U,De=$e+1>>1;for(me==0?W(G,X,null,null,ee,ue,Se,Pe,ee,ue,Se,Pe,q,U,null,null,$e):(W(b.ec,b.fc,G,X,pe,Ie,Ee,he,ee,ue,Se,Pe,q,U-E.A,q,U,$e),++_);me+2<Me;me+=2)pe=ee,Ie=ue,Ee=Se,he=Pe,ue+=x.Rc,Pe+=x.Rc,U+=2*E.A,W(G,(X+=2*x.fa)-x.fa,G,X,pe,Ie,Ee,he,ee,ue,Se,Pe,q,U-E.A,q,U,$e);return X+=x.fa,x.j+Me<x.o?(a(b.ec,b.fc,G,X,$e),a(b.cc,b.dc,ee,ue,De),a(b.Mc,b.Nc,Se,Pe,De),_--):1&Me||W(G,X,null,null,ee,ue,Se,Pe,ee,ue,Se,Pe,q,U+E.A,null,null,$e),_}function wn(x,b,_){var E=x.F,q=[x.J];if(E!=null){var U=x.U,W=b.ba.S,G=W==Zu||W==eh;b=b.ba.f.RGBA;var X=[0],ee=x.ka;X[0]=x.T,x.Kb&&(ee==0?--X[0]:(--ee,q[0]-=x.width),x.j+x.ka+x.T==x.o&&(X[0]=x.o-x.j-ee));var ue=b.eb;ee=b.fb+ee*b.A,x=or(E,q[0],x.width,U,X,ue,ee+(G?0:3),b.A),t(_==X),x&&St(W)&&Fa(ue,ee,G,U,X,b.A)}return 0}function $r(x){var b=x.ma,_=b.ba.S,E=11>_,q=_==Xu||_==Qu||_==Zu||_==ex||_==12||St(_);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!id(b.Oa,x,q?11:12))return 0;if(q&&St(_)&&Be(),x.da)alert("todo:use_scaling");else{if(E){if(b.Ib=dt,x.Kb){if(_=x.U+1>>1,b.memory=i(x.U+2*_),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+x.U,b.Mc=b.cc,b.Nc=b.dc+_,b.Ib=Dt,Be()}}else alert("todo:EmitYUV");q&&(b.Jb=wn,E&&je())}if(E&&!Ty){for(x=0;256>x;++x)GP[x]=89858*(x-128)+rh>>th,JP[x]=-22014*(x-128)+rh,YP[x]=-45773*(x-128),KP[x]=113618*(x-128)+rh>>th;for(x=xd;x<ix;++x)b=76283*(x-16)+rh>>th,XP[x-xd]=ga(b,255),QP[x-xd]=ga(b+8>>4,15);Ty=1}return 1}function ha(x){var b=x.ma,_=x.U,E=x.T;return t(!(1&x.ka)),0>=_||0>=E?0:(_=b.Ib(x,b),b.Jb!=null&&b.Jb(x,b,_),b.Dc+=_,1)}function ma(x){x.ma.memory=null}function nt(x,b,_,E){return Y(x,8)!=47?0:(b[0]=Y(x,14)+1,_[0]=Y(x,14)+1,E[0]=Y(x,1),Y(x,3)!=0?0:!x.h)}function Fs(x,b){if(4>x)return x+1;var _=x-2>>1;return(2+(1&x)<<_)+Y(b,_)+1}function Js(x,b){return 120<b?b-120:1<=(_=((_=LP[b-1])>>4)*x+(8-(15&_)))?_:1;var _}function Hr(x,b,_){var E=Q(_),q=x[b+=255&E].g-8;return 0<q&&(te(_,_.u+8),E=Q(_),b+=x[b].value,b+=E&(1<<q)-1),te(_,_.u+x[b].g),x[b].value}function vr(x,b,_){return _.g+=x.g,_.value+=x.value<<b>>>0,t(8>=_.g),x.g}function mr(x,b,_){var E=x.xc;return t((b=E==0?0:x.vc[x.md*(_>>E)+(b>>E)])<x.Wb),x.Ya[b]}function _s(x,b,_,E){var q=x.ab,U=x.c*b,W=x.C;b=W+b;var G=_,X=E;for(E=x.Ta,_=x.Ua;0<q--;){var ee=x.gc[q],ue=W,Se=b,Pe=G,pe=X,Ie=(X=E,G=_,ee.Ea);switch(t(ue<Se),t(Se<=ee.nc),ee.hc){case 2:Wu(Pe,pe,(Se-ue)*Ie,X,G);break;case 0:var Ee=ue,he=Se,me=X,Me=G,$e=(Ge=ee).Ea;Ee==0&&(Qf(Pe,pe,null,null,1,me,Me),xe(Pe,pe+1,0,0,$e-1,me,Me+1),pe+=$e,Me+=$e,++Ee);for(var De=1<<Ge.b,Je=De-1,He=qe($e,Ge.b),it=Ge.K,Ge=Ge.w+(Ee>>Ge.b)*He;Ee<he;){var qt=it,Ht=Ge,It=1;for(cd(Pe,pe,me,Me-$e,1,me,Me);It<$e;){var kt=(It&~Je)+De;kt>$e&&(kt=$e),(0,Ci[qt[Ht++]>>8&15])(Pe,pe+ +It,me,Me+It-$e,kt-It,me,Me+It),It=kt}pe+=$e,Me+=$e,++Ee&Je||(Ge+=He)}Se!=ee.nc&&a(X,G-Ie,X,G+(Se-ue-1)*Ie,Ie);break;case 1:for(Ie=Pe,he=pe,$e=(Pe=ee.Ea)-(Me=Pe&~(me=(pe=1<<ee.b)-1)),Ee=qe(Pe,ee.b),De=ee.K,ee=ee.w+(ue>>ee.b)*Ee;ue<Se;){for(Je=De,He=ee,it=new Ae,Ge=he+Me,qt=he+Pe;he<Ge;)ht(Je[He++],it),Po(it,Ie,he,pe,X,G),he+=pe,G+=pe;he<qt&&(ht(Je[He++],it),Po(it,Ie,he,$e,X,G),he+=$e,G+=$e),++ue&me||(ee+=Ee)}break;case 3:if(Pe==X&&pe==G&&0<ee.b){for(he=X,Pe=Ie=G+(Se-ue)*Ie-(Me=(Se-ue)*qe(ee.Ea,ee.b)),pe=X,me=G,Ee=[],Me=($e=Me)-1;0<=Me;--Me)Ee[Me]=pe[me+Me];for(Me=$e-1;0<=Me;--Me)he[Pe+Me]=Ee[Me];Da(ee,ue,Se,X,Ie,X,G)}else Da(ee,ue,Se,Pe,pe,X,G)}G=E,X=_}X!=_&&a(E,_,G,X,U)}function qn(x,b){var _=x.V,E=x.Ba+x.c*x.C,q=b-x.C;if(t(b<=x.l.o),t(16>=q),0<q){var U=x.l,W=x.Ta,G=x.Ua,X=U.width;if(_s(x,q,_,E),q=G=[G],t((_=x.C)<(E=b)),t(U.v<U.va),E>U.o&&(E=U.o),_<U.j){var ee=U.j-_;_=U.j,q[0]+=ee*X}if(_>=E?_=0:(q[0]+=4*U.v,U.ka=_-U.j,U.U=U.va-U.v,U.T=E-_,_=1),_){if(G=G[0],11>(_=x.ca).S){var ue=_.f.RGBA,Se=(E=_.S,q=U.U,U=U.T,ee=ue.eb,ue.A),Pe=U;for(ue=ue.fb+x.Ma*ue.A;0<Pe--;){var pe=W,Ie=G,Ee=q,he=ee,me=ue;switch(E){case Ju:ra(pe,Ie,Ee,he,me);break;case Xu:Bs(pe,Ie,Ee,he,me);break;case tx:Bs(pe,Ie,Ee,he,me),Fa(he,me,0,Ee,1,0);break;case Ny:Gn(pe,Ie,Ee,he,me);break;case Qu:wt(pe,Ie,Ee,he,me,1);break;case rx:wt(pe,Ie,Ee,he,me,1),Fa(he,me,0,Ee,1,0);break;case Zu:wt(pe,Ie,Ee,he,me,0);break;case eh:wt(pe,Ie,Ee,he,me,0),Fa(he,me,1,Ee,1,0);break;case ex:Ai(pe,Ie,Ee,he,me);break;case sx:Ai(pe,Ie,Ee,he,me),ir(he,me,Ee,1,0);break;case _y:Hn(pe,Ie,Ee,he,me);break;default:t(0)}G+=X,ue+=Se}x.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");t(x.Ma<=_.height)}}x.C=b,t(x.C<=x.i)}function La(x){var b;if(0<x.ua)return 0;for(b=0;b<x.Wb;++b){var _=x.Ya[b].G,E=x.Ya[b].H;if(0<_[1][E[1]+0].g||0<_[2][E[2]+0].g||0<_[3][E[3]+0].g)return 0}return 1}function Xs(x,b,_,E,q,U){if(x.Z!=0){var W=x.qd,G=x.rd;for(t(Ti[x.Z]!=null);b<_;++b)Ti[x.Z](W,G,E,q,E,q,U),W=E,G=q,q+=U;x.qd=W,x.rd=G}}function Qs(x,b){var _=x.l.ma,E=_.Z==0||_.Z==1?x.l.j:x.C;if(E=x.C<E?E:x.C,t(b<=x.l.o),b>E){var q=x.l.width,U=_.ca,W=_.tb+q*E,G=x.V,X=x.Ba+x.c*E,ee=x.gc;t(x.ab==1),t(ee[0].hc==3),Vu(ee[0],E,b,G,X,U,W),Xs(_,E,b,U,W,q)}x.C=x.Ma=b}function Zs(x,b,_,E,q,U,W){var G=x.$/E,X=x.$%E,ee=x.m,ue=x.s,Se=_+x.$,Pe=Se;q=_+E*q;var pe=_+E*U,Ie=280+ue.ua,Ee=x.Pb?G:16777216,he=0<ue.ua?ue.Wa:null,me=ue.wc,Me=Se<pe?mr(ue,X,G):null;t(x.C<U),t(pe<=q);var $e=!1;e:for(;;){for(;$e||Se<pe;){var De=0;if(G>=Ee){var Je=Se-_;t((Ee=x).Pb),Ee.wd=Ee.m,Ee.xd=Je,0<Ee.s.ua&&K(Ee.s.Wa,Ee.s.vb),Ee=G+DP}if(X&me||(Me=mr(ue,X,G)),t(Me!=null),Me.Qb&&(b[Se]=Me.qb,$e=!0),!$e)if(le(ee),Me.jc){De=ee,Je=b;var He=Se,it=Me.pd[Q(De)&gs-1];t(Me.jc),256>it.g?(te(De,De.u+it.g),Je[He]=it.value,De=0):(te(De,De.u+it.g-256),t(256<=it.value),De=it.value),De==0&&($e=!0)}else De=Hr(Me.G[0],Me.H[0],ee);if(ee.h)break;if($e||256>De){if(!$e)if(Me.nd)b[Se]=(Me.qb|De<<8)>>>0;else{if(le(ee),$e=Hr(Me.G[1],Me.H[1],ee),le(ee),Je=Hr(Me.G[2],Me.H[2],ee),He=Hr(Me.G[3],Me.H[3],ee),ee.h)break;b[Se]=(He<<24|$e<<16|De<<8|Je)>>>0}if($e=!1,++Se,++X>=E&&(X=0,++G,W!=null&&G<=U&&!(G%16)&&W(x,G),he!=null))for(;Pe<Se;)De=b[Pe++],he.X[(506832829*De&4294967295)>>>he.Mb]=De}else if(280>De){if(De=Fs(De-256,ee),Je=Hr(Me.G[4],Me.H[4],ee),le(ee),Je=Js(E,Je=Fs(Je,ee)),ee.h)break;if(Se-_<Je||q-Se<De)break e;for(He=0;He<De;++He)b[Se+He]=b[Se+He-Je];for(Se+=De,X+=De;X>=E;)X-=E,++G,W!=null&&G<=U&&!(G%16)&&W(x,G);if(t(Se<=q),X&me&&(Me=mr(ue,X,G)),he!=null)for(;Pe<Se;)De=b[Pe++],he.X[(506832829*De&4294967295)>>>he.Mb]=De}else{if(!(De<Ie))break e;for($e=De-280,t(he!=null);Pe<Se;)De=b[Pe++],he.X[(506832829*De&4294967295)>>>he.Mb]=De;De=Se,t(!($e>>>(Je=he).Xa)),b[De]=Je.X[$e],$e=!0}$e||t(ee.h==re(ee))}if(x.Pb&&ee.h&&Se<q)t(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&K(x.s.vb,x.s.Wa);else{if(ee.h)break e;W!=null&&W(x,G>U?U:G),x.a=0,x.$=Se-_}return 1}return x.a=3,0}function fa(x){t(x!=null),x.vc=null,x.yc=null,x.Ya=null;var b=x.Wa;b!=null&&(b.X=null),x.vb=null,t(x!=null)}function $s(){var x=new Xf;return x==null?null:(x.a=0,x.xb=Cy,ps("Predictor","VP8LPredictors"),ps("Predictor","VP8LPredictors_C"),ps("PredictorAdd","VP8LPredictorsAdd"),ps("PredictorAdd","VP8LPredictorsAdd_C"),Wu=We,Po=Qe,ra=ze,Bs=ot,Ai=gt,Hn=Ot,Gn=jt,A.VP8LMapColor32b=Ml,A.VP8LMapColor8b=Hu,x)}function xa(x,b,_,E,q){var U=1,W=[x],G=[b],X=E.m,ee=E.s,ue=null,Se=0;e:for(;;){if(_)for(;U&&Y(X,1);){var Pe=W,pe=G,Ie=E,Ee=1,he=Ie.m,me=Ie.gc[Ie.ab],Me=Y(he,2);if(Ie.Oc&1<<Me)U=0;else{switch(Ie.Oc|=1<<Me,me.hc=Me,me.Ea=Pe[0],me.nc=pe[0],me.K=[null],++Ie.ab,t(4>=Ie.ab),Me){case 0:case 1:me.b=Y(he,3)+2,Ee=xa(qe(me.Ea,me.b),qe(me.nc,me.b),0,Ie,me.K),me.K=me.K[0];break;case 3:var $e,De=Y(he,8)+1,Je=16<De?0:4<De?1:2<De?2:3;if(Pe[0]=qe(me.Ea,Je),me.b=Je,$e=Ee=xa(De,1,0,Ie,me.K)){var He,it=De,Ge=me,qt=1<<(8>>Ge.b),Ht=i(qt);if(Ht==null)$e=0;else{var It=Ge.K[0],kt=Ge.w;for(Ht[0]=Ge.K[0][0],He=1;He<1*it;++He)Ht[He]=ie(It[kt+He],Ht[He-1]);for(;He<4*qt;++He)Ht[He]=0;Ge.K[0]=null,Ge.K[0]=Ht,$e=1}}Ee=$e;break;case 2:break;default:t(0)}U=Ee}}if(W=W[0],G=G[0],U&&Y(X,1)&&!(U=1<=(Se=Y(X,4))&&11>=Se)){E.a=3;break e}var er;if(er=U)t:{var Jt,bt,Br,sa=E,zr=W,aa=G,Gt=Se,va=_,ya=sa.m,Xr=sa.s,bs=[null],Us=1,Ba=0,An=MP[Gt];r:for(;;){if(va&&Y(ya,1)){var Qr=Y(ya,3)+2,Xn=qe(zr,Qr),Oo=qe(aa,Qr),$l=Xn*Oo;if(!xa(Xn,Oo,0,sa,bs))break r;for(bs=bs[0],Xr.xc=Qr,Jt=0;Jt<$l;++Jt){var Li=bs[Jt]>>8&65535;bs[Jt]=Li,Li>=Us&&(Us=Li+1)}}if(ya.h)break r;for(bt=0;5>bt;++bt){var Sr=Sy[bt];!bt&&0<Gt&&(Sr+=1<<Gt),Ba<Sr&&(Ba=Sr)}var ox=o(Us*An,P),Dy=Us,Iy=o(Dy,$);if(Iy==null)var ah=null;else t(65536>=Dy),ah=Iy;var pd=i(Ba);if(ah==null||pd==null||ox==null){sa.a=1;break r}var nh=ox;for(Jt=Br=0;Jt<Us;++Jt){var on=ah[Jt],ql=on.G,Bl=on.H,Ry=0,ih=1,Fy=0;for(bt=0;5>bt;++bt){Sr=Sy[bt],ql[bt]=nh,Bl[bt]=Br,!bt&&0<Gt&&(Sr+=1<<Gt);a:{var oh,lx=Sr,lh=sa,gd=pd,tC=nh,rC=Br,cx=0,Mi=lh.m,sC=Y(Mi,1);if(n(gd,0,0,lx),sC){var aC=Y(Mi,1)+1,nC=Y(Mi,1),$y=Y(Mi,nC==0?1:8);gd[$y]=1,aC==2&&(gd[$y=Y(Mi,8)]=1);var ch=1}else{var qy=i(19),By=Y(Mi,4)+4;if(19<By){lh.a=3;var dh=0;break a}for(oh=0;oh<By;++oh)qy[TP[oh]]=Y(Mi,3);var dx=void 0,bd=void 0,zy=lh,iC=qy,uh=lx,Uy=gd,ux=0,Di=zy.m,Wy=8,Vy=o(128,P);s:for(;k(Vy,0,7,iC,19);){if(Y(Di,1)){var oC=2+2*Y(Di,3);if((dx=2+Y(Di,oC))>uh)break s}else dx=uh;for(bd=0;bd<uh&&dx--;){le(Di);var Hy=Vy[0+(127&Q(Di))];te(Di,Di.u+Hy.g);var zl=Hy.value;if(16>zl)Uy[bd++]=zl,zl!=0&&(Wy=zl);else{var lC=zl==16,Gy=zl-16,cC=EP[Gy],Ky=Y(Di,kP[Gy])+cC;if(bd+Ky>uh)break s;for(var dC=lC?Wy:0;0<Ky--;)Uy[bd++]=dC}}ux=1;break s}ux||(zy.a=3),ch=ux}(ch=ch&&!Mi.h)&&(cx=k(tC,rC,8,gd,lx)),ch&&cx!=0?dh=cx:(lh.a=3,dh=0)}if(dh==0)break r;if(ih&&OP[bt]==1&&(ih=nh[Br].g==0),Ry+=nh[Br].g,Br+=dh,3>=bt){var vd,hx=pd[0];for(vd=1;vd<Sr;++vd)pd[vd]>hx&&(hx=pd[vd]);Fy+=hx}}if(on.nd=ih,on.Qb=0,ih&&(on.qb=(ql[3][Bl[3]+0].value<<24|ql[1][Bl[1]+0].value<<16|ql[2][Bl[2]+0].value)>>>0,Ry==0&&256>ql[0][Bl[0]+0].value&&(on.Qb=1,on.qb+=ql[0][Bl[0]+0].value<<8)),on.jc=!on.Qb&&6>Fy,on.jc){var hh,Qn=on;for(hh=0;hh<gs;++hh){var Ii=hh,Ri=Qn.pd[Ii],mh=Qn.G[0][Qn.H[0]+Ii];256<=mh.value?(Ri.g=mh.g+256,Ri.value=mh.value):(Ri.g=0,Ri.value=0,Ii>>=vr(mh,8,Ri),Ii>>=vr(Qn.G[1][Qn.H[1]+Ii],16,Ri),Ii>>=vr(Qn.G[2][Qn.H[2]+Ii],0,Ri),vr(Qn.G[3][Qn.H[3]+Ii],24,Ri))}}}Xr.vc=bs,Xr.Wb=Us,Xr.Ya=ah,Xr.yc=ox,er=1;break t}er=0}if(!(U=er)){E.a=3;break e}if(0<Se){if(ee.ua=1<<Se,!Te(ee.Wa,Se)){E.a=1,U=0;break e}}else ee.ua=0;var mx=E,Yy=W,uC=G,fx=mx.s,xx=fx.xc;if(mx.c=Yy,mx.i=uC,fx.md=qe(Yy,xx),fx.wc=xx==0?-1:(1<<xx)-1,_){E.xb=zP;break e}if((ue=i(W*G))==null){E.a=1,U=0;break e}U=(U=Zs(E,ue,0,W,G,G,null))&&!X.h;break e}return U?(q!=null?q[0]=ue:(t(ue==null),t(_)),E.$=0,_||fa(ee)):fa(ee),U}function Nn(x,b){var _=x.c*x.i,E=_+b+16*b;return t(x.c<=b),x.V=i(E),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+_+b,1)}function ce(x,b){var _=x.C,E=b-_,q=x.V,U=x.Ba+x.c*_;for(t(b<=x.l.o);0<E;){var W=16<E?16:E,G=x.l.ma,X=x.l.width,ee=X*W,ue=G.ca,Se=G.tb+X*_,Pe=x.Ta,pe=x.Ua;_s(x,W,q,U),Or(Pe,pe,ue,Se,ee),Xs(G,_,_+W,ue,Se,X),E-=W,q+=W*x.c,_+=W}t(_==b),x.C=x.Ma=b}function Re(){this.ub=this.yd=this.td=this.Rb=0}function st(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ut(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function qs(){this.Yb=function(){var x=[];return function b(_,E,q){for(var U=q[E],W=0;W<U&&(_.push(q.length>E+1?[]:0),!(q.length<E+1));W++)b(_[W],E+1,q)}(x,0,[3,11]),x}()}function bl(){this.jb=i(3),this.Wc=l([4,8],qs),this.Xc=l([4,17],qs)}function vl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Bn(){this.ld=this.La=this.dd=this.tc=0}function yo(){this.Na=this.la=0}function yl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ji(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ea(){this.uc=this.M=this.Nb=0,this.wa=Array(new Bn),this.Y=0,this.ya=Array(new ji),this.aa=0,this.l=new tn}function Ma(){this.y=i(16),this.f=i(8),this.ea=i(8)}function en(){this.cb=this.a=0,this.sc="",this.m=new _e,this.Od=new Re,this.Kc=new st,this.ed=new vl,this.Qa=new Ut,this.Ic=this.$c=this.Aa=0,this.D=new ea,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,_e),this.ia=0,this.pb=o(4,yl),this.Pa=new bl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ma),this.Hd=0,this.rb=Array(new yo),this.sb=0,this.wa=Array(new Bn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ji),this.L=this.aa=0,this.gd=l([4,2],Bn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function tn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wi(){var x=new en;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,fd||(fd=jo)),x}function nr(x,b,_){return x.a==0&&(x.a=b,x.sc=_,x.cb=0),0}function zn(x,b,_){return 3<=_&&x[b+0]==157&&x[b+1]==1&&x[b+2]==42}function jl(x,b){if(x==null)return 0;if(x.a=0,x.sc="OK",b==null)return nr(x,2,"null VP8Io passed to VP8GetHeaders()");var _=b.data,E=b.w,q=b.ha;if(4>q)return nr(x,7,"Truncated header.");var U=_[E+0]|_[E+1]<<8|_[E+2]<<16,W=x.Od;if(W.Rb=!(1&U),W.td=U>>1&7,W.yd=U>>4&1,W.ub=U>>5,3<W.td)return nr(x,3,"Incorrect keyframe parameters.");if(!W.yd)return nr(x,4,"Frame not displayable.");E+=3,q-=3;var G=x.Kc;if(W.Rb){if(7>q)return nr(x,7,"cannot parse picture header");if(!zn(_,E,q))return nr(x,3,"Bad code word");G.c=16383&(_[E+4]<<8|_[E+3]),G.Td=_[E+4]>>6,G.i=16383&(_[E+6]<<8|_[E+5]),G.Ud=_[E+6]>>6,E+=7,q-=7,x.za=G.c+15>>4,x.Ub=G.i+15>>4,b.width=G.c,b.height=G.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,n((U=x.Pa).jb,0,255,U.jb.length),t((U=x.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,n(U.Zb,0,0,U.Zb.length),n(U.Lb,0,0,U.Lb)}if(W.ub>q)return nr(x,7,"bad partition length");V(U=x.m,_,E,W.ub),E+=W.ub,q-=W.ub,W.Rb&&(G.Ld=we(U),G.Kd=we(U)),G=x.Qa;var X,ee=x.Pa;if(t(U!=null),t(G!=null),G.Cb=we(U),G.Cb){if(G.Bb=we(U),we(U)){for(G.Fb=we(U),X=0;4>X;++X)G.Zb[X]=we(U)?F(U,7):0;for(X=0;4>X;++X)G.Lb[X]=we(U)?F(U,6):0}if(G.Bb)for(X=0;3>X;++X)ee.jb[X]=we(U)?T(U,8):255}else G.Bb=0;if(U.Ka)return nr(x,3,"cannot parse segment header");if((G=x.ed).zd=we(U),G.Tb=T(U,6),G.wb=T(U,3),G.Pc=we(U),G.Pc&&we(U)){for(ee=0;4>ee;++ee)we(U)&&(G.vd[ee]=F(U,6));for(ee=0;4>ee;++ee)we(U)&&(G.od[ee]=F(U,6))}if(x.L=G.Tb==0?0:G.zd?1:2,U.Ka)return nr(x,3,"cannot parse filter header");var ue=q;if(q=X=E,E=X+ue,G=ue,x.Xb=(1<<T(x.m,2))-1,ue<3*(ee=x.Xb))_=7;else{for(X+=3*ee,G-=3*ee,ue=0;ue<ee;++ue){var Se=_[q+0]|_[q+1]<<8|_[q+2]<<16;Se>G&&(Se=G),V(x.Jc[+ue],_,X,Se),X+=Se,G-=Se,q+=3}V(x.Jc[+ee],_,X,G),_=X<E?0:5}if(_!=0)return nr(x,_,"cannot parse partitions");for(_=T(X=x.m,7),q=we(X)?F(X,4):0,E=we(X)?F(X,4):0,G=we(X)?F(X,4):0,ee=we(X)?F(X,4):0,X=we(X)?F(X,4):0,ue=x.Qa,Se=0;4>Se;++Se){if(ue.Cb){var Pe=ue.Zb[Se];ue.Fb||(Pe+=_)}else{if(0<Se){x.pb[Se]=x.pb[0];continue}Pe=_}var pe=x.pb[Se];pe.Sc[0]=ax[ga(Pe+q,127)],pe.Sc[1]=nx[ga(Pe+0,127)],pe.Eb[0]=2*ax[ga(Pe+E,127)],pe.Eb[1]=101581*nx[ga(Pe+G,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=ax[ga(Pe+ee,117)],pe.Qc[1]=nx[ga(Pe+X,127)],pe.lc=Pe+X}if(!W.Rb)return nr(x,4,"Not a key frame.");for(we(U),W=x.Pa,_=0;4>_;++_){for(q=0;8>q;++q)for(E=0;3>E;++E)for(G=0;11>G;++G)ee=oe(U,qP[_][q][E][G])?T(U,8):FP[_][q][E][G],W.Wc[_][q].Yb[E][G]=ee;for(q=0;17>q;++q)W.Xc[_][q]=W.Wc[_][BP[q]]}return x.kc=we(U),x.kc&&(x.Bd=T(U,8)),x.cb=1}function jo(x,b,_,E,q,U,W){var G=b[q].Yb[_];for(_=0;16>q;++q){if(!oe(x,G[_+0]))return q;for(;!oe(x,G[_+1]);)if(G=b[++q].Yb[0],_=0,q==16)return 16;var X=b[q+1].Yb;if(oe(x,G[_+2])){var ee=x,ue=0;if(oe(ee,(Pe=G)[(Se=_)+3]))if(oe(ee,Pe[Se+6])){for(G=0,Se=2*(ue=oe(ee,Pe[Se+8]))+(Pe=oe(ee,Pe[Se+9+ue])),ue=0,Pe=IP[Se];Pe[G];++G)ue+=ue+oe(ee,Pe[G]);ue+=3+(8<<Se)}else oe(ee,Pe[Se+7])?(ue=7+2*oe(ee,165),ue+=oe(ee,145)):ue=5+oe(ee,159);else ue=oe(ee,Pe[Se+4])?3+oe(ee,Pe[Se+5]):2;G=X[2]}else ue=1,G=X[1];X=W+RP[q],0>(ee=x).b&&be(ee);var Se,Pe=ee.b,pe=(Se=ee.Ca>>1)-(ee.I>>Pe)>>31;--ee.b,ee.Ca+=pe,ee.Ca|=1,ee.I-=(Se+1&pe)<<Pe,U[X]=((ue^pe)-pe)*E[(0<q)+0]}return 16}function Ni(x){var b=x.rb[x.sb-1];b.la=0,b.Na=0,n(x.zc,0,0,x.zc.length),x.ja=0}function _n(x,b){if(x==null)return 0;if(b==null)return nr(x,2,"NULL VP8Io parameter in VP8Decode().");if(!x.cb&&!jl(x,b))return 0;if(t(x.cb),b.ac==null||b.ac(b)){b.ob&&(x.L=0);var _=sh[x.L];if(x.L==2?(x.yb=0,x.zb=0):(x.yb=b.v-_>>4,x.zb=b.j-_>>4,0>x.yb&&(x.yb=0),0>x.zb&&(x.zb=0)),x.Va=b.o+15+_>>4,x.Hb=b.va+15+_>>4,x.Hb>x.za&&(x.Hb=x.za),x.Va>x.Ub&&(x.Va=x.Ub),0<x.L){var E=x.ed;for(_=0;4>_;++_){var q;if(x.Qa.Cb){var U=x.Qa.Lb[_];x.Qa.Fb||(U+=E.Tb)}else U=E.Tb;for(q=0;1>=q;++q){var W=x.gd[_][q],G=U;if(E.Pc&&(G+=E.vd[0],q&&(G+=E.od[0])),0<(G=0>G?0:63<G?63:G)){var X=G;0<E.wb&&(X=4<E.wb?X>>2:X>>1)>9-E.wb&&(X=9-E.wb),1>X&&(X=1),W.dd=X,W.tc=2*G+X,W.ld=40<=G?2:15<=G?1:0}else W.tc=0;W.La=q}}}_=0}else nr(x,6,"Frame setup failed"),_=x.a;if(_=_==0){if(_){x.$c=0,0<x.Aa||(x.Ic=eC);e:{_=x.Ic,E=4*(X=x.za);var ee=32*X,ue=X+1,Se=0<x.L?X*(0<x.Aa?2:1):0,Pe=(x.Aa==2?2:1)*X;if((W=E+832+(q=3*(16*_+sh[x.L])/2*ee)+(U=x.Fa!=null&&0<x.Fa.length?x.Kc.c*x.Kc.i:0))!=W)_=0;else{if(W>x.Vb){if(x.Vb=0,x.Ec=i(W),x.Fc=0,x.Ec==null){_=nr(x,1,"no memory during frame initialization.");break e}x.Vb=W}W=x.Ec,G=x.Fc,x.Ac=W,x.Bc=G,G+=E,x.Gd=o(ee,Ma),x.Hd=0,x.rb=o(ue+1,yo),x.sb=1,x.wa=Se?o(Se,Bn):null,x.Y=0,x.D.Nb=0,x.D.wa=x.wa,x.D.Y=x.Y,0<x.Aa&&(x.D.Y+=X),t(!0),x.oc=W,x.pc=G,G+=832,x.ya=o(Pe,ji),x.aa=0,x.D.ya=x.ya,x.D.aa=x.aa,x.Aa==2&&(x.D.aa+=X),x.R=16*X,x.B=8*X,X=(ee=sh[x.L])*x.R,ee=ee/2*x.B,x.sa=W,x.ta=G+X,x.qa=x.sa,x.ra=x.ta+16*_*x.R+ee,x.Ha=x.qa,x.Ia=x.ra+8*_*x.B+ee,x.$c=0,G+=q,x.mb=U?W:null,x.nb=U?G:null,t(G+U<=x.Fc+x.Vb),Ni(x),n(x.Ac,x.Bc,0,E),_=1}}if(_){if(b.ka=0,b.y=x.sa,b.O=x.ta,b.f=x.qa,b.N=x.ra,b.ea=x.Ha,b.Vd=x.Ia,b.fa=x.R,b.Rc=x.B,b.F=null,b.J=0,!Ku){for(_=-255;255>=_;++_)Gr[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Yn[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)md[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)Fl[255+_]=0>_?0:255<_?255:_;Ku=1}Dl=Rf,Kn=Df,dd=Ou,zs=If,Ia=Tu,Er=Eu,Il=Xc,Gu=_o,ud=Jf,Co=Qc,Ao=Yf,ki=Pl,ko=Zc,Rl=Bu,Eo=qu,Ei=Pn,hd=Vn,Ra=Kf,nn[0]=Sn,nn[1]=Ff,nn[2]=zf,nn[3]=Uf,nn[4]=Du,nn[5]=_l,nn[6]=Iu,nn[7]=Kc,nn[8]=Vf,nn[9]=Wf,Oi[0]=Lu,Oi[1]=qf,Oi[2]=Wn,Oi[3]=wl,Oi[4]=Ss,Oi[5]=Bf,Oi[6]=Mu,Jn[0]=_i,Jn[1]=$f,Jn[2]=Hf,Jn[3]=Yc,Jn[4]=No,Jn[5]=Gf,Jn[6]=Jc,_=1}else _=0}_&&(_=function(pe,Ie){for(pe.M=0;pe.M<pe.Va;++pe.M){var Ee,he=pe.Jc[pe.M&pe.Xb],me=pe.m,Me=pe;for(Ee=0;Ee<Me.za;++Ee){var $e=me,De=Me,Je=De.Ac,He=De.Bc+4*Ee,it=De.zc,Ge=De.ya[De.aa+Ee];if(De.Qa.Bb?Ge.$b=oe($e,De.Pa.jb[0])?2+oe($e,De.Pa.jb[2]):oe($e,De.Pa.jb[1]):Ge.$b=0,De.kc&&(Ge.Ad=oe($e,De.Bd)),Ge.Za=!oe($e,145)+0,Ge.Za){var qt=Ge.Ob,Ht=0;for(De=0;4>De;++De){var It,kt=it[0+De];for(It=0;4>It;++It){kt=$P[Je[He+It]][kt];for(var er=Py[oe($e,kt[0])];0<er;)er=Py[2*er+oe($e,kt[er])];kt=-er,Je[He+It]=kt}a(qt,Ht,Je,He,4),Ht+=4,it[0+De]=kt}}else kt=oe($e,156)?oe($e,128)?1:3:oe($e,163)?2:0,Ge.Ob[0]=kt,n(Je,He,kt,4),n(it,0,kt,4);Ge.Dd=oe($e,142)?oe($e,114)?oe($e,183)?1:3:2:0}if(Me.m.Ka)return nr(pe,7,"Premature end-of-partition0 encountered.");for(;pe.ja<pe.za;++pe.ja){if(Me=he,$e=(me=pe).rb[me.sb-1],Je=me.rb[me.sb+me.ja],Ee=me.ya[me.aa+me.ja],He=me.kc?Ee.Ad:0)$e.la=Je.la=0,Ee.Za||($e.Na=Je.Na=0),Ee.Hc=0,Ee.Gc=0,Ee.ia=0;else{var Jt,bt;if($e=Je,Je=Me,He=me.Pa.Xc,it=me.ya[me.aa+me.ja],Ge=me.pb[it.$b],De=it.ad,qt=0,Ht=me.rb[me.sb-1],kt=It=0,n(De,qt,0,384),it.Za)var Br=0,sa=He[3];else{er=i(16);var zr=$e.Na+Ht.Na;if(zr=fd(Je,He[1],zr,Ge.Eb,0,er,0),$e.Na=Ht.Na=(0<zr)+0,1<zr)Dl(er,0,De,qt);else{var aa=er[0]+3>>3;for(er=0;256>er;er+=16)De[qt+er]=aa}Br=1,sa=He[0]}var Gt=15&$e.la,va=15&Ht.la;for(er=0;4>er;++er){var ya=1&va;for(aa=bt=0;4>aa;++aa)Gt=Gt>>1|(ya=(zr=fd(Je,sa,zr=ya+(1&Gt),Ge.Sc,Br,De,qt))>Br)<<7,bt=bt<<2|(3<zr?3:1<zr?2:De[qt+0]!=0),qt+=16;Gt>>=4,va=va>>1|ya<<7,It=(It<<8|bt)>>>0}for(sa=Gt,Br=va>>4,Jt=0;4>Jt;Jt+=2){for(bt=0,Gt=$e.la>>4+Jt,va=Ht.la>>4+Jt,er=0;2>er;++er){for(ya=1&va,aa=0;2>aa;++aa)zr=ya+(1&Gt),Gt=Gt>>1|(ya=0<(zr=fd(Je,He[2],zr,Ge.Qc,0,De,qt)))<<3,bt=bt<<2|(3<zr?3:1<zr?2:De[qt+0]!=0),qt+=16;Gt>>=2,va=va>>1|ya<<5}kt|=bt<<4*Jt,sa|=Gt<<4<<Jt,Br|=(240&va)<<Jt}$e.la=sa,Ht.la=Br,it.Hc=It,it.Gc=kt,it.ia=43690&kt?0:Ge.ia,He=!(It|kt)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Ee.$b][Ee.Za],me.wa[me.Y+me.ja].La|=!He),Me.Ka)return nr(pe,7,"Premature end-of-file encountered.")}if(Ni(pe),me=Ie,Me=1,Ee=(he=pe).D,$e=0<he.L&&he.M>=he.zb&&he.M<=he.Va,he.Aa==0)e:{if(Ee.M=he.M,Ee.uc=$e,nd(he,Ee),Me=1,Ee=(bt=he.D).Nb,$e=(kt=sh[he.L])*he.R,Je=kt/2*he.B,er=16*Ee*he.R,aa=8*Ee*he.B,He=he.sa,it=he.ta-$e+er,Ge=he.qa,De=he.ra-Je+aa,qt=he.Ha,Ht=he.Ia-Je+aa,va=(Gt=bt.M)==0,It=Gt>=he.Va-1,he.Aa==2&&nd(he,bt),bt.uc)for(ya=(zr=he).D.M,t(zr.D.uc),bt=zr.yb;bt<zr.Hb;++bt){Br=bt,sa=ya;var Xr=(bs=(Sr=zr).D).Nb;Jt=Sr.R;var bs=bs.wa[bs.Y+Br],Us=Sr.sa,Ba=Sr.ta+16*Xr*Jt+16*Br,An=bs.dd,Qr=bs.tc;if(Qr!=0)if(t(3<=Qr),Sr.L==1)0<Br&&Ei(Us,Ba,Jt,Qr+4),bs.La&&Ra(Us,Ba,Jt,Qr),0<sa&&Eo(Us,Ba,Jt,Qr+4),bs.La&&hd(Us,Ba,Jt,Qr);else{var Xn=Sr.B,Oo=Sr.qa,$l=Sr.ra+8*Xr*Xn+8*Br,Li=Sr.Ha,Sr=Sr.Ia+8*Xr*Xn+8*Br;Xr=bs.ld,0<Br&&(Gu(Us,Ba,Jt,Qr+4,An,Xr),Co(Oo,$l,Li,Sr,Xn,Qr+4,An,Xr)),bs.La&&(ki(Us,Ba,Jt,Qr,An,Xr),Rl(Oo,$l,Li,Sr,Xn,Qr,An,Xr)),0<sa&&(Il(Us,Ba,Jt,Qr+4,An,Xr),ud(Oo,$l,Li,Sr,Xn,Qr+4,An,Xr)),bs.La&&(Ao(Us,Ba,Jt,Qr,An,Xr),ko(Oo,$l,Li,Sr,Xn,Qr,An,Xr))}}if(he.ia&&alert("todo:DitherRow"),me.put!=null){if(bt=16*Gt,Gt=16*(Gt+1),va?(me.y=he.sa,me.O=he.ta+er,me.f=he.qa,me.N=he.ra+aa,me.ea=he.Ha,me.W=he.Ia+aa):(bt-=kt,me.y=He,me.O=it,me.f=Ge,me.N=De,me.ea=qt,me.W=Ht),It||(Gt-=kt),Gt>me.o&&(Gt=me.o),me.F=null,me.J=null,he.Fa!=null&&0<he.Fa.length&&bt<Gt&&(me.J=sd(he,me,bt,Gt-bt),me.F=he.mb,me.F==null&&me.F.length==0)){Me=nr(he,3,"Could not decode alpha data.");break e}bt<me.j&&(kt=me.j-bt,bt=me.j,t(!(1&kt)),me.O+=he.R*kt,me.N+=he.B*(kt>>1),me.W+=he.B*(kt>>1),me.F!=null&&(me.J+=me.width*kt)),bt<Gt&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=bt-me.j,me.U=me.va-me.v,me.T=Gt-bt,Me=me.put(me))}Ee+1!=he.Ic||It||(a(he.sa,he.ta-$e,He,it+16*he.R,$e),a(he.qa,he.ra-Je,Ge,De+8*he.B,Je),a(he.Ha,he.Ia-Je,qt,Ht+8*he.B,Je))}if(!Me)return nr(pe,6,"Output aborted.")}return 1}(x,b)),b.bc!=null&&b.bc(b),_&=1}return _?(x.cb=0,_):0}function pa(x,b,_,E,q){q=x[b+_+32*E]+(q>>3),x[b+_+32*E]=-256&q?0>q?0:255:q}function Un(x,b,_,E,q,U){pa(x,b,0,_,E+q),pa(x,b,1,_,E+U),pa(x,b,2,_,E-U),pa(x,b,3,_,E-q)}function Rt(x){return(20091*x>>16)+x}function rn(x,b,_,E){var q,U=0,W=i(16);for(q=0;4>q;++q){var G=x[b+0]+x[b+8],X=x[b+0]-x[b+8],ee=(35468*x[b+4]>>16)-Rt(x[b+12]),ue=Rt(x[b+4])+(35468*x[b+12]>>16);W[U+0]=G+ue,W[U+1]=X+ee,W[U+2]=X-ee,W[U+3]=G-ue,U+=4,b++}for(q=U=0;4>q;++q)G=(x=W[U+0]+4)+W[U+8],X=x-W[U+8],ee=(35468*W[U+4]>>16)-Rt(W[U+12]),pa(_,E,0,0,G+(ue=Rt(W[U+4])+(35468*W[U+12]>>16))),pa(_,E,1,0,X+ee),pa(_,E,2,0,X-ee),pa(_,E,3,0,G-ue),U++,E+=32}function Eu(x,b,_,E){var q=x[b+0]+4,U=35468*x[b+4]>>16,W=Rt(x[b+4]),G=35468*x[b+1]>>16;Un(_,E,0,q+W,x=Rt(x[b+1]),G),Un(_,E,1,q+U,x,G),Un(_,E,2,q-U,x,G),Un(_,E,3,q-W,x,G)}function Df(x,b,_,E,q){rn(x,b,_,E),q&&rn(x,b+16,_,E+4)}function Ou(x,b,_,E){Kn(x,b+0,_,E,1),Kn(x,b+32,_,E+128,1)}function If(x,b,_,E){var q;for(x=x[b+0]+4,q=0;4>q;++q)for(b=0;4>b;++b)pa(_,E,b,q,x)}function Tu(x,b,_,E){x[b+0]&&zs(x,b+0,_,E),x[b+16]&&zs(x,b+16,_,E+4),x[b+32]&&zs(x,b+32,_,E+128),x[b+48]&&zs(x,b+48,_,E+128+4)}function Rf(x,b,_,E){var q,U=i(16);for(q=0;4>q;++q){var W=x[b+0+q]+x[b+12+q],G=x[b+4+q]+x[b+8+q],X=x[b+4+q]-x[b+8+q],ee=x[b+0+q]-x[b+12+q];U[0+q]=W+G,U[8+q]=W-G,U[4+q]=ee+X,U[12+q]=ee-X}for(q=0;4>q;++q)W=(x=U[0+4*q]+3)+U[3+4*q],G=U[1+4*q]+U[2+4*q],X=U[1+4*q]-U[2+4*q],ee=x-U[3+4*q],_[E+0]=W+G>>3,_[E+16]=ee+X>>3,_[E+32]=W-G>>3,_[E+48]=ee-X>>3,E+=64}function Gc(x,b,_){var E,q=b-32,U=ba,W=255-x[q-1];for(E=0;E<_;++E){var G,X=U,ee=W+x[b-1];for(G=0;G<_;++G)x[b+G]=X[ee+x[q+G]];b+=32}}function Ff(x,b){Gc(x,b,4)}function $f(x,b){Gc(x,b,8)}function qf(x,b){Gc(x,b,16)}function Wn(x,b){var _;for(_=0;16>_;++_)a(x,b+32*_,x,b-32,16)}function wl(x,b){var _;for(_=16;0<_;--_)n(x,b,x[b-1],16),b+=32}function Nl(x,b,_){var E;for(E=0;16>E;++E)n(b,_+32*E,x,16)}function Lu(x,b){var _,E=16;for(_=0;16>_;++_)E+=x[b-1+32*_]+x[b+_-32];Nl(E>>5,x,b)}function Ss(x,b){var _,E=8;for(_=0;16>_;++_)E+=x[b-1+32*_];Nl(E>>4,x,b)}function Bf(x,b){var _,E=8;for(_=0;16>_;++_)E+=x[b+_-32];Nl(E>>4,x,b)}function Mu(x,b){Nl(128,x,b)}function mt(x,b,_){return x+2*b+_+2>>2}function zf(x,b){var _,E=b-32;for(E=new Uint8Array([mt(x[E-1],x[E+0],x[E+1]),mt(x[E+0],x[E+1],x[E+2]),mt(x[E+1],x[E+2],x[E+3]),mt(x[E+2],x[E+3],x[E+4])]),_=0;4>_;++_)a(x,b+32*_,E,0,E.length)}function Uf(x,b){var _=x[b-1],E=x[b-1+32],q=x[b-1+64],U=x[b-1+96];Ce(x,b+0,16843009*mt(x[b-1-32],_,E)),Ce(x,b+32,16843009*mt(_,E,q)),Ce(x,b+64,16843009*mt(E,q,U)),Ce(x,b+96,16843009*mt(q,U,U))}function Sn(x,b){var _,E=4;for(_=0;4>_;++_)E+=x[b+_-32]+x[b-1+32*_];for(E>>=3,_=0;4>_;++_)n(x,b+32*_,E,4)}function Du(x,b){var _=x[b-1+0],E=x[b-1+32],q=x[b-1+64],U=x[b-1-32],W=x[b+0-32],G=x[b+1-32],X=x[b+2-32],ee=x[b+3-32];x[b+0+96]=mt(E,q,x[b-1+96]),x[b+1+96]=x[b+0+64]=mt(_,E,q),x[b+2+96]=x[b+1+64]=x[b+0+32]=mt(U,_,E),x[b+3+96]=x[b+2+64]=x[b+1+32]=x[b+0+0]=mt(W,U,_),x[b+3+64]=x[b+2+32]=x[b+1+0]=mt(G,W,U),x[b+3+32]=x[b+2+0]=mt(X,G,W),x[b+3+0]=mt(ee,X,G)}function Iu(x,b){var _=x[b+1-32],E=x[b+2-32],q=x[b+3-32],U=x[b+4-32],W=x[b+5-32],G=x[b+6-32],X=x[b+7-32];x[b+0+0]=mt(x[b+0-32],_,E),x[b+1+0]=x[b+0+32]=mt(_,E,q),x[b+2+0]=x[b+1+32]=x[b+0+64]=mt(E,q,U),x[b+3+0]=x[b+2+32]=x[b+1+64]=x[b+0+96]=mt(q,U,W),x[b+3+32]=x[b+2+64]=x[b+1+96]=mt(U,W,G),x[b+3+64]=x[b+2+96]=mt(W,G,X),x[b+3+96]=mt(G,X,X)}function _l(x,b){var _=x[b-1+0],E=x[b-1+32],q=x[b-1+64],U=x[b-1-32],W=x[b+0-32],G=x[b+1-32],X=x[b+2-32],ee=x[b+3-32];x[b+0+0]=x[b+1+64]=U+W+1>>1,x[b+1+0]=x[b+2+64]=W+G+1>>1,x[b+2+0]=x[b+3+64]=G+X+1>>1,x[b+3+0]=X+ee+1>>1,x[b+0+96]=mt(q,E,_),x[b+0+64]=mt(E,_,U),x[b+0+32]=x[b+1+96]=mt(_,U,W),x[b+1+32]=x[b+2+96]=mt(U,W,G),x[b+2+32]=x[b+3+96]=mt(W,G,X),x[b+3+32]=mt(G,X,ee)}function Kc(x,b){var _=x[b+0-32],E=x[b+1-32],q=x[b+2-32],U=x[b+3-32],W=x[b+4-32],G=x[b+5-32],X=x[b+6-32],ee=x[b+7-32];x[b+0+0]=_+E+1>>1,x[b+1+0]=x[b+0+64]=E+q+1>>1,x[b+2+0]=x[b+1+64]=q+U+1>>1,x[b+3+0]=x[b+2+64]=U+W+1>>1,x[b+0+32]=mt(_,E,q),x[b+1+32]=x[b+0+96]=mt(E,q,U),x[b+2+32]=x[b+1+96]=mt(q,U,W),x[b+3+32]=x[b+2+96]=mt(U,W,G),x[b+3+64]=mt(W,G,X),x[b+3+96]=mt(G,X,ee)}function Wf(x,b){var _=x[b-1+0],E=x[b-1+32],q=x[b-1+64],U=x[b-1+96];x[b+0+0]=_+E+1>>1,x[b+2+0]=x[b+0+32]=E+q+1>>1,x[b+2+32]=x[b+0+64]=q+U+1>>1,x[b+1+0]=mt(_,E,q),x[b+3+0]=x[b+1+32]=mt(E,q,U),x[b+3+32]=x[b+1+64]=mt(q,U,U),x[b+3+64]=x[b+2+64]=x[b+0+96]=x[b+1+96]=x[b+2+96]=x[b+3+96]=U}function Vf(x,b){var _=x[b-1+0],E=x[b-1+32],q=x[b-1+64],U=x[b-1+96],W=x[b-1-32],G=x[b+0-32],X=x[b+1-32],ee=x[b+2-32];x[b+0+0]=x[b+2+32]=_+W+1>>1,x[b+0+32]=x[b+2+64]=E+_+1>>1,x[b+0+64]=x[b+2+96]=q+E+1>>1,x[b+0+96]=U+q+1>>1,x[b+3+0]=mt(G,X,ee),x[b+2+0]=mt(W,G,X),x[b+1+0]=x[b+3+32]=mt(_,W,G),x[b+1+32]=x[b+3+64]=mt(E,_,W),x[b+1+64]=x[b+3+96]=mt(q,E,_),x[b+1+96]=mt(U,q,E)}function Hf(x,b){var _;for(_=0;8>_;++_)a(x,b+32*_,x,b-32,8)}function Yc(x,b){var _;for(_=0;8>_;++_)n(x,b,x[b-1],8),b+=32}function wo(x,b,_){var E;for(E=0;8>E;++E)n(b,_+32*E,x,8)}function _i(x,b){var _,E=8;for(_=0;8>_;++_)E+=x[b+_-32]+x[b-1+32*_];wo(E>>4,x,b)}function Gf(x,b){var _,E=4;for(_=0;8>_;++_)E+=x[b+_-32];wo(E>>3,x,b)}function No(x,b){var _,E=4;for(_=0;8>_;++_)E+=x[b-1+32*_];wo(E>>3,x,b)}function Jc(x,b){wo(128,x,b)}function Sl(x,b,_){var E=x[b-_],q=x[b+0],U=3*(q-E)+Zf[1020+x[b-2*_]-x[b+_]],W=Yu[112+(U+4>>3)];x[b-_]=ba[255+E+Yu[112+(U+3>>3)]],x[b+0]=ba[255+q-W]}function Ru(x,b,_,E){var q=x[b+0],U=x[b+_];return $a[255+x[b-2*_]-x[b-_]]>E||$a[255+U-q]>E}function Fu(x,b,_,E){return 4*$a[255+x[b-_]-x[b+0]]+$a[255+x[b-2*_]-x[b+_]]<=E}function $u(x,b,_,E,q){var U=x[b-3*_],W=x[b-2*_],G=x[b-_],X=x[b+0],ee=x[b+_],ue=x[b+2*_],Se=x[b+3*_];return 4*$a[255+G-X]+$a[255+W-ee]>E?0:$a[255+x[b-4*_]-U]<=q&&$a[255+U-W]<=q&&$a[255+W-G]<=q&&$a[255+Se-ue]<=q&&$a[255+ue-ee]<=q&&$a[255+ee-X]<=q}function qu(x,b,_,E){var q=2*E+1;for(E=0;16>E;++E)Fu(x,b+E,_,q)&&Sl(x,b+E,_)}function Pn(x,b,_,E){var q=2*E+1;for(E=0;16>E;++E)Fu(x,b+E*_,1,q)&&Sl(x,b+E*_,1)}function Vn(x,b,_,E){var q;for(q=3;0<q;--q)qu(x,b+=4*_,_,E)}function Kf(x,b,_,E){var q;for(q=3;0<q;--q)Pn(x,b+=4,_,E)}function Si(x,b,_,E,q,U,W,G){for(U=2*U+1;0<q--;){if($u(x,b,_,U,W))if(Ru(x,b,_,G))Sl(x,b,_);else{var X=x,ee=b,ue=_,Se=X[ee-2*ue],Pe=X[ee-ue],pe=X[ee+0],Ie=X[ee+ue],Ee=X[ee+2*ue],he=27*(Me=Zf[1020+3*(pe-Pe)+Zf[1020+Se-Ie]])+63>>7,me=18*Me+63>>7,Me=9*Me+63>>7;X[ee-3*ue]=ba[255+X[ee-3*ue]+Me],X[ee-2*ue]=ba[255+Se+me],X[ee-ue]=ba[255+Pe+he],X[ee+0]=ba[255+pe-he],X[ee+ue]=ba[255+Ie-me],X[ee+2*ue]=ba[255+Ee-Me]}b+=E}}function sn(x,b,_,E,q,U,W,G){for(U=2*U+1;0<q--;){if($u(x,b,_,U,W))if(Ru(x,b,_,G))Sl(x,b,_);else{var X=x,ee=b,ue=_,Se=X[ee-ue],Pe=X[ee+0],pe=X[ee+ue],Ie=Yu[112+((Ee=3*(Pe-Se))+4>>3)],Ee=Yu[112+(Ee+3>>3)],he=Ie+1>>1;X[ee-2*ue]=ba[255+X[ee-2*ue]+he],X[ee-ue]=ba[255+Se+Ee],X[ee+0]=ba[255+Pe-Ie],X[ee+ue]=ba[255+pe-he]}b+=E}}function Xc(x,b,_,E,q,U){Si(x,b,_,1,16,E,q,U)}function _o(x,b,_,E,q,U){Si(x,b,1,_,16,E,q,U)}function Yf(x,b,_,E,q,U){var W;for(W=3;0<W;--W)sn(x,b+=4*_,_,1,16,E,q,U)}function Pl(x,b,_,E,q,U){var W;for(W=3;0<W;--W)sn(x,b+=4,1,_,16,E,q,U)}function Jf(x,b,_,E,q,U,W,G){Si(x,b,q,1,8,U,W,G),Si(_,E,q,1,8,U,W,G)}function Qc(x,b,_,E,q,U,W,G){Si(x,b,1,q,8,U,W,G),Si(_,E,1,q,8,U,W,G)}function Zc(x,b,_,E,q,U,W,G){sn(x,b+4*q,q,1,8,U,W,G),sn(_,E+4*q,q,1,8,U,W,G)}function Bu(x,b,_,E,q,U,W,G){sn(x,b+4,1,q,8,U,W,G),sn(_,E+4,1,q,8,U,W,G)}function Cl(){this.ba=new Xe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Mt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ed(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function td(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zu(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new P}function Xf(){this.xb=this.a=0,this.l=new tn,this.ca=new Xe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zu,this.ab=0,this.gc=o(4,td),this.Oc=0}function Al(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function So(x,b,_,E,q,U,W){for(x=x==null?0:x[b+0],b=0;b<W;++b)q[U+b]=x+_[E+b]&255,x=q[U+b]}function rd(x,b,_,E,q,U,W){var G;if(x==null)So(null,null,_,E,q,U,W);else for(G=0;G<W;++G)q[U+G]=x[b+G]+_[E+G]&255}function Pi(x,b,_,E,q,U,W){if(x==null)So(null,null,_,E,q,U,W);else{var G,X=x[b+0],ee=X,ue=X;for(G=0;G<W;++G)ee=ue+(X=x[b+G])-ee,ue=_[E+G]+(-256&ee?0>ee?0:255:ee)&255,ee=X,q[U+G]=ue}}function sd(x,b,_,E){var q=b.width,U=b.o;if(t(x!=null&&b!=null),0>_||0>=E||_+E>U)return null;if(!x.Cc){if(x.ga==null){var W;if(x.ga=new Al,(W=x.ga==null)||(W=b.width*b.o,t(x.Gb.length==0),x.Gb=i(W),x.Uc=0,x.Gb==null?W=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,W=1),W=!W),!W){W=x.ga;var G=x.Fa,X=x.P,ee=x.qc,ue=x.mb,Se=x.nb,Pe=X+1,pe=ee-1,Ie=W.l;if(t(G!=null&&ue!=null&&b!=null),Ti[0]=null,Ti[1]=So,Ti[2]=rd,Ti[3]=Pi,W.ca=ue,W.tb=Se,W.c=b.width,W.i=b.height,t(0<W.c&&0<W.i),1>=ee)b=0;else if(W.$a=G[X+0]>>0&3,W.Z=G[X+0]>>2&3,W.Lc=G[X+0]>>4&3,X=G[X+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||X)b=0;else if(Ie.put=ha,Ie.ac=$r,Ie.bc=ma,Ie.ma=W,Ie.width=b.width,Ie.height=b.height,Ie.Da=b.Da,Ie.v=b.v,Ie.va=b.va,Ie.j=b.j,Ie.o=b.o,W.$a)e:{t(W.$a==1),b=$s();t:for(;;){if(b==null){b=0;break e}if(t(W!=null),W.mc=b,b.c=W.c,b.i=W.i,b.l=W.l,b.l.ma=W,b.l.width=W.c,b.l.height=W.i,b.a=0,z(b.m,G,Pe,pe),!xa(W.c,W.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&La(b.s)?(W.ic=1,G=b.c*b.i,b.Ta=null,b.Ua=0,b.V=i(G),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(W.ic=0,b=Nn(b,W.c)),!b))break t;b=1;break e}W.mc=null,b=0}else b=pe>=W.c*W.i;W=!b}if(W)return null;x.ga.Lc!=1?x.Ga=0:E=U-_}t(x.ga!=null),t(_+E<=U);e:{if(b=(G=x.ga).c,U=G.l.o,G.$a==0){if(Pe=x.rc,pe=x.Vc,Ie=x.Fa,X=x.P+1+_*b,ee=x.mb,ue=x.nb+_*b,t(X<=x.P+x.qc),G.Z!=0)for(t(Ti[G.Z]!=null),W=0;W<E;++W)Ti[G.Z](Pe,pe,Ie,X,ee,ue,b),Pe=ee,pe=ue,ue+=b,X+=b;else for(W=0;W<E;++W)a(ee,ue,Ie,X,b),Pe=ee,pe=ue,ue+=b,X+=b;x.rc=Pe,x.Vc=pe}else{if(t(G.mc!=null),b=_+E,t((W=G.mc)!=null),t(b<=W.i),W.C>=b)b=1;else if(G.ic||je(),G.ic){G=W.V,Pe=W.Ba,pe=W.c;var Ee=W.i,he=(Ie=1,X=W.$/pe,ee=W.$%pe,ue=W.m,Se=W.s,W.$),me=pe*Ee,Me=pe*b,$e=Se.wc,De=he<Me?mr(Se,ee,X):null;t(he<=me),t(b<=Ee),t(La(Se));t:for(;;){for(;!ue.h&&he<Me;){if(ee&$e||(De=mr(Se,ee,X)),t(De!=null),le(ue),256>(Ee=Hr(De.G[0],De.H[0],ue)))G[Pe+he]=Ee,++he,++ee>=pe&&(ee=0,++X<=b&&!(X%16)&&Qs(W,X));else{if(!(280>Ee)){Ie=0;break t}Ee=Fs(Ee-256,ue);var Je,He=Hr(De.G[4],De.H[4],ue);if(le(ue),!(he>=(He=Js(pe,He=Fs(He,ue)))&&me-he>=Ee)){Ie=0;break t}for(Je=0;Je<Ee;++Je)G[Pe+he+Je]=G[Pe+he+Je-He];for(he+=Ee,ee+=Ee;ee>=pe;)ee-=pe,++X<=b&&!(X%16)&&Qs(W,X);he<Me&&ee&$e&&(De=mr(Se,ee,X))}t(ue.h==re(ue))}Qs(W,X>b?b:X);break t}!Ie||ue.h&&he<me?(Ie=0,W.a=ue.h?5:3):W.$=he,b=Ie}else b=Zs(W,W.V,W.Ba,W.c,W.i,b,ce);if(!b){E=0;break e}}_+E>=U&&(x.Cc=1),E=1}if(!E)return null;if(x.Cc&&((E=x.ga)!=null&&(E.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+_*q}function w(x,b,_,E,q,U){for(;0<q--;){var W,G=x,X=b+(_?1:0),ee=x,ue=b+(_?0:3);for(W=0;W<E;++W){var Se=ee[ue+4*W];Se!=255&&(Se*=32897,G[X+4*W+0]=G[X+4*W+0]*Se>>23,G[X+4*W+1]=G[X+4*W+1]*Se>>23,G[X+4*W+2]=G[X+4*W+2]*Se>>23)}b+=U}}function B(x,b,_,E,q){for(;0<E--;){var U;for(U=0;U<_;++U){var W=x[b+2*U+0],G=15&(ee=x[b+2*U+1]),X=4369*G,ee=(240&ee|ee>>4)*X>>16;x[b+2*U+0]=(240&W|W>>4)*X>>16&240|(15&W|W<<4)*X>>16>>4&15,x[b+2*U+1]=240&ee|G}b+=q}}function ae(x,b,_,E,q,U,W,G){var X,ee,ue=255;for(ee=0;ee<q;++ee){for(X=0;X<E;++X){var Se=x[b+X];U[W+4*X]=Se,ue&=Se}b+=_,W+=G}return ue!=255}function de(x,b,_,E,q){var U;for(U=0;U<q;++U)_[E+U]=x[b+U]>>8}function je(){Fa=w,ir=B,or=ae,Or=de}function Oe(x,b,_){A[x]=function(E,q,U,W,G,X,ee,ue,Se,Pe,pe,Ie,Ee,he,me,Me,$e){var De,Je=$e-1>>1,He=G[X+0]|ee[ue+0]<<16,it=Se[Pe+0]|pe[Ie+0]<<16;t(E!=null);var Ge=3*He+it+131074>>2;for(b(E[q+0],255&Ge,Ge>>16,Ee,he),U!=null&&(Ge=3*it+He+131074>>2,b(U[W+0],255&Ge,Ge>>16,me,Me)),De=1;De<=Je;++De){var qt=G[X+De]|ee[ue+De]<<16,Ht=Se[Pe+De]|pe[Ie+De]<<16,It=He+qt+it+Ht+524296,kt=It+2*(qt+it)>>3;Ge=kt+He>>1,He=(It=It+2*(He+Ht)>>3)+qt>>1,b(E[q+2*De-1],255&Ge,Ge>>16,Ee,he+(2*De-1)*_),b(E[q+2*De-0],255&He,He>>16,Ee,he+(2*De-0)*_),U!=null&&(Ge=It+it>>1,He=kt+Ht>>1,b(U[W+2*De-1],255&Ge,Ge>>16,me,Me+(2*De-1)*_),b(U[W+2*De+0],255&He,He>>16,me,Me+(2*De+0)*_)),He=qt,it=Ht}1&$e||(Ge=3*He+it+131074>>2,b(E[q+$e-1],255&Ge,Ge>>16,Ee,he+($e-1)*_),U!=null&&(Ge=3*it+He+131074>>2,b(U[W+$e-1],255&Ge,Ge>>16,me,Me+($e-1)*_)))}}function Be(){qa[Ju]=UP,qa[Xu]=Ay,qa[Ny]=WP,qa[Qu]=ky,qa[Zu]=Ey,qa[ex]=Oy,qa[_y]=VP,qa[tx]=Ay,qa[rx]=ky,qa[eh]=Ey,qa[sx]=Oy}function Ye(x){return x&-16384?0>x?0:255:x>>HP}function at(x,b){return Ye((19077*x>>8)+(26149*b>>8)-14234)}function pt(x,b,_){return Ye((19077*x>>8)-(6419*b>>8)-(13320*_>>8)+8708)}function ft(x,b){return Ye((19077*x>>8)+(33050*b>>8)-17685)}function Tt(x,b,_,E,q){E[q+0]=at(x,_),E[q+1]=pt(x,b,_),E[q+2]=ft(x,b)}function wr(x,b,_,E,q){E[q+0]=ft(x,b),E[q+1]=pt(x,b,_),E[q+2]=at(x,_)}function _r(x,b,_,E,q){var U=pt(x,b,_);b=U<<3&224|ft(x,b)>>3,E[q+0]=248&at(x,_)|U>>5,E[q+1]=b}function qr(x,b,_,E,q){var U=240&ft(x,b)|15;E[q+0]=240&at(x,_)|pt(x,b,_)>>4,E[q+1]=U}function Ps(x,b,_,E,q){E[q+0]=255,Tt(x,b,_,E,q+1)}function Jr(x,b,_,E,q){wr(x,b,_,E,q),E[q+3]=255}function an(x,b,_,E,q){Tt(x,b,_,E,q),E[q+3]=255}function ga(x,b){return 0>x?0:x>b?b:x}function Cn(x,b,_){A[x]=function(E,q,U,W,G,X,ee,ue,Se){for(var Pe=ue+(-2&Se)*_;ue!=Pe;)b(E[q+0],U[W+0],G[X+0],ee,ue),b(E[q+1],U[W+0],G[X+0],ee,ue+_),q+=2,++W,++X,ue+=2*_;1&Se&&b(E[q+0],U[W+0],G[X+0],ee,ue)}}function Uu(x,b,_){return _==0?x==0?b==0?6:5:b==0?4:0:_}function ad(x,b,_,E,q){switch(x>>>30){case 3:Kn(b,_,E,q,0);break;case 2:Er(b,_,E,q);break;case 1:zs(b,_,E,q)}}function nd(x,b){var _,E,q=b.M,U=b.Nb,W=x.oc,G=x.pc+40,X=x.oc,ee=x.pc+584,ue=x.oc,Se=x.pc+600;for(_=0;16>_;++_)W[G+32*_-1]=129;for(_=0;8>_;++_)X[ee+32*_-1]=129,ue[Se+32*_-1]=129;for(0<q?W[G-1-32]=X[ee-1-32]=ue[Se-1-32]=129:(n(W,G-32-1,127,21),n(X,ee-32-1,127,9),n(ue,Se-32-1,127,9)),E=0;E<x.za;++E){var Pe=b.ya[b.aa+E];if(0<E){for(_=-1;16>_;++_)a(W,G+32*_-4,W,G+32*_+12,4);for(_=-1;8>_;++_)a(X,ee+32*_-4,X,ee+32*_+4,4),a(ue,Se+32*_-4,ue,Se+32*_+4,4)}var pe=x.Gd,Ie=x.Hd+E,Ee=Pe.ad,he=Pe.Hc;if(0<q&&(a(W,G-32,pe[Ie].y,0,16),a(X,ee-32,pe[Ie].f,0,8),a(ue,Se-32,pe[Ie].ea,0,8)),Pe.Za){var me=W,Me=G-32+16;for(0<q&&(E>=x.za-1?n(me,Me,pe[Ie].y[15],4):a(me,Me,pe[Ie+1].y,0,4)),_=0;4>_;_++)me[Me+128+_]=me[Me+256+_]=me[Me+384+_]=me[Me+0+_];for(_=0;16>_;++_,he<<=2)me=W,Me=G+Ly[_],nn[Pe.Ob[_]](me,Me),ad(he,Ee,16*+_,me,Me)}else if(me=Uu(E,q,Pe.Ob[0]),Oi[me](W,G),he!=0)for(_=0;16>_;++_,he<<=2)ad(he,Ee,16*+_,W,G+Ly[_]);for(_=Pe.Gc,me=Uu(E,q,Pe.Dd),Jn[me](X,ee),Jn[me](ue,Se),he=Ee,me=X,Me=ee,255&(Pe=_>>0)&&(170&Pe?dd(he,256,me,Me):Ia(he,256,me,Me)),Pe=ue,he=Se,255&(_>>=8)&&(170&_?dd(Ee,320,Pe,he):Ia(Ee,320,Pe,he)),q<x.Ub-1&&(a(pe[Ie].y,0,W,G+480,16),a(pe[Ie].f,0,X,ee+224,8),a(pe[Ie].ea,0,ue,Se+224,8)),_=8*U*x.B,pe=x.sa,Ie=x.ta+16*E+16*U*x.R,Ee=x.qa,Pe=x.ra+8*E+_,he=x.Ha,me=x.Ia+8*E+_,_=0;16>_;++_)a(pe,Ie+_*x.R,W,G+32*_,16);for(_=0;8>_;++_)a(Ee,Pe+_*x.B,X,ee+32*_,8),a(he,me+_*x.B,ue,Se+32*_,8)}}function kl(x,b,_,E,q,U,W,G,X){var ee=[0],ue=[0],Se=0,Pe=X!=null?X.kd:0,pe=X??new ed;if(x==null||12>_)return 7;pe.data=x,pe.w=b,pe.ha=_,b=[b],_=[_],pe.gb=[pe.gb];e:{var Ie=b,Ee=_,he=pe.gb;if(t(x!=null),t(Ee!=null),t(he!=null),he[0]=0,12<=Ee[0]&&!s(x,Ie[0],"RIFF")){if(s(x,Ie[0]+8,"WEBP")){he=3;break e}var me=Le(x,Ie[0]+4);if(12>me||4294967286<me){he=3;break e}if(Pe&&me>Ee[0]-8){he=7;break e}he[0]=me,Ie[0]+=12,Ee[0]-=12}he=0}if(he!=0)return he;for(me=0<pe.gb[0],_=_[0];;){e:{var Me=x;Ee=b,he=_;var $e=ee,De=ue,Je=Ie=[0];if((Ge=Se=[Se])[0]=0,8>he[0])he=7;else{if(!s(Me,Ee[0],"VP8X")){if(Le(Me,Ee[0]+4)!=10){he=3;break e}if(18>he[0]){he=7;break e}var He=Le(Me,Ee[0]+8),it=1+fe(Me,Ee[0]+12);if(2147483648<=it*(Me=1+fe(Me,Ee[0]+15))){he=3;break e}Je!=null&&(Je[0]=He),$e!=null&&($e[0]=it),De!=null&&(De[0]=Me),Ee[0]+=18,he[0]-=18,Ge[0]=1}he=0}}if(Se=Se[0],Ie=Ie[0],he!=0)return he;if(Ee=!!(2&Ie),!me&&Se)return 3;if(U!=null&&(U[0]=!!(16&Ie)),W!=null&&(W[0]=Ee),G!=null&&(G[0]=0),W=ee[0],Ie=ue[0],Se&&Ee&&X==null){he=0;break}if(4>_){he=7;break}if(me&&Se||!me&&!Se&&!s(x,b[0],"ALPH")){_=[_],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{He=x,he=b,me=_;var Ge=pe.gb;$e=pe.na,De=pe.P,Je=pe.Sa,it=22,t(He!=null),t(me!=null),Me=he[0];var qt=me[0];for(t($e!=null),t(Je!=null),$e[0]=null,De[0]=null,Je[0]=0;;){if(he[0]=Me,me[0]=qt,8>qt){he=7;break e}var Ht=Le(He,Me+4);if(4294967286<Ht){he=3;break e}var It=8+Ht+1&-2;if(it+=It,0<Ge&&it>Ge){he=3;break e}if(!s(He,Me,"VP8 ")||!s(He,Me,"VP8L")){he=0;break e}if(qt[0]<It){he=7;break e}s(He,Me,"ALPH")||($e[0]=He,De[0]=Me+8,Je[0]=Ht),Me+=It,qt-=It}}if(_=_[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],he!=0)break}_=[_],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(Ge=x,he=b,me=_,$e=pe.gb[0],De=pe.Ja,Je=pe.xa,He=he[0],Me=!s(Ge,He,"VP8 "),it=!s(Ge,He,"VP8L"),t(Ge!=null),t(me!=null),t(De!=null),t(Je!=null),8>me[0])he=7;else{if(Me||it){if(Ge=Le(Ge,He+4),12<=$e&&Ge>$e-12){he=3;break e}if(Pe&&Ge>me[0]-8){he=7;break e}De[0]=Ge,he[0]+=8,me[0]-=8,Je[0]=it}else Je[0]=5<=me[0]&&Ge[He+0]==47&&!(Ge[He+4]>>5),De[0]=me[0];he=0}if(_=_[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],b=b[0],he!=0)break;if(4294967286<pe.Ja)return 3;if(G==null||Ee||(G[0]=pe.xa?2:1),W=[W],Ie=[Ie],pe.xa){if(5>_){he=7;break}G=W,Pe=Ie,Ee=U,x==null||5>_?x=0:5<=_&&x[b+0]==47&&!(x[b+4]>>5)?(me=[0],Ge=[0],$e=[0],z(De=new R,x,b,_),nt(De,me,Ge,$e)?(G!=null&&(G[0]=me[0]),Pe!=null&&(Pe[0]=Ge[0]),Ee!=null&&(Ee[0]=$e[0]),x=1):x=0):x=0}else{if(10>_){he=7;break}G=Ie,x==null||10>_||!zn(x,b+3,_-3)?x=0:(Pe=x[b+0]|x[b+1]<<8|x[b+2]<<16,Ee=16383&(x[b+7]<<8|x[b+6]),x=16383&(x[b+9]<<8|x[b+8]),1&Pe||3<(Pe>>1&7)||!(Pe>>4&1)||Pe>>5>=pe.Ja||!Ee||!x?x=0:(W&&(W[0]=Ee),G&&(G[0]=x),x=1))}if(!x||(W=W[0],Ie=Ie[0],Se&&(ee[0]!=W||ue[0]!=Ie)))return 3;X!=null&&(X[0]=pe,X.offset=b-X.w,t(4294967286>b-X.w),t(X.offset==X.ha-_));break}return he==0||he==7&&Se&&X==null?(U!=null&&(U[0]|=pe.na!=null&&0<pe.na.length),E!=null&&(E[0]=W),q!=null&&(q[0]=Ie),0):he}function id(x,b,_){var E=b.width,q=b.height,U=0,W=0,G=E,X=q;if(b.Da=x!=null&&0<x.Da,b.Da&&(G=x.cd,X=x.bd,U=x.v,W=x.j,11>_||(U&=-2,W&=-2),0>U||0>W||0>=G||0>=X||U+G>E||W+X>q))return 0;if(b.v=U,b.j=W,b.va=U+G,b.o=W+X,b.U=G,b.T=X,b.da=x!=null&&0<x.da,b.da){if(!ve(G,X,_=[x.ib],U=[x.hb]))return 0;b.ib=_[0],b.hb=U[0]}return b.ob=x!=null&&x.ob,b.Kb=x==null||!x.Sd,b.da&&(b.ob=b.ib<3*E/4&&b.hb<3*q/4,b.Kb=0),1}function od(x){if(x==null)return 2;if(11>x.S){var b=x.f.RGBA;b.fb+=(x.height-1)*b.A,b.A=-b.A}else b=x.f.kb,x=x.height,b.O+=(x-1)*b.fa,b.fa=-b.fa,b.N+=(x-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(x-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(x-1)*b.lb,b.lb=-b.lb);return 0}function El(x,b,_,E){if(E==null||0>=x||0>=b)return 2;if(_!=null){if(_.Da){var q=_.cd,U=_.bd,W=-2&_.v,G=-2&_.j;if(0>W||0>G||0>=q||0>=U||W+q>x||G+U>b)return 2;x=q,b=U}if(_.da){if(!ve(x,b,q=[_.ib],U=[_.hb]))return 2;x=q[0],b=U[0]}}E.width=x,E.height=b;e:{var X=E.width,ee=E.height;if(x=E.S,0>=X||0>=ee||!(x>=Ju&&13>x))x=2;else{if(0>=E.Rd&&E.sd==null){W=U=q=b=0;var ue=(G=X*My[x])*ee;if(11>x||(U=(ee+1)/2*(b=(X+1)/2),x==12&&(W=(q=X)*ee)),(ee=i(ue+2*U+W))==null){x=1;break e}E.sd=ee,11>x?((X=E.f.RGBA).eb=ee,X.fb=0,X.A=G,X.size=ue):((X=E.f.kb).y=ee,X.O=0,X.fa=G,X.Fd=ue,X.f=ee,X.N=0+ue,X.Ab=b,X.Cd=U,X.ea=ee,X.W=0+ue+U,X.Db=b,X.Ed=U,x==12&&(X.F=ee,X.J=0+ue+2*U),X.Tc=W,X.lb=q)}if(b=1,q=E.S,U=E.width,W=E.height,q>=Ju&&13>q)if(11>q)x=E.f.RGBA,b&=(G=Math.abs(x.A))*(W-1)+U<=x.size,b&=G>=U*My[q],b&=x.eb!=null;else{x=E.f.kb,G=(U+1)/2,ue=(W+1)/2,X=Math.abs(x.fa),ee=Math.abs(x.Ab);var Se=Math.abs(x.Db),Pe=Math.abs(x.lb),pe=Pe*(W-1)+U;b&=X*(W-1)+U<=x.Fd,b&=ee*(ue-1)+G<=x.Cd,b=(b&=Se*(ue-1)+G<=x.Ed)&X>=U&ee>=G&Se>=G,b&=x.y!=null,b&=x.f!=null,b&=x.ea!=null,q==12&&(b&=Pe>=U,b&=pe<=x.Tc,b&=x.F!=null)}else b=0;x=b?0:2}}return x!=0||_!=null&&_.fd&&(x=od(E)),x}var gs=64,Ol=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Tl=24,Ll=32,ld=8,ta=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ne("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(x){return x},A.Predictor2=function(x,b,_){return b[_+0]},A.Predictor3=function(x,b,_){return b[_+1]},A.Predictor4=function(x,b,_){return b[_-1]},A.Predictor5=function(x,b,_){return Fe(Fe(x,b[_+1]),b[_+0])},A.Predictor6=function(x,b,_){return Fe(x,b[_-1])},A.Predictor7=function(x,b,_){return Fe(x,b[_+0])},A.Predictor8=function(x,b,_){return Fe(b[_-1],b[_+0])},A.Predictor9=function(x,b,_){return Fe(b[_+0],b[_+1])},A.Predictor10=function(x,b,_){return Fe(Fe(x,b[_-1]),Fe(b[_+0],b[_+1]))},A.Predictor11=function(x,b,_){var E=b[_+0];return 0>=Z(E>>24&255,x>>24&255,(b=b[_-1])>>24&255)+Z(E>>16&255,x>>16&255,b>>16&255)+Z(E>>8&255,x>>8&255,b>>8&255)+Z(255&E,255&x,255&b)?E:x},A.Predictor12=function(x,b,_){var E=b[_+0];return(Ve((x>>24&255)+(E>>24&255)-((b=b[_-1])>>24&255))<<24|Ve((x>>16&255)+(E>>16&255)-(b>>16&255))<<16|Ve((x>>8&255)+(E>>8&255)-(b>>8&255))<<8|Ve((255&x)+(255&E)-(255&b)))>>>0},A.Predictor13=function(x,b,_){var E=b[_-1];return(Ne((x=Fe(x,b[_+0]))>>24&255,E>>24&255)<<24|Ne(x>>16&255,E>>16&255)<<16|Ne(x>>8&255,E>>8&255)<<8|Ne(x>>0&255,E>>0&255))>>>0};var Qf=A.PredictorAdd0;A.PredictorAdd1=xe,ne("Predictor2","PredictorAdd2"),ne("Predictor3","PredictorAdd3"),ne("Predictor4","PredictorAdd4"),ne("Predictor5","PredictorAdd5"),ne("Predictor6","PredictorAdd6"),ne("Predictor7","PredictorAdd7"),ne("Predictor8","PredictorAdd8"),ne("Predictor9","PredictorAdd9"),ne("Predictor10","PredictorAdd10"),ne("Predictor11","PredictorAdd11"),ne("Predictor12","PredictorAdd12"),ne("Predictor13","PredictorAdd13");var cd=A.PredictorAdd2;Ue("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),Ue("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var Wu,Da=A.ColorIndexInverseTransform,Ml=A.MapARGB,Vu=A.VP8LColorIndexInverseTransformAlpha,Hu=A.MapAlpha,Ci=A.VP8LPredictorsAdd=[];Ci.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Po,ra,Bs,Ai,Hn,Gn,Dl,Kn,Er,dd,zs,Ia,Il,Gu,ud,Co,Ao,ki,ko,Rl,Eo,Ei,hd,Ra,Fa,ir,or,Or,Gr=i(511),Yn=i(2041),md=i(225),Fl=i(767),Ku=0,Zf=Yn,Yu=md,ba=Fl,$a=Gr,Ju=0,Xu=1,Ny=2,Qu=3,Zu=4,ex=5,_y=6,tx=7,rx=8,eh=9,sx=10,kP=[2,3,7],EP=[3,3,11],Sy=[280,256,256,256,40],OP=[0,1,1,1,0],TP=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],LP=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],MP=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],DP=8,ax=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fd=null,IP=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],RP=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Py=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],FP=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],$P=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],qP=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],BP=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oi=[],nn=[],Jn=[],zP=1,Cy=2,Ti=[],qa=[];Oe("UpsampleRgbLinePair",Tt,3),Oe("UpsampleBgrLinePair",wr,3),Oe("UpsampleRgbaLinePair",an,4),Oe("UpsampleBgraLinePair",Jr,4),Oe("UpsampleArgbLinePair",Ps,4),Oe("UpsampleRgba4444LinePair",qr,2),Oe("UpsampleRgb565LinePair",_r,2);var UP=A.UpsampleRgbLinePair,WP=A.UpsampleBgrLinePair,Ay=A.UpsampleRgbaLinePair,ky=A.UpsampleBgraLinePair,Ey=A.UpsampleArgbLinePair,Oy=A.UpsampleRgba4444LinePair,VP=A.UpsampleRgb565LinePair,th=16,rh=1<<th-1,xd=-227,ix=482,HP=6,Ty=0,GP=i(256),KP=i(256),YP=i(256),JP=i(256),XP=i(ix-xd),QP=i(ix-xd);Cn("YuvToRgbRow",Tt,3),Cn("YuvToBgrRow",wr,3),Cn("YuvToRgbaRow",an,4),Cn("YuvToBgraRow",Jr,4),Cn("YuvToArgbRow",Ps,4),Cn("YuvToRgba4444Row",qr,2),Cn("YuvToRgb565Row",_r,2);var Ly=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sh=[0,2,8],ZP=[8,7,6,4,4,2,2,2,1,1,1,1],eC=1;this.WebPDecodeRGBA=function(x,b,_,E,q){var U=Xu,W=new Cl,G=new Xe;W.ba=G,G.S=U,G.width=[G.width],G.height=[G.height];var X=G.width,ee=G.height,ue=new Ys;if(ue==null||x==null)var Se=2;else t(ue!=null),Se=kl(x,b,_,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(Se!=0?X=0:(X!=null&&(X[0]=ue.width[0]),ee!=null&&(ee[0]=ue.height[0]),X=1),X){G.width=G.width[0],G.height=G.height[0],E!=null&&(E[0]=G.width),q!=null&&(q[0]=G.height);e:{if(E=new tn,(q=new ed).data=x,q.w=b,q.ha=_,q.kd=1,b=[0],t(q!=null),((x=kl(q.data,q.w,q.ha,null,null,null,b,null,q))==0||x==7)&&b[0]&&(x=4),(b=x)==0){if(t(W!=null),E.data=q.data,E.w=q.w+q.offset,E.ha=q.ha-q.offset,E.put=ha,E.ac=$r,E.bc=ma,E.ma=W,q.xa){if((x=$s())==null){W=1;break e}if(function(Pe,pe){var Ie=[0],Ee=[0],he=[0];t:for(;;){if(Pe==null)return 0;if(pe==null)return Pe.a=2,0;if(Pe.l=pe,Pe.a=0,z(Pe.m,pe.data,pe.w,pe.ha),!nt(Pe.m,Ie,Ee,he)){Pe.a=3;break t}if(Pe.xb=Cy,pe.width=Ie[0],pe.height=Ee[0],!xa(Ie[0],Ee[0],1,Pe,null))break t;return 1}return t(Pe.a!=0),0}(x,E)){if(E=(b=El(E.width,E.height,W.Oa,W.ba))==0){t:{E=x;r:for(;;){if(E==null){E=0;break t}if(t(E.s.yc!=null),t(E.s.Ya!=null),t(0<E.s.Wb),t((_=E.l)!=null),t((q=_.ma)!=null),E.xb!=0){if(E.ca=q.ba,E.tb=q.tb,t(E.ca!=null),!id(q.Oa,_,Qu)){E.a=2;break r}if(!Nn(E,_.width)||_.da)break r;if((_.da||St(E.ca.S))&&je(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&je()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!Te(E.s.vb,E.s.Wa.Xa)){E.a=1;break r}E.xb=0}if(!Zs(E,E.V,E.Ba,E.c,E.i,_.o,qn))break r;q.Dc=E.Ma,E=1;break t}t(E.a!=0),E=0}E=!E}E&&(b=x.a)}else b=x.a}else{if((x=new wi)==null){W=1;break e}if(x.Fa=q.na,x.P=q.P,x.qc=q.Sa,jl(x,E)){if((b=El(E.width,E.height,W.Oa,W.ba))==0){if(x.Aa=0,_=W.Oa,t((q=x)!=null),_!=null){if(0<(X=0>(X=_.Md)?0:100<X?255:255*X/100)){for(ee=ue=0;4>ee;++ee)12>(Se=q.pb[ee]).lc&&(Se.ia=X*ZP[0>Se.lc?0:Se.lc]>>3),ue|=Se.ia;ue&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=_.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}_n(x,E)||(b=x.a)}}else b=x.a}b==0&&W.Oa!=null&&W.Oa.fd&&(b=od(W.ba))}W=b}U=W!=0?null:11>U?G.f.RGBA.eb:G.f.kb.y}else U=null;return U};var My=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(A,I){for(var H="",k=0;k<4;k++)H+=String.fromCharCode(A[I++]);return H}function u(A,I){return(A[I+0]<<0|A[I+1]<<8|A[I+2]<<16)>>>0}function h(A,I){return(A[I+0]<<0|A[I+1]<<8|A[I+2]<<16|A[I+3]<<24)>>>0}new c;var f=[0],m=[0],p=[],v=new c,g=e,y=function(A,I){var H={},k=0,P=!1,O=0,$=0;if(H.frames=[],!function(Q,re,te,le){for(var be=0;be<le;be++)if(Q[re+be]!=te.charCodeAt(be))return!0;return!1}(A,I,"RIFF",4)){for(h(A,I+=4),I+=8;I<A.length;){var V=d(A,I),T=h(A,I+=4);I+=4;var F=T+(1&T);switch(V){case"VP8 ":case"VP8L":H.frames[k]===void 0&&(H.frames[k]={}),(Y=H.frames[k]).src_off=P?$:I-8,Y.src_size=O+T+8,k++,P&&(P=!1,O=0,$=0);break;case"VP8X":(Y=H.header={}).feature_flags=A[I];var z=I+4;Y.canvas_width=1+u(A,z),z+=3,Y.canvas_height=1+u(A,z),z+=3;break;case"ALPH":P=!0,O=F+8,$=I-8;break;case"ANIM":(Y=H.header).bgcolor=h(A,I),z=I+4,Y.loop_count=(_e=A)[(R=z)+0]<<0|_e[R+1]<<8,z+=2;break;case"ANMF":var se,Y;(Y=H.frames[k]={}).offset_x=2*u(A,I),I+=3,Y.offset_y=2*u(A,I),I+=3,Y.width=1+u(A,I),I+=3,Y.height=1+u(A,I),I+=3,Y.duration=u(A,I),I+=3,se=A[I++],Y.dispose=1&se,Y.blend=se>>1&1}V!="ANMF"&&(I+=F)}var _e,R;return H}}(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var N=y.header?y.header:null,S=y.frames?y.frames:null;if(N){N.loop_counter=N.loop_count,f=[N.canvas_height],m=[N.canvas_width];for(var C=0;C<S.length&&S[C].blend!=0;C++);}var M=S[0],D=v.WebPDecodeRGBA(g,M.src_off,M.src_size,m,f);M.rgba=D,M.imgwidth=m[0],M.imgheight=f[0];for(var L=0;L<m[0]*f[0]*4;L++)p[L]=D[L];return this.width=m,this.height=f,this.data=p,this}(function(e){var t=function(){return typeof Bg=="function"},s=function(f,m,p,v){var g=4,y=o;switch(v){case e.image_compression.FAST:g=1,y=i;break;case e.image_compression.MEDIUM:g=6,y=l;break;case e.image_compression.SLOW:g=9,y=c}f=a(f,m,p,y);var N=Bg(f,{level:g});return e.__addimage__.arrayBufferToBinaryString(N)},a=function(f,m,p,v){for(var g,y,N,S=f.length/m,C=new Uint8Array(f.length+S),M=u(),D=0;D<S;D+=1){if(N=D*m,g=f.subarray(N,N+m),v)C.set(v(g,p,y),N+D);else{for(var L,A=M.length,I=[];L<A;L+=1)I[L]=M[L](g,p,y);var H=h(I.concat());C.set(I[H],N+D)}y=g}return C},n=function(f){var m=Array.apply([],f);return m.unshift(0),m},i=function(f,m){var p,v=[],g=f.length;v[0]=1;for(var y=0;y<g;y+=1)p=f[y-m]||0,v[y+1]=f[y]-p+256&255;return v},o=function(f,m,p){var v,g=[],y=f.length;g[0]=2;for(var N=0;N<y;N+=1)v=p&&p[N]||0,g[N+1]=f[N]-v+256&255;return g},l=function(f,m,p){var v,g,y=[],N=f.length;y[0]=3;for(var S=0;S<N;S+=1)v=f[S-m]||0,g=p&&p[S]||0,y[S+1]=f[S]+256-(v+g>>>1)&255;return y},c=function(f,m,p){var v,g,y,N,S=[],C=f.length;S[0]=4;for(var M=0;M<C;M+=1)v=f[M-m]||0,g=p&&p[M]||0,y=p&&p[M-m]||0,N=d(v,g,y),S[M+1]=f[M]-N+256&255;return S},d=function(f,m,p){if(f===m&&m===p)return f;var v=Math.abs(m-p),g=Math.abs(f-p),y=Math.abs(f+m-p-p);return v<=g&&v<=y?f:g<=y?m:p},u=function(){return[n,i,o,l,c]},h=function(f){var m=f.map(function(p){return p.reduce(function(v,g){return v+Math.abs(g)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(f,m,p,v){var g,y,N,S,C,M,D,L,A,I,H,k,P,O,$,V=this.decode.FLATE_DECODE,T="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(N=new _K(f)).imgData,y=N.bits,g=N.colorSpace,C=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){A=(L=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,H=new Uint8Array(A*N.colors),I=new Uint8Array(A);var F,z=N.pixelBitlength-N.bits;for(O=0,$=0;O<A;O++){for(P=L[O],F=0;F<z;)H[$++]=P>>>F&255,F+=N.bits;I[O]=P>>>F&255}}if(N.bits===16){A=(L=new Uint32Array(N.decodePixels().buffer)).length,H=new Uint8Array(A*(32/N.pixelBitlength)*N.colors),I=new Uint8Array(A*(32/N.pixelBitlength)),k=N.colors>1,O=0,$=0;for(var se=0;O<A;)P=L[O++],H[$++]=P>>>0&255,k&&(H[$++]=P>>>16&255,P=L[O++],H[$++]=P>>>0&255),I[se++]=P>>>16&255;y=8}v!==e.image_compression.NONE&&t()?(f=s(H,N.width*N.colors,N.colors,v),D=s(I,N.width,1,v)):(f=H,D=I,V=void 0)}if(N.colorType===3&&(g=this.color_spaces.INDEXED,M=N.palette,N.transparency.indexed)){var Y=N.transparency.indexed,_e=0;for(O=0,A=Y.length;O<A;++O)_e+=Y[O];if((_e/=255)===A-1&&Y.indexOf(0)!==-1)S=[Y.indexOf(0)];else if(_e!==A){for(L=N.decodePixels(),I=new Uint8Array(L.length),O=0,A=L.length;O<A;O++)I[O]=Y[L[O]];D=s(I,N.width,1)}}var R=function(Q){var re;switch(Q){case e.image_compression.FAST:re=11;break;case e.image_compression.MEDIUM:re=13;break;case e.image_compression.SLOW:re=14;break;default:re=12}return re}(v);return V===this.decode.FLATE_DECODE&&(T="/Predictor "+R+" "),T+="/Colors "+C+" /BitsPerComponent "+y+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:p,data:f,index:m,filter:V,decodeParameters:T,transparency:S,palette:M,sMask:D,predictor:R,width:N.width,height:N.height,bitsPerComponent:y,colorSpace:g}}}})(lt.API),function(e){e.processGIF89A=function(t,s,a,n){var i=new SK(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new wp(100).encode(d,100);return e.processJPEG.call(this,u,s,a,n)},e.processGIF87A=e.processGIF89A}(lt.API),cn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:s,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cn.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(s){tr.log("bit decode error:"+s)}},cn.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),s=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}s!==0&&(this.pos+=4-s)}},cn.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*n+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},cn.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},cn.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*n;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},cn.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),s=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&s)/s*255|0,d=(o>>11)/t*255|0,u=n*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},cn.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},cn.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*s;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},cn.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,s,a,n){var i=new cn(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new wp(100).encode(c,100);return e.processJPEG.call(this,d,s,a,n)}}(lt.API),i5.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,s,a,n){var i=new i5(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new wp(100).encode(c,100);return e.processJPEG.call(this,d,s,a,n)}}(lt.API),lt.API.processRGBA=function(e,t,s){for(var a=e.data,n=a.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,d=0;d<n;d+=4){var u=a[d],h=a[d+1],f=a[d+2],m=a[d+3];i[l++]=u,i[l++]=h,i[l++]=f,o[c++]=m}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:t,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},lt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},sc=lt.API,Uh=sc.getCharWidthsArray=function(e,t){var s,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:n.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,f=0,m=e.length,p=0,v=l[0]||c,g=[];for(s=0;s<m;s++)a=e.charCodeAt(s),typeof n.metadata.widthOfString=="function"?g.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(f=h&&zt(d[a])==="object"&&!isNaN(parseInt(d[a][p],10))?d[a][p]/u:0,g.push((l[a]||v)/c+f)),p=a;return g},r5=sc.getStringUnitWidth=function(e,t){var s=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return sc.processArabic&&(e=sc.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,s,n)/s:Uh.apply(this,arguments).reduce(function(i,o){return i+o},0)},s5=function(e,t,s,a){for(var n=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<s;)l+=t[i],i++;n.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(n.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&n.push(e.slice(c,i)),n},a5=function(e,t,s){s||(s={});var a,n,i,o,l,c,d,u=[],h=[u],f=s.textIndent||0,m=0,p=0,v=e.split(" "),g=Uh.apply(this,[" ",s])[0];if(c=s.lineIndent===-1?v[0].length+2:s.lineIndent||0){var y=Array(c).join(" "),N=[];v.map(function(C){(C=C.split(/\s*\n/)).length>1?N=N.concat(C.map(function(M,D){return(D&&M.length?`
`:"")+M})):N.push(C[0])}),v=N,c=r5.apply(this,[y,s])}for(i=0,o=v.length;i<o;i++){var S=0;if(a=v[i],c&&a[0]==`
`&&(a=a.substr(1),S=1),f+m+(p=(n=Uh.apply(this,[a,s])).reduce(function(C,M){return C+M},0))>t||S){if(p>t){for(l=s5.apply(this,[a,n,t-(f+m),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);p=n.slice(a.length-(u[0]?u[0].length:0)).reduce(function(C,M){return C+M},0)}else u=[a];h.push(u),f=p+c,m=g}else u.push(a),f+=m+p,m=g}return d=c?function(C,M){return(M?y:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},sc.splitTextToSize=function(e,t,s){var a,n=(s=s||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=s.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(a5.apply(this,[a[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",s={},a={},n=0;n<t.length;n++)s[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var f,m,p,v,g=["{"];for(var y in h){if(f=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof f=="number")f<0?(p=i(f).slice(3),v="-"):(p=i(f).slice(2),v=""),p=v+p.slice(0,-1)+a[p.slice(-1)];else{if(zt(f)!=="object")throw new Error("Don't know what to do with value type "+zt(f)+".");p=o(f)}g.push(m+p)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,p,v,g={},y=1,N=g,S=[],C="",M="",D=h.length-1,L=1;L<D;L+=1)(v=h[L])=="'"?f?(p=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(S.push([N,p]),N={},p=void 0):v=="}"?((m=S.pop())[0][m[1]]=N,p=void 0,N=m[0]):v=="-"?y=-1:p===void 0?s.hasOwnProperty(v)?(C+=s[v],p=parseInt(C,16)*y,y=1,C=""):C+=v:s.hasOwnProperty(v)?(M+=s[v],N[p]=parseInt(M,16)*y,y=1,p=void 0,M=""):M+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var f=h.font,m=u.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[f.postScriptName];p&&(f.metadata.Unicode.encoding=p,f.encoding=p.codePages[0])}])}(lt.API),function(e){var t=function(s){for(var a=s.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=s.charCodeAt(i);return n};e.API.events.push(["addFont",function(s){var a=void 0,n=s.font,i=s.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Kd(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])}(lt),function(e){function t(){return(ut.canvg?Promise.resolve(ut.canvg):no(()=>import("./index.es-CknaiElA.js"),__vite__mapDeps([0,1,2,3]))).catch(function(s){return Promise.reject(new Error("Could not load canvg: "+s))}).then(function(s){return s.default?s.default:s})}lt.API.addSvgAsImage=function(s,a,n,i,o,l,c,d){if(isNaN(a)||isNaN(n))throw tr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw tr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(p){return p.fromString(h,s,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(f)}).then(function(){m.addImage(u.toDataURL("image/jpeg",1),a,n,i,o,c,d)})}}(),lt.API.putTotalPages=function(e){var t,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),s=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,s);return this},lt.API.viewerPreferences=function(e,t){var s;e=e||{},t=t||!1;var a,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(p,v){var g,y=!1;for(g=0;g<p.length;g+=1)p[g]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(h=0;h<m;h+=1)s[l[h]].value=s[l[h]].defaultValue,s[l[h]].explicitSet=!1}if(zt(e)==="object"){for(n in e)if(i=e[n],f(l,n)&&i!==void 0){if(s[n].type==="boolean"&&typeof i=="boolean")s[n].value=i;else if(s[n].type==="name"&&f(s[n].valueSet,i))s[n].value=i;else if(s[n].type==="integer"&&Number.isInteger(i))s[n].value=i;else if(s[n].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}s[n].value="["+c.join(" ")+"]"}else s[n].value=s[n].defaultValue;s[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,v=[];for(p in s)s[p].explicitSet===!0&&(s[p].type==="name"?v.push("/"+p+" /"+s[p].value):v.push("/"+p+" "+s[p].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",t)),this}}(lt.API),function(e){var t=e.API,s=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=i.length;h<f;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(i).sort(function(m,p){return m-p})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ic(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ic(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+ic(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var p=d();u({data:f,addLength1:!0,objectId:p}),c("endobj");var v=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+p+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ic(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+ic(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},f=h.pdfEscape,m=h.activeFontKey,p=h.fonts,v=m,g="",y=0,N="",S=p[v].encoding;if(p[v].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(N=l,v=m,Array.isArray(l)&&(N=l[0]),y=0;y<N.length;y+=1)p[v].metadata.hasOwnProperty("cmap")&&(o=p[v].metadata.cmap.unicode.codeMap[N[y].charCodeAt(0)]),o||N[y].charCodeAt(0)<256&&p[v].metadata.hasOwnProperty("Unicode")?g+=N[y]:g+="";var C="";return parseInt(v.slice(1))<14||S==="WinAnsiEncoding"?C=f(g,v).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(C=s(g,p[v])),h.isHex=!0,{text:C,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([n(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(n(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=n(Object.assign({},c,{text:o})).text}])}(lt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0},e.addFileToVFS=function(s,a){return t.call(this),this.internal.vFS[s]=a,this},e.getFileFromVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}}(lt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var n,i,o,l,c,d,u,h=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,S=0;this.__bidiEngine__={};var C=function(k){var P=k.charCodeAt(),O=P>>8,$=v[O];return $!==void 0?h[256*$+(255&P)]:O===252||O===253?"AL":y.test(O)?"L":O===8?"R":"N"},M=function(k){for(var P,O=0;O<k.length;O++){if((P=C(k.charAt(O)))==="L")return!1;if(P==="R")return!0}return!1},D=function(k,P,O,$){var V,T,F,z,se=P[$];switch(se){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(se="AN");break;case"AL":N=!0,se="R";break;case"WS":se="N";break;case"CS":$<1||$+1>=P.length||(V=O[$-1])!=="EN"&&V!=="AN"||(T=P[$+1])!=="EN"&&T!=="AN"?se="N":N&&(T="AN"),se=T===V?T:"N";break;case"ES":se=(V=$>0?O[$-1]:"B")==="EN"&&$+1<P.length&&P[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&O[$-1]==="EN"){se="EN";break}if(N){se="N";break}for(F=$+1,z=P.length;F<z&&P[F]==="ET";)F++;se=F<z&&P[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(z=P.length,F=$+1;F<z&&P[F]==="NSM";)F++;if(F<z){var Y=k[$],_e=Y>=1425&&Y<=2303||Y===64286;if(V=P[F],_e&&(V==="R"||V==="AL")){se="R";break}}}se=$<1||(V=P[$-1])==="B"?"N":O[$-1];break;case"B":N=!1,n=!0,se=S;break;case"S":i=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":se="N"}return se},L=function(k,P,O){var $=k.split("");return O&&A($,O,{hiLevel:S}),$.reverse(),P&&P.reverse(),$.join("")},A=function(k,P,O){var $,V,T,F,z,se=-1,Y=k.length,_e=0,R=[],Q=S?m:f,re=[];for(N=!1,n=!1,i=!1,V=0;V<Y;V++)re[V]=C(k[V]);for(T=0;T<Y;T++){if(z=_e,R[T]=D(k,re,R,T),$=240&(_e=Q[z][p[R[T]]]),_e&=15,P[T]=F=Q[_e][5],$>0)if($===16){for(V=se;V<T;V++)P[V]=1;se=-1}else se=-1;if(Q[_e][6])se===-1&&(se=T);else if(se>-1){for(V=se;V<T;V++)P[V]=F;se=-1}re[T]==="B"&&(P[T]=0),O.hiLevel|=F}i&&function(te,le,be){for(var we=0;we<be;we++)if(te[we]==="S"){le[we]=S;for(var oe=we-1;oe>=0&&te[oe]==="WS";oe--)le[oe]=S}}(re,P,Y)},I=function(k,P,O,$,V){if(!(V.hiLevel<k)){if(k===1&&S===1&&!n)return P.reverse(),void(O&&O.reverse());for(var T,F,z,se,Y=P.length,_e=0;_e<Y;){if($[_e]>=k){for(z=_e+1;z<Y&&$[z]>=k;)z++;for(se=_e,F=z-1;se<F;se++,F--)T=P[se],P[se]=P[F],P[F]=T,O&&(T=O[se],O[se]=O[F],O[F]=T);_e=z}_e++}}},H=function(k,P,O){var $=k.split(""),V={hiLevel:S};return O||(O=[]),A($,O,V),function(T,F,z){if(z.hiLevel!==0&&u)for(var se,Y=0;Y<T.length;Y++)F[Y]===1&&(se=g.indexOf(T[Y]))>=0&&(T[Y]=g[se+1])}($,O,V),I(2,$,P,O,V),I(1,$,P,O,V),$.join("")};return this.__bidiEngine__.doBidiReorder=function(k,P,O){if(function(V,T){if(T)for(var F=0;F<V.length;F++)T[F]=F;l===void 0&&(l=M(V)),d===void 0&&(d=M(V))}(k,P),o||!c||d)if(o&&c&&l^d)S=l?1:0,k=L(k,P,O);else if(!o&&c&&d)S=l?1:0,k=H(k,P,O),k=L(k,P);else if(!o||l||c||d){if(o&&!c&&l^d)k=L(k,P),l?(S=0,k=H(k,P,O)):(S=1,k=H(k,P,O),k=L(k,P));else if(o&&l&&!c&&d)S=1,k=H(k,P,O),k=L(k,P);else if(!o&&!c&&l^d){var $=u;l?(S=1,k=H(k,P,O),S=0,u=!1,k=H(k,P,O),u=$):(S=0,k=H(k,P,O),k=L(k,P),S=1,u=!1,k=H(k,P,O),u=$,k=L(k,P))}}else S=0,k=H(k,P,O);else S=l?1:0,k=H(k,P,O);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,d=k.isOutputRtl,u=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var n=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,s.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([s.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([s.doBidiReorder(n[l])]);a.text=o}else a.text=s.doBidiReorder(n);s.setOptions({isInputVisual:!0})}])}(lt),lt.API.TTFFont=function(){function e(t){var s;if(this.rawData=t,s=this.contents=new uo(t),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new qK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new PK(this.contents),this.head=new AK(this),this.name=new LK(this),this.cmap=new fP(this),this.toUnicode={},this.hhea=new kK(this),this.maxp=new MK(this),this.hmtx=new DK(this),this.post=new OK(this),this.os2=new EK(this),this.loca=new $K(this),this.glyf=new IK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,s,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),(32768&(s=n>>16))!=0&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var s;return((s=this.cmap.unicode)!=null?s.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*s},e.prototype.widthOfString=function(t,s,a){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/s)||0;return o*(s/1e3)},e.prototype.lineHeight=function(t,s){var a;return s==null&&(s=!1),a=s?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var jn,uo=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var s,a;for(a=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)a[s]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var s,a,n;for(n=[],s=0,a=t.length;0<=a?s<a:s>a;s=0<=a?++s:--s)n.push(this.writeByte(t.charCodeAt(s)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,s,a,n,i,o,l,c;return t=this.readByte(),s=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^s)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*s+1099511627776*a+4294967296*n+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var s,a;return s=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var s,a;for(s=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)s.push(this.readByte());return s},e.prototype.write=function(t){var s,a,n,i;for(i=[],a=0,n=t.length;a<n;a++)s=t[a],i.push(this.writeByte(s));return i},e}(),PK=function(){var e;function t(s){var a,n,i;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(s){var a,n,i,o,l,c,d,u,h,f,m,p,v;for(v in m=Object.keys(s).length,c=Math.log(2),h=16*Math.floor(Math.log(m)/c),o=Math.floor(h/c),u=16*m-h,(n=new uo).writeInt(this.scalarType),n.writeShort(m),n.writeShort(h),n.writeShort(o),n.writeShort(u),i=16*m,d=n.pos+i,l=null,p=[],s)for(f=s[v],n.writeString(v),n.writeInt(e(f)),n.writeInt(d),n.writeInt(f.length),p=p.concat(f),v==="head"&&(l=d),d+=f.length;d%4;)p.push(0),d++;return n.write(p),a=2981146554-e(n.data),n.pos=l+8,n.writeUInt32(a),n.data},e=function(s){var a,n,i,o;for(s=xP.call(s);s.length%4;)s.push(0);for(i=new uo(s),n=0,a=0,o=s.length;a<o;a=a+=4)n+=i.readUInt32();return 4294967295&n},t}(),CK={}.hasOwnProperty,$n=function(e,t){for(var s in t)CK.call(t,s)&&(e[s]=t[s]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};jn=function(){function e(t){var s;this.file=t,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var AK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var a;return(a=new uo).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(s),a.writeShort(this.glyphDataFormat),a.data},t}(),o5=function(){function e(t,s){var a,n,i,o,l,c,d,u,h,f,m,p,v,g,y,N,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=s+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),f=m/2,t.pos+=6,i=function(){var C,M;for(M=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)M.push(t.readUInt16());return M}(),t.pos+=2,v=function(){var C,M;for(M=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)M.push(t.readUInt16());return M}(),d=function(){var C,M;for(M=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)M.push(t.readUInt16());return M}(),u=function(){var C,M;for(M=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)M.push(t.readUInt16());return M}(),n=(this.length-t.pos+this.offset)/2,l=function(){var C,M;for(M=[],c=C=0;0<=n?C<n:C>n;c=0<=n?++C:--C)M.push(t.readUInt16());return M}(),c=y=0,S=i.length;y<S;c=++y)for(g=i[c],a=N=p=v[c];p<=g?N<=g:N>=g;a=p<=g?++N:--N)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-p)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=h}return e.encode=function(t,s){var a,n,i,o,l,c,d,u,h,f,m,p,v,g,y,N,S,C,M,D,L,A,I,H,k,P,O,$,V,T,F,z,se,Y,_e,R,Q,re,te,le,be,we,oe,Ce,ye,fe;switch($=new uo,o=Object.keys(t).sort(function(Le,Te){return Le-Te}),s){case"macroman":for(v=0,g=function(){var Le=[];for(p=0;p<256;++p)Le.push(0);return Le}(),N={0:0},i={},V=0,se=o.length;V<se;V++)N[oe=t[n=o[V]]]==null&&(N[oe]=++v),i[n]={old:t[n],new:N[t[n]]},g[n]=N[t[n]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(g),{charMap:i,subtable:$.data,maxGlyphID:v+1};case"unicode":for(P=[],h=[],S=0,N={},a={},y=d=null,T=0,Y=o.length;T<Y;T++)N[M=t[n=o[T]]]==null&&(N[M]=++S),a[n]={old:M,new:N[M]},l=N[M]-n,y!=null&&l===d||(y&&h.push(y),P.push(n),d=l),y=n;for(y&&h.push(y),h.push(65535),P.push(65535),H=2*(I=P.length),A=2*Math.pow(Math.log(I)/Math.LN2,2),f=Math.log(A/2)/Math.LN2,L=2*I-A,c=[],D=[],m=[],p=F=0,_e=P.length;F<_e;p=++F){if(k=P[p],u=h[p],k===65535){c.push(0),D.push(0);break}if(k-(O=a[k].new)>=32768)for(c.push(0),D.push(2*(m.length+I-p)),n=z=k;k<=u?z<=u:z>=u;n=k<=u?++z:--z)m.push(a[n].new);else c.push(O-k),D.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*I+2*m.length),$.writeUInt16(0),$.writeUInt16(H),$.writeUInt16(A),$.writeUInt16(f),$.writeUInt16(L),be=0,R=h.length;be<R;be++)n=h[be],$.writeUInt16(n);for($.writeUInt16(0),we=0,Q=P.length;we<Q;we++)n=P[we],$.writeUInt16(n);for(Ce=0,re=c.length;Ce<re;Ce++)l=c[Ce],$.writeUInt16(l);for(ye=0,te=D.length;ye<te;ye++)C=D[ye],$.writeUInt16(C);for(fe=0,le=m.length;fe<le;fe++)v=m[fe],$.writeUInt16(v);return{charMap:a,subtable:$.data,maxGlyphID:S+1}}},e}(),fP=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="cmap",t.prototype.parse=function(s){var a,n,i;for(s.pos=this.offset,this.version=s.readUInt16(),i=s.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)a=new o5(s,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(s,a){var n,i;return a==null&&(a="macroman"),n=o5.encode(s,a),(i=new uo).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),kK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t}(),EK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=function(){var a,n;for(n=[],a=0;a<10;++a)n.push(s.readByte());return n}(),this.charRange=function(){var a,n;for(n=[],a=0;a<4;++a)n.push(s.readInt());return n}(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(s.readInt());return n}(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t}(),OK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="post",t.prototype.parse=function(s){var a,n,i;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:break;case 131072:var o;for(n=s.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],i=[];s.pos<this.offset+this.length;)a=s.readByte(),i.push(this.names.push(s.readString(a)));return i;case 151552:return n=s.readUInt16(),this.offsets=s.read(n);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(s.readUInt32());return d}).call(this)}},t}(),TK=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},LK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="name",t.prototype.parse=function(s){var a,n,i,o,l,c,d,u,h,f,m;for(s.pos=this.offset,s.readShort(),a=s.readShort(),c=s.readShort(),n=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)n.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+c+s.readShort()});for(d={},o=h=0,f=n.length;h<f;o=++h)i=n[o],s.pos=i.offset,u=s.readString(i.length),l=new TK(u,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),MK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t}(),DK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="hmtx",t.prototype.parse=function(s){var a,n,i,o,l,c,d;for(s.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)h.push(s.readInt16());return h}(),this.widths=(function(){var u,h,f,m;for(m=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],m.push(o.advance);return m}).call(this),n=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(n));return d},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t}(),xP=[].slice,IK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var a,n,i,o,l,c,d,u,h,f;return s in this.cache?this.cache[s]:(o=this.file.loca,a=this.file.contents,n=o.indexOf(s),(i=o.lengthOf(s))===0?this.cache[s]=null:(a.pos=this.offset+n,l=(c=new uo(a.read(i))).readShort(),u=c.readShort(),f=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[s]=l===-1?new FK(c,u,f,d,h):new RK(c,l,u,f,d,h),this.cache[s]))},t.prototype.encode=function(s,a,n){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=s[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),RK=function(){function e(t,s,a,n,i,o){this.raw=t,this.numberOfContours=s,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),FK=function(){function e(t,s,a,n,i){var o,l;for(this.raw=t,this.xMin=s,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,s,a;for(s=new uo(xP.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)s.pos=this.glyphOffsets[t];return s.data},e}(),$K=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $n(t,jn),t.prototype.tag="loca",t.prototype.parse=function(s){var a,n;return s.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*s.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(s.readUInt32());return o}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,a){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<a.length&&a[o]==l){++o,n[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*n.length),h=0;h<n.length;++h)u[4*h+3]=255&n[h],u[4*h+2]=(65280&n[h])>>8,u[4*h+1]=(16711680&n[h])>>16,u[4*h]=(4278190080&n[h])>>24;return u},t}(),qK=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,s,a,n,i;for(s in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[s],t[s]=n[a];return t},e.prototype.glyphsFor=function(t){var s,a,n,i,o,l,c;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in s=[],n)(a=n[i])!=null&&a.compound&&s.push.apply(s,a.glyphIDs);if(s.length>0)for(i in c=this.glyphsFor(s))a=c[i],n[i]=a;return n},e.prototype.encode=function(t,s){var a,n,i,o,l,c,d,u,h,f,m,p,v,g,y;for(n in a=fP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=a.charMap)m[(c=y[n]).old]=c.new;for(p in f=a.maxGlyphID,o)p in m||(m[p]=f++);return u=function(N){var S,C;for(S in C={},N)C[N[S]]=S;return C}(m),h=Object.keys(u).sort(function(N,S){return N-S}),v=function(){var N,S,C;for(C=[],N=0,S=h.length;N<S;N++)l=h[N],C.push(u[l]);return C}(),i=this.font.glyf.encode(o,v,m),d=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e}();lt.API.PDFObject=function(){var e;function t(){}return e=function(s,a){return(Array(a+1).join("0")+s).slice(-a)},t.convert=function(s){var a,n,i,o;if(Array.isArray(s))return"["+function(){var l,c,d;for(d=[],l=0,c=s.length;l<c;l++)a=s[l],d.push(t.convert(a));return d}().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s!=null&&s.isString)return"("+s+")";if(s instanceof Date)return"(D:"+e(s.getUTCFullYear(),4)+e(s.getUTCMonth(),2)+e(s.getUTCDate(),2)+e(s.getUTCHours(),2)+e(s.getUTCMinutes(),2)+e(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(n in i=["<<"],s)o=s[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+s},t}();function pP(e,t,s,a,n){a=a||{};var i=1.15,o=n.internal.scaleFactor,l=n.internal.getFontSize()/o,c=n.getLineHeightFactor?n.getLineHeightFactor():i,d=l*c,u=/\r\n|\r|\n/g,h="",f=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(h=typeof e=="string"?e.split(u):e,f=h.length||1),s+=l*(2-i),a.valign==="middle"?s-=f/2*d:a.valign==="bottom"&&(s-=f*d),a.halign==="center"||a.halign==="right"){var m=l;if(a.halign==="center"&&(m*=.5),h&&f>=1){for(var p=0;p<h.length;p++)n.text(h[p],t-n.getStringUnitWidth(h[p])*m,s),s+=d;return n}t-=n.getStringUnitWidth(e)*m}return a.halign==="justify"?n.text(e,t,s,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(e,t,s),n}var l5={},yc=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,s){s===void 0&&(s=null),s?s.__autoTableDocumentDefaults=t:l5=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,s){var a,n,i;s===void 0&&(s=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!s){var u=e.unifyColor(t.fillColor);u&&(a=this.jsPDFDocument).setFillColor.apply(a,u),u=e.unifyColor(t.textColor),u&&(n=this.jsPDFDocument).setTextColor.apply(n,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,s,a){return this.jsPDFDocument.splitTextToSize(t,s,a)},e.prototype.rect=function(t,s,a,n,i){return this.jsPDFDocument.rect(t,s,a,n,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return l5||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Kg=function(e,t){return Kg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])},Kg(e,t)};function gP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Kg(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var bP=function(e){gP(t,e);function t(s){var a=e.call(this)||this;return a._element=s,a}return t}(Array);function BK(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function zK(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Wm(e,t,s){s.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],n=a.map(function(i){return s.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return n}function vP(e,t,s,a){var n=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:i});var o=yP(n,!1);o&&e.rect(s.x,s.y,t.getWidth(e.pageSize().width),a.y-s.y,o)}function yP(e,t){var s=e>0,a=t||t===0;return s&&a?"DF":s?"S":a?"F":null}function Mf(e,t){var s,a,n,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(s=e.left)!==null&&s!==void 0?s:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function jP(e,t){var s=Mf(t.settings.margin,0);return e.pageSize().width-(s.left+s.right)}function UK(e,t,s,a,n){var i={},o=1.3333333333333333,l=Np(t,function(S){return n.getComputedStyle(S).backgroundColor});l!=null&&(i.fillColor=l);var c=Np(t,function(S){return n.getComputedStyle(S).color});c!=null&&(i.textColor=c);var d=VK(a,s);d&&(i.cellPadding=d);var u="borderTopColor",h=o*s,f=a.borderTopWidth;if(a.borderBottomWidth===f&&a.borderRightWidth===f&&a.borderLeftWidth===f){var m=(parseFloat(f)||0)/h;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/h,right:(parseFloat(a.borderRightWidth)||0)/h,bottom:(parseFloat(a.borderBottomWidth)||0)/h,left:(parseFloat(a.borderLeftWidth)||0)/h},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var p=Np(t,function(S){return n.getComputedStyle(S)[u]});p!=null&&(i.lineColor=p);var v=["left","right","center","justify"];v.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),v=["middle","bottom","top"],v.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var g=parseInt(a.fontSize||"");isNaN(g)||(i.fontSize=g/o);var y=WK(a);y&&(i.fontStyle=y);var N=(a.fontFamily||"").toLowerCase();return e.indexOf(N)!==-1&&(i.font=N),i}function WK(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Np(e,t){var s=wP(e,t);if(!s)return null;var a=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function wP(e,t){var s=t(e);return s==="rgba(0, 0, 0, 0)"||s==="transparent"||s==="initial"||s==="inherit"?e.parentElement==null?null:wP(e.parentElement,t):s}function VK(e,t){var s=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=s.map(function(l){return parseInt(l||"0")/a}),o=Mf(i,0);return n>o.top&&(o.top=n),n>o.bottom&&(o.bottom=n),o}function NP(e,t,s,a,n){var i,o;a===void 0&&(a=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=s.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],f=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:f};for(var m=0;m<l.rows.length;m++){var p=l.rows[m],v=(o=(i=p==null?void 0:p.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),g=HK(c,d,s,p,a,n);g&&(v==="thead"?u.push(g):v==="tfoot"?f.push(g):h.push(g))}return{head:u,body:h,foot:f}}function HK(e,t,s,a,n,i){for(var o=new bP(a),l=0;l<a.cells.length;l++){var c=a.cells[l],d=s.getComputedStyle(c);if(n||d.display!=="none"){var u=void 0;i&&(u=UK(e,c,t,d,s)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:GK(c)})}}var h=s.getComputedStyle(a);if(o.length>0&&(n||h.display!=="none"))return o}function GK(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(s){return s.trim()}).join(`
`),t.innerText||t.textContent||""}function KK(e,t,s){for(var a=0,n=[e,t,s];a<n.length;a++){var i=n[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function ci(e,t,s,a,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function YK(e,t){var s=new yc(e),a=s.getDocumentOptions(),n=s.getGlobalOptions();KK(n,a,t);var i=ci({},n,a,t),o;typeof window<"u"&&(o=window);var l=JK(n,a,t),c=XK(n,a,t),d=QK(s,i),u=eY(s,i,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function JK(e,t,s){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],h=s[c];a.columnStyles=ci({},d,u,h)}else{var f=[e,t,s],m=f.map(function(p){return p[c]||{}});a[c]=ci({},m[0],m[1],m[2])}},i=0,o=Object.keys(a);i<o.length;i++){var l=o[i];n(l)}return a}function XK(e,t,s){for(var a=[e,t,s],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=a;i<o.length;i++){var l=o[i];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function QK(e,t){var s,a,n,i,o,l,c,d,u,h,f,m,p=Mf(t.margin,40/e.scaleFactor()),v=(s=ZK(e,t.startY))!==null&&s!==void 0?s:p.top,g;t.showFoot===!0?g="everyPage":t.showFoot===!1?g="never":g=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var N=(i=t.useCss)!==null&&i!==void 0?i:!1,S=t.theme||(N?"plain":"striped"),C=!!t.horizontalPageBreak,M=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:N,theme:S,startY:v,margin:p,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:y,showFoot:g,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=t.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:C,horizontalPageBreakRepeat:M,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function ZK(e,t){var s=e.getLastAutoTable(),a=e.scaleFactor(),n=e.pageNumber(),i=!1;if(s&&s.startPageNumber){var o=s.startPageNumber+s.pageNumber-1;i=o===n}return typeof t=="number"?t:(t==null||t===!1)&&i&&(s==null?void 0:s.finalY)!=null?s.finalY+20/a:null}function eY(e,t,s){var a=t.head||[],n=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(s){var l=NP(e,t.html,s,o,t.useCss)||{};a=l.head||a,n=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var c=t.columns||tY(a,n,i);return{columns:c,head:a,body:n,foot:i}}function tY(e,t,s){var a=e[0]||t[0]||s[0]||[],n=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(a)?l=a[parseInt(i)]:l=a[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(a)?d=n.length:d=i+(c>0?"_".concat(c):"");var u={dataKey:d};n.push(u)}}),n}var Yg=function(){function e(t,s,a){this.table=s,this.pageNumber=s.pageNumber,this.settings=s.settings,this.cursor=a,this.doc=t.getDocument()}return e}(),rY=function(e){gP(t,e);function t(s,a,n,i,o,l){var c=e.call(this,s,a,l)||this;return c.cell=n,c.row=i,c.column=o,c.section=i.section,c}return t}(Yg),sY=function(){function e(t,s){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=s.columns,this.head=s.head,this.body=s.body,this.foot=s.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(s,a){return s+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(s,a){return s+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,s,a,n,i,o){for(var l=0,c=s;l<c.length;l++){var d=c[l],u=new rY(t,this,a,n,i,o),h=d(u)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,s){t.applyStyles(t.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var i=n[a];i(new Yg(t,this,s))}},e.prototype.callWillDrawPageHooks=function(t,s){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var i=n[a];i(new Yg(t,this,s))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var s=this.columns.reduce(function(n,i){return n+i.wrappedWidth},0);return s}else{var a=this.settings.margin;return t-a.left-a.right}},e}(),_P=function(){function e(t,s,a,n,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof bP&&(this.raw=t._element,this.element=t._element),this.index=s,this.section=a,this.cells=n,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var s=this;return t.reduce(function(a,n){var i;return Math.max(a,((i=s.cells[n.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var s=this;return t.filter(function(a){var n=s.cells[a.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,s){return this.getMaxCellHeight(s)<=t},e.prototype.getMinimumRowHeight=function(t,s){var a=this;return t.reduce(function(n,i){var o=a.cells[i.index];if(!o)return 0;var l=s.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>n?d:n},0)},e}(),SP=function(){function e(t,s,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=s,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var s=this.height-this.padding("vertical");t=this.y+s/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,s){s===void 0&&(s=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*s,i=a*n+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var s=Mf(this.styles.cellPadding,0);return t==="vertical"?s.top+s.bottom:t==="horizontal"?s.left+s.right:s[t]},e}(),aY=function(){function e(t,s,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=s,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var s=0,a=0,n=t.allRows();a<n.length;a++){var i=n[a],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(s=Math.max(s,o.styles.cellWidth))}return s},e}();function nY(e,t){iY(e,t);var s=[],a=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,s.push(i)),a+=i.width});var n=t.getWidth(e.pageSize().width)-a;n&&(n=Jg(s,n,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),n&&(n=Jg(s,n,function(i){return i.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),lY(t),cY(t,e),oY(t)}function iY(e,t){var s=e.scaleFactor(),a=t.settings.horizontalPageBreak,n=jP(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=Wm(d.text,d.styles,e)+h;var f=Wm(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=f+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||a===!0)d.contentWidth>n?(d.minWidth=n,d.wrappedWidth=n):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var m=10/s;d.minWidth=d.styles.minCellWidth||m,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function Jg(e,t,s){for(var a=t,n=e.reduce(function(m,p){return m+p.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/n,c=a*l,d=o.width+c,u=s(o),h=d<u?u:d;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var f=e.filter(function(m){return t<0?m.width>s(m):!0});f.length&&(t=Jg(f,t,s))}return t}function oY(e){for(var t={},s=1,a=e.allRows(),n=0;n<a.length;n++)for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(s>1)s--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,s=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=i.cells[c.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var h=a.length-n,f=u.rowSpan>h?h:u.rowSpan;t[c.index]={cell:u,left:f,row:i}}}}}function lY(e){for(var t=e.allRows(),s=0;s<t.length;s++)for(var a=t[s],n=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete a.cells[c.index];else if(n){var d=n;delete a.cells[c.index],n=null,d.width=c.width+i}else{var d=a.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){n=d,i+=c.width;continue}d.width=c.width+i}}}function cY(e,t){for(var s={count:0,height:0},a=0,n=e.allRows();a<n.length;a++){for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=c5(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=c5(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var f=d.contentHeight/d.rowSpan;d.rowSpan>1&&s.count*s.height<f*d.rowSpan?s={height:f,count:d.rowSpan}:s&&s.count>0&&s.height>f&&(f=s.height),f>i.height&&(i.height=f)}}s.count--}}function c5(e,t,s,a,n){return e.map(function(i){return dY(i,t,s,a,n)})}function dY(e,t,s,a,n){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Wm(e,s,a))return e;for(;t<Wm(e+n,s,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function uY(e,t){var s=new yc(e),a=hY(t,s.scaleFactor()),n=new sY(t,a);return nY(s,n),s.applyStyles(s.userStyles),n}function hY(e,t){var s=e.content,a=fY(s.columns);if(s.head.length===0){var n=d5(a,"head");n&&s.head.push(n)}if(s.foot.length===0){var n=d5(a,"foot");n&&s.foot.push(n)}var i=e.settings.theme,o=e.styles;return{columns:a,head:_p("head",s.head,a,o,i,t),body:_p("body",s.body,a,o,i,t),foot:_p("foot",s.foot,a,o,i,t)}}function _p(e,t,s,a,n,i){var o={},l=t.map(function(c,d){for(var u=0,h={},f=0,m=0,p=0,v=s;p<v.length;p++){var g=v[p];if(o[g.index]==null||o[g.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[g.index-f-u]:y=c[g.dataKey];var N={};typeof y=="object"&&!Array.isArray(y)&&(N=(y==null?void 0:y.styles)||{});var S=xY(e,g,d,n,a,i,N),C=new SP(y,S,e);h[g.dataKey]=C,h[g.index]=C,m=C.colSpan-1,o[g.index]={left:C.rowSpan-1,times:m}}else m--,f++;else o[g.index].left--,m=o[g.index].times,u++}return new _P(c,d,e,h)});return l}function d5(e,t){var s={};return e.forEach(function(a){if(a.raw!=null){var n=mY(t,a.raw);n!=null&&(s[a.dataKey]=n)}}),Object.keys(s).length>0?s:null}function mY(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function fY(e){return e.map(function(t,s){var a,n;return typeof t=="object"?n=(a=t.dataKey)!==null&&a!==void 0?a:s:n=s,new aY(n,t,s)})}function xY(e,t,s,a,n,i,o){var l=zK(a),c;e==="head"?c=n.headStyles:e==="body"?c=n.bodyStyles:e==="foot"&&(c=n.footStyles);var d=ci({},l.table,l[e],n.styles,c),u=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},h=e==="body"?u:{},f=e==="body"&&s%2===0?ci({},l.alternateRow,n.alternateRowStyles):{},m=BK(i),p=ci({},m,d,f,h);return ci(p,o)}function pY(e,t,s){var a;s===void 0&&(s={});var n=jP(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(f){var m=t.columns.find(function(p){return p.dataKey===f||p.index===f});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),n-=m.wrappedWidth)});for(var d=!0,u=(a=s==null?void 0:s.start)!==null&&a!==void 0?a:0;u<t.columns.length;){if(i.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(d||n>=h)d=!1,o.push(u),l.push(t.columns[u]),n-=h;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function gY(e,t){for(var s=[],a=0;a<t.columns.length;a++){var n=pY(e,t,{start:a});n.columns.length&&(s.push(n),a=n.lastIndex)}return s}function bY(e,t){var s=t.settings,a=s.startY,n=s.margin,i={x:n.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+n.bottom+o;if(s.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(f,m){return f+m.height},0);l+=d}var u=new yc(e);(s.pageBreak==="always"||s.startY!=null&&l>u.pageSize().height)&&(CP(u),i.y=n.top),t.callWillDrawPageHooks(u,i);var h=ci({},i);t.startPageNumber=u.pageNumber(),s.horizontalPageBreak?vY(u,t,h,i):(u.applyStyles(u.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(f){return xi(u,t,f,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(f,m){var p=m===t.body.length-1;Vm(u,t,f,p,h,i,t.columns)}),u.applyStyles(u.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(f){return xi(u,t,f,i,t.columns)})),vP(u,t,h,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function vY(e,t,s,a){var n=gY(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?Yd(e,t,s,a,d.columns,!0):u5(e,t,a,d.columns),yY(e,t,s,a,d.columns),Sp(e,t,a,d.columns)});else for(var o=-1,l=n[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?Yd(e,t,s,a,u,!0):u5(e,t,a,u),d=h5(e,t,o+1,a,u),Sp(e,t,a,u)}var h=d-o;n.slice(1).forEach(function(f){e.applyStyles(e.userStyles),Yd(e,t,s,a,f.columns,!0),h5(e,t,o+1,a,f.columns,h),Sp(e,t,a,f.columns)}),o=d};o<t.body.length-1;)c()}function u5(e,t,s,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(i){return xi(e,t,i,s,a)})}function yY(e,t,s,a,n){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;Vm(e,t,i,l,s,a,n)})}function h5(e,t,s,a,n,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(s+i,t.body.length),l=-1;return t.body.slice(s,o).forEach(function(c,d){var u=s+d===t.body.length-1,h=PP(e,t,u,a);c.canEntireRowFit(h,n)&&(xi(e,t,c,a,n),l=s+d)}),l}function Sp(e,t,s,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(i){return xi(e,t,i,s,a)})}function jY(e,t,s){var a=s.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),i=Math.floor((t-n)/a);return Math.max(0,i)}function wY(e,t,s,a){var n={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=s.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new SP(d.raw,d.styles,d.section);u=ci(u,d),u.text=[];var h=jY(d,t,a);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var f=a.scaleFactor(),m=a.getLineHeightFactor();d.contentHeight=d.getContentHeight(f,m),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(f,m),u.contentHeight>i&&(i=u.contentHeight),n[c.index]=u}}var p=new _P(e.raw,-1,e.section,n,!0);p.height=i;for(var v=0,g=s.columns;v<g.length;v++){var c=g[v],u=p.cells[c.index];u&&(u.height=p.height);var d=e.cells[c.index];d&&(d.height=e.height)}return p}function NY(e,t,s,a){var n=e.pageSize().height,i=a.settings.margin,o=i.top+i.bottom,l=n-o;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var c=t.getMinimumRowHeight(a.columns,e),d=c<s;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(a.columns),h=t.getMaxCellHeight(a.columns)>l;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||a.settings.rowPageBreak==="avoid")}function Vm(e,t,s,a,n,i,o){var l=PP(e,t,a,i);if(s.canEntireRowFit(l,o))xi(e,t,s,i,o);else if(NY(e,s,l,t)){var c=wY(s,l,t,e);xi(e,t,s,i,o),Yd(e,t,n,i,o),Vm(e,t,c,a,n,i,o)}else Yd(e,t,n,i,o),Vm(e,t,s,a,n,i,o)}function xi(e,t,s,a,n){a.x=t.settings.margin.left;for(var i=0,o=n;i<o.length;i++){var l=o[i],c=s.cells[l.index];if(!c){a.x+=l.width;continue}e.applyStyles(c.styles),c.x=a.x,c.y=a.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,s,l,a);if(d===!1){a.x+=l.width;continue}_Y(e,c,a);var u=c.getTextPos();pP(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,s,l,a),a.x+=l.width}a.y+=s.height}function _Y(e,t,s){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=yP(a.lineWidth,a.fillColor);n&&e.rect(t.x,s.y,t.width,t.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,s.y,t.width,t.height,"F"),SY(e,t,s,a.lineWidth))}function SY(e,t,s,a){var n,i,o,l;a.top&&(n=s.x,i=s.y,o=s.x+t.width,l=s.y,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.top,n,i,o,l)),a.bottom&&(n=s.x,i=s.y+t.height,o=s.x+t.width,l=s.y+t.height,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),c(a.bottom,n,i,o,l)),a.left&&(n=s.x,i=s.y,o=s.x,l=s.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.left,n,i,o,l)),a.right&&(n=s.x+t.width,i=s.y,o=s.x+t.width,l=s.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),c(a.right,n,i,o,l));function c(d,u,h,f,m){e.getDocument().setLineWidth(d),e.getDocument().line(u,h,f,m,"S")}}function PP(e,t,s,a){var n=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&s)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-n}function Yd(e,t,s,a,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return xi(e,t,l,a,n)}),t.callEndPageHooks(e,a);var o=t.settings.margin;vP(e,t,s,a),CP(e),t.pageNumber++,a.x=o.left,a.y=o.top,s.y=o.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return xi(e,t,l,a,n)}),e.applyStyles(e.userStyles))}function CP(e){var t=e.pageNumber();e.setPage(t+1);var s=e.pageNumber();return s===t?(e.addPage(),!0):!1}function PY(e){e.API.autoTable=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var a=t[0],n=YK(this,a),i=uY(this,n);return bY(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,s,a,n){pP(t,s,a,n,this)},e.API.autoTableSetDefaults=function(t){return yc.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,s){yc.setDefaults(t,s)},e.API.autoTableHtmlToJson=function(t,s){var a;if(s===void 0&&(s=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new yc(this),i=NP(n,t,window,s,!1),o=i.head,l=i.body,c=((a=o[0])===null||a===void 0?void 0:a.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var Pp;try{if(typeof window<"u"&&window){var m5=window,f5=m5.jsPDF||((Pp=m5.jspdf)===null||Pp===void 0?void 0:Pp.jsPDF);f5&&PY(f5)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Qt={format:"a4",orientation:"portrait",margins:{top:20,right:20,bottom:20,left:20},colors:{primary:"#b58150",text:"#1f2937",lightGray:"#f3f4f6",darkGray:"#6b7280"},fonts:{title:16,subtitle:14,normal:10,small:8}};class AP{constructor(){this.doc=new lt(Qt.orientation,"mm",Qt.format),this.currentY=Qt.margins.top,this.pageHeight=this.doc.internal.pageSize.height,this.pageWidth=this.doc.internal.pageSize.width,this.margins=Qt.margins}addHeader(t,s=""){this.doc.setFillColor(Qt.colors.primary),this.doc.rect(this.margins.left,this.currentY,this.pageWidth-this.margins.left-this.margins.right,15,"F"),this.doc.setTextColor(255,255,255),this.doc.setFontSize(Qt.fonts.title),this.doc.setFont("helvetica","bold"),this.doc.text("MESTRES DO CAFÉ - ERP",this.margins.left+5,this.currentY+10);const a=nm(new Date,"dd/MM/yyyy 'às' HH:mm",{locale:e4});this.doc.setFontSize(Qt.fonts.small),this.doc.text(`Gerado em: ${a}`,this.pageWidth-this.margins.right-40,this.currentY+10),this.currentY+=25,this.doc.setTextColor(Qt.colors.text),this.doc.setFontSize(Qt.fonts.title),this.doc.setFont("helvetica","bold"),this.doc.text(t,this.margins.left,this.currentY),this.currentY+=8,s&&(this.doc.setFontSize(Qt.fonts.subtitle),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Qt.colors.darkGray),this.doc.text(s,this.margins.left,this.currentY),this.currentY+=8),this.currentY+=5}addLine(){this.doc.setDrawColor(Qt.colors.darkGray),this.doc.line(this.margins.left,this.currentY,this.pageWidth-this.margins.right,this.currentY),this.currentY+=5}addSection(t,s=[]){return this.currentY>this.pageHeight-50&&this.addPage(),this.doc.setFontSize(Qt.fonts.subtitle),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Qt.colors.primary),this.doc.text(t,this.margins.left,this.currentY),this.currentY+=10,this.currentY}addTable(t,s,a={}){const n=this.currentY;this.doc.autoTable({head:[t],body:s,startY:n,margin:{left:this.margins.left,right:this.margins.right},styles:{fontSize:Qt.fonts.normal,cellPadding:3,overflow:"linebreak"},headStyles:{fillColor:Qt.colors.primary,textColor:[255,255,255],fontStyle:"bold"},alternateRowStyles:{fillColor:Qt.colors.lightGray},...a}),this.currentY=this.doc.lastAutoTable.finalY+10}addSummaryCards(t){const s=(this.pageWidth-this.margins.left-this.margins.right-10)/2,a=25;let n=this.margins.left,i=this.currentY;t.forEach((o,l)=>{l>0&&l%2===0&&(i+=a+5,n=this.margins.left),this.doc.setFillColor(Qt.colors.lightGray),this.doc.rect(n,i,s,a,"F"),this.doc.setDrawColor(Qt.colors.darkGray),this.doc.rect(n,i,s,a),this.doc.setFontSize(Qt.fonts.small),this.doc.setFont("helvetica","normal"),this.doc.setTextColor(Qt.colors.darkGray),this.doc.text(o.title,n+3,i+8),this.doc.setFontSize(Qt.fonts.subtitle),this.doc.setFont("helvetica","bold"),this.doc.setTextColor(Qt.colors.primary),this.doc.text(o.value,n+3,i+18),n+=s+5}),this.currentY=i+a+15}addChart(t,s){this.addSection(t),s.forEach(a=>{this.doc.setFontSize(Qt.fonts.normal),this.doc.setTextColor(Qt.colors.text),this.doc.text(`${a.label}: ${a.value}`,this.margins.left+5,this.currentY),this.currentY+=5}),this.currentY+=5}addPage(){this.doc.addPage(),this.currentY=this.margins.top}addFooter(){const t=this.doc.internal.getNumberOfPages();for(let s=1;s<=t;s++)this.doc.setPage(s),this.doc.setDrawColor(Qt.colors.darkGray),this.doc.line(this.margins.left,this.pageHeight-15,this.pageWidth-this.margins.right,this.pageHeight-15),this.doc.setFontSize(Qt.fonts.small),this.doc.setTextColor(Qt.colors.darkGray),this.doc.text("Mestres do Café - Sistema ERP",this.margins.left,this.pageHeight-8),this.doc.text(`Página ${s} de ${t}`,this.pageWidth-this.margins.right-20,this.pageHeight-8)}download(t){this.addFooter(),this.doc.save(t)}getBlob(){return this.addFooter(),this.doc.output("blob")}}const x5=({data:e,period:t})=>{const s=()=>{var i;const a=new AP;a.addHeader("RELATÓRIO FINANCEIRO",`Período: ${(t==null?void 0:t.start)||"N/A"} a ${(t==null?void 0:t.end)||"N/A"}`);const n=[["Total a Receber",`R$ ${((e==null?void 0:e.totalReceivables)||0).toLocaleString("pt-BR")}`],["Total a Pagar",`R$ ${((e==null?void 0:e.totalPayables)||0).toLocaleString("pt-BR")}`],["Saldo Total",`R$ ${((e==null?void 0:e.totalBalance)||0).toLocaleString("pt-BR")}`],["Resultado",`R$ ${((e==null?void 0:e.netResult)||0).toLocaleString("pt-BR")}`]];if(a.addTable(["Indicador","Valor"],n),((i=e==null?void 0:e.accountsReceivable)==null?void 0:i.length)>0){const o=["Cliente","Valor","Vencimento","Status"],l=e.accountsReceivable.map(c=>{var d;return[((d=c.customer)==null?void 0:d.name)||"N/A",`R$ ${c.amount.toLocaleString("pt-BR")}`,nm(new Date(c.due_date),"dd/MM/yyyy"),c.status]});a.addTable(o,l)}a.download(`relatorio-financeiro-${nm(new Date,"yyyy-MM-dd")}.pdf`)};return r.jsxs("button",{onClick:s,className:"flex items-center space-x-2 bg-brand-brown text-white px-4 py-2 rounded-lg hover:bg-brand-brown/90 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{children:"Gerar Relatório PDF"})]})},ku=({data:e})=>{const t=()=>{var n;const s=new AP;s.addHeader("RELATÓRIO DE ESTOQUE");const a=[["Total de Produtos",((e==null?void 0:e.totalProducts)||0).toString()],["Estoque Baixo",((e==null?void 0:e.lowStockProducts)||0).toString()],["Valor Total",`R$ ${((e==null?void 0:e.totalStockValue)||0).toLocaleString("pt-BR")}`]];if(s.addTable(["Indicador","Valor"],a),((n=e==null?void 0:e.products)==null?void 0:n.length)>0){const i=["Produto","Estoque","Mínimo","Valor"],o=e.products.map(l=>[l.name,(l.current_stock||0).toString(),(l.min_stock||0).toString(),`R$ ${(l.cost_price||0).toLocaleString("pt-BR")}`]);s.addTable(i,o)}s.download(`relatorio-estoque-${nm(new Date,"yyyy-MM-dd")}.pdf`)};return r.jsxs("button",{onClick:t,className:"flex items-center space-x-2 bg-brand-brown text-white px-4 py-2 rounded-lg hover:bg-brand-brown/90 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{children:"Gerar Relatório PDF"})]})},CY=({isOpen:e,onClose:t,mode:s="create",type:a="receivable",data:n=null,onSave:i})=>{const[o,l]=j.useState({amount:"",due_date:"",description:"",status:"pendente",customer_name:"",customer_email:"",installment:"1/1",supplier_name:"",supplier_email:"",category:"geral",bank_name:"",account_number:"",agency:"",account_type:"conta-corrente",current_balance:""}),[c,d]=j.useState({}),[u,h]=j.useState(!1);j.useEffect(()=>{e&&(l(s==="edit"&&n?{...o,...n,amount:n.valor||n.amount||"",due_date:n.vencimento||n.due_date||"",customer_name:n.cliente||n.customer_name||"",supplier_name:n.fornecedor||n.supplier_name||"",current_balance:n.saldo||n.current_balance||"",bank_name:n.banco||n.bank_name||"",account_number:n.conta||n.account_number||"",agency:n.agencia||n.agency||""}:{amount:"",due_date:"",description:"",status:"pendente",customer_name:"",customer_email:"",installment:"1/1",supplier_name:"",supplier_email:"",category:"geral",bank_name:"",account_number:"",agency:"",account_type:"conta-corrente",current_balance:""}),d({}))},[e,s,n]);const f=()=>{const g={};return a==="bank"?(o.bank_name.trim()||(g.bank_name="Nome do banco é obrigatório"),o.account_number.trim()||(g.account_number="Número da conta é obrigatório"),(!o.current_balance||parseFloat(o.current_balance)<0)&&(g.current_balance="Saldo inicial deve ser um valor válido")):((!o.amount||parseFloat(o.amount)<=0)&&(g.amount="Valor deve ser maior que zero"),o.due_date||(g.due_date="Data de vencimento é obrigatória"),a==="receivable"?o.customer_name.trim()||(g.customer_name="Nome do cliente é obrigatório"):a==="payable"&&(o.supplier_name.trim()||(g.supplier_name="Nome do fornecedor é obrigatório"))),d(g),Object.keys(g).length===0},m=async g=>{if(g.preventDefault(),!!f()){h(!0);try{await i(o),t()}catch(y){console.error("Erro ao salvar:",y)}finally{h(!1)}}},p=(g,y)=>{l(N=>({...N,[g]:y})),c[g]&&d(N=>({...N,[g]:void 0}))},v=()=>`${s==="create"?"Nova":s==="edit"?"Editar":"Visualizar"} ${{receivable:"Conta a Receber",payable:"Conta a Pagar",bank:"Conta Bancária"}[a]}`;return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:v()}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[a==="bank"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Banco *"}),r.jsxs("div",{className:"relative",children:[r.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:o.bank_name,onChange:g=>p("bank_name",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.bank_name?"border-red-300":"border-gray-300"}`,placeholder:"Ex: Banco do Brasil",disabled:s==="view"})]}),c.bank_name&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),c.bank_name]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Conta"}),r.jsxs("select",{value:o.account_type,onChange:g=>p("account_type",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s==="view",children:[r.jsx("option",{value:"conta-corrente",children:"Conta Corrente"}),r.jsx("option",{value:"conta-poupanca",children:"Conta Poupança"}),r.jsx("option",{value:"conta-digital",children:"Conta Digital"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agência"}),r.jsx("input",{type:"text",value:o.agency,onChange:g=>p("agency",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: 1234-5",disabled:s==="view"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número da Conta *"}),r.jsx("input",{type:"text",value:o.account_number,onChange:g=>p("account_number",g.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.account_number?"border-red-300":"border-gray-300"}`,placeholder:"Ex: 12345-6",disabled:s==="view"}),c.account_number&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),c.account_number]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saldo Inicial *"}),r.jsxs("div",{className:"relative",children:[r.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"number",step:"0.01",value:o.current_balance,onChange:g=>p("current_balance",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.current_balance?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:s==="view"})]}),c.current_balance&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),c.current_balance]})]})]}),(a==="receivable"||a==="payable")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a==="receivable"?"Cliente *":"Fornecedor *"}),r.jsxs("div",{className:"relative",children:[r.jsx(kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:a==="receivable"?o.customer_name:o.supplier_name,onChange:g=>p(a==="receivable"?"customer_name":"supplier_name",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c[a==="receivable"?"customer_name":"supplier_name"]?"border-red-300":"border-gray-300"}`,placeholder:a==="receivable"?"Nome do cliente":"Nome do fornecedor",disabled:s==="view"})]}),c[a==="receivable"?"customer_name":"supplier_name"]&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),c[a==="receivable"?"customer_name":"supplier_name"]]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:a==="receivable"?o.customer_email:o.supplier_email,onChange:g=>p(a==="receivable"?"customer_email":"supplier_email",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@exemplo.com",disabled:s==="view"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor *"}),r.jsxs("div",{className:"relative",children:[r.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"number",step:"0.01",value:o.amount,onChange:g=>p("amount",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:s==="view"})]}),c.amount&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),c.amount]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Vencimento *"}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"date",value:o.due_date,onChange:g=>p("due_date",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.due_date?"border-red-300":"border-gray-300"}`,disabled:s==="view"})]}),c.due_date&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),c.due_date]})]})]}),a==="receivable"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parcela"}),r.jsx("input",{type:"text",value:o.installment,onChange:g=>p("installment",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1/1",disabled:s==="view"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:o.status,onChange:g=>p("status",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s==="view",children:[r.jsx("option",{value:"pendente",children:"Pendente"}),r.jsx("option",{value:"recebido",children:"Recebido"}),r.jsx("option",{value:"vencido",children:"Vencido"})]})]})]}),a==="payable"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria"}),r.jsxs("select",{value:o.category,onChange:g=>p("category",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s==="view",children:[r.jsx("option",{value:"geral",children:"Geral"}),r.jsx("option",{value:"materia-prima",children:"Matéria Prima"}),r.jsx("option",{value:"operacional",children:"Operacional"}),r.jsx("option",{value:"logistica",children:"Logística"}),r.jsx("option",{value:"marketing",children:"Marketing"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:o.status,onChange:g=>p("status",g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s==="view",children:[r.jsx("option",{value:"pendente",children:"Pendente"}),r.jsx("option",{value:"pago",children:"Pago"}),r.jsx("option",{value:"vencido",children:"Vencido"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),r.jsx("textarea",{value:o.description,onChange:g=>p("description",g.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Observações adicionais...",disabled:s==="view"})]})]}),s!=="view"&&r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",disabled:u,children:"Cancelar"}),r.jsxs("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[u?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(pi,{className:"w-4 h-4"}),s==="create"?"Criar":"Salvar"]})]}),s==="view"&&r.jsx("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200",children:r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors",children:"Fechar"})})]})]})}):null},AY=()=>{const[e,t]=j.useState("overview"),[s,a]=j.useState(!1),[n,i]=j.useState(""),[o,l]=j.useState("30d"),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,m]=j.useState([]),[p,v]=j.useState([]),[g,y]=j.useState([]),[N,S]=j.useState([]),{user:C,hasPermission:M}=ar(),{notifySuccess:D,notifyError:L}=Ta(),A=Vt(),[I,H]=j.useState(!1),[k,P]=j.useState("create"),[O,$]=j.useState("receivable"),[V,T]=j.useState(null);j.useEffect(()=>{if(!C||!M("admin")){A("/dashboard");return}F()},[C,M,A,e]);const F=async()=>{var K,J,ve,qe,ie,ne;a(!0);try{const[Ae,Fe,Ve,Ne]=await Promise.all([ja.getAccountsReceivable({status:null}),ja.getAccountsPayable({status:null}),ja.getBankAccounts(),ja.getFinancialSummary()]);Ae.success?(m(((K=Ae.data)==null?void 0:K.map(Z=>{var xe;return{id:Z.id,cliente:((xe=Z.customer)==null?void 0:xe.name)||"Cliente não informado",valor:parseFloat(Z.amount),vencimento:Z.due_date,status:Z.status,parcela:Z.installment||"1/1",tipo:"venda"}}))||[]),console.log(`✅ ${((J=Ae.data)==null?void 0:J.length)||0} contas a receber carregadas do Supabase`)):(console.log("⚠️ Tabela accounts_receivable não encontrada ou vazia"),m([])),Fe.success?(v(((ve=Fe.data)==null?void 0:ve.map(Z=>{var xe,We;return{id:Z.id,fornecedor:((xe=Z.supplier)==null?void 0:xe.name)||"Fornecedor não informado",valor:parseFloat(Z.amount),vencimento:Z.due_date,status:Z.status,categoria:((We=Z.category)==null?void 0:We.name)||"Geral",tipo:"compra"}}))||[]),console.log(`✅ ${((qe=Fe.data)==null?void 0:qe.length)||0} contas a pagar carregadas do Supabase`)):(console.log("⚠️ Tabela accounts_payable não encontrada ou vazia"),v([])),Ve.success?(S(((ie=Ve.data)==null?void 0:ie.map(Z=>({id:Z.id,banco:Z.bank_name,agencia:Z.agency,conta:Z.account_number,saldo:parseFloat(Z.current_balance||0),tipo:Z.account_type})))||[]),console.log(`✅ ${((ne=Ve.data)==null?void 0:ne.length)||0} contas bancárias carregadas do Supabase`)):(console.log("⚠️ Tabela bank_accounts não encontrada ou vazia"),S([])),y([]),h("Dados financeiros carregados com sucesso")}catch(Ae){console.error("❌ Erro ao carregar dados financeiros:",Ae),m([]),v([]),S([]),y([]),d("Erro ao carregar dados financeiros"),L("❌ Erro Financeiro","Erro ao carregar dados do módulo financeiro")}finally{a(!1)}},z=K=>{$(K),P("create"),T(null),H(!0)},se=(K,J)=>{$(J),P("edit"),T(K),H(!0)},Y=(K,J)=>{$(J),P("view"),T(K),H(!0)},_e=async(K,J)=>{if(window.confirm("Tem certeza que deseja excluir este item?"))try{console.log(`Excluindo ${J} com ID:`,K);let ve;if(J==="receivable"?(ve=await ja.updateAccountReceivable(K,{is_active:!1}),ve.success&&D("✅ Conta a Receber Excluída","Conta excluída com sucesso")):J==="payable"?(ve=await ja.updateAccountPayable(K,{is_active:!1}),ve.success&&D("✅ Conta a Pagar Excluída","Conta excluída com sucesso")):J==="bank"&&(ve=await ja.updateBankAccount(K,{is_active:!1}),ve.success&&D("✅ Conta Bancária Excluída","Conta excluída com sucesso")),ve&&!ve.success)throw new Error(ve.error);F()}catch(ve){console.error("Erro ao excluir no Supabase:",ve),L("❌ Erro",`Erro ao excluir: ${ve.message}`)}},R=async K=>{try{if(console.log("Salvando dados no Supabase:",K),k==="create"){if(O==="receivable"){const J={customer_name:K.customer_name,customer_email:K.customer_email,amount:parseFloat(K.amount),due_date:K.due_date,status:K.status,installment:K.installment,description:K.description,type:"sale"},ve=await ja.createAccountReceivable(J);if(ve.success)D("✅ Conta a Receber Criada","Conta criada com sucesso no banco de dados"),F();else throw new Error(ve.error)}else if(O==="payable"){const J={supplier_name:K.supplier_name,supplier_email:K.supplier_email,amount:parseFloat(K.amount),due_date:K.due_date,status:K.status,category:K.category,description:K.description,type:"purchase"},ve=await ja.createAccountPayable(J);if(ve.success)D("✅ Conta a Pagar Criada","Conta criada com sucesso no banco de dados"),F();else throw new Error(ve.error)}else if(O==="bank"){const J={name:`${K.bank_name} - ${K.account_number}`,bank_name:K.bank_name,account_number:K.account_number,agency:K.agency,account_type:K.account_type,current_balance:parseFloat(K.current_balance),is_active:!0},ve=await ja.createBankAccount(J);if(ve.success)D("✅ Conta Bancária Criada","Conta criada com sucesso no banco de dados"),F();else throw new Error(ve.error)}}else if(k==="edit"){if(O==="receivable"){const J={customer_name:K.customer_name,customer_email:K.customer_email,amount:parseFloat(K.amount),due_date:K.due_date,status:K.status,installment:K.installment,description:K.description},ve=await ja.updateAccountReceivable(V.id,J);if(ve.success)D("✅ Conta Atualizada","Conta atualizada com sucesso no banco de dados"),F();else throw new Error(ve.error)}else if(O==="payable"){const J={supplier_name:K.supplier_name,supplier_email:K.supplier_email,amount:parseFloat(K.amount),due_date:K.due_date,status:K.status,category:K.category,description:K.description},ve=await ja.updateAccountPayable(V.id,J);if(ve.success)D("✅ Conta Atualizada","Conta atualizada com sucesso no banco de dados"),F();else throw new Error(ve.error)}else if(O==="bank"){const J={name:`${K.bank_name} - ${K.account_number}`,bank_name:K.bank_name,account_number:K.account_number,agency:K.agency,account_type:K.account_type,current_balance:parseFloat(K.current_balance)},ve=await ja.updateBankAccount(V.id,J);if(ve.success)D("✅ Conta Atualizada","Conta bancária atualizada com sucesso"),F();else throw new Error(ve.error)}}}catch(J){throw console.error("Erro ao salvar no Supabase:",J),L("❌ Erro",`Erro ao salvar: ${J.message}`),J}},Q=Array.isArray(f)?f.reduce((K,J)=>K+((J==null?void 0:J.valor)||0),0):0,re=Array.isArray(p)?p.reduce((K,J)=>K+((J==null?void 0:J.valor)||0),0):0,te=Array.isArray(N)?N.reduce((K,J)=>K+((J==null?void 0:J.saldo)||0),0):0,le=Q-re,be=K=>{switch(K){case"recebido":case"pago":return"text-green-600 bg-green-50";case"pendente":return"text-yellow-600 bg-yellow-50";case"vencido":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},we=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(yx,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Contas a Receber"})]}),r.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:Te(Q)}),r.jsxs("p",{className:"text-green-600 text-sm",children:[f.length," títulos"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-100 rounded-2xl p-6 border border-red-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:r.jsx(jx,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-red-700 text-sm font-medium",children:"Contas a Pagar"})]}),r.jsx("h3",{className:"text-2xl font-bold text-red-900 mb-1",children:Te(re)}),r.jsxs("p",{className:"text-red-600 text-sm",children:[p.length," títulos"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-100 rounded-2xl p-6 border border-blue-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(BC,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Saldo em Bancos"})]}),r.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-1",children:Te(te)}),r.jsxs("p",{className:"text-blue-600 text-sm",children:[N.length," contas"]})]}),r.jsxs("div",{className:`bg-gradient-to-br rounded-2xl p-6 border hover:shadow-lg transition-all duration-300 ${le>=0?"from-brand-brown/10 to-amber-100 border-brand-brown/20":"from-red-50 to-rose-100 border-red-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${le>=0?"bg-brand-brown":"bg-red-500"}`,children:r.jsx(js,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:`text-sm font-medium ${le>=0?"text-brand-brown":"text-red-700"}`,children:"Saldo Líquido"})]}),r.jsx("h3",{className:`text-2xl font-bold mb-1 ${le>=0?"text-brand-brown":"text-red-900"}`,children:Te(le)}),r.jsx("p",{className:`text-sm ${le>=0?"text-brand-brown/70":"text-red-600"}`,children:le>=0?"Positivo":"Negativo"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fluxo de Caixa - Últimos 7 dias"}),r.jsx(x5,{data:{totalReceivables:Q,totalPayables:re,totalBalance:te,netResult:le,accountsReceivable:f,accountsPayable:p},period:{start:new Date(Date.now()-7*24*60*60*1e3).toLocaleDateString("pt-BR"),end:new Date().toLocaleDateString("pt-BR")}})]}),r.jsx(UG,{data:g,height:300,areas:[{dataKey:"entradas",name:"Entradas",color:"#10b981"},{dataKey:"saidas",name:"Saídas",color:"#ef4444"}],formatter:BN})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Status das Contas"}),r.jsx(Hc,{data:[{name:"Pendente",value:(Array.isArray(f)?f.filter(K=>(K==null?void 0:K.status)==="pendente").length:0)+(Array.isArray(p)?p.filter(K=>(K==null?void 0:K.status)==="pendente").length:0)},{name:"Pago/Recebido",value:(Array.isArray(f)?f.filter(K=>(K==null?void 0:K.status)==="recebido").length:0)+(Array.isArray(p)?p.filter(K=>(K==null?void 0:K.status)==="pago").length:0)},{name:"Vencido",value:(Array.isArray(f)?f.filter(K=>(K==null?void 0:K.status)==="vencido").length:0)+(Array.isArray(p)?p.filter(K=>(K==null?void 0:K.status)==="vencido").length:0)}],height:250,showLabels:!0})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Contas a Receber - Próximas"}),r.jsx("div",{className:"space-y-3",children:f.slice(0,3).map(K=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:K.cliente}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Venc: ",new Date(K.vencimento).toLocaleDateString("pt-BR")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold text-green-600",children:Te(K.valor)}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${be(K.status)}`,children:K.status})]})]},K.id))})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Contas a Pagar - Próximas"}),r.jsx("div",{className:"space-y-3",children:p.slice(0,3).map(K=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:K.fornecedor}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Venc: ",new Date(K.vencimento).toLocaleDateString("pt-BR")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold text-red-600",children:Te(K.valor)}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${be(K.status)}`,children:K.status})]})]},K.id))})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Análise Comparativa - Últimos 7 Dias"}),r.jsx(Vc,{data:g,height:300,bars:[{dataKey:"entradas",name:"Entradas",color:"#10b981"},{dataKey:"saidas",name:"Saídas",color:"#ef4444"},{dataKey:"saldo",name:"Saldo",color:"#b58150"}],formatter:BN})]})]}),oe=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contas a Receber"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:n,onChange:K=>i(K.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-brand-brown focus:border-transparent"})]}),r.jsxs("button",{onClick:()=>z("receivable"),className:"bg-brand-brown hover:bg-brand-brown/90 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Nova Conta"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Cliente"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Valor"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Vencimento"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Parcela"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(K=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:K.cliente}),r.jsx("p",{className:"text-sm text-gray-600",children:K.tipo})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-bold text-green-600",children:Te(K.valor)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-900",children:new Date(K.vencimento).toLocaleDateString("pt-BR")})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-700",children:K.parcela})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${be(K.status)}`,children:K.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>Y(K,"receivable"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>se(K,"receivable"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>_e(K.id,"receivable"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},K.id))})]})})})]}),Ce=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contas a Pagar"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar fornecedor...",value:n,onChange:K=>i(K.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-brand-brown focus:border-transparent"})]}),r.jsxs("button",{onClick:()=>z("payable"),className:"bg-brand-brown hover:bg-brand-brown/90 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Nova Conta"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Fornecedor"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Valor"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Vencimento"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Categoria"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(K=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:K.fornecedor}),r.jsx("p",{className:"text-sm text-gray-600",children:K.tipo})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-bold text-red-600",children:Te(K.valor)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-900",children:new Date(K.vencimento).toLocaleDateString("pt-BR")})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-700 capitalize",children:K.categoria.replace("-"," ")})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${be(K.status)}`,children:K.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>Y(K,"payable"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>se(K,"payable"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>_e(K.id,"payable"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},K.id))})]})})})]}),ye=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Fluxo de Caixa"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Movimentação Diária"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Data"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Entradas"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Saídas"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Saldo"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map((K,J)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-gray-900",children:new Date(K.data).toLocaleDateString("pt-BR")}),r.jsx("td",{className:"px-4 py-3 text-green-600 font-semibold",children:Te(K.entradas)}),r.jsx("td",{className:"px-4 py-3 text-red-600 font-semibold",children:Te(K.saidas)}),r.jsx("td",{className:`px-4 py-3 font-bold ${K.saldo>=0?"text-brand-brown":"text-red-600"}`,children:Te(K.saldo)})]},J))})]})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Resumo do Período"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Total Entradas"}),r.jsx("span",{className:"font-bold text-green-600",children:Te(Array.isArray(g)?g.reduce((K,J)=>K+((J==null?void 0:J.entradas)||0),0):0)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Total Saídas"}),r.jsx("span",{className:"font-bold text-red-600",children:Te(Array.isArray(g)?g.reduce((K,J)=>K+((J==null?void 0:J.saidas)||0),0):0)})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-900 font-semibold",children:"Saldo Líquido"}),r.jsx("span",{className:`font-bold ${le>=0?"text-brand-brown":"text-red-600"}`,children:Te(le)})]})})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Projeção 7 dias"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Entradas previstas"}),r.jsx("span",{className:"text-green-600 font-semibold",children:Te(45e3)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Saídas previstas"}),r.jsx("span",{className:"text-red-600 font-semibold",children:Te(38e3)})]}),r.jsx("div",{className:"border-t pt-2",children:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-900 font-semibold",children:"Projeção"}),r.jsx("span",{className:"text-brand-brown font-bold",children:Te(7e3)})]})})]})]})]})]})]}),fe=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contas Bancárias"}),r.jsxs("button",{onClick:()=>z("bank"),className:"bg-brand-brown hover:bg-brand-brown/90 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Nova Conta"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(K=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx($d,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${K.tipo==="conta-corrente"?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"}`,children:K.tipo})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:K.banco}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600 mb-4",children:[K.agencia!=="-"&&r.jsxs("p",{children:["Agência: ",K.agencia]}),r.jsxs("p",{children:["Conta: ",K.conta]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Saldo Atual"}),r.jsx("p",{className:"text-2xl font-bold text-brand-brown",children:Te(K.saldo)})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[r.jsx("button",{className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg text-sm font-medium transition-colors",children:"Extrato"}),r.jsx("button",{onClick:()=>se(K,"bank"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar conta",children:r.jsx(ws,{className:"w-4 h-4"})})]})]},K.id))}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Conciliação Bancária"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Saldo Sistema"}),r.jsx("p",{className:"text-xl font-bold text-green-700",children:Te(te)})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Saldo Bancos"}),r.jsx("p",{className:"text-xl font-bold text-blue-700",children:Te(te-150)})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[r.jsx("p",{className:"text-sm text-yellow-600 mb-1",children:"Diferença"}),r.jsx("p",{className:"text-xl font-bold text-yellow-700",children:Te(150)})]})]})]})]}),Le=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Relatórios Financeiros"}),r.jsx("div",{className:"flex gap-3",children:r.jsx(x5,{data:{totalReceivables:Q,totalPayables:re,totalBalance:te,netResult:le,accountsReceivable:f,accountsPayable:p},period:{start:new Date(Date.now()-30*24*60*60*1e3).toLocaleDateString("pt-BR"),end:new Date().toLocaleDateString("pt-BR")}})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(yx,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Contas a Receber"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Relatório detalhado de recebimentos"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Total Pendente:"}),r.jsx("span",{className:"font-semibold text-green-600",children:Te(f.filter(K=>K.status==="pendente").reduce((K,J)=>K+J.valor,0))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Títulos:"}),r.jsx("span",{className:"font-semibold",children:f.length})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:r.jsx(jx,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Contas a Pagar"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Relatório detalhado de pagamentos"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Total Pendente:"}),r.jsx("span",{className:"font-semibold text-red-600",children:Te(p.filter(K=>K.status==="pendente").reduce((K,J)=>K+J.valor,0))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Títulos:"}),r.jsx("span",{className:"font-semibold",children:p.length})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Fluxo de Caixa"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Movimentação financeira completa"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Entradas (7d):"}),r.jsx("span",{className:"font-semibold text-green-600",children:Te(g.reduce((K,J)=>K+J.entradas,0))})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Saídas (7d):"}),r.jsx("span",{className:"font-semibold text-red-600",children:Te(g.reduce((K,J)=>K+J.saidas,0))})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:r.jsx(ls,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"DRE Mensal"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Demonstrativo de resultados"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Receitas:"}),r.jsx("span",{className:"font-semibold text-green-600",children:Te(Q)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Despesas:"}),r.jsx("span",{className:"font-semibold text-red-600",children:Te(re)})]}),r.jsx("div",{className:"border-t pt-2",children:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-900 font-semibold",children:"Resultado:"}),r.jsx("span",{className:`font-bold ${le>=0?"text-brand-brown":"text-red-600"}`,children:Te(le)})]})})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:r.jsx($d,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Posição Bancária"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Saldos em todas as contas"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Total em Bancos:"}),r.jsx("span",{className:"font-semibold text-blue-600",children:Te(te)})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Contas Ativas:"}),r.jsx("span",{className:"font-semibold",children:N.length})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-brand-brown rounded-xl flex items-center justify-center",children:r.jsx(Op,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Análise Financeira"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Indicadores e tendências"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Liquidez:"}),r.jsxs("span",{className:"font-semibold text-brand-brown",children:[re>0?(te/re*100).toFixed(1):"0","%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Pendências:"}),r.jsx("span",{className:"font-semibold",children:f.filter(K=>K.status==="pendente").length+p.filter(K=>K.status==="pendente").length})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Filtros de Relatório"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Período"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-brown focus:border-transparent",children:[r.jsx("option",{children:"Últimos 30 dias"}),r.jsx("option",{children:"Último mês"}),r.jsx("option",{children:"Últimos 3 meses"}),r.jsx("option",{children:"Personalizado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-brown focus:border-transparent",children:[r.jsx("option",{children:"Todos"}),r.jsx("option",{children:"Recebimentos"}),r.jsx("option",{children:"Pagamentos"}),r.jsx("option",{children:"Transferências"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-brown focus:border-transparent",children:[r.jsx("option",{children:"Todos"}),r.jsx("option",{children:"Pendente"}),r.jsx("option",{children:"Pago"}),r.jsx("option",{children:"Vencido"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{className:"w-full bg-brand-brown hover:bg-brand-brown/90 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Aplicar Filtros"})})]})]})]}),Te=K=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(K);return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Módulo Financeiro"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Gestão completa das finanças da empresa"})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"contas-receber",label:"Contas a Receber",icon:yx},{id:"contas-pagar",label:"Contas a Pagar",icon:jx},{id:"fluxo-caixa",label:"Fluxo de Caixa",icon:Ar},{id:"bancos",label:"Bancos",icon:$d},{id:"relatorios",label:"Relatórios",icon:qC}].map(K=>r.jsxs("button",{onClick:()=>t(K.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${e===K.id?"border-brand-brown text-brand-brown":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(K.icon,{className:"w-5 h-5"}),K.label]},K.id))})})}),s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-brown"})}):r.jsxs(r.Fragment,{children:[e==="overview"&&we(),e==="contas-receber"&&oe(),e==="contas-pagar"&&Ce(),e==="fluxo-caixa"&&ye(),e==="bancos"&&fe(),e==="relatorios"&&Le()]}),c&&r.jsx("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-xl z-50",children:c}),u&&r.jsx("div",{className:"fixed top-4 right-4 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-xl z-50",children:u}),r.jsx(CY,{isOpen:I,onClose:()=>H(!1),mode:k,type:O,data:V,onSave:R})]})})},kY=({isOpen:e,onClose:t,mode:s="create",product:a=null,onSuccess:n})=>{const[i,o]=j.useState({name:"",sku:"",barcode:"",category_id:"",description:"",unit_of_measure:"kg",cost_price:"",sale_price:"",min_stock:"",max_stock:"",current_stock:"",supplier_id:"",weight:"",dimensions:"",image_url:""}),[l,c]=j.useState([]),[d,u]=j.useState([]),[h,f]=j.useState([]),[m,p]=j.useState(!1),[v,g]=j.useState(""),[y,N]=j.useState({}),{notifySuccess:S,notifyError:C}=Ta(),M=[{value:"kg",label:"Quilograma"},{value:"g",label:"Grama"},{value:"un",label:"Unidade"},{value:"lt",label:"Litro"},{value:"ml",label:"Mililitro"},{value:"pc",label:"Peça"},{value:"cx",label:"Caixa"},{value:"sc",label:"Saco"}];j.useEffect(()=>{e&&(D(),s==="edit"&&a?o({name:a.name||"",sku:a.sku||"",barcode:a.barcode||"",category_id:a.category_id||"",description:a.description||"",unit_of_measure:a.unit_of_measure||"kg",cost_price:a.cost_price?a.cost_price.toString():"",sale_price:a.sale_price?a.sale_price.toString():"",min_stock:a.min_stock?a.min_stock.toString():"",max_stock:a.max_stock?a.max_stock.toString():"",current_stock:a.current_stock?a.current_stock.toString():"",supplier_id:a.supplier_id||"",weight:a.weight?a.weight.toString():"",dimensions:a.dimensions||"",image_url:a.image_url||""}):s==="create"&&o({name:"",sku:L(),barcode:"",category_id:"",description:"",unit_of_measure:"kg",cost_price:"",sale_price:"",min_stock:"10",max_stock:"100",current_stock:"0",supplier_id:"",weight:"",dimensions:"",image_url:""}),g(""),N({}))},[e,s,a]);const D=async()=>{try{const[P,O,$]=await Promise.all([ts.getProductCategories(),ts.getSuppliers(),ts.getWarehouses()]);P.success&&c(P.data),O.success&&u(O.data),$.success&&f($.data)}catch(P){console.error("Erro ao carregar opções:",P)}},L=()=>`SKU${Date.now().toString().slice(-6)}`,A=P=>{const{name:O,value:$}=P.target;o(V=>({...V,[O]:$})),y[O]&&N(V=>({...V,[O]:""}))},I=()=>{const P={};return i.name.trim()||(P.name="Nome é obrigatório"),i.sku.trim()||(P.sku="SKU é obrigatório"),i.unit_of_measure||(P.unit_of_measure="Unidade de medida é obrigatória"),i.cost_price&&isNaN(parseFloat(i.cost_price))&&(P.cost_price="Preço de custo deve ser um número válido"),i.sale_price&&isNaN(parseFloat(i.sale_price))&&(P.sale_price="Preço de venda deve ser um número válido"),i.current_stock&&isNaN(parseInt(i.current_stock))&&(P.current_stock="Estoque atual deve ser um número válido"),i.min_stock&&isNaN(parseInt(i.min_stock))&&(P.min_stock="Estoque mínimo deve ser um número válido"),i.max_stock&&isNaN(parseInt(i.max_stock))&&(P.max_stock="Estoque máximo deve ser um número válido"),N(P),Object.keys(P).length===0},H=async P=>{if(P.preventDefault(),!!I()){p(!0);try{const O={...i,cost_price:i.cost_price?parseFloat(i.cost_price):0,sale_price:i.sale_price?parseFloat(i.sale_price):0,current_stock:i.current_stock?parseInt(i.current_stock):0,min_stock:i.min_stock?parseInt(i.min_stock):0,max_stock:i.max_stock?parseInt(i.max_stock):0,weight:i.weight?parseFloat(i.weight):null,is_active:!0};let $;s==="create"?$=await ts.createProduct(O):$=await ts.updateProduct(a.id,O),$.success?(S(s==="create"?"✅ Produto Criado":"✅ Produto Atualizado",`${i.name} foi ${s==="create"?"criado":"atualizado"} com sucesso`,"/admin/estoque"),n&&n($.data),t()):(g($.error),C("❌ Erro",$.error))}catch{g("Erro interno do servidor"),C("❌ Erro","Erro interno do servidor")}finally{p(!1)}}};if(!e)return null;const k=s==="view";return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Bt,{className:"w-6 h-6"}),r.jsx("h2",{className:"text-xl font-bold",children:s==="create"?"Novo Produto":s==="edit"?"Editar Produto":"Visualizar Produto"})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:H,className:"p-6 space-y-6",children:[v&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:v})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Bt,{className:"w-5 h-5"}),"Informações Básicas"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Nome do Produto *"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:A,disabled:k,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${y.name?"border-red-300":"border-gray-200"} ${k?"bg-gray-100":""}`,placeholder:"Ex: Café Arabica Premium"}),y.name&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:y.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"SKU *"}),r.jsx("input",{type:"text",name:"sku",value:i.sku,onChange:A,disabled:k,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${y.sku?"border-red-300":"border-gray-200"} ${k?"bg-gray-100":""}`,placeholder:"SKU123456"}),y.sku&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:y.sku})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Código de Barras"}),r.jsx("input",{type:"text",name:"barcode",value:i.barcode,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"7891234567890"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Categoria"}),r.jsxs("select",{name:"category_id",value:i.category_id,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,children:[r.jsx("option",{value:"",children:"Selecione uma categoria"}),l.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Descrição"}),r.jsx("textarea",{name:"description",value:i.description,onChange:A,disabled:k,rows:3,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${k?"bg-gray-100":""}`,placeholder:"Descrição detalhada do produto..."})]})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5"}),"Preços e Estoque"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Unidade de Medida *"}),r.jsx("select",{name:"unit_of_measure",value:i.unit_of_measure,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,children:M.map(P=>r.jsx("option",{value:P.value,children:P.label},P.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Preço de Custo (R$)"}),r.jsx("input",{type:"number",step:"0.01",name:"cost_price",value:i.cost_price,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Preço de Venda (R$)"}),r.jsx("input",{type:"number",step:"0.01",name:"sale_price",value:i.sale_price,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Estoque Atual"}),r.jsx("input",{type:"number",name:"current_stock",value:i.current_stock,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Estoque Mínimo"}),r.jsx("input",{type:"number",name:"min_stock",value:i.min_stock,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"10"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Estoque Máximo"}),r.jsx("input",{type:"number",name:"max_stock",value:i.max_stock,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"100"})]})]})]}),r.jsxs("div",{className:"bg-amber-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(ls,{className:"w-5 h-5"}),"Informações Adicionais"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Fornecedor"}),r.jsxs("select",{name:"supplier_id",value:i.supplier_id,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,children:[r.jsx("option",{value:"",children:"Selecione um fornecedor"}),d.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Peso (kg)"}),r.jsx("input",{type:"number",step:"0.001",name:"weight",value:i.weight,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"0.000"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Dimensões (L x A x P)"}),r.jsx("input",{type:"text",name:"dimensions",value:i.dimensions,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"Ex: 30x20x15 cm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"URL da Imagem"}),r.jsx("input",{type:"url",name:"image_url",value:i.image_url,onChange:A,disabled:k,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${k?"bg-gray-100":""}`,placeholder:"https://exemplo.com/imagem.jpg"})]})]})]}),!k&&r.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold px-8 py-3 rounded-xl transition-all duration-300 flex items-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s==="create"?"Criando...":"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pi,{className:"w-5 h-5"}),s==="create"?"Criar Produto":"Salvar Alterações"]})})]}),k&&r.jsx("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200",children:r.jsxs("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5"}),"Fechar"]})})]})]})})},EY=({isOpen:e,onClose:t,mode:s="create",data:a=null,onSave:n})=>{const[i,o]=j.useState({name:"",email:"",phone:"",address:"",contact_person:"",cnpj:"",is_active:!0,notes:""}),[l,c]=j.useState({}),[d,u]=j.useState(!1);j.useEffect(()=>{e&&(o(s==="edit"&&a?{name:a.name||"",email:a.email||"",phone:a.phone||"",address:a.address||"",contact_person:a.contact_person||"",cnpj:a.cnpj||"",is_active:a.is_active!==void 0?a.is_active:!0,notes:a.notes||""}:{name:"",email:"",phone:"",address:"",contact_person:"",cnpj:"",is_active:!0,notes:""}),c({}))},[e,s,a]);const h=()=>{const v={};return i.name.trim()||(v.name="Nome do fornecedor é obrigatório"),i.email&&!/\S+@\S+\.\S+/.test(i.email)&&(v.email="Email deve ter formato válido"),i.cnpj&&i.cnpj.length>0&&i.cnpj.length<14&&(v.cnpj="CNPJ deve ter 14 dígitos"),c(v),Object.keys(v).length===0},f=async v=>{if(v.preventDefault(),!!h()){u(!0);try{await n(i),t()}catch(g){console.error("Erro ao salvar:",g)}finally{u(!1)}}},m=(v,g)=>{o(y=>({...y,[v]:g})),l[v]&&c(y=>({...y,[v]:void 0}))},p=()=>`${s==="create"?"Novo":s==="edit"?"Editar":"Visualizar"} Fornecedor`;return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:p()}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Fornecedor *"}),r.jsxs("div",{className:"relative",children:[r.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:i.name,onChange:v=>m("name",v.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.name?"border-red-300":"border-gray-300"}`,placeholder:"Ex: Fazenda São João",disabled:s==="view"})]}),l.name&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),l.name]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNPJ"}),r.jsx("input",{type:"text",value:i.cnpj,onChange:v=>m("cnpj",v.target.value.replace(/\D/g,"")),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.cnpj?"border-red-300":"border-gray-300"}`,placeholder:"12345678901234",maxLength:14,disabled:s==="view"}),l.cnpj&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),l.cnpj]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"email",value:i.email,onChange:v=>m("email",v.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.email?"border-red-300":"border-gray-300"}`,placeholder:"contato@fornecedor.com",disabled:s==="view"})]}),l.email&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),l.email]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),r.jsxs("div",{className:"relative",children:[r.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"tel",value:i.phone,onChange:v=>m("phone",v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 99999-9999",disabled:s==="view"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pessoa de Contato"}),r.jsxs("div",{className:"relative",children:[r.jsx(kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:i.contact_person,onChange:v=>m("contact_person",v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do responsável",disabled:s==="view"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço"}),r.jsxs("div",{className:"relative",children:[r.jsx(hs,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),r.jsx("textarea",{value:i.address,onChange:v=>m("address",v.target.value),rows:2,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Endereço completo do fornecedor",disabled:s==="view"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:i.is_active,onChange:v=>m("is_active",v.target.value==="true"),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s==="view",children:[r.jsx("option",{value:!0,children:"Ativo"}),r.jsx("option",{value:!1,children:"Inativo"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),r.jsx("textarea",{value:i.notes,onChange:v=>m("notes",v.target.value),rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Observações sobre o fornecedor...",disabled:s==="view"})]})]}),s!=="view"&&r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",disabled:d,children:"Cancelar"}),r.jsxs("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[d?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(pi,{className:"w-4 h-4"}),s==="create"?"Criar":"Salvar"]})]}),s==="view"&&r.jsx("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200",children:r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors",children:"Fechar"})})]})]})}):null},OY=()=>{const[e,t]=j.useState("overview"),[s,a]=j.useState(!1),[n,i]=j.useState(""),[o,l]=j.useState("30d"),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,m]=j.useState([]),[p,v]=j.useState([]),[g,y]=j.useState([]),[N,S]=j.useState([]),[C,M]=j.useState([]),[D,L]=j.useState(!1),[A,I]=j.useState(null),[H,k]=j.useState("create"),[P,O]=j.useState(!1),[$,V]=j.useState(null),[T,F]=j.useState("create"),{user:z,hasPermission:se}=ar(),{notifySuccess:Y,notifyError:_e}=Ta(),R=Vt();j.useEffect(()=>{if(!z||!se("admin")){R("/dashboard");return}Q()},[z,se,R]);const Q=async()=>{a(!0),d(""),console.log("🔄 Carregando dados de estoque...");try{console.log("📦 Buscando produtos...");const Z=await ts.getProducts().catch(Ue=>(console.error("❌ Erro ao buscar produtos:",Ue),{success:!0,data:[]}));console.log("🏭 Buscando fornecedores...");const xe=await ts.getSuppliers().catch(Ue=>(console.error("❌ Erro ao buscar fornecedores:",Ue),{success:!0,data:[]}));console.log("📂 Buscando categorias...");const We=await ts.getProductCategories().catch(Ue=>(console.error("❌ Erro ao buscar categorias:",Ue),{success:!0,data:[]}));console.log("🏬 Buscando depósitos...");const ht=await ts.getWarehouses().catch(Ue=>(console.error("❌ Erro ao buscar depósitos:",Ue),{success:!0,data:[]}));console.log("📊 Buscando movimentações...");const Qe=await ts.getStockMovements().catch(Ue=>(console.error("❌ Erro ao buscar movimentações:",Ue),{success:!0,data:[]}));Z.success&&Z.data&&Z.data.length>0?(console.log(`✅ ${Z.data.length} produtos carregados do Supabase`),m(Z.data.map(Ue=>{var ze,ot;return{id:Ue.id,nome:Ue.name,sku:Ue.sku||`SKU-${Ue.id}`,categoria:((ze=Ue.category)==null?void 0:ze.name)||Ue.category||"Geral",estoque_atual:Ue.current_stock||Ue.stock||0,estoque_minimo:Ue.min_stock||10,estoque_maximo:Ue.max_stock||100,custo_unitario:Ue.cost_price||0,preco_venda:Ue.sale_price||Ue.price||0,localizacao:Ue.location||"A definir",status:Ue.current_stock>(Ue.min_stock||10)?"normal":"baixo",fornecedor:((ot=Ue.supplier)==null?void 0:ot.name)||"A definir",ultima_movimentacao:Ue.updated_at||Ue.created_at||new Date().toISOString()}}))):(console.log("⚠️ Tabela products não encontrada ou vazia"),m([])),xe.success&&xe.data&&xe.data.length>0?(console.log(`✅ ${xe.data.length} fornecedores carregados do Supabase`),y(xe.data)):(console.log("⚠️ Tabela suppliers não encontrada ou vazia"),y([])),We.success&&We.data&&We.data.length>0?(console.log(`✅ ${We.data.length} categorias carregadas do Supabase`),S(We.data)):(console.log("⚠️ Tabela product_categories não encontrada ou vazia"),S([])),ht.success&&ht.data&&ht.data.length>0?(console.log(`✅ ${ht.data.length} depósitos carregados do Supabase`),M(ht.data)):(console.log("⚠️ Tabela warehouses não encontrada ou vazia"),M([])),Qe.success&&Qe.data&&Qe.data.length>0?(console.log(`✅ ${Qe.data.length} movimentações carregadas do Supabase`),v(Qe.data.map(Ue=>{var ze,ot;return{id:Ue.id,produto:((ze=Ue.product)==null?void 0:ze.name)||"Produto não encontrado",tipo:Ue.movement_type,quantidade:Ue.quantity,motivo:Ue.reason||"Não informado",documento:Ue.document_number||"-",data:Ue.created_at,usuario:((ot=Ue.user)==null?void 0:ot.name)||"Sistema",custo_total:Ue.total_cost||0}}))):(console.log("⚠️ Tabela stock_movements não encontrada ou vazia"),v([])),console.log("✅ Dados de estoque carregados com sucesso!"),h("Dados carregados com sucesso")}catch(Z){console.error("❌ Erro geral ao carregar dados de estoque:",Z),m([]),y([]),S([]),M([]),v([]),d("Erro ao carregar dados de estoque"),_e("❌ Erro Estoque","Erro ao carregar dados do módulo de estoque")}finally{a(!1)}},re=()=>{I(null),k("create"),L(!0)},te=Z=>{I(Z),k("edit"),L(!0)},le=Z=>{I(Z),k("view"),L(!0)},be=async Z=>{if(window.confirm("Tem certeza que deseja excluir este produto?"))try{const xe=await ts.deleteProduct(Z);xe.success?(Y("✅ Produto Excluído","Produto excluído com sucesso"),Q()):_e("❌ Erro",xe.error)}catch{_e("❌ Erro","Erro ao excluir produto")}},we=()=>{Q(),L(!1)},oe=()=>{V(null),F("create"),O(!0)},Ce=Z=>{V(Z),F("edit"),O(!0)},ye=Z=>{V(Z),F("view"),O(!0)},fe=async Z=>{if(window.confirm("Tem certeza que deseja excluir este fornecedor?"))try{const xe=await ts.updateSupplier(Z,{is_active:!1});if(xe.success)Y("✅ Fornecedor Excluído","Fornecedor excluído com sucesso"),Q();else throw new Error(xe.error)}catch(xe){console.error("Erro ao excluir fornecedor:",xe),_e("❌ Erro",`Erro ao excluir fornecedor: ${xe.message}`)}},Le=async Z=>{try{if(T==="create"){const xe={name:Z.name,email:Z.email,phone:Z.phone,address:Z.address,contact_person:Z.contact_person,cnpj:Z.cnpj,is_active:Z.is_active,notes:Z.notes},We=await ts.createSupplier(xe);if(We.success)Y("✅ Fornecedor Criado","Fornecedor criado com sucesso no banco de dados"),Q();else throw new Error(We.error)}else if(T==="edit"){const xe={name:Z.name,email:Z.email,phone:Z.phone,address:Z.address,contact_person:Z.contact_person,cnpj:Z.cnpj,is_active:Z.is_active,notes:Z.notes},We=await ts.updateSupplier($.id,xe);if(We.success)Y("✅ Fornecedor Atualizado","Fornecedor atualizado com sucesso no banco de dados"),Q();else throw new Error(We.error)}O(!1)}catch(xe){throw console.error("Erro ao salvar fornecedor no Supabase:",xe),_e("❌ Erro",`Erro ao salvar fornecedor: ${xe.message}`),xe}},Te=f.length,K=f.filter(Z=>Z.status==="baixo").length,J=f.reduce((Z,xe)=>Z+xe.estoque_atual*xe.custo_unitario,0),ve=p.length,qe=Z=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Z),ie=Z=>{switch(Z){case"normal":return"text-green-600 bg-green-50";case"baixo":return"text-red-600 bg-red-50";case"alto":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}},ne=()=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-100 rounded-2xl p-6 border border-blue-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(Bt,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Total Produtos"})]}),r.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-1",children:Te}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Itens cadastrados"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-100 rounded-2xl p-6 border border-red-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:r.jsx(Ji,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-red-700 text-sm font-medium",children:"Estoque Baixo"})]}),r.jsx("h3",{className:"text-2xl font-bold text-red-900 mb-1",children:K}),r.jsx("p",{className:"text-red-600 text-sm",children:"Requer atenção"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Valor Total"})]}),r.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:qe(J)}),r.jsx("p",{className:"text-green-600 text-sm",children:"Investido em estoque"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-2xl p-6 border border-purple-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:r.jsx(oa,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-purple-700 text-sm font-medium",children:"Movimentações"})]}),r.jsx("h3",{className:"text-2xl font-bold text-purple-900 mb-1",children:ve}),r.jsx("p",{className:"text-purple-600 text-sm",children:"Este mês"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📦 Produtos por Categoria"}),r.jsx(Hc,{data:[{name:"Cafés Especiais",value:f.filter(Z=>Z.categoria==="Cafés Especiais").length},{name:"Equipamentos",value:f.filter(Z=>Z.categoria==="Equipamentos").length},{name:"Acessórios",value:f.filter(Z=>Z.categoria==="Acessórios").length},{name:"Outros",value:f.filter(Z=>!["Cafés Especiais","Equipamentos","Acessórios"].includes(Z.categoria)).length}],height:250,showLabels:!0})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📊 Status do Estoque"}),r.jsx(Vc,{data:[{name:"Normal",value:f.filter(Z=>Z.status==="normal").length},{name:"Baixo",value:f.filter(Z=>Z.status==="baixo").length},{name:"Alto",value:f.filter(Z=>Z.status==="alto").length}],height:250,bars:[{dataKey:"value",name:"Produtos",color:"#3b82f6"}]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"⚠️ Estoque Baixo - Ação Necessária"}),r.jsxs("div",{className:"space-y-3",children:[f.filter(Z=>Z.status==="baixo").slice(0,5).map(Z=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-200",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:Z.nome}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Loc: ",Z.localizacao," | Min: ",Z.estoque_minimo]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-red-600",children:[Z.estoque_atual," unid."]}),r.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded mt-1 hover:bg-red-700",children:"Repor"})]})]},Z.id)),f.filter(Z=>Z.status==="baixo").length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(dr,{className:"w-12 h-12 text-green-500 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:"Todos os produtos estão com estoque adequado!"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📈 Top Produtos por Valor"}),r.jsx("div",{className:"space-y-3",children:f.sort((Z,xe)=>xe.estoque_atual*xe.preco_venda-Z.estoque_atual*Z.preco_venda).slice(0,5).map((Z,xe)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-xl border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:xe+1}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:Z.nome}),r.jsxs("p",{className:"text-sm text-gray-600",children:[Z.estoque_atual," unidades"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"font-bold text-blue-600",children:qe(Z.estoque_atual*Z.preco_venda)})})]},Z.id))})]})]})]}),Ae=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Produtos"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:n,onChange:Z=>i(Z.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("button",{onClick:re,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Novo Produto"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Produto"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"SKU"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Categoria"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Estoque"}),r.jsx("th",{className:"text-right px-6 py-4 font-semibold text-gray-900",children:"Preços"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:f.filter(Z=>Z.nome.toLowerCase().includes(n.toLowerCase())||Z.sku.toLowerCase().includes(n.toLowerCase())).map(Z=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:Z.nome}),r.jsx("p",{className:"text-sm text-gray-600",children:Z.fornecedor})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:Z.sku})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-700",children:Z.categoria})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-gray-900",children:Z.estoque_atual}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",Z.estoque_minimo," | Max: ",Z.estoque_maximo]})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Custo: ",qe(Z.custo_unitario)]}),r.jsxs("div",{className:"font-semibold text-green-600",children:["Venda: ",qe(Z.preco_venda)]})]})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ie(Z.status)}`,children:Z.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>le(Z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>te(Z),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>be(Z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},Z.id))})]})})})]}),Fe=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Movimentações de Estoque"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar movimentações...",value:n,onChange:Z=>i(Z.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("select",{value:o,onChange:Z=>l(Z.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"7d",children:"Últimos 7 dias"}),r.jsx("option",{value:"30d",children:"Últimos 30 dias"}),r.jsx("option",{value:"90d",children:"Últimos 3 meses"}),r.jsx("option",{value:"all",children:"Todas"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Data/Hora"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Produto"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Tipo"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Quantidade"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Motivo"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Documento"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Usuário"}),r.jsx("th",{className:"text-right px-6 py-4 font-semibold text-gray-900",children:"Valor Total"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:p.filter(Z=>Z.produto.toLowerCase().includes(n.toLowerCase())||Z.motivo.toLowerCase().includes(n.toLowerCase())||Z.documento.toLowerCase().includes(n.toLowerCase())).map(Z=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:new Date(Z.data).toLocaleDateString("pt-BR")}),r.jsx("p",{className:"text-sm text-gray-600",children:new Date(Z.data).toLocaleTimeString("pt-BR")})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"font-medium text-gray-900",children:Z.produto})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Z.tipo==="entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Z.tipo==="entrada"?"↗️ Entrada":"↙️ Saída"})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"font-bold text-gray-900",children:Z.quantidade})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-700",children:Z.motivo})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:Z.documento})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-700",children:Z.usuario})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"font-semibold text-gray-900",children:qe(Z.custo_total)})})]},Z.id))})]})}),p.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(oa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma movimentação encontrada"}),r.jsx("p",{className:"text-gray-600",children:"As movimentações de estoque aparecerão aqui."})]})]})]}),Ve=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Fornecedores"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar fornecedores...",value:n,onChange:Z=>i(Z.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("button",{onClick:oe,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Novo Fornecedor"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.filter(Z=>Z.name.toLowerCase().includes(n.toLowerCase())||Z.email&&Z.email.toLowerCase().includes(n.toLowerCase())).map(Z=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(Ka,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:Z.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Z.is_active?"Ativo":"Inativo"})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>ye(Z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Ce(Z),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>fe(Z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[Z.email&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(us,{className:"w-4 h-4"}),r.jsx("span",{children:Z.email})]}),Z.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(us,{className:"w-4 h-4"}),r.jsx("span",{children:Z.phone})]}),Z.address&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsx("span",{children:Z.address})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Produtos fornecidos:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:f.filter(xe=>xe.fornecedor===Z.name).length})]})}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 px-4 py-2 rounded-xl font-medium transition-colors",children:"Ver Produtos"})})]},Z.id))}),g.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ka,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum fornecedor cadastrado"}),r.jsx("p",{className:"text-gray-600",children:"Cadastre fornecedores para gerenciar suas compras."})]})]}),Ne=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Relatórios de Estoque"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Relatório de Estoque",description:"Posição atual completa do estoque",icon:Bt,color:"blue"},{title:"Movimentações",description:"Histórico de entradas e saídas",icon:oa,color:"green"},{title:"Produtos Críticos",description:"Produtos com estoque baixo",icon:Ji,color:"red"}].map((Z,xe)=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 bg-${Z.color}-500 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform`,children:r.jsx(Z.icon,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:Z.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Z.description}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(ku,{data:{products:f,movements:p,suppliers:g,totalValue:J,lowStockCount:K},type:Z.title.toLowerCase().includes("movimentação")?"movements":"general"})})]},xe))})]});return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Módulo Estoque & Logística"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Gestão completa do estoque e operações logísticas"})]}),c&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:c})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:u})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"produtos",label:"Produtos",icon:Bt},{id:"movimentacoes",label:"Movimentações",icon:oa},{id:"fornecedores",label:"Fornecedores",icon:Ka},{id:"relatorios",label:"Relatórios",icon:ns}].map(Z=>r.jsxs("button",{onClick:()=>t(Z.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${e===Z.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Z.icon,{className:"w-5 h-5"}),Z.label]},Z.id))})})}),s?r.jsxs("div",{className:"flex items-center justify-center py-20",children:[r.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando dados..."})]}):r.jsxs(r.Fragment,{children:[e==="overview"&&ne(),e==="produtos"&&Ae(),e==="movimentacoes"&&Fe(),e==="fornecedores"&&Ve(),e==="relatorios"&&Ne()]}),r.jsx(kY,{isOpen:D,onClose:()=>L(!1),mode:H,product:A,onSuccess:we}),r.jsx(EY,{isOpen:P,onClose:()=>O(!1),mode:T,data:$,onSave:Le})]})})},TY=({isOpen:e,onClose:t,product:s=null,onSuccess:a})=>{const[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState({warehouse_id:"",zone:"",aisle:"",shelf:"",position:"",quantity:0,max_capacity:100}),[f,m]=j.useState(!1),[p,v]=j.useState(""),{notifySuccess:g,notifyError:y}=Ta();j.useEffect(()=>{e&&(N(),s&&S())},[e,s]);const N=async()=>{try{const{data:A,error:I}=await ge.from("warehouses").select("*").eq("is_active",!0).order("name");I?(console.error("Erro ao buscar depósitos:",I),l([])):(l(A||[]),console.log(`✅ ${(A==null?void 0:A.length)||0} depósitos carregados do Supabase`))}catch(A){console.error("❌ Erro ao carregar depósitos:",A),l([])}},S=async()=>{try{const{data:A,error:I}=await ge.from("product_locations").select(`
          *,
          warehouse:warehouses(name)
        `).eq("product_id",s.id).order("position");if(I)console.error("Erro ao buscar localizações:",I),i([]);else{const H=(A==null?void 0:A.map(k=>{var P;return{id:k.id,warehouse_id:k.warehouse_id,warehouse_name:((P=k.warehouse)==null?void 0:P.name)||"Depósito não encontrado",zone:k.zone,aisle:k.aisle,shelf:k.shelf,position:k.position,quantity:k.quantity,max_capacity:k.max_capacity,last_movement:k.updated_at||k.created_at}}))||[];i(H),console.log(`✅ ${H.length} localizações carregadas do Supabase`)}}catch(A){console.error("❌ Erro ao carregar localizações:",A),i([])}},C=()=>{const{zone:A,aisle:I,shelf:H}=u;return A&&I&&H?`${A}${I}-${H.padStart(2,"0")}`:""},M=async()=>{if(!u.warehouse_id||!u.zone||!u.aisle||!u.shelf){v("Preencha todos os campos obrigatórios");return}m(!0);try{const A=C(),I=o.find(k=>k.id===u.warehouse_id),H={id:`loc-${Date.now()}`,warehouse_id:u.warehouse_id,warehouse_name:(I==null?void 0:I.name)||"",zone:u.zone,aisle:u.aisle,shelf:u.shelf,position:A,quantity:parseInt(u.quantity)||0,max_capacity:parseInt(u.max_capacity)||100,last_movement:new Date().toISOString().split("T")[0]};i(k=>[...k,H]),h({warehouse_id:"",zone:"",aisle:"",shelf:"",position:"",quantity:0,max_capacity:100}),g("✅ Localização Adicionada",`Nova localização ${A} cadastrada`),v("")}catch{v("Erro ao adicionar localização"),y("❌ Erro","Erro ao adicionar localização")}finally{m(!1)}},D=async A=>{window.confirm("Tem certeza que deseja remover esta localização?")&&(i(I=>I.filter(H=>H.id!==A)),g("✅ Localização Removida","Localização removida com sucesso"))},L=async()=>{a&&a(n),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-orange-500 to-amber-600 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hs,{className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:"Localização Física"}),r.jsx("p",{className:"text-orange-100",children:s?`Produto: ${s.nome}`:"Gerenciar localizações"})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg",children:r.jsx(Nr,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[p&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl",children:p}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Nova Localização"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depósito"}),r.jsxs("select",{value:u.warehouse_id,onChange:A=>h(I=>({...I,warehouse_id:A.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Selecione um depósito"}),o.map(A=>r.jsxs("option",{value:A.id,children:[A.name," (",A.code,")"]},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zona"}),r.jsx("input",{type:"text",placeholder:"A, B, C...",value:u.zone,onChange:A=>h(I=>({...I,zone:A.target.value.toUpperCase()})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",maxLength:"1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Corredor"}),r.jsx("input",{type:"text",placeholder:"1, 2, 3...",value:u.aisle,onChange:A=>h(I=>({...I,aisle:A.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",maxLength:"2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prateleira"}),r.jsx("input",{type:"text",placeholder:"01, 02, 03...",value:u.shelf,onChange:A=>h(I=>({...I,shelf:A.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",maxLength:"2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),r.jsx("input",{type:"number",value:u.quantity,onChange:A=>h(I=>({...I,quantity:A.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacidade Máxima"}),r.jsx("input",{type:"number",value:u.max_capacity,onChange:A=>h(I=>({...I,max_capacity:A.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",min:"0"})]})]}),C()&&r.jsxs("div",{className:"mt-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Código da Localização:"}),r.jsx("p",{className:"text-xl font-mono font-bold text-orange-600",children:C()})]}),r.jsx("button",{onClick:M,disabled:f,className:"w-full mt-4 bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Adicionando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Adicionar Localização"]})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(zC,{className:"w-5 h-5"}),"Localizações Atuais"]}),n.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(hs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{children:"Nenhuma localização cadastrada"})]}):r.jsx("div",{className:"space-y-4",children:n.map(A=>r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(Bt,{className:"w-5 h-5 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-lg font-bold text-gray-900",children:A.position}),r.jsx("p",{className:"text-sm text-gray-600",children:A.warehouse_name})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Quantidade:"}),r.jsx("span",{className:"ml-2 font-semibold",children:A.quantity})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Capacidade:"}),r.jsx("span",{className:"ml-2 font-semibold",children:A.max_capacity})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Ocupação:"}),r.jsxs("span",{className:"ml-2 font-semibold",children:[Math.round(A.quantity/A.max_capacity*100),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Última Movimentação:"}),r.jsx("span",{className:"ml-2 font-semibold",children:new Date(A.last_movement).toLocaleDateString("pt-BR")})]})]}),r.jsx("div",{className:"mt-3",children:r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${A.quantity/A.max_capacity>.8?"bg-red-500":A.quantity/A.max_capacity>.6?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(A.quantity/A.max_capacity*100,100)}%`}})})})]}),r.jsx("button",{onClick:()=>D(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(as,{className:"w-4 h-4"})})]})},A.id))})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Cancelar"}),r.jsxs("button",{onClick:L,className:"px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(pi,{className:"w-4 h-4"}),"Salvar Localizações"]})]})]})}):null},LY=({isOpen:e,onClose:t,onBarcodeScanned:s,mode:a="scan"})=>{const[n,i]=j.useState(!1),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,m]=j.useState(""),[p,v]=j.useState([]),[g,y]=j.useState(null),N=j.useRef(null),S=j.useRef(null),C=j.useRef(null),{notifySuccess:M,notifyError:D}=Ta();j.useEffect(()=>{e&&L()},[e]);const L=async()=>{try{const{data:V,error:T}=await ge.from("products").select("id, name, sku, barcode, price").not("barcode","is",null).eq("is_active",!0).order("name");T?(console.error("Erro ao buscar produtos:",T),v([])):(v(V||[]),console.log(`✅ ${(V==null?void 0:V.length)||0} produtos com código de barras carregados do Supabase`))}catch(V){console.error("❌ Erro ao carregar produtos:",V),v([])}},A=async()=>{try{d("");const V=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});C.current=V,N.current&&(N.current.srcObject=V,N.current.play()),i(!0)}catch(V){d("Erro ao acessar câmera. Verifique as permissões."),console.error("Erro ao acessar câmera:",V)}},I=()=>{C.current&&(C.current.getTracks().forEach(V=>V.stop()),C.current=null),i(!1)},H=V=>{const T=p.find(F=>F.barcode===V);T?(l(V),y(T),M("✅ Código Lido",`Produto: ${T.name}`),s&&s(T)):(d("Produto não encontrado"),D("❌ Produto não encontrado","Código de barras não cadastrado"))},k=()=>{f.length>=8?H(f):d("Código deve ter pelo menos 8 dígitos")},P=()=>{const V=Date.now().toString(),T=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),F="789"+V.slice(-6)+T;let z=0;for(let _e=0;_e<12;_e++){const R=parseInt(F[_e]);z+=_e%2===0?R:R*3}const se=(10-z%10)%10,Y=F+se;h(Y),M("✅ Código Gerado",`Novo código: ${Y}`)},O=()=>{const V=S.current;if(V&&u){const T=V.getContext("2d");V.width=300,V.height=100,T.fillStyle="#000000",T.fillRect(0,0,V.width,V.height);for(let z=0;z<u.length;z++){const Y=parseInt(u[z])+1,_e=z*20;T.fillStyle=z%2===0?"#000000":"#ffffff",T.fillRect(_e,10,Y,60)}T.fillStyle="#000000",T.font="14px monospace",T.textAlign="center",T.fillText(u,V.width/2,90);const F=document.createElement("a");F.download=`barcode-${u}.png`,F.href=V.toDataURL(),F.click(),M("✅ Download Concluído","Código de barras baixado")}},$=()=>{I(),l(""),y(null),d(""),h(""),m(""),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Zh,{className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:a==="scan"?"Scanner de Código de Barras":"Gerador de Código de Barras"}),r.jsx("p",{className:"text-blue-100",children:a==="scan"?"Escaneie ou digite o código manualmente":"Gerar novos códigos de barras"})]})]}),r.jsx("button",{onClick:$,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg",children:r.jsx(Nr,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[c&&r.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),c]}),a==="scan"?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(wx,{className:"w-5 h-5"}),"Scanner de Câmera"]}),r.jsx("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:n?r.jsxs("div",{children:[r.jsx("video",{ref:N,className:"w-full max-w-md mx-auto rounded-lg mb-4",autoPlay:!0,playsInline:!0}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx("button",{onClick:I,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Parar Scanner"}),r.jsx("button",{onClick:()=>H("7891234567890"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Simular Scan"})]})]}):r.jsxs("div",{children:[r.jsx(wx,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Clique para ativar a câmera e escanear código de barras"}),r.jsxs("button",{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-medium transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(wx,{className:"w-5 h-5"}),"Ativar Câmera"]})]})}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(os,{className:"w-4 h-4"}),"Entrada Manual"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{type:"text",placeholder:"Digite o código de barras",value:f,onChange:V=>m(V.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:V=>V.key==="Enter"&&k()}),r.jsx("button",{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-medium transition-colors",children:"Buscar"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Bt,{className:"w-5 h-5"}),"Resultado"]}),g?r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx(Xg,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-green-900",children:"Produto Encontrado!"}),r.jsxs("p",{className:"text-green-700",children:["Código: ",o]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[r.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:g.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"SKU:"}),r.jsx("span",{className:"ml-2 font-semibold",children:g.sku})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Preço:"}),r.jsxs("span",{className:"ml-2 font-semibold text-green-600",children:["R$ ",g.price.toFixed(2)]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-500",children:"Código de Barras:"}),r.jsx("span",{className:"ml-2 font-mono font-semibold",children:g.barcode})]})]})]})]}):r.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[r.jsx(Zh,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Nenhum código escaneado ainda"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Produtos Cadastrados"}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:p.map(V=>r.jsx("div",{onClick:()=>H(V.barcode),className:"p-3 bg-gray-50 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:V.name}),r.jsx("p",{className:"text-sm text-gray-600 font-mono",children:V.barcode})]}),r.jsxs("span",{className:"text-green-600 font-semibold",children:["R$ ",V.price.toFixed(2)]})]})},V.id))})]})]})]}):r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 text-center flex items-center justify-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Gerador de Código de Barras"]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[r.jsxs("button",{onClick:P,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-medium transition-colors flex items-center gap-2 mx-auto mb-6",children:[r.jsx(gr,{className:"w-5 h-5"}),"Gerar Novo Código"]}),u&&r.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Código Gerado:"}),r.jsx("p",{className:"text-2xl font-mono font-bold text-gray-900",children:u})]}),r.jsx("canvas",{ref:S,className:"border border-gray-200 rounded-lg mb-4 mx-auto",style:{maxWidth:"100%"}}),r.jsxs("button",{onClick:O,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(ns,{className:"w-4 h-4"}),"Baixar Imagem"]})]})]})]})]}),r.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:r.jsx("button",{onClick:$,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Fechar"})})]})}):null},MY=({isOpen:e,onClose:t,product:s=null,onSuccess:a})=>{const[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState({batch_number:"",manufacturing_date:"",expiry_date:"",supplier_batch:"",quantity:0,unit_cost:0,quality_status:"aprovado",notes:""}),[u,h]=j.useState(!1),[f,m]=j.useState(""),[p,v]=j.useState("batches"),[g,y]=j.useState(!1),{notifySuccess:N,notifyError:S}=Ta();j.useEffect(()=>{e&&C()},[e,s]);const C=async()=>{y(!0);try{const{data:P,error:O}=await ge.from("product_batches").select(`
          *,
          product:products(name, sku)
        `).eq("product_id",s.id).order("created_at",{ascending:!1});O?(console.error("Erro ao buscar lotes:",O),i([])):(i(P||[]),console.log(`✅ ${(P==null?void 0:P.length)||0} lotes carregados do Supabase`));const{data:$,error:V}=await ge.from("batch_movements").select(`
          *,
          batch:product_batches(batch_number),
          user:users(name)
        `).eq("product_id",s.id).order("created_at",{ascending:!1}).limit(20);V?(console.error("Erro ao buscar movimentações de lotes:",V),l([])):(l($||[]),console.log(`✅ ${($==null?void 0:$.length)||0} movimentações de lotes carregadas`))}catch(P){console.error("❌ Erro ao carregar dados de lotes:",P),i([]),l([])}finally{y(!1)}},M=()=>{const P=new Date().getFullYear(),O=String(new Date().getMonth()+1).padStart(2,"0"),$=String(n.length+1).padStart(3,"0");return`LOT${P}${O}${$}`},D=(P,O=6)=>{if(!P)return"";const $=new Date(P);return $.setMonth($.getMonth()+O),$.toISOString().split("T")[0]},L=async()=>{if(!c.batch_number||!c.manufacturing_date||!c.quantity){m("Preencha todos os campos obrigatórios");return}h(!0);try{const P={id:`batch-${Date.now()}`,batch_number:c.batch_number,manufacturing_date:c.manufacturing_date,expiry_date:c.expiry_date||D(c.manufacturing_date),supplier_batch:c.supplier_batch,quantity:parseInt(c.quantity),available_quantity:parseInt(c.quantity),unit_cost:parseFloat(c.unit_cost)||0,quality_status:c.quality_status,status:"ativo",location:"A1-01",notes:c.notes,created_at:new Date().toISOString().split("T")[0]};i($=>[...$,P]);const O={id:`mov-${Date.now()}`,batch_id:P.id,batch_number:P.batch_number,type:"entrada",quantity:P.quantity,date:P.created_at,reason:"Novo lote criado",document:"-",user:"Sistema"};l($=>[...$,O]),d({batch_number:"",manufacturing_date:"",expiry_date:"",supplier_batch:"",quantity:0,unit_cost:0,quality_status:"aprovado",notes:""}),N("✅ Lote Criado",`Lote ${P.batch_number} cadastrado com sucesso`),m("")}catch{m("Erro ao criar lote"),S("❌ Erro","Erro ao criar lote")}finally{h(!1)}},A=P=>{switch(P){case"ativo":return"text-green-700 bg-green-100";case"esgotado":return"text-gray-700 bg-gray-100";case"vencido":return"text-red-700 bg-red-100";case"bloqueado":return"text-orange-700 bg-orange-100";default:return"text-gray-700 bg-gray-100"}},I=P=>{switch(P){case"aprovado":return"text-green-700 bg-green-100";case"reprovado":return"text-red-700 bg-red-100";case"quarentena":return"text-yellow-700 bg-yellow-100";default:return"text-gray-700 bg-gray-100"}},H=P=>{const O=new Date,V=new Date(P)-O,T=Math.ceil(V/(1e3*60*60*24));return T<=30&&T>0},k=P=>{const O=new Date;return new Date(P)<O};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-500 to-indigo-600 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Bt,{className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:"Controle de Lotes"}),r.jsx("p",{className:"text-purple-100",children:s?`Produto: ${s.name}`:"Gerenciar lotes de estoque"})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg",children:r.jsx(Nr,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"batches",label:"Lotes Ativos",icon:Bt},{id:"movements",label:"Movimentações",icon:Ka},{id:"create",label:"Novo Lote",icon:gr}].map(P=>r.jsxs("button",{onClick:()=>v(P.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${p===P.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(P.icon,{className:"w-4 h-4"}),P.label]},P.id))})}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-300px)]",children:[f&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl",children:f}),p==="batches"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lotes em Estoque"}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-sm text-gray-600",children:["Total de lotes: ",r.jsx("span",{className:"font-semibold",children:n.length})]})})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(P=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx(qd,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-lg font-bold text-gray-900",children:P.batch_number}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Fornecedor: ",P.supplier_batch]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A(P.status)}`,children:P.status}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(P.quality_status)}`,children:P.quality_status})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Fabricação:"}),r.jsx("p",{className:"font-semibold",children:new Date(P.manufacturing_date).toLocaleDateString("pt-BR")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Validade:"}),r.jsx("p",{className:`font-semibold ${k(P.expiry_date)?"text-red-600":H(P.expiry_date)?"text-yellow-600":"text-gray-900"}`,children:new Date(P.expiry_date).toLocaleDateString("pt-BR")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Quantidade:"}),r.jsxs("p",{className:"font-semibold",children:[P.available_quantity," / ",P.quantity]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Custo Unit.:"}),r.jsxs("p",{className:"font-semibold text-green-600",children:["R$ ",P.unit_cost.toFixed(2)]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[r.jsx("span",{children:"Disponível"}),r.jsxs("span",{children:[Math.round(P.available_quantity/P.quantity*100),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${P.available_quantity/P.quantity>.5?"bg-green-500":P.available_quantity/P.quantity>.2?"bg-yellow-500":"bg-red-500"}`,style:{width:`${P.available_quantity/P.quantity*100}%`}})})]}),k(P.expiry_date)&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(Zt,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{className:"text-sm text-red-700 font-medium",children:"Lote vencido"})]}),H(P.expiry_date)&&!k(P.expiry_date)&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[r.jsx(Ds,{className:"w-4 h-4 text-yellow-600"}),r.jsx("span",{className:"text-sm text-yellow-700 font-medium",children:"Vence em breve"})]})]}),P.notes&&r.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-600",children:P.notes})})]},P.id))})]}),p==="movements"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Movimentações por Lote"}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Lote"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Tipo"}),r.jsx("th",{className:"text-right px-6 py-4 font-semibold text-gray-900",children:"Quantidade"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Motivo"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Data"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Usuário"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(P=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-mono font-semibold text-purple-600",children:P.batch_number})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${P.type==="entrada"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:P.type})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("span",{className:`font-semibold ${P.type==="entrada"?"text-green-600":"text-red-600"}`,children:[P.type==="entrada"?"+":"-",P.quantity]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-900",children:P.reason}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Doc: ",P.document]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-900",children:new Date(P.date).toLocaleDateString("pt-BR")})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-900",children:P.user})})]},P.id))})]})})})]}),p==="create"&&r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6 text-center",children:"Criar Novo Lote"}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número do Lote *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:c.batch_number,onChange:P=>d(O=>({...O,batch_number:P.target.value})),className:"flex-1 px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"LOT2024001"}),r.jsx("button",{onClick:()=>d(P=>({...P,batch_number:M()})),className:"px-3 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors",title:"Gerar automaticamente",children:r.jsx(qd,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Fabricação *"}),r.jsx("input",{type:"date",value:c.manufacturing_date,onChange:P=>d(O=>({...O,manufacturing_date:P.target.value,expiry_date:D(P.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Validade"}),r.jsx("input",{type:"date",value:c.expiry_date,onChange:P=>d(O=>({...O,expiry_date:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lote do Fornecedor"}),r.jsx("input",{type:"text",value:c.supplier_batch,onChange:P=>d(O=>({...O,supplier_batch:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"FORN001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade *"}),r.jsx("input",{type:"number",value:c.quantity,onChange:P=>d(O=>({...O,quantity:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custo Unitário"}),r.jsx("input",{type:"number",step:"0.01",value:c.unit_cost,onChange:P=>d(O=>({...O,unit_cost:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"0"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status de Qualidade"}),r.jsxs("select",{value:c.quality_status,onChange:P=>d(O=>({...O,quality_status:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"aprovado",children:"Aprovado"}),r.jsx("option",{value:"quarentena",children:"Quarentena"}),r.jsx("option",{value:"reprovado",children:"Reprovado"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),r.jsx("textarea",{value:c.notes,onChange:P=>d(O=>({...O,notes:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3",placeholder:"Informações adicionais sobre o lote..."})]})]}),r.jsx("button",{onClick:L,disabled:u,className:"w-full mt-6 bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Criando Lote..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Criar Lote"]})})]})]})]}),r.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:r.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"Fechar"})})]})}):null},DY=()=>{const[e,t]=j.useState("overview"),[s,a]=j.useState(!1),[n,i]=j.useState(""),[o,l]=j.useState("todos"),[c,d]=j.useState("todos"),[u,h]=j.useState(""),[f,m]=j.useState(""),[p,v]=j.useState([]),[g,y]=j.useState([]),[N,S]=j.useState([]),[C,M]=j.useState([]),[D,L]=j.useState([]),[A,I]=j.useState(!1),[H,k]=j.useState(!1),[P,O]=j.useState(!1),[$,V]=j.useState(null),[T,F]=j.useState("scan"),{user:z,hasPermission:se}=ar(),{notifySuccess:Y,notifyError:_e}=Ta(),R=Vt();j.useEffect(()=>{if(!z||!se("admin")){R("/dashboard");return}Q()},[z,se,R]);const Q=async()=>{var ve,qe,ie,ne;a(!0);try{const[Ae,Fe,Ve,Ne]=await Promise.all([ts.getProducts(),ts.getWarehouses(),ts.getStockMovements(),ts.getProductCategories()]);Ae.success?(v(((ve=Ae.data)==null?void 0:ve.map(Z=>{var xe,We;return{id:Z.id,nome:Z.name,sku:Z.sku||`SKU-${Z.id}`,codigo_barras:Z.barcode||`789${Z.id.toString().padStart(10,"0")}`,categoria:((xe=Z.category)==null?void 0:xe.name)||"Geral",estoque_atual:Z.current_stock||Z.stock||0,estoque_minimo:Z.min_stock||50,estoque_maximo:Z.max_stock||1e3,custo_unitario:Z.cost_price||0,preco_venda:Z.sale_price||Z.price||0,status:(Z.current_stock||0)>(Z.min_stock||50)?"normal":"baixo",fornecedor:((We=Z.supplier)==null?void 0:We.name)||"A definir",localizacoes:Z.locations||[],lotes:Z.batches||[],ultima_movimentacao:Z.updated_at||Z.created_at}}))||[]),console.log(`✅ ${((qe=Ae.data)==null?void 0:qe.length)||0} produtos enterprise carregados do Supabase`)):(console.log("⚠️ Tabela products não encontrada ou vazia"),v([])),Fe.success?(S(((ie=Fe.data)==null?void 0:ie.map(Z=>({id:Z.id,nome:Z.name,codigo:Z.code||`DEP${Z.id}`,endereco:Z.address||"Endereço não informado",capacidade:Z.capacity||1e4,ocupacao:Z.current_occupation||0,responsavel:Z.manager||"A definir",status:Z.is_active?"ativo":"inativo"})))||[]),console.log(`✅ ${((ne=Fe.data)==null?void 0:ne.length)||0} depósitos enterprise carregados do Supabase`)):(console.log("⚠️ Tabela warehouses não encontrada ou vazia"),S([])),M([]),m("Dados enterprise carregados com sucesso")}catch(Ae){console.error("❌ Erro ao carregar dados enterprise:",Ae),v([]),S([]),M([]),h("Erro ao carregar dados enterprise"),_e("❌ Erro Enterprise","Erro ao carregar dados do estoque enterprise")}finally{a(!1)}},re=ve=>{V(ve),I(!0)},te=(ve="scan")=>{F(ve),k(!0)},le=ve=>{V(ve),O(!0)},be=ve=>{Y("✅ Produto Escaneado",`${ve.name} encontrado`)},we=p.length,oe=p.filter(ve=>ve.status==="baixo").length,Ce=p.reduce((ve,qe)=>ve+qe.estoque_atual*qe.custo_unitario,0),ye=C.length,fe=ve=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ve),Le=ve=>{switch(ve){case"normal":return"text-green-700 bg-green-100";case"baixo":return"text-red-700 bg-red-100";case"alto":return"text-blue-700 bg-blue-100";case"critico":return"text-orange-700 bg-orange-100";default:return"text-gray-700 bg-gray-100"}},Te=ve=>{switch(ve){case"alta":return"text-red-700 bg-red-100";case"media":return"text-yellow-700 bg-yellow-100";case"baixa":return"text-green-700 bg-green-100";default:return"text-gray-700 bg-gray-100"}},K=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(Bt,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Total"})]}),r.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-1",children:we}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Produtos cadastrados"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-100 rounded-2xl p-6 border border-red-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:r.jsx(Ji,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-red-700 text-sm font-medium",children:"Crítico"})]}),r.jsx("h3",{className:"text-2xl font-bold text-red-900 mb-1",children:oe}),r.jsx("p",{className:"text-red-600 text-sm",children:"Estoque baixo"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Valor"})]}),r.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:fe(Ce)}),r.jsx("p",{className:"text-green-600 text-sm",children:"Valor em estoque"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 rounded-2xl p-6 border border-orange-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center",children:r.jsx(Ji,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-orange-700 text-sm font-medium",children:"Alertas"})]}),r.jsx("h3",{className:"text-2xl font-bold text-orange-900 mb-1",children:ye}),r.jsx("p",{className:"text-orange-600 text-sm",children:"Alertas ativos"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"🚀 Ações Rápidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("button",{onClick:()=>te("scan"),className:"p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-xl transition-colors flex items-center gap-3",children:[r.jsx(Zh,{className:"w-6 h-6 text-blue-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-blue-900",children:"Scanner"}),r.jsx("p",{className:"text-sm text-blue-600",children:"Ler código de barras"})]})]}),r.jsxs("button",{onClick:()=>te("generate"),className:"p-4 bg-green-50 hover:bg-green-100 border border-green-200 rounded-xl transition-colors flex items-center gap-3",children:[r.jsx(qd,{className:"w-6 h-6 text-green-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-green-900",children:"Gerar Código"}),r.jsx("p",{className:"text-sm text-green-600",children:"Novo código de barras"})]})]}),r.jsxs("button",{onClick:()=>t("inventario"),className:"p-4 bg-purple-50 hover:bg-purple-100 border border-purple-200 rounded-xl transition-colors flex items-center gap-3",children:[r.jsx(is,{className:"w-6 h-6 text-purple-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-purple-900",children:"Inventário"}),r.jsx("p",{className:"text-sm text-purple-600",children:"Contagem cíclica"})]})]}),r.jsxs("button",{onClick:()=>t("movimentacoes"),className:"p-4 bg-orange-50 hover:bg-orange-100 border border-orange-200 rounded-xl transition-colors flex items-center gap-3",children:[r.jsx(Ka,{className:"w-6 h-6 text-orange-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-orange-900",children:"Movimentação"}),r.jsx("p",{className:"text-sm text-orange-600",children:"Nova entrada/saída"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📊 Produtos por Status"}),r.jsx(Hc,{data:[{name:"Normal",value:p.filter(ve=>ve.status==="normal").length},{name:"Estoque Baixo",value:p.filter(ve=>ve.status==="baixo").length},{name:"Estoque Alto",value:p.filter(ve=>ve.status==="alto").length}],height:250,showLabels:!0})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📈 Valor por Categoria"}),r.jsx(Vc,{data:[{name:"Cafés Especiais",value:45e4},{name:"Cafés Premium",value:38e4},{name:"Acessórios",value:12e4}],height:250,bars:[{dataKey:"value",name:"Valor",color:"#3b82f6"}]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"⚠️ Alertas de Estoque"}),r.jsx("div",{className:"space-y-3",children:C.map(ve=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ji,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ve.produto}),r.jsx("p",{className:"text-sm text-gray-600",children:ve.mensagem})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Te(ve.prioridade)}`,children:ve.prioridade}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(ve.data).toLocaleDateString("pt-BR")})]})]},ve.id))})]})]}),J=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar produtos, SKU ou código de barras...",value:n,onChange:ve=>i(ve.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:o,onChange:ve=>l(ve.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Status"}),r.jsx("option",{value:"normal",children:"Normal"}),r.jsx("option",{value:"baixo",children:"Estoque Baixo"}),r.jsx("option",{value:"alto",children:"Estoque Alto"})]}),r.jsxs("select",{value:c,onChange:ve=>d(ve.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Depósitos"}),N.map(ve=>r.jsx("option",{value:ve.nome,children:ve.nome},ve.id))]}),r.jsxs("button",{onClick:()=>te("scan"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(Zh,{className:"w-4 h-4"}),"Scanner"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Produto"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Códigos"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Estoque"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Localizações"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Lotes"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:p.filter(ve=>{const qe=ve.nome.toLowerCase().includes(n.toLowerCase())||ve.sku.toLowerCase().includes(n.toLowerCase())||ve.codigo_barras.includes(n),ie=o==="todos"||ve.status===o;return qe&&ie}).map(ve=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ve.nome}),r.jsx("p",{className:"text-sm text-gray-600",children:ve.categoria}),r.jsx("p",{className:"text-sm text-gray-600",children:ve.fornecedor})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"SKU:"}),r.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:ve.sku})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Barras:"}),r.jsx("span",{className:"font-mono text-sm bg-blue-100 px-2 py-1 rounded",children:ve.codigo_barras})]})]})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-gray-900 text-lg",children:ve.estoque_atual}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",ve.estoque_minimo," | Max: ",ve.estoque_maximo]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:r.jsx("div",{className:`h-1.5 rounded-full ${ve.status==="baixo"?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(ve.estoque_atual/ve.estoque_maximo*100,100)}%`}})})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"space-y-1",children:ve.localizacoes.map((qe,ie)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(hs,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{className:"font-mono font-semibold text-blue-600",children:qe.posicao}),r.jsxs("span",{className:"text-gray-600",children:["(",qe.quantidade,")"]})]},ie))})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"space-y-1",children:ve.lotes.map((qe,ie)=>r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qd,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{className:"font-mono font-semibold text-purple-600",children:qe.numero})]}),r.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["Val: ",new Date(qe.validade).toLocaleDateString("pt-BR")," (",qe.quantidade,")"]})]},ie))})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Le(ve.status)}`,children:ve.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>re(ve),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Gerenciar Localizações",children:r.jsx(hs,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>le(ve),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Gerenciar Lotes",children:r.jsx(qd,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar Produto",children:r.jsx(ws,{className:"w-4 h-4"})})]})})]},ve.id))})]})})})]});return s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Carregando sistema de estoque enterprise..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"📦 Estoque Enterprise"}),r.jsx("p",{className:"text-gray-600",children:"Gestão completa com localização física, lotes e código de barras"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:Q,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(j5,{className:"w-4 h-4"}),"Atualizar"]}),r.jsx(ku,{data:{products:p,warehouses:N,totalValue:Ce,lowStockCount:oe},type:"stock"})]})]})}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Ji,{className:"w-5 h-5"}),r.jsx("span",{children:u})]}),f&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:f})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"produtos",label:"Produtos",icon:Bt},{id:"movimentacoes",label:"Movimentações",icon:Ka},{id:"inventario",label:"Inventário",icon:is},{id:"depositos",label:"Depósitos",icon:$d}].map(ve=>r.jsxs("button",{onClick:()=>t(ve.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${e===ve.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(ve.icon,{className:"w-5 h-5"}),ve.label]},ve.id))})})}),e==="overview"&&K(),e==="produtos"&&J(),e==="movimentacoes"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ka,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Módulo de movimentações em desenvolvimento..."})]}),e==="inventario"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(is,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Módulo de inventário em desenvolvimento..."})]}),e==="depositos"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx($d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Módulo de depósitos em desenvolvimento..."})]}),r.jsx(TY,{isOpen:A,onClose:()=>I(!1),product:$,onSuccess:ve=>{Y("✅ Localizações Atualizadas","Localizações salvas com sucesso"),I(!1)}}),r.jsx(LY,{isOpen:H,onClose:()=>k(!1),mode:T,onBarcodeScanned:be}),r.jsx(MY,{isOpen:P,onClose:()=>O(!1),product:$,onSuccess:ve=>{Y("✅ Lotes Atualizados","Lotes salvos com sucesso"),O(!1)}})]})})},IY=({isOpen:e,onClose:t,mode:s="create",employee:a=null,onSuccess:n})=>{const[i,o]=j.useState({employee_code:"",name:"",email:"",phone:"",cpf:"",rg:"",birth_date:"",address:"",city:"",state:"",zip_code:"",position:"",department:"",hire_date:"",salary:"",status:"ativo",manager_id:"",bank_account:"",emergency_contact:"",emergency_phone:""}),[l,c]=j.useState([]),[d,u]=j.useState(!1),[h,f]=j.useState(""),[m,p]=j.useState({}),{notifySuccess:v,notifyError:g}=Ta(),y=[{value:"ativo",label:"Ativo"},{value:"inativo",label:"Inativo"},{value:"demitido",label:"Demitido"},{value:"licenca",label:"Licença"}],N=["Administrativo","Vendas","Produção","Logística","Marketing","Financeiro","Recursos Humanos","TI"],S=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];j.useEffect(()=>{e&&(C(),s==="edit"&&a?o({employee_code:a.employee_code||"",name:a.name||"",email:a.email||"",phone:a.phone||"",cpf:a.cpf||"",rg:a.rg||"",birth_date:a.birth_date||"",address:a.address||"",city:a.city||"",state:a.state||"",zip_code:a.zip_code||"",position:a.position||"",department:a.department||"",hire_date:a.hire_date||"",salary:a.salary?a.salary.toString():"",status:a.status||"ativo",manager_id:a.manager_id||"",bank_account:a.bank_account||"",emergency_contact:a.emergency_contact||"",emergency_phone:a.emergency_phone||""}):s==="create"&&o({employee_code:M(),name:"",email:"",phone:"",cpf:"",rg:"",birth_date:"",address:"",city:"",state:"RS",zip_code:"",position:"",department:"",hire_date:new Date().toISOString().split("T")[0],salary:"",status:"ativo",manager_id:"",bank_account:"",emergency_contact:"",emergency_phone:""}),f(""),p({}))},[e,s,a]);const C=async()=>{try{const F=await ii.getEmployees();F.success&&c(F.data)}catch(F){console.error("Erro ao carregar funcionários:",F)}},M=()=>`EMP${Date.now().toString().slice(-4)}`,D=F=>{const{name:z,value:se}=F.target;o(Y=>({...Y,[z]:se})),m[z]&&p(Y=>({...Y,[z]:""}))},L=F=>F.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),A=F=>F.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4,5})(\d{4})/,"$1-$2"),I=F=>F.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2"),H=F=>{const z=L(F.target.value);o(se=>({...se,cpf:z}))},k=F=>{const z=A(F.target.value);o(se=>({...se,phone:z}))},P=F=>{const z=A(F.target.value);o(se=>({...se,emergency_phone:z}))},O=F=>{const z=I(F.target.value);o(se=>({...se,zip_code:z}))},$=()=>{const F={};i.name.trim()||(F.name="Nome é obrigatório"),i.email.trim()||(F.email="Email é obrigatório"),i.position.trim()||(F.position="Cargo é obrigatório"),i.department.trim()||(F.department="Departamento é obrigatório"),i.hire_date||(F.hire_date="Data de admissão é obrigatória");const z=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return i.email&&!z.test(i.email)&&(F.email="Email inválido"),i.cpf&&i.cpf.replace(/\D/g,"").length!==11&&(F.cpf="CPF deve ter 11 dígitos"),i.salary&&isNaN(parseFloat(i.salary))&&(F.salary="Salário deve ser um número válido"),p(F),Object.keys(F).length===0},V=async F=>{if(F.preventDefault(),!!$()){u(!0);try{const z={...i,salary:i.salary?parseFloat(i.salary):null,cpf:i.cpf.replace(/\D/g,""),phone:i.phone.replace(/\D/g,""),emergency_phone:i.emergency_phone.replace(/\D/g,""),zip_code:i.zip_code.replace(/\D/g,"")};let se;s==="create"?se=await ii.createEmployee(z):se=await ii.updateEmployee(a.id,z),se.success?(v(s==="create"?"✅ Funcionário Criado":"✅ Funcionário Atualizado",`${i.name} foi ${s==="create"?"cadastrado":"atualizado"} com sucesso`,"/admin/rh"),n&&n(se.data),t()):(f(se.error),g("❌ Erro",se.error))}catch{f("Erro interno do servidor"),g("❌ Erro","Erro interno do servidor")}finally{u(!1)}}};if(!e)return null;const T=s==="view";return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-600 to-purple-700 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(kr,{className:"w-6 h-6"}),r.jsx("h2",{className:"text-xl font-bold",children:s==="create"?"Novo Funcionário":s==="edit"?"Editar Funcionário":"Visualizar Funcionário"})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:r.jsx(Nr,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:V,className:"p-6 space-y-6",children:[h&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:h})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(kr,{className:"w-5 h-5"}),"Informações Pessoais"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Código do Funcionário"}),r.jsx("input",{type:"text",name:"employee_code",value:i.employee_code,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"EMP001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Nome Completo *"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:D,disabled:T,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.name?"border-red-300":"border-gray-200"} ${T?"bg-gray-100":""}`,placeholder:"João da Silva"}),m.name&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Email *"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"email",name:"email",value:i.email,onChange:D,disabled:T,className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.email?"border-red-300":"border-gray-200"} ${T?"bg-gray-100":""}`,placeholder:"joao@email.com"})]}),m.email&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Telefone"}),r.jsxs("div",{className:"relative",children:[r.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",name:"phone",value:i.phone,onChange:k,disabled:T,className:`w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"(11) 99999-9999"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"CPF"}),r.jsx("input",{type:"text",name:"cpf",value:i.cpf,onChange:H,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"000.000.000-00",maxLength:14}),m.cpf&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.cpf})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"RG"}),r.jsx("input",{type:"text",name:"rg",value:i.rg,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"12.345.678-9"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Data de Nascimento"}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"date",name:"birth_date",value:i.birth_date,onChange:D,disabled:T,className:`w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Status"}),r.jsx("select",{name:"status",value:i.status,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,children:y.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(hs,{className:"w-5 h-5"}),"Endereço"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Endereço"}),r.jsx("input",{type:"text",name:"address",value:i.address,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"Rua, número, complemento"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Cidade"}),r.jsx("input",{type:"text",name:"city",value:i.city,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"Santa Maria"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Estado"}),r.jsx("select",{name:"state",value:i.state,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,children:S.map(F=>r.jsx("option",{value:F,children:F},F))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"CEP"}),r.jsx("input",{type:"text",name:"zip_code",value:i.zip_code,onChange:O,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"97000-000",maxLength:9})]})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(gn,{className:"w-5 h-5"}),"Informações Profissionais"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Cargo *"}),r.jsx("input",{type:"text",name:"position",value:i.position,onChange:D,disabled:T,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.position?"border-red-300":"border-gray-200"} ${T?"bg-gray-100":""}`,placeholder:"Analista de Vendas"}),m.position&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.position})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Departamento *"}),r.jsxs("select",{name:"department",value:i.department,onChange:D,disabled:T,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.department?"border-red-300":"border-gray-200"} ${T?"bg-gray-100":""}`,children:[r.jsx("option",{value:"",children:"Selecione um departamento"}),N.map(F=>r.jsx("option",{value:F,children:F},F))]}),m.department&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.department})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Data de Admissão *"}),r.jsx("input",{type:"date",name:"hire_date",value:i.hire_date,onChange:D,disabled:T,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.hire_date?"border-red-300":"border-gray-200"} ${T?"bg-gray-100":""}`}),m.hire_date&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.hire_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Salário (R$)"}),r.jsxs("div",{className:"relative",children:[r.jsx(rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"number",step:"0.01",name:"salary",value:i.salary,onChange:D,disabled:T,className:`w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"0.00"})]}),m.salary&&r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:m.salary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Gestor Direto"}),r.jsxs("select",{name:"manager_id",value:i.manager_id,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,children:[r.jsx("option",{value:"",children:"Selecione um gestor"}),l.filter(F=>F.id!==(a==null?void 0:a.id)).map(F=>r.jsxs("option",{value:F.id,children:[F.name," - ",F.position]},F.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Conta Bancária"}),r.jsx("input",{type:"text",name:"bank_account",value:i.bank_account,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"Banco: 001 Ag: 1234 CC: 12345-6"})]})]})]}),r.jsxs("div",{className:"bg-amber-50 rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Xi,{className:"w-5 h-5"}),"Contato de Emergência"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Nome do Contato"}),r.jsx("input",{type:"text",name:"emergency_contact",value:i.emergency_contact,onChange:D,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"Maria da Silva"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Telefone de Emergência"}),r.jsx("input",{type:"text",name:"emergency_phone",value:i.emergency_phone,onChange:P,disabled:T,className:`w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${T?"bg-gray-100":""}`,placeholder:"(11) 99999-9999"})]})]})]}),!T&&r.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:d,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-semibold px-8 py-3 rounded-xl transition-all duration-300 flex items-center gap-2",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s==="create"?"Criando...":"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pi,{className:"w-5 h-5"}),s==="create"?"Criar Funcionário":"Salvar Alterações"]})})]}),T&&r.jsx("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200",children:r.jsxs("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(Nr,{className:"w-5 h-5"}),"Fechar"]})})]})]})})},RY=()=>{const[e,t]=j.useState("overview"),[s,a]=j.useState(!0),[n,i]=j.useState(""),[o,l]=j.useState("30d"),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,m]=j.useState([]),[p,v]=j.useState([]),[g,y]=j.useState([]),[N,S]=j.useState([]),[C,M]=j.useState([]),[D,L]=j.useState([]),[A,I]=j.useState([]),[H,k]=j.useState([]),[P,O]=j.useState([]),[$,V]=j.useState("todos"),[T,F]=j.useState("todos"),{user:z,hasPermission:se}=ar(),Y=Vt(),{notifySuccess:_e,notifyError:R,notifyInfo:Q}=Ta(),[re,te]=j.useState(!1),[le,be]=j.useState(null),[we,oe]=j.useState("create");j.useEffect(()=>{if(!z||!se("admin")){Y("/dashboard");return}Ce()},[z,se,Y,e]);const Ce=async()=>{var xe,We,ht;a(!0);try{const[Qe,Ue,ze]=await Promise.all([ii.getEmployees().catch(ot=>({success:!1,error:ot.message})),ii.getDepartments().catch(ot=>({success:!1,error:ot.message})),ii.getPositions().catch(ot=>({success:!1,error:ot.message}))]);Qe.success?(m(Qe.data||[]),console.log(`✅ ${((xe=Qe.data)==null?void 0:xe.length)||0} funcionários carregados do Supabase`)):(console.log("⚠️ Tabela employees não encontrada ou vazia"),m([])),Ue.success?(L(Ue.data||[]),console.log(`✅ ${((We=Ue.data)==null?void 0:We.length)||0} departamentos carregados do Supabase`)):(console.log("⚠️ Tabela departments não encontrada ou vazia"),L([])),ze.success?(I(ze.data||[]),console.log(`✅ ${((ht=ze.data)==null?void 0:ht.length)||0} cargos carregados do Supabase`)):(console.log("⚠️ Tabela positions não encontrada ou vazia"),I([])),k([]),y([]),h("Dados RH carregados com sucesso")}catch(Qe){console.error("❌ Erro ao carregar dados RH:",Qe),m([]),L([]),I([]),k([]),y([]),d("Erro ao carregar dados RH"),R("❌ Erro RH","Erro ao carregar dados do módulo RH")}finally{a(!1)}},ye=()=>{be(null),oe("create"),te(!0)},fe=xe=>{be(xe),oe("edit"),te(!0)},Le=xe=>{be(xe),oe("view"),te(!0)},Te=async xe=>{if(window.confirm("Tem certeza que deseja excluir este funcionário?"))try{const We=await ii.updateEmployee(xe,{is_active:!1});We.success?(_e("✅ Funcionário Excluído","Funcionário excluído com sucesso"),Ce()):R("❌ Erro",We.error||"Erro ao excluir funcionário")}catch(We){console.error("Erro ao excluir funcionário:",We),R("❌ Erro","Erro ao excluir funcionário")}},K=()=>{Ce(),te(!1)},J=xe=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(xe),ve=xe=>new Date(xe).toLocaleDateString("pt-BR"),qe=xe=>{switch(xe){case"ativo":return"text-green-700 bg-green-100";case"inativo":return"text-red-700 bg-red-100";case"ferias":return"text-blue-700 bg-blue-100";case"afastado":return"text-orange-700 bg-orange-100";case"aprovado":return"text-green-700 bg-green-100";case"pendente":return"text-yellow-700 bg-yellow-100";case"reprovado":return"text-red-700 bg-red-100";case"concluida":return"text-green-700 bg-green-100";case"em_andamento":return"text-blue-700 bg-blue-100";default:return"text-gray-700 bg-gray-100"}},ie=f?f.length:0,ne=f?f.filter(xe=>xe&&xe.status==="ativo").length:0,Ae=f?f.reduce((xe,We)=>xe+(We&&We.salario?parseFloat(We.salario):0),0):0,Fe=ie>0?Ae/ie:0,Ve=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 border border-blue-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Total"})]}),r.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-1",children:ie}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Funcionários"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(Xi,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Ativos"})]}),r.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:ne}),r.jsx("p",{className:"text-green-600 text-sm",children:"Em atividade"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-2xl p-6 border border-purple-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-purple-700 text-sm font-medium",children:"Folha"})]}),r.jsx("h3",{className:"text-2xl font-bold text-purple-900 mb-1",children:J(Ae)}),r.jsx("p",{className:"text-purple-600 text-sm",children:"Total mensal"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 rounded-2xl p-6 border border-orange-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-orange-700 text-sm font-medium",children:"Média"})]}),r.jsx("h3",{className:"text-2xl font-bold text-orange-900 mb-1",children:J(Fe)}),r.jsx("p",{className:"text-orange-600 text-sm",children:"Salário médio"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"👥 Funcionários por Departamento"}),r.jsx(Hc,{data:Array.isArray(D)?D.map(xe=>({name:xe.nome||"Departamento",value:xe.funcionarios_count||0})):[],height:250,showLabels:!0})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"💰 Orçamento por Departamento"}),r.jsx(Vc,{data:Array.isArray(D)?D.map(xe=>({name:xe.nome||"Departamento",value:xe.orcamento_anual||0})):[],height:250,bars:[{dataKey:"value",name:"Orçamento",color:"#3b82f6"}]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📅 Solicitações de Férias"}),r.jsx("div",{className:"space-y-3",children:Array.isArray(H)&&H.length>0?H.slice(0,3).map(xe=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:xe.funcionario}),r.jsxs("p",{className:"text-sm text-gray-600",children:[xe.periodo," (",xe.dias," dias)"]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${qe(xe.status)}`,children:xe.status})]},xe.id)):r.jsx("div",{className:"text-center py-4 text-gray-500",children:r.jsx("p",{children:"Nenhuma solicitação de férias pendente"})})})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"⭐ Avaliações de Desempenho"}),r.jsx("div",{className:"space-y-3",children:Array.isArray(g)&&g.length>0?g.map(xe=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:xe.funcionario}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Nota: ",xe.nota_geral,"/10 | Metas: ",xe.metas_atingidas,"%"]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${qe(xe.status)}`,children:xe.status})]},xe.id)):r.jsx("div",{className:"text-center py-4 text-gray-500",children:r.jsx("p",{children:"Nenhuma avaliação de desempenho pendente"})})})]})]})]}),Ne=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar funcionários...",value:n,onChange:xe=>i(xe.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:$,onChange:xe=>V(xe.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Status"}),r.jsx("option",{value:"ativo",children:"Ativos"}),r.jsx("option",{value:"inativo",children:"Inativos"}),r.jsx("option",{value:"ferias",children:"Em Férias"})]}),r.jsxs("select",{value:T,onChange:xe=>F(xe.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Departamentos"}),Array.isArray(D)?D.map(xe=>r.jsx("option",{value:xe.nome||"",children:xe.nome||"Departamento"},xe.id||Math.random())):[]]}),r.jsxs("button",{onClick:ye,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Novo Funcionário"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Funcionário"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Cargo/Depto"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Contato"}),r.jsx("th",{className:"text-right px-6 py-4 font-semibold text-gray-900",children:"Salário"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Admissão"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:Array.isArray(f)&&f.length>0?f.filter(xe=>{if(!xe||!xe.nome||!xe.email)return!1;const We=xe.nome.toLowerCase().includes(n.toLowerCase())||xe.email.toLowerCase().includes(n.toLowerCase()),ht=$==="todos"||xe.status===$,Qe=T==="todos"||xe.departamento===T;return We&&ht&&Qe}).map(xe=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:xe.nome?xe.nome.split(" ").map(We=>We[0]).join("").substring(0,2):"XX"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:xe.nome||"Nome não informado"}),r.jsx("p",{className:"text-sm text-gray-600",children:xe.cpf||"CPF não informado"})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:xe.cargo||"Cargo não informado"}),r.jsx("p",{className:"text-sm text-gray-600",children:xe.departamento||"Departamento não informado"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:xe.email||"Email não informado"}),r.jsx("p",{className:"text-sm text-gray-600",children:xe.telefone||"Telefone não informado"})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"font-semibold text-gray-900",children:J(xe.salario||0)})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-sm text-gray-600",children:xe.data_admissao?ve(xe.data_admissao):"Data não informada"})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${qe(xe.status||"inativo")}`,children:xe.status||"inativo"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>Le(xe),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>fe(xe),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Te(xe.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},xe.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:f&&f.length===0?r.jsxs("div",{children:[r.jsx(Pt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"font-medium",children:"Nenhum funcionário cadastrado"}),r.jsx("p",{className:"text-sm mt-1",children:"Comece adicionando o primeiro funcionário"})]}):r.jsxs("div",{children:[r.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-3"}),r.jsx("p",{children:"Carregando funcionários..."})]})})})})]})})})]}),Z=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Relatórios de RH"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Folha de Pagamento",description:"Relatório completo da folha mensal",icon:rr,color:"green"},{title:"Funcionários Ativos",description:"Lista completa de funcionários",icon:Pt,color:"blue"},{title:"Avaliações de Desempenho",description:"Relatório de avaliações do período",icon:Dr,color:"purple"}].map((xe,We)=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 bg-${xe.color}-500 rounded-xl flex items-center justify-center`,children:r.jsx(xe.icon,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:xe.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:xe.description}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(ku,{data:{employees:f,departments:D,totalPayroll:Ae,averageSalary:Fe},type:"hr"})})]},We))})]});return s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Carregando dados de RH..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Recursos Humanos"}),r.jsx("p",{className:"text-gray-600",children:"Gestão completa de funcionários, departamentos e processos de RH"})]}),c&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:c})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:u})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"funcionarios",label:"Funcionários",icon:Pt},{id:"relatorios",label:"Relatórios",icon:is}].map(xe=>r.jsxs("button",{onClick:()=>t(xe.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${e===xe.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(xe.icon,{className:"w-5 h-5"}),xe.label]},xe.id))})})}),e==="overview"&&Ve(),e==="funcionarios"&&Ne(),e==="relatorios"&&Z(),r.jsx(IY,{isOpen:re,onClose:()=>te(!1),mode:we,employee:le,onSuccess:K})]})})},FY=()=>{const[e,t]=j.useState("overview"),{user:s,hasPermission:a}=ar(),n=Vt(),[i,o]=j.useState(!0),[l,c]=j.useState(""),[d,u]=j.useState(""),[h,f]=j.useState([]),[m,p]=j.useState([]),[v,g]=j.useState([]),[y,N]=j.useState([]),[S,C]=j.useState([]),[M,D]=j.useState([]),[L,A]=j.useState(""),[I,H]=j.useState("todos"),[k,P]=j.useState("todos"),[O,$]=j.useState("30d"),[V,T]=j.useState(!1),[F,z]=j.useState(null),[se,Y]=j.useState("create"),{notifySuccess:_e,notifyError:R,notifyInfo:Q}=Ta();j.useEffect(()=>{if(!s||!a("admin")){n("/dashboard");return}},[s,a,n]),j.useEffect(()=>{re()},[]);const re=async()=>{var Ne,Z;o(!0);try{const[xe,We,ht,Qe]=await Promise.all([te(),le(),be(),we()]);xe.success?(f(xe.data||[]),console.log(`✅ ${((Ne=xe.data)==null?void 0:Ne.length)||0} vendas carregadas do Supabase`)):(console.log("⚠️ Tabela sales não encontrada ou vazia"),f([])),We.success?(p(We.data||[]),console.log(`✅ ${((Z=We.data)==null?void 0:Z.length)||0} vendedores carregados do Supabase`)):(console.log("⚠️ Tabela sellers não encontrada ou vazia"),p([])),N([]),C([]),D([]),g([]),u("Dados de vendas carregados com sucesso")}catch(xe){console.error("❌ Erro ao carregar dados de vendas:",xe),f([]),p([]),N([]),C([]),D([]),g([]),c("Erro ao carregar dados de vendas"),R("❌ Erro Vendas","Erro ao carregar dados do módulo de vendas")}finally{o(!1)}},te=async()=>{try{const{data:Ne,error:Z}=await ge.from("orders").select("*, customers(*), users(*)").order("created_at",{ascending:!1});return Z?{success:!1,data:[],error:Z.message}:{success:!0,data:Ne||[]}}catch(Ne){return{success:!1,data:[],error:Ne.message}}},le=async()=>{try{const{data:Ne,error:Z}=await ge.from("users").select("*").eq("user_type","vendedor").eq("is_active",!0);return Z?{success:!1,data:[],error:Z.message}:{success:!0,data:Ne||[]}}catch(Ne){return{success:!1,data:[],error:Ne.message}}},be=async()=>{try{const{data:Ne,error:Z}=await ge.from("customers").select("*").eq("is_active",!0);return Z?{success:!1,data:[],error:Z.message}:{success:!0,data:Ne||[]}}catch(Ne){return{success:!1,data:[],error:Ne.message}}},we=async()=>{try{const{data:Ne,error:Z}=await ge.from("products").select("*").eq("is_active",!0);return Z?{success:!1,data:[],error:Z.message}:{success:!0,data:Ne||[]}}catch(Ne){return{success:!1,data:[],error:Ne.message}}},oe=()=>{z(null),Y("create"),T(!0)},Ce=Ne=>{z(Ne),Y("edit"),T(!0)},ye=Ne=>{z(Ne),Y("view"),T(!0)},fe=async Ne=>{if(window.confirm("Tem certeza que deseja excluir esta venda?"))try{const{error:Z}=await ge.from("orders").update({is_active:!1}).eq("id",Ne);Z?R("❌ Erro",Z.message):(_e("✅ Venda Excluída","Venda excluída com sucesso"),re())}catch{R("❌ Erro","Erro ao excluir venda")}},Le=Ne=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ne),Te=Ne=>new Date(Ne).toLocaleDateString("pt-BR"),K=Ne=>{switch(Ne){case"finalizada":return"text-green-700 bg-green-100";case"pendente":return"text-yellow-700 bg-yellow-100";case"cancelada":return"text-red-700 bg-red-100";case"em_processamento":return"text-blue-700 bg-blue-100";case"a_pagar":return"text-orange-700 bg-orange-100";case"pago":return"text-green-700 bg-green-100";default:return"text-gray-700 bg-gray-100"}},J=h.reduce((Ne,Z)=>Ne+Z.valor_total,0),ve=h.filter(Ne=>Ne.status==="finalizada"),qe=ve.length>0?ve.reduce((Ne,Z)=>Ne+Z.valor_total,0)/ve.length:0,ie=S.reduce((Ne,Z)=>Ne+Z.total_receber,0),ne=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Faturamento"})]}),r.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:Le(J)}),r.jsx("p",{className:"text-green-600 text-sm",children:"Total vendas"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 border border-blue-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(pn,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Vendas"})]}),r.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-1",children:h.length}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Total pedidos"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-2xl p-6 border border-purple-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:r.jsx(Ar,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-purple-700 text-sm font-medium",children:"Ticket Médio"})]}),r.jsx("h3",{className:"text-2xl font-bold text-purple-900 mb-1",children:Le(qe)}),r.jsx("p",{className:"text-purple-600 text-sm",children:"Por venda"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 rounded-2xl p-6 border border-orange-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center",children:r.jsx(Dr,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-orange-700 text-sm font-medium",children:"Comissões"})]}),r.jsx("h3",{className:"text-2xl font-bold text-orange-900 mb-1",children:Le(ie)}),r.jsx("p",{className:"text-orange-600 text-sm",children:"A pagar"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"🛒 Vendas por Status"}),r.jsx(Hc,{data:[{name:"Finalizadas",value:h.filter(Ne=>Ne.status==="finalizada").length},{name:"Pendentes",value:h.filter(Ne=>Ne.status==="pendente").length},{name:"Canceladas",value:h.filter(Ne=>Ne.status==="cancelada").length}],height:250,showLabels:!0})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📊 Vendas por Vendedor"}),r.jsx(Vc,{data:m.map(Ne=>({name:Ne.nome.split(" ")[0],value:Ne.vendas_mes})),height:250,bars:[{dataKey:"value",name:"Vendas",color:"#3b82f6"}]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"🎯 Metas dos Vendedores"}),r.jsx("div",{className:"space-y-4",children:y.map((Ne,Z)=>r.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:Ne.vendedor}),r.jsxs("span",{className:`text-sm font-semibold ${Ne.percentual>=100?"text-green-600":Ne.percentual>=75?"text-yellow-600":"text-red-600"}`,children:[Ne.percentual.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${Ne.percentual>=100?"bg-green-500":Ne.percentual>=75?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(Ne.percentual,100)}%`}})}),r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[r.jsxs("span",{children:["Realizado: ",Le(Ne.realizado)]}),r.jsxs("span",{children:["Meta: ",Le(Ne.meta)]})]})]})},Z))})]})]}),Ae=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar vendas...",value:L,onChange:Ne=>A(Ne.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:I,onChange:Ne=>H(Ne.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Status"}),r.jsx("option",{value:"finalizada",children:"Finalizadas"}),r.jsx("option",{value:"pendente",children:"Pendentes"}),r.jsx("option",{value:"cancelada",children:"Canceladas"})]}),r.jsxs("select",{value:k,onChange:Ne=>P(Ne.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Vendedores"}),m.map(Ne=>r.jsx("option",{value:Ne.nome,children:Ne.nome},Ne.id))]}),r.jsxs("button",{onClick:oe,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Nova Venda"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Venda"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Cliente"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Vendedor"}),r.jsx("th",{className:"text-right px-6 py-4 font-semibold text-gray-900",children:"Valor"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Data"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:h.filter(Ne=>{const Z=Ne.numero.toLowerCase().includes(L.toLowerCase())||Ne.cliente_nome.toLowerCase().includes(L.toLowerCase()),xe=I==="todos"||Ne.status===I,We=k==="todos"||Ne.vendedor===k;return Z&&xe&&We}).map(Ne=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:Ne.numero}),r.jsx("p",{className:"text-sm text-gray-600",children:Ne.forma_pagamento})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:Ne.cliente_nome}),r.jsx("p",{className:"text-sm text-gray-600",children:Ne.cliente_email})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-gray-900",children:Ne.vendedor})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"font-semibold text-gray-900",children:Le(Ne.valor_total)})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-sm text-gray-600",children:Te(Ne.data_venda)})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${K(Ne.status)}`,children:Ne.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>ye(Ne),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Ce(Ne),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>fe(Ne.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},Ne.id))})]})})})]}),Fe=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Vendedores"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(Ne=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:Ne.nome.split(" ").map(Z=>Z[0]).join("").substring(0,2)}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${K(Ne.status)}`,children:Ne.status})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:Ne.nome}),r.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Comissão: ",Ne.percentual_comissao,"%"]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Meta Mensal:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:Le(Ne.meta_mensal)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Vendido:"}),r.jsx("span",{className:"font-semibold text-green-600",children:Le(Ne.vendas_mes)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Comissão:"}),r.jsx("span",{className:"font-semibold text-purple-600",children:Le(Ne.comissao_acumulada)})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[r.jsx("span",{children:"Progresso da Meta"}),r.jsxs("span",{children:[(Ne.vendas_mes/Ne.meta_mensal*100).toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(Ne.vendas_mes/Ne.meta_mensal*100,100)}%`}})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg text-sm font-medium transition-colors",children:"Ver Vendas"}),r.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:r.jsx(ws,{className:"w-4 h-4"})})]})]},Ne.id))})]}),Ve=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Relatórios de Vendas"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Relatório de Vendas",description:"Vendas detalhadas por período",icon:Ar,color:"green"},{title:"Comissões",description:"Comissões dos vendedores",icon:Dr,color:"purple"},{title:"Performance de Vendedores",description:"Análise de performance da equipe",icon:js,color:"blue"}].map((Ne,Z)=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 bg-${Ne.color}-500 rounded-xl flex items-center justify-center`,children:r.jsx(Ne.icon,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:Ne.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Ne.description}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(ku,{data:{sales:h,sellers:m,totalSales:J,averageTicket:qe,commissions:S},type:"sales"})})]},Z))})]});return i?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Carregando dados de vendas..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Módulo de Vendas"}),r.jsx("p",{className:"text-gray-600",children:"Gestão completa de vendas, vendedores e comissões"})]}),l&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:l})]}),d&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:d})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"vendas",label:"Vendas",icon:pn},{id:"vendedores",label:"Vendedores",icon:Pt},{id:"relatorios",label:"Relatórios",icon:is}].map(Ne=>r.jsxs("button",{onClick:()=>t(Ne.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${e===Ne.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Ne.icon,{className:"w-5 h-5"}),Ne.label]},Ne.id))})})}),e==="overview"&&ne(),e==="vendas"&&Ae(),e==="vendedores"&&Fe(),e==="relatorios"&&Ve()]})})},$Y=()=>{const[e,t]=j.useState("overview"),[s,a]=j.useState(!0),[n,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,m]=j.useState([]),[p,v]=j.useState([]),[g,y]=j.useState([]),[N,S]=j.useState([]),[C,M]=j.useState(""),[D,L]=j.useState("todos"),[A,I]=j.useState("todos"),[H,k]=j.useState("30d"),[P,O]=j.useState(!1),[$,V]=j.useState(null),[T,F]=j.useState("create"),{notifySuccess:z,notifyError:se,notifyInfo:Y}=Ta();j.useEffect(()=>{_e()},[]);const _e=async()=>{var ne,Ae;a(!0);try{const[Fe,Ve,Ne,Z]=await Promise.all([R(),Q(),re(),te()]);Fe.success?(d(Fe.data||[]),console.log(`✅ ${((ne=Fe.data)==null?void 0:ne.length)||0} pedidos de compra carregados do Supabase`)):(console.log("⚠️ Tabela purchase_orders não encontrada ou vazia"),d([])),Ve.success?(h(Ve.data||[]),console.log(`✅ ${((Ae=Ve.data)==null?void 0:Ae.length)||0} fornecedores carregados do Supabase`)):(console.log("⚠️ Tabela suppliers não encontrada ou vazia"),h([])),v([]),y([]),S([]),l("Dados de compras carregados com sucesso")}catch(Fe){console.error("❌ Erro ao carregar dados de compras:",Fe),d([]),h([]),v([]),y([]),S([]),i("Erro ao carregar dados de compras"),se("❌ Erro Compras","Erro ao carregar dados do módulo de compras")}finally{a(!1)}},R=async()=>{try{const{data:ne,error:Ae}=await ge.from("purchase_orders").select("*, suppliers(*)").order("created_at",{ascending:!1});return Ae?{success:!1,data:[],error:Ae.message}:{success:!0,data:ne||[]}}catch(ne){return{success:!1,data:[],error:ne.message}}},Q=async()=>{try{const{data:ne,error:Ae}=await ge.from("suppliers").select("*").eq("is_active",!0).order("name",{ascending:!0});return Ae?{success:!1,data:[],error:Ae.message}:{success:!0,data:ne||[]}}catch(ne){return{success:!1,data:[],error:ne.message}}},re=async()=>{try{const{data:ne,error:Ae}=await ge.from("products").select("*").eq("is_active",!0);return Ae?{success:!1,data:[],error:Ae.message}:{success:!0,data:ne||[]}}catch(ne){return{success:!1,data:[],error:ne.message}}},te=async()=>{try{const{data:ne,error:Ae}=await ge.from("purchase_receipts").select("*, purchase_orders(*)").order("created_at",{ascending:!1});return Ae?{success:!1,data:[],error:Ae.message}:{success:!0,data:ne||[]}}catch(ne){return{success:!1,data:[],error:ne.message}}},le=()=>{V(null),F("create"),O(!0)},be=ne=>{V(ne),F("edit"),O(!0)},we=ne=>{V(ne),F("view"),O(!0)},oe=async ne=>{if(window.confirm("Tem certeza que deseja excluir este pedido de compra?"))try{const{error:Ae}=await ge.from("purchase_orders").update({is_active:!1}).eq("id",ne);Ae?se("❌ Erro",Ae.message):(z("✅ Pedido Excluído","Pedido de compra excluído com sucesso"),_e())}catch{se("❌ Erro","Erro ao excluir pedido de compra")}},Ce=ne=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ne),ye=ne=>new Date(ne).toLocaleDateString("pt-BR"),fe=ne=>{switch(ne){case"aprovado":return"text-green-700 bg-green-100";case"pendente":return"text-yellow-700 bg-yellow-100";case"cancelado":return"text-red-700 bg-red-100";case"recebido":return"text-blue-700 bg-blue-100";case"conferido":return"text-green-700 bg-green-100";case"parcial":return"text-orange-700 bg-orange-100";case"em_andamento":return"text-blue-700 bg-blue-100";default:return"text-gray-700 bg-gray-100"}},Le=c.reduce((ne,Ae)=>ne+Ae.valor_total,0),Te=c.filter(ne=>ne.status==="pendente").length;c.filter(ne=>ne.status==="aprovado").length;const K=u.length,J=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 border border-blue-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:r.jsx(rr,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-blue-700 text-sm font-medium",children:"Total Compras"})]}),r.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-1",children:Ce(Le)}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Este mês"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 border border-green-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(dc,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Pedidos"})]}),r.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:c.length}),r.jsx("p",{className:"text-green-600 text-sm",children:"Total pedidos"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 rounded-2xl p-6 border border-orange-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center",children:r.jsx(Ds,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-orange-700 text-sm font-medium",children:"Pendentes"})]}),r.jsx("h3",{className:"text-2xl font-bold text-orange-900 mb-1",children:Te}),r.jsx("p",{className:"text-orange-600 text-sm",children:"Aguardando aprovação"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-2xl p-6 border border-purple-200 hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-purple-700 text-sm font-medium",children:"Fornecedores"})]}),r.jsx("h3",{className:"text-2xl font-bold text-purple-900 mb-1",children:K}),r.jsx("p",{className:"text-purple-600 text-sm",children:"Ativos"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"📦 Pedidos por Status"}),r.jsx(Hc,{data:[{name:"Aprovados",value:c.filter(ne=>ne.status==="aprovado").length},{name:"Pendentes",value:c.filter(ne=>ne.status==="pendente").length},{name:"Recebidos",value:c.filter(ne=>ne.status==="recebido").length},{name:"Cancelados",value:c.filter(ne=>ne.status==="cancelado").length}],height:250,showLabels:!0})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"💰 Compras por Categoria"}),r.jsx(Vc,{data:N.map(ne=>({name:ne.nome,value:ne.valor_mes})),height:250,bars:[{dataKey:"value",name:"Valor",color:"#3b82f6"}]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"🏆 Top Fornecedores do Mês"}),r.jsx("div",{className:"space-y-4",children:u.sort((ne,Ae)=>Ae.valor_comprado_mes-ne.valor_comprado_mes).slice(0,5).map((ne,Ae)=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:Ae+1}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ne.nome}),r.jsxs("p",{className:"text-sm text-gray-600",children:[ne.categoria," | ",ne.pedidos_mes," pedidos"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold text-blue-600",children:Ce(ne.valor_comprado_mes)}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-sm text-gray-600",children:ne.avaliacao})]})]})]},ne.id))})]})]}),ve=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:C,onChange:ne=>M(ne.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:D,onChange:ne=>L(ne.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Status"}),r.jsx("option",{value:"pendente",children:"Pendentes"}),r.jsx("option",{value:"aprovado",children:"Aprovados"}),r.jsx("option",{value:"recebido",children:"Recebidos"}),r.jsx("option",{value:"cancelado",children:"Cancelados"})]}),r.jsxs("select",{value:A,onChange:ne=>I(ne.target.value),className:"px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos os Fornecedores"}),u.map(ne=>r.jsx("option",{value:ne.nome,children:ne.nome},ne.id))]}),r.jsxs("button",{onClick:le,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Novo Pedido"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Pedido"}),r.jsx("th",{className:"text-left px-6 py-4 font-semibold text-gray-900",children:"Fornecedor"}),r.jsx("th",{className:"text-right px-6 py-4 font-semibold text-gray-900",children:"Valor"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Data Pedido"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Previsão"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"text-center px-6 py-4 font-semibold text-gray-900",children:"Ações"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:c.filter(ne=>{const Ae=ne.numero.toLowerCase().includes(C.toLowerCase())||ne.fornecedor_nome.toLowerCase().includes(C.toLowerCase()),Fe=D==="todos"||ne.status===D,Ve=A==="todos"||ne.fornecedor_nome===A;return Ae&&Fe&&Ve}).map(ne=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ne.numero}),r.jsx("p",{className:"text-sm text-gray-600",children:ne.condicoes_pagamento})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ne.fornecedor_nome}),r.jsx("p",{className:"text-sm text-gray-600",children:ne.usuario_criacao})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"font-semibold text-gray-900",children:Ce(ne.valor_total)})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-sm text-gray-600",children:ye(ne.data_pedido)})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-sm text-gray-600",children:ye(ne.data_previsao)})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${fe(ne.status)}`,children:ne.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>we(ne),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar",children:r.jsx(Yt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>be(ne),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(ws,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>oe(ne.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:r.jsx(as,{className:"w-4 h-4"})})]})})]},ne.id))})]})})})]}),qe=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestão de Fornecedores"}),r.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-5 h-5"}),"Novo Fornecedor"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(ne=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:ne.nome.split(" ").map(Ae=>Ae[0]).join("").substring(0,2)}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"w-4 h-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:ne.avaliacao})]})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:ne.nome}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:ne.categoria}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(us,{className:"w-4 h-4"}),r.jsx("span",{children:ne.telefone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ds,{className:"w-4 h-4"}),r.jsx("span",{children:ne.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsxs("span",{children:[ne.cidade,"/",ne.estado]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ka,{className:"w-4 h-4"}),r.jsxs("span",{children:["Entrega: ",ne.prazo_entrega_medio," dias"]})]})]}),r.jsx("div",{className:"border-t pt-4 mb-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold text-blue-600",children:Ce(ne.valor_comprado_mes)}),r.jsx("p",{className:"text-xs text-gray-600",children:"Comprado este mês"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold text-green-600",children:ne.pedidos_mes}),r.jsx("p",{className:"text-xs text-gray-600",children:"Pedidos este mês"})]})]})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg text-sm font-medium transition-colors",children:"Contatar"}),r.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:r.jsx(ws,{className:"w-4 h-4"})})]})]},ne.id))})]}),ie=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Relatórios de Compras"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Relatório de Compras",description:"Compras detalhadas por período",icon:dc,color:"blue"},{title:"Performance de Fornecedores",description:"Avaliação e ranking de fornecedores",icon:Pt,color:"green"},{title:"Análise de Custos",description:"Análise de custos e economias",icon:Ar,color:"purple"}].map((ne,Ae)=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 bg-${ne.color}-500 rounded-xl flex items-center justify-center`,children:r.jsx(ne.icon,{className:"w-6 h-6 text-white"})}),r.jsx(ns,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),r.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:ne.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:ne.description}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(ku,{data:{purchases:c,suppliers:u,receipts:p,totalPurchases:Le},type:"purchases"})})]},Ae))})]});return s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Carregando dados de compras..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Módulo de Compras"}),r.jsx("p",{className:"text-gray-600",children:"Gestão completa de pedidos de compra, fornecedores e recebimentos"})]}),n&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:n})]}),o&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:o})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Visão Geral",icon:ls},{id:"pedidos",label:"Pedidos",icon:dc},{id:"fornecedores",label:"Fornecedores",icon:Pt},{id:"relatorios",label:"Relatórios",icon:is}].map(ne=>r.jsxs("button",{onClick:()=>t(ne.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${e===ne.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(ne.icon,{className:"w-5 h-5"}),ne.label]},ne.id))})})}),e==="overview"&&J(),e==="pedidos"&&ve(),e==="fornecedores"&&qe(),e==="relatorios"&&ie()]})})},qY=()=>{const[e,t]=j.useState("overview"),{user:s,hasPermission:a}=ar(),n=Vt();return j.useEffect(()=>{if(!s||!a("admin")){n("/dashboard");return}},[s,a,n]),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Módulo de Produção"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Gestão completa da linha de produção"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Dashboard de Produção"}),r.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento..."})]})]})})},BY=()=>{const{user:e,hasPermission:t}=ar(),s=Vt();return j.useEffect(()=>{if(!e||!t("admin")){s("/dashboard");return}},[e,t,s]),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Módulo de Contabilidade"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Gestão contábil e fiscal completa"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Dashboard Contábil"}),r.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento..."})]})]})})},zY=()=>{const{user:e,hasPermission:t}=ar(),s=Vt();return j.useEffect(()=>{if(!e||!t("admin")){s("/dashboard");return}},[e,t,s]),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"BI & Relatórios"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Business Intelligence e análises avançadas"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Dashboard de BI"}),r.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento..."})]})]})})},UY=()=>{const{user:e,hasPermission:t}=ar(),s=Vt();return j.useEffect(()=>{if(!e||!t("admin")){s("/dashboard");return}},[e,t,s]),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configurações do Sistema"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Configurações gerais e administração"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Painel de Configurações"}),r.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento..."})]})]})})},WY=()=>{const[e,t]=j.useState({password:"",confirmPassword:""}),[s,a]=j.useState(!1),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(""),[u,h]=j.useState({score:0,feedback:[]}),{user:f,activateAdminCreatedAccount:m}=ar(),p=Vt();Qg(),j.useEffect(()=>{if(!f){p("/login");return}if(!f.criado_por_admin||!f.pendente_ativacao){p("/dashboard");return}},[f,p]);const v=C=>{let M=0;const D=[];return C.length>=8?M+=1:D.push("Pelo menos 8 caracteres"),/[a-z]/.test(C)?M+=1:D.push("Pelo menos uma letra minúscula"),/[A-Z]/.test(C)?M+=1:D.push("Pelo menos uma letra maiúscula"),/\d/.test(C)?M+=1:D.push("Pelo menos um número"),/[!@#$%^&*(),.?":{}|<>]/.test(C)?M+=1:D.push("Pelo menos um caractere especial"),{score:M,feedback:D}},g=C=>{const{name:M,value:D}=C.target;t(L=>({...L,[M]:D})),M==="password"&&h(v(D)),c&&d("")},y=C=>C<=2?"bg-red-500":C<=3?"bg-yellow-500":C<=4?"bg-blue-500":"bg-green-500",N=C=>C<=2?"Fraca":C<=3?"Média":C<=4?"Boa":"Forte",S=async C=>{if(C.preventDefault(),d(""),!e.password){d("Senha é obrigatória");return}if(e.password.length<8){d("Senha deve ter pelo menos 8 caracteres");return}if(e.password!==e.confirmPassword){d("Senhas não coincidem");return}if(u.score<3){d("Senha muito fraca. Use uma senha mais segura.");return}l(!0);try{const M=await m(e.password);M.success?p("/dashboard",{state:{message:"Conta ativada com sucesso! Bem-vindo aos Mestres do Café!"}}):d(M.error||"Erro ao ativar conta")}catch(M){console.error("Erro na ativação:",M),d("Erro interno. Tente novamente.")}finally{l(!1)}};return f?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-amber-900 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_70%,rgba(245,158,11,0.1),transparent_70%)]"}),r.jsx("div",{className:"absolute top-20 right-20 w-20 h-20 bg-amber-400/10 rounded-full"}),r.jsx("div",{className:"absolute bottom-20 left-20 w-32 h-32 bg-amber-400/5 rounded-full"}),r.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx(rl,{size:"large",showText:!0,variant:"dark",textColor:"text-white",className:"justify-center"}),r.jsx("p",{className:"text-slate-300 mt-2",children:"Cafés especiais certificados SCA"})]}),r.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-amber-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Is,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Bem-vindo!"}),r.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:"Sua conta foi criada pelo nosso time administrativo. Para começar a usar o sistema, você precisa definir uma senha segura."})]})}),r.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10 mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:f.name}),r.jsxs("div",{className:"flex items-center gap-1 text-slate-300 text-sm",children:[r.jsx(ds,{className:"w-3 h-3"}),f.email]})]})]})}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Ativar Conta"}),r.jsx("p",{className:"text-slate-600",children:"Defina uma senha segura para acessar sua conta"})]}),c&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-2",children:[r.jsx(Zt,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{children:c})]}),r.jsxs("form",{onSubmit:S,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-slate-700 font-medium mb-2",children:"Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:s?"text":"password",id:"password",name:"password",value:e.password,onChange:g,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Digite sua nova senha"}),r.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:s?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]}),e.password&&r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-slate-600",children:"Força da senha:"}),r.jsx("span",{className:`text-sm font-medium ${u.score<=2?"text-red-600":u.score<=3?"text-yellow-600":u.score<=4?"text-blue-600":"text-green-600"}`,children:N(u.score)})]}),r.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${y(u.score)}`,style:{width:`${u.score/5*100}%`}})}),u.feedback.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Para melhorar a senha:"}),r.jsx("ul",{className:"text-xs text-slate-500 space-y-1",children:u.feedback.map((C,M)=>r.jsxs("li",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-1 h-1 bg-slate-400 rounded-full"}),C]},M))})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-slate-700 font-medium mb-2",children:"Confirmar Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:n?"text":"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:g,required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all",placeholder:"Digite a senha novamente"}),r.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:n?r.jsx(ca,{className:"w-5 h-5"}):r.jsx(Yt,{className:"w-5 h-5"})})]}),e.confirmPassword&&e.password!==e.confirmPassword&&r.jsxs("p",{className:"mt-2 text-red-600 text-sm flex items-center gap-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),"As senhas não coincidem"]}),e.confirmPassword&&e.password===e.confirmPassword&&r.jsxs("p",{className:"mt-2 text-green-600 text-sm flex items-center gap-1",children:[r.jsx(dr,{className:"w-4 h-4"}),"Senhas coincidem"]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[r.jsxs("h4",{className:"text-amber-800 font-medium mb-2 flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4"}),"Dicas de Segurança"]}),r.jsxs("ul",{className:"text-amber-700 text-sm space-y-1",children:[r.jsx("li",{children:"• Use pelo menos 8 caracteres"}),r.jsx("li",{children:"• Combine letras maiúsculas e minúsculas"}),r.jsx("li",{children:"• Inclua números e símbolos"}),r.jsx("li",{children:"• Evite informações pessoais óbvias"})]})]}),r.jsx("button",{type:"submit",disabled:o||u.score<3||e.password!==e.confirmPassword,className:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-amber-300 text-white font-semibold py-3 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 flex items-center justify-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ativando conta..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{className:"w-5 h-5"}),"Ativar Conta",r.jsx(ni,{className:"w-5 h-5"})]})})]}),r.jsxs("div",{className:"text-center mt-6 pt-6 border-t border-slate-200",children:[r.jsx("p",{className:"text-slate-600 text-sm",children:"Precisa de ajuda? Entre em contato com nosso suporte"}),r.jsx("p",{className:"text-amber-600 font-medium text-sm mt-1",children:"suporte@mestrescafe.com"})]})]})]})})]}):null},VY=()=>{const e=Qg(),[t,s]=j.useState(""),[a,n]=j.useState(!1),[i,o]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(!1);j.useEffect(()=>{var m;(m=e.state)!=null&&m.error&&o(e.state.error)},[e.state]);const h=m=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m),f=async m=>{if(m.preventDefault(),o(""),c(""),!t.trim()){o("Por favor, insira seu email.");return}if(!h(t)){o("Por favor, insira um email válido.");return}try{u(!0),console.log("📧 Enviando email de redefinição para:",t);const{error:p}=await ge.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/redefinir-senha`});if(p){console.error("❌ Erro ao enviar email:",p),o("Erro ao enviar email. Verifique se o email está correto e tente novamente.");return}console.log("✅ Email enviado com sucesso"),c("Email de redefinição enviado com sucesso! Verifique sua caixa de entrada."),n(!0)}catch(p){console.error("❌ Erro na operação:",p),o("Erro de conexão. Tente novamente.")}finally{u(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center mb-6",children:r.jsx(ds,{className:"h-8 w-8 text-white"})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:a?"Email Enviado!":"Esqueceu sua senha?"}),r.jsx("p",{className:"text-gray-600",children:a?"Verifique sua caixa de entrada e siga as instruções para redefinir sua senha.":"Não se preocupe! Digite seu email e enviaremos um link para redefinir sua senha."})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:[a?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(dr,{className:"h-8 w-8 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Email enviado para"}),r.jsx("p",{className:"text-amber-600 font-medium",children:t})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Próximos passos:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• Verifique sua caixa de entrada"}),r.jsx("li",{children:"• Procure também na pasta de spam"}),r.jsx("li",{children:"• Clique no link recebido"}),r.jsx("li",{children:"• Defina sua nova senha"})]})]})]})}):r.jsx(r.Fragment,{children:r.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:m=>s(m.target.value),className:"appearance-none relative block w-full pl-12 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 focus:z-10 sm:text-sm transition-all duration-200",placeholder:"Digite seu email"})]})]}),i&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(Zt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("span",{className:"text-red-700 text-sm",children:i})]}),l&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx(dr,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),r.jsx("span",{className:"text-green-700 text-sm",children:l})]}),r.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:d?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Enviando..."]}):"Enviar Link de Redefinição"})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs(ct,{to:"/login",className:"inline-flex items-center text-sm text-gray-600 hover:text-amber-600 transition-colors duration-200",children:[r.jsx(ao,{className:"h-4 w-4 mr-1"}),"Voltar para o login"]})})]}),r.jsxs("div",{className:"text-center text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Não tem uma conta? "}),r.jsx(ct,{to:"/registro",className:"font-medium text-amber-600 hover:text-amber-500 transition-colors duration-200",children:"Cadastre-se agora"})]})]})})},HY=()=>{const e=Vt();WC();const[t,s]=j.useState({password:"",confirmPassword:""}),[a,n]=j.useState(!1),[i,o]=j.useState(!1),[l,c]=j.useState({}),[d,u]=j.useState(""),[h,f]=j.useState(0),[m,p]=j.useState(!1),[v,g]=j.useState(!1);j.useEffect(()=>{(async()=>{var $,V;console.log("🚀 INICIANDO CONFIGURAÇÃO DE SESSÃO");const A=window.location.href;console.log("📍 URL COMPLETA:",A);const H=new URL(window.location.href).searchParams,k=H.get("access_token"),P=H.get("refresh_token")||"",O=H.get("type")||"recovery";if(console.log("🔍 EXTRAÇÃO DIRETA DOS PARÂMETROS:",{accessToken:k?`${k.substring(0,20)}...`:"❌ NÃO ENCONTRADO",refreshToken:P?`${P.substring(0,20)}...`:"❌ VAZIO",type:O,allParams:Object.fromEntries(H.entries())}),!k||k.trim()===""){console.error("❌ ACCESS TOKEN NÃO ENCONTRADO"),console.log("📋 Parâmetros disponíveis:",Object.fromEntries(H.entries())),c({submit:"Link inválido ou expirado. Solicite um novo link de redefinição."}),setTimeout(()=>{e("/esqueci-senha",{state:{error:"Link inválido ou expirado. Solicite um novo link de redefinição."}})},3e3);return}try{console.log("🔧 CONFIGURANDO SESSÃO COM TOKEN ENCONTRADO...");const T={access_token:k,refresh_token:P||k};console.log("📋 Dados da sessão:",{access_token:`${k.substring(0,20)}...`,refresh_token:T.refresh_token?`${T.refresh_token.substring(0,20)}...`:"USANDO ACCESS TOKEN"});const{data:F,error:z}=await ge.auth.setSession(T);if(z){console.error("❌ ERRO NA CONFIGURAÇÃO DA SESSÃO:",z),c({submit:"Token inválido ou expirado. Solicite um novo link de redefinição."}),setTimeout(()=>{e("/esqueci-senha",{state:{error:"Token inválido ou expirado. Solicite um novo link de redefinição."}})},3e3);return}console.log("✅ SESSÃO CONFIGURADA COM SUCESSO!"),console.log("👤 Usuário:",((V=($=F.session)==null?void 0:$.user)==null?void 0:V.email)||"NÃO IDENTIFICADO"),p(!0)}catch(T){console.error("💥 ERRO FATAL:",T),c({submit:"Erro de conexão. Tente novamente."}),setTimeout(()=>{e("/esqueci-senha",{state:{error:"Erro de conexão. Tente novamente."}})},3e3)}})()},[e]);const y=L=>{let A=0;return L.length>=8&&(A+=1),/[A-Z]/.test(L)&&(A+=1),/[a-z]/.test(L)&&(A+=1),/[0-9]/.test(L)&&(A+=1),/[^A-Za-z0-9]/.test(L)&&(A+=1),A},N=L=>{const{name:A,value:I}=L.target;s(H=>({...H,[A]:I})),l[A]&&c(H=>({...H,[A]:""})),A==="password"&&f(y(I))},S=()=>{const L={};return t.password?t.password.length<8&&(L.password="Senha deve ter pelo menos 8 caracteres"):L.password="Senha é obrigatória",t.confirmPassword?t.password!==t.confirmPassword&&(L.confirmPassword="Senhas não coincidem"):L.confirmPassword="Confirmação de senha é obrigatória",c(L),Object.keys(L).length===0},C=async L=>{if(L.preventDefault(),u(""),!!S()){if(!m){c({submit:"Sessão não configurada. Recarregue a página."});return}try{g(!0),console.log("🔒 Redefinindo senha...");const{data:A,error:I}=await ge.auth.updateUser({password:t.password});if(I){console.error("❌ Erro ao redefinir senha:",I),c({submit:I.message||"Erro ao redefinir senha. Tente novamente."});return}console.log("✅ Senha redefinida com sucesso:",A),u("Senha redefinida com sucesso!"),setTimeout(()=>{e("/login",{state:{message:"Senha redefinida com sucesso! Faça login com sua nova senha."}})},2e3)}catch(A){console.error("❌ Erro na redefinição:",A),c({submit:"Erro de conexão. Tente novamente."})}finally{g(!1)}}},M=()=>{switch(h){case 0:case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-blue-500";case 4:case 5:return"bg-green-500";default:return"bg-gray-300"}},D=()=>{switch(h){case 0:case 1:return"Muito fraca";case 2:return"Fraca";case 3:return"Média";case 4:return"Forte";case 5:return"Muito forte";default:return""}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center mb-6",children:r.jsx(Is,{className:"h-8 w-8 text-white"})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Redefinir Senha"}),r.jsx("p",{className:"text-gray-600",children:"Digite sua nova senha para acessar sua conta"})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:m?d?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(dr,{className:"h-8 w-8 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Senha redefinida com sucesso!"}),r.jsx("p",{className:"text-gray-600",children:"Você será redirecionado para a página de login em instantes."})]})]})}):r.jsxs("form",{onSubmit:C,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),r.jsx("input",{id:"password",name:"password",type:a?"text":"password",required:!0,value:t.password,onChange:N,className:`appearance-none relative block w-full pl-12 pr-12 py-3 border ${l.password?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 sm:text-sm transition-all duration-200`,placeholder:"Digite sua nova senha"}),r.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?r.jsx(ca,{className:"h-5 w-5"}):r.jsx(Yt,{className:"h-5 w-5"})})]}),t.password&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"flex space-x-1 mb-1",children:[1,2,3,4,5].map(L=>r.jsx("div",{className:`h-2 w-full rounded-full ${L<=h?M():"bg-gray-200"}`},L))}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Força: ",r.jsx("span",{className:"font-medium",children:D()})]})]}),l.password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",required:!0,value:t.confirmPassword,onChange:N,className:`appearance-none relative block w-full pl-12 pr-12 py-3 border ${l.confirmPassword?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 sm:text-sm transition-all duration-200`,placeholder:"Confirme sua nova senha"}),r.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?r.jsx(ca,{className:"h-5 w-5"}):r.jsx(Yt,{className:"h-5 w-5"})})]}),l.confirmPassword&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.confirmPassword})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Dicas para uma senha segura:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• Pelo menos 8 caracteres"}),r.jsx("li",{children:"• Letras maiúsculas e minúsculas"}),r.jsx("li",{children:"• Números e símbolos"}),r.jsx("li",{children:"• Evite informações pessoais"})]})]}),l.submit&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(Zt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("span",{className:"text-red-700 text-sm",children:l.submit})]}),r.jsx("button",{type:"submit",disabled:v||h<3||!m,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:v?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Redefinindo..."]}):"Redefinir Senha"})]}):r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Verificando link de redefinição..."}),r.jsx("p",{className:"text-gray-600",children:"Configurando sua sessão para redefinir a senha."})]})]})})]})})},GY=()=>{const e=Vt(),[t,s]=j.useState(!0),[a,n]=j.useState(null);j.useEffect(()=>{i()},[]);const i=async()=>{try{console.log("🔄 Processando callback de autenticação...");const{data:{session:c},error:d}=await ge.auth.getSession();if(d){console.error("❌ Erro ao obter sessão:",d),n("Erro ao processar autenticação: "+d.message),setTimeout(()=>e("/login"),3e3);return}if(!(c!=null&&c.user)){console.log("❌ Nenhuma sessão encontrada, redirecionando para login..."),e("/login");return}console.log("✅ Sessão obtida:",c.user.email);const u=await o(c.user);if(!u){n("Erro ao criar perfil do usuário"),setTimeout(()=>e("/login"),3e3);return}console.log("👤 Perfil do usuário:",u),l(u)}catch(c){console.error("❌ Erro no callback de autenticação:",c),n("Erro inesperado durante a autenticação"),setTimeout(()=>e("/login"),3e3)}finally{s(!1)}},o=async c=>{var d,u,h;try{console.log("🔍 Buscando perfil do usuário:",c.id);const{data:f,error:m}=await ge.from("users").select("*").eq("id",c.id).single();if(f&&!m)return console.log("✅ Perfil existente encontrado:",f),f;console.log("📝 Criando novo perfil para:",c.email);const p=((d=c.app_metadata)==null?void 0:d.provider)==="google",v=c.user_metadata||{},y=["daniel@mestres-do-cafe.com","admin@mestres-do-cafe.com","danielmelo.dev@gmail.com"].includes((u=c.email)==null?void 0:u.toLowerCase()),N={id:c.id,email:c.email,name:v.name||v.full_name||((h=c.email)==null?void 0:h.split("@")[0])||"Usuário",avatar_url:v.avatar_url||v.picture||null,user_type:"cliente_pf",points:0,level:"Aprendiz do Café",role:y?"admin":"customer",permissions:y?["read","write","admin"]:["read"],provider:p?"google":"email",google_id:p?v.sub:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("📄 Dados do perfil a ser criado:",N);const{data:S,error:C}=await ge.from("users").insert([N]).select().single();return C?(console.error("❌ Erro ao criar perfil:",C),null):(console.log("✅ Novo perfil criado com sucesso:",S),S)}catch(f){return console.error("❌ Erro ao obter/criar perfil:",f),null}},l=c=>{if(console.log("🎯 Redirecionando usuário baseado no role:",c.role),c.role==="admin"||c.role==="super_admin"){console.log("👑 Usuário admin detectado, redirecionando para dashboard administrativo..."),e("/admin/dashboard",{replace:!0});return}console.log("👤 Usuário comum, redirecionando para dashboard..."),e("/dashboard",{replace:!0})};return t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Finalizando Login"}),r.jsx("p",{className:"text-slate-600",children:"Configurando sua conta..."}),r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}):a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Erro na Autenticação"}),r.jsx("p",{className:"text-slate-600 mb-6",children:a}),r.jsx("p",{className:"text-sm text-slate-500",children:"Redirecionando automaticamente..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Login Realizado!"}),r.jsx("p",{className:"text-slate-600",children:"Redirecionando para seu dashboard..."})]})})},KY=()=>r.jsx("div",{className:"min-h-screen bg-[#2B3A42] flex items-center justify-center px-4",children:r.jsxs("div",{className:"text-center max-w-md mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"text-9xl font-bold text-[#C8956D] mb-4",children:"404"}),r.jsx("div",{className:"text-6xl",children:"☕"})]}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Página não encontrada"}),r.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Ops! Parece que esta página não existe ou foi movida. Que tal voltar para o início e explorar nossos cafés especiais?"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs(ct,{to:"/",className:"bg-[#C8956D] text-[#2B3A42] px-6 py-3 rounded-lg font-semibold hover:bg-[#C8956D]/90 transition-colors inline-flex items-center justify-center",children:[r.jsx(UC,{className:"mr-2",size:20}),"Voltar ao Início"]}),r.jsx(ct,{to:"/marketplace",className:"border-2 border-[#C8956D] text-[#C8956D] px-6 py-3 rounded-lg font-semibold hover:bg-[#C8956D] hover:text-[#2B3A42] transition-colors inline-flex items-center justify-center",children:"Ver Marketplace"})]}),r.jsxs("div",{className:"mt-12 p-6 bg-[#1A2328] rounded-lg",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Precisa de ajuda?"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Se você chegou aqui através de um link, entre em contato conosco."}),r.jsxs("div",{className:"text-[#C8956D] text-sm",children:[r.jsx("p",{children:"📞 (55) 99645-8600"}),r.jsx("p",{children:"✉️ contato@mestrescafe.com.br"})]})]})]})}),YY=()=>{var z,se;const{customerId:e}=Zg(),t=Vt(),{user:s,hasPermission:a}=ar(),[n,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState("overview"),[u,h]=j.useState(""),[f,m]=j.useState({type:"call",description:""}),[p,v]=j.useState({title:"",description:"",priority:"medium",due_date:""}),[g,y]=j.useState(!1),[N,S]=j.useState({newPassword:"",confirmPassword:""}),[C,M]=j.useState(!1),[D,L]=j.useState(""),[A,I]=j.useState("");j.useEffect(()=>{if(!s||!a("admin")){t("/admin/crm");return}e&&H()},[e,s,a,t]);const H=async()=>{i(!0);try{const Y=await L8(e);Y.success?l(Y.customer):L(Y.error)}catch{L("Erro ao carregar detalhes do cliente")}finally{i(!1)}},k=async()=>{if(u.trim()){M(!0);try{const Y=await M8(e,u);Y.success?(h(""),H(),I("Nota adicionada com sucesso!"),setTimeout(()=>I(""),3e3)):L(Y.error)}catch{L("Erro ao salvar nota")}finally{M(!1)}}},P=async()=>{if(f.description.trim()){M(!0);try{const Y=await i4(e,f);Y.success?(m({type:"call",description:""}),H(),I("Interação registrada com sucesso!"),setTimeout(()=>I(""),3e3)):L(Y.error)}catch{L("Erro ao registrar interação")}finally{M(!1)}}},O=async()=>{if(N.newPassword!==N.confirmPassword){L("As senhas não coincidem");return}if(N.newPassword.length<6){L("A senha deve ter pelo menos 6 caracteres");return}M(!0);try{const Y=await I8(e,N.newPassword);Y.success?(y(!1),S({newPassword:"",confirmPassword:""}),I("Senha alterada com sucesso!"),setTimeout(()=>I(""),3e3)):L(Y.error)}catch{L("Erro ao alterar senha")}finally{M(!1)}},$=async()=>{if(p.title.trim()){M(!0);try{const Y=await D8(e,p);Y.success?(v({title:"",description:"",priority:"medium",due_date:""}),H(),I("Tarefa criada com sucesso!"),setTimeout(()=>I(""),3e3)):L(Y.error)}catch{L("Erro ao criar tarefa")}finally{M(!1)}}},V=async(Y,_e)=>{M(!0);try{const R=await I1(Y,_e);R.success?(H(),I("Status da tarefa atualizado com sucesso!"),setTimeout(()=>I(""),3e3)):L(R.error)}catch{L("Erro ao atualizar status da tarefa")}finally{M(!1)}},T=async Y=>{if(confirm("Tem certeza que deseja excluir esta tarefa?")){M(!0);try{const _e=await I1(Y,"cancelled");_e.success?(H(),I("Tarefa removida com sucesso!"),setTimeout(()=>I(""),3e3)):L(_e.error)}catch{L("Erro ao remover tarefa")}finally{M(!1)}}};if(n)return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:"Carregando detalhes do cliente..."})]})});if(!o)return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(kr,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Cliente não encontrado"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"O cliente que você está procurando não existe."}),r.jsx("button",{onClick:()=>t("/admin/crm"),className:"bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg",children:"Voltar ao CRM"})]})});const F=[{id:"overview",label:"Visão Geral",icon:kr},{id:"orders",label:"Pedidos",icon:Bt},{id:"interactions",label:"Interações",icon:Zi},{id:"analytics",label:"Analytics",icon:ls},{id:"tasks",label:"Tarefas",icon:dr},{id:"settings",label:"Configurações",icon:b5}];return r.jsx("div",{className:"min-h-screen bg-slate-50 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>t("/admin/crm"),className:"p-2 text-slate-600 hover:text-slate-900 transition-colors",children:r.jsx(ao,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Detalhes do Cliente"}),r.jsx("p",{className:"text-slate-600",children:"Visualização completa e gerenciamento avançado"})]})]}),D&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl flex items-center gap-2",children:[r.jsx(Ji,{className:"w-5 h-5"}),r.jsx("span",{children:D}),r.jsx("button",{onClick:()=>L(""),className:"ml-auto",children:r.jsx(Nr,{className:"w-4 h-4"})})]}),A&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsx("span",{children:A}),r.jsx("button",{onClick:()=>I(""),className:"ml-auto",children:r.jsx(Nr,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 mb-8 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:o.user_type==="cliente_pj"?r.jsx(gn,{className:"text-white w-10 h-10"}):r.jsx(kr,{className:"text-white w-10 h-10"})}),r.jsxs("div",{className:"text-white",children:[r.jsx("h2",{className:"text-2xl font-bold mb-1",children:o.name}),r.jsx("p",{className:"opacity-90 mb-2",children:o.email}),r.jsxs("div",{className:"flex items-center gap-4 text-sm opacity-80",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(dl,{className:"w-3 h-3"}),"Cliente desde ",new Date(o.created_at).toLocaleDateString("pt-BR")]}),o.phone&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(us,{className:"w-3 h-3"}),o.phone]})]})]})]}),r.jsx("div",{className:"text-right text-white",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:o.orders_count||0}),r.jsx("p",{className:"text-sm opacity-80",children:"Pedidos"})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold",children:["R$ ",(o.total_spent||0).toFixed(0)]}),r.jsx("p",{className:"text-sm opacity-80",children:"Total Gasto"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:o.points||0}),r.jsx("p",{className:"text-sm opacity-80",children:"Pontos"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:o.level||"Bronze"}),r.jsx("p",{className:"text-sm opacity-80",children:"Nível"})]})]})})]})}),r.jsx("div",{className:"px-8 py-4 bg-slate-50 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o.is_active?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:o.is_active?"Ativo":"Inativo"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o.user_type==="cliente_pj"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:o.user_type==="cliente_pj"?"Pessoa Jurídica":"Pessoa Física"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o.criado_por_admin?"bg-purple-100 text-purple-700":"bg-cyan-100 text-cyan-700"}`,children:o.criado_por_admin?"Criado pelo Admin":"Auto-cadastro"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-slate-600",children:"Última atividade:"}),r.jsx("span",{className:"text-sm font-medium text-slate-900",children:o.last_login?new Date(o.last_login).toLocaleDateString("pt-BR"):"Nunca"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-200",children:[r.jsx("div",{className:"border-b border-slate-200",children:r.jsx("nav",{className:"flex space-x-8 px-8 overflow-x-auto",children:F.map(Y=>r.jsxs("button",{onClick:()=>d(Y.id),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${c===Y.id?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Y.icon,{className:"w-4 h-4"}),Y.label]},Y.id))})}),r.jsxs("div",{className:"p-8",children:[c==="overview"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Informações Pessoais"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ds,{className:"w-5 h-5 text-slate-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Email"}),r.jsx("p",{className:"font-medium text-slate-900",children:o.email})]})]}),o.phone&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(us,{className:"w-5 h-5 text-slate-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Telefone"}),r.jsx("p",{className:"font-medium text-slate-900",children:o.phone})]})]}),o.cpf_cnpj&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(is,{className:"w-5 h-5 text-slate-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:o.user_type==="cliente_pj"?"CNPJ":"CPF"}),r.jsx("p",{className:"font-medium text-slate-900",children:o.cpf_cnpj})]})]}),o.address&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(hs,{className:"w-5 h-5 text-slate-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Endereço"}),r.jsxs("p",{className:"font-medium text-slate-900",children:[o.address,o.city&&`, ${o.city}`,o.state&&` - ${o.state}`,o.zip_code&&` - ${o.zip_code}`]})]})]}),o.company_name&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(gn,{className:"w-5 h-5 text-slate-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Empresa"}),r.jsx("p",{className:"font-medium text-slate-900",children:o.company_name})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Resumo de Atividade"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-green-50 rounded-2xl p-4 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Bt,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"text-sm text-green-700",children:"Pedidos"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-700",children:o.orders_count||0}),r.jsx("p",{className:"text-xs text-green-600",children:"Total de pedidos"})]}),r.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(rr,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-blue-700",children:"Faturamento"})]}),r.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["R$ ",(o.total_spent||0).toFixed(0)]}),r.jsx("p",{className:"text-xs text-blue-600",children:"Valor total gasto"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Et,{className:"w-5 h-5 text-purple-600"}),r.jsx("span",{className:"text-sm text-purple-700",children:"Pontos"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-700",children:o.points||0}),r.jsx("p",{className:"text-xs text-purple-600",children:"Pontos acumulados"})]}),r.jsxs("div",{className:"bg-amber-50 rounded-2xl p-4 border border-amber-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Dr,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"text-sm text-amber-700",children:"Nível"})]}),r.jsx("p",{className:"text-lg font-bold text-amber-700",children:o.level||"Bronze"}),r.jsx("p",{className:"text-xs text-amber-600",children:"Nível atual"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Notas e Observações"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4",children:[r.jsx("textarea",{value:u,onChange:Y=>h(Y.target.value),placeholder:"Adicionar nova nota sobre o cliente...",rows:3,className:"w-full border border-slate-200 rounded-xl p-3 focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"}),r.jsx("div",{className:"flex justify-end mt-3",children:r.jsxs("button",{onClick:k,disabled:!u.trim()||C,className:"bg-amber-600 hover:bg-amber-700 disabled:bg-slate-300 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[C?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(pi,{className:"w-4 h-4"}),"Salvar Nota"]})})]}),o.notes&&o.notes.length>0&&r.jsx("div",{className:"space-y-3",children:o.notes.map((Y,_e)=>r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[r.jsx("p",{className:"text-slate-700 mb-2",children:Y.content}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[r.jsxs("span",{children:["Por ",Y.admin_name]}),r.jsx("span",{children:new Date(Y.created_at).toLocaleString("pt-BR")})]})]},_e))})]})]})]}),c==="orders"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Histórico de Pedidos"}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[r.jsx(Bt,{className:"w-5 h-5"}),r.jsxs("span",{children:[((z=o.orders)==null?void 0:z.length)||0," pedidos"]})]})]}),o.orders&&o.orders.length>0?r.jsx("div",{className:"space-y-4",children:o.orders.map(Y=>r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-900",children:["Pedido #",Y.id]}),r.jsxs("p",{className:"text-sm text-slate-600",children:[new Date(Y.created_at).toLocaleDateString("pt-BR")," às ",new Date(Y.created_at).toLocaleTimeString("pt-BR")]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["R$ ",Y.total_amount.toFixed(2)]}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Y.status==="delivered"?"bg-green-100 text-green-700":Y.status==="processing"?"bg-blue-100 text-blue-700":Y.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Y.status==="delivered"?"Entregue":Y.status==="processing"?"Processando":Y.status==="pending"?"Pendente":"Cancelado"})]})]}),Y.items&&r.jsx("div",{className:"space-y-2",children:Y.items.map((_e,R)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{children:[_e.quantity,"x ",_e.product_name]}),r.jsxs("span",{children:["R$ ",_e.price.toFixed(2)]})]},R))})]},Y.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Bt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Nenhum pedido encontrado"}),r.jsx("p",{className:"text-slate-500",children:"Este cliente ainda não fez nenhum pedido."})]})]}),c==="interactions"&&r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Histórico de Interações"})}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-4",children:"Registrar Nova Interação"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("select",{value:f.type,onChange:Y=>m(_e=>({..._e,type:Y.target.value})),className:"border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500",children:[r.jsx("option",{value:"call",children:"Ligação"}),r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"meeting",children:"Reunião"}),r.jsx("option",{value:"support",children:"Suporte"}),r.jsx("option",{value:"other",children:"Outro"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx("input",{type:"text",value:f.description,onChange:Y=>m(_e=>({..._e,description:Y.target.value})),placeholder:"Descrição da interação...",className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500"})}),r.jsxs("button",{onClick:P,disabled:!f.description.trim()||C,className:"bg-amber-600 hover:bg-amber-700 disabled:bg-slate-300 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-4 h-4"}),"Registrar"]})]})]}),o.interactions&&o.interactions.length>0?r.jsx("div",{className:"space-y-4",children:o.interactions.map((Y,_e)=>r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.type==="call"?"bg-blue-100 text-blue-700":Y.type==="email"?"bg-green-100 text-green-700":Y.type==="meeting"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:Y.type==="call"?"Ligação":Y.type==="email"?"Email":Y.type==="meeting"?"Reunião":Y.type==="support"?"Suporte":"Outro"}),r.jsx("span",{className:"text-sm text-slate-600",children:new Date(Y.created_at).toLocaleString("pt-BR")})]}),r.jsxs("span",{className:"text-xs text-slate-500",children:["Por ",Y.admin_name]})]}),r.jsx("p",{className:"text-slate-700",children:Y.description})]},_e))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Zi,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Nenhuma interação registrada"}),r.jsx("p",{className:"text-slate-500",children:"Registre a primeira interação com este cliente."})]})]}),c==="analytics"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Analytics do Cliente"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(rr,{className:"w-6 h-6 text-green-600"}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Valor do Cliente"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Lifetime Value"}),r.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["R$ ",(o.total_spent||0).toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Ticket Médio"}),r.jsxs("p",{className:"text-lg font-semibold text-green-700",children:["R$ ",o.orders_count>0?((o.total_spent||0)/o.orders_count).toFixed(2):"0.00"]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(oa,{className:"w-6 h-6 text-blue-600"}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Engajamento"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Frequência de Compra"}),r.jsx("p",{className:"text-lg font-semibold text-blue-700",children:o.orders_count>0?"Regular":"Novo"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Última Compra"}),r.jsx("p",{className:"text-sm text-blue-700",children:o.last_order_date?new Date(o.last_order_date).toLocaleDateString("pt-BR"):"Nunca"})]})]})]}),r.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Et,{className:"w-6 h-6 text-purple-600"}),r.jsx("h4",{className:"font-semibold text-slate-900",children:"Gamificação"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Nível Atual"}),r.jsx("p",{className:"text-lg font-semibold text-purple-700",children:o.level||"Bronze"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Pontos"}),r.jsx("p",{className:"text-lg font-semibold text-purple-700",children:o.points||0})]})]})]})]})]}),c==="tasks"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Tarefas do Cliente"}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[r.jsx(dr,{className:"w-5 h-5"}),r.jsxs("span",{children:[((se=o.tasks)==null?void 0:se.filter(Y=>Y.status==="pending").length)||0," pendentes"]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-4",children:"Nova Tarefa"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsx("input",{type:"text",value:p.title,onChange:Y=>v(_e=>({..._e,title:Y.target.value})),placeholder:"Título da tarefa...",className:"border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500"}),r.jsxs("select",{value:p.priority,onChange:Y=>v(_e=>({..._e,priority:Y.target.value})),className:"border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500",children:[r.jsx("option",{value:"low",children:"Baixa Prioridade"}),r.jsx("option",{value:"medium",children:"Média Prioridade"}),r.jsx("option",{value:"high",children:"Alta Prioridade"}),r.jsx("option",{value:"urgent",children:"Urgente"})]}),r.jsx("input",{type:"date",value:p.due_date,onChange:Y=>v(_e=>({..._e,due_date:Y.target.value})),className:"border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500"}),r.jsxs("button",{onClick:$,disabled:!p.title.trim()||C,className:"bg-amber-600 hover:bg-amber-700 disabled:bg-slate-300 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(gr,{className:"w-4 h-4"}),"Criar Tarefa"]})]}),r.jsx("textarea",{value:p.description,onChange:Y=>v(_e=>({..._e,description:Y.target.value})),placeholder:"Descrição detalhada da tarefa...",rows:2,className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 resize-none"})]}),o.tasks&&o.tasks.length>0?r.jsx("div",{className:"space-y-4",children:o.tasks.map((Y,_e)=>r.jsxs("div",{className:`bg-white rounded-xl p-4 border-2 transition-all ${Y.status==="completed"?"border-green-200 bg-green-50":Y.status==="in_progress"?"border-blue-200 bg-blue-50":Y.priority==="urgent"?"border-red-200 bg-red-50":Y.priority==="high"?"border-orange-200 bg-orange-50":"border-slate-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h5",{className:`font-semibold ${Y.status==="completed"?"text-green-700 line-through":"text-slate-900"}`,children:Y.title}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.priority==="urgent"?"bg-red-100 text-red-700":Y.priority==="high"?"bg-orange-100 text-orange-700":Y.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:Y.priority==="urgent"?"Urgente":Y.priority==="high"?"Alta":Y.priority==="medium"?"Média":"Baixa"}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.status==="completed"?"bg-green-100 text-green-700":Y.status==="in_progress"?"bg-blue-100 text-blue-700":Y.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:Y.status==="completed"?"Concluída":Y.status==="in_progress"?"Em Andamento":Y.status==="cancelled"?"Cancelada":"Pendente"})]}),Y.description&&r.jsx("p",{className:"text-slate-600 text-sm mb-2",children:Y.description}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[r.jsxs("span",{children:["Criada por ",Y.admin_name," em ",new Date(Y.created_at).toLocaleDateString("pt-BR")]}),Y.due_date&&r.jsxs("span",{className:`${new Date(Y.due_date)<new Date&&Y.status!=="completed"?"text-red-600 font-medium":"text-slate-500"}`,children:["Vence em ",new Date(Y.due_date).toLocaleDateString("pt-BR")]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[Y.status!=="completed"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>V(Y.id,"in_progress"),className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"Marcar como em andamento",children:r.jsx(Ds,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>V(Y.id,"completed"),className:"p-1 text-green-600 hover:text-green-800 transition-colors",title:"Marcar como concluída",children:r.jsx(dr,{className:"w-4 h-4"})})]}),r.jsx("button",{onClick:()=>T(Y.id),className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"Excluir tarefa",children:r.jsx(Nr,{className:"w-4 h-4"})})]})]}),Y.status==="completed"&&Y.completed_at&&r.jsxs("div",{className:"text-xs text-green-600 bg-green-100 rounded-lg p-2",children:["✅ Concluída em ",new Date(Y.completed_at).toLocaleString("pt-BR")]})]},_e))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(dr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Nenhuma tarefa criada"}),r.jsx("p",{className:"text-slate-500",children:"Crie a primeira tarefa para este cliente."})]})]}),c==="settings"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Configurações do Cliente"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Gerenciar Senha"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Altere a senha do cliente caso necessário"})]}),r.jsxs("button",{onClick:()=>y(!g),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(Ca,{className:"w-4 h-4"}),"Alterar Senha"]})]}),g&&r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-red-200 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nova Senha"}),r.jsx("input",{type:"password",value:N.newPassword,onChange:Y=>S(_e=>({..._e,newPassword:Y.target.value})),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500",placeholder:"Digite a nova senha..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirmar Senha"}),r.jsx("input",{type:"password",value:N.confirmPassword,onChange:Y=>S(_e=>({..._e,confirmPassword:Y.target.value})),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500",placeholder:"Confirme a nova senha..."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:O,disabled:!N.newPassword||!N.confirmPassword||C,className:"bg-red-600 hover:bg-red-700 disabled:bg-slate-300 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[C?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Ca,{className:"w-4 h-4"}),"Alterar Senha"]}),r.jsx("button",{onClick:()=>{y(!1),S({newPassword:"",confirmPassword:""})},className:"text-slate-600 hover:text-slate-800 px-4 py-2",children:"Cancelar"})]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-4",children:"Status da Conta"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Conta Ativa"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:o.is_active?"Sim":"Não"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Email Verificado"}),r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:"Sim"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-700",children:"Criado por Admin"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o.criado_por_admin?"bg-purple-100 text-purple-700":"bg-cyan-100 text-cyan-700"}`,children:o.criado_por_admin?"Sim":"Não"})]})]})]})]})]})]})]})]})})};function JY(){return r.jsx(QC,{children:r.jsx(sE,{children:r.jsx(nE,{children:r.jsx(aE,{children:r.jsx(VC,{children:r.jsxs("div",{className:"App min-h-screen transition-colors duration-300",style:{backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)"},children:[r.jsx(n8,{}),r.jsx("main",{className:"flex-1",children:r.jsxs(HC,{children:[r.jsx(Nt,{path:"/",element:r.jsx(u8,{})}),r.jsx(Nt,{path:"/login",element:r.jsx(h8,{})}),r.jsx(Nt,{path:"/register",element:r.jsx(m8,{})}),r.jsx(Nt,{path:"/activate/:token",element:r.jsx(WY,{})}),r.jsx(Nt,{path:"/forgot-password",element:r.jsx(VY,{})}),r.jsx(Nt,{path:"/reset-password",element:r.jsx(HY,{})}),r.jsx(Nt,{path:"/auth/callback",element:r.jsx(GY,{})}),r.jsx(Nt,{path:"/marketplace",element:r.jsx(w8,{})}),r.jsx(Nt,{path:"/produto/:id",element:r.jsx(B8,{})}),r.jsx(Nt,{path:"/carrinho",element:r.jsx(z8,{})}),r.jsx(Nt,{path:"/checkout",element:r.jsx(U8,{})}),r.jsx(Nt,{path:"/dashboard",element:r.jsx(W8,{})}),r.jsx(Nt,{path:"/admin",element:r.jsx(R1,{})}),r.jsx(Nt,{path:"/admin/dashboard",element:r.jsx(R1,{})}),r.jsx(Nt,{path:"/admin/crm",element:r.jsx(UT,{})}),r.jsx(Nt,{path:"/admin/customer/:customerId",element:r.jsx(YY,{})}),r.jsx(Nt,{path:"/admin/blog",element:r.jsx(NT,{})}),r.jsx(Nt,{path:"/admin/financeiro",element:r.jsx(AY,{})}),r.jsx(Nt,{path:"/admin/financeiro/relatorios",element:r.jsx(WT,{})}),r.jsx(Nt,{path:"/admin/estoque",element:r.jsx(OY,{})}),r.jsx(Nt,{path:"/admin/estoque-enterprise",element:r.jsx(DY,{})}),r.jsx(Nt,{path:"/admin/rh",element:r.jsx(RY,{})}),r.jsx(Nt,{path:"/admin/vendas",element:r.jsx(FY,{})}),r.jsx(Nt,{path:"/admin/compras",element:r.jsx($Y,{})}),r.jsx(Nt,{path:"/admin/producao",element:r.jsx(qY,{})}),r.jsx(Nt,{path:"/admin/contabilidade",element:r.jsx(BY,{})}),r.jsx(Nt,{path:"/admin/bi",element:r.jsx(zY,{})}),r.jsx(Nt,{path:"/admin/config",element:r.jsx(UY,{})}),r.jsx(Nt,{path:"/admin/analytics",element:r.jsx(VT,{})}),r.jsx(Nt,{path:"/gamificacao",element:r.jsx(dT,{})}),r.jsx(Nt,{path:"/cursos",element:r.jsx(pT,{})}),r.jsx(Nt,{path:"/blog",element:r.jsx(jT,{})}),r.jsx(Nt,{path:"/blog/:slug",element:r.jsx(wT,{})}),r.jsx(Nt,{path:"/forum",element:r.jsx(gT,{})}),r.jsx(Nt,{path:"/contato",element:r.jsx(fT,{})}),r.jsx(Nt,{path:"/sobre",element:r.jsx(mT,{})}),r.jsx(Nt,{path:"/perfil",element:r.jsx(uT,{})}),r.jsx(Nt,{path:"/pedidos",element:r.jsx(hT,{})}),r.jsx(Nt,{path:"/localizacoes",element:r.jsx(xT,{})}),r.jsx(Nt,{path:"*",element:r.jsx(KY,{})})]})}),r.jsx(i8,{})]})})})})})})}XC.createRoot(document.getElementById("root")).render(r.jsx(ri.StrictMode,{children:r.jsx(JY,{})}));export{zt as _};
